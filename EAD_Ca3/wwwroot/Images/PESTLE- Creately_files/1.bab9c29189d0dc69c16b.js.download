(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/amk":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("qonV"),a=n("EM62"),r=["container"],o=function(){function e(e){this.pluginReg=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.manifest._url},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this.pluginReg.burrowMainIframe(this.manifest._url);this.container.nativeElement.appendChild(e)},e.prototype.ngOnDestroy=function(){var e=this.container.nativeElement.firstChild;this.pluginReg.returnMainIframe(this.manifest._url,e)},e.\u0275fac=function(t){return new(t||e)(a.fc(i.a))},e.\u0275cmp=a.Zb({type:e,selectors:[["plugin-panel"]],viewQuery:function(e,t){var n;(1&e&&a.Vc(r,!0),2&e)&&(a.Lc(n=a.uc())&&(t.container=n.first))},inputs:{manifest:"manifest"},decls:2,vars:0,consts:[[1,"plugin-iframe-container"],["container",""]],template:function(e,t){1&e&&a.gc(0,"div",0,1)},styles:[".plugin-iframe-container[_ngcontent-%COMP%], .plugin-iframe-container[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),e}()},"0Gjp":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("19Zn"),a=n("5xGT"),r=n("ZTXN"),o=n("EM62"),c=n("sEIs"),s=n("2kYt"),l=function(e,t){return{collapsed:e,expand:t}};function d(e,t){if(1&e&&(o.wc(),o.lc(0,"svg",7),o.yc(1,"async"),o.yc(2,"async"),o.gc(3,"use",8),o.kc()),2&e){var n=o.xc();o.Cc("ngClass",o.Ic(5,l,o.zc(1,1,n.closed.value),!o.zc(2,3,n.closed.value)))}}function u(e,t){if(1&e&&(o.wc(),o.lc(0,"svg",9),o.gc(1,"use"),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Tb("href",n.iconHref,null,"xlink")}}function p(e,t){if(1&e&&(o.lc(0,"span"),o.cd(1),o.kc()),2&e){var n=o.xc();o.Sb(1),o.dd(n.refChangeCount)}}var h=function(){function e(e,t,n){this.rendered=e,this.state=t,this.router=n,this.isParent=!1,this.isDraggable=!0,this.isVisible=!0,this.closed=new r.a}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indentation",{get:function(){return this.isParent?10*this.indent:20*this.indent},enumerable:!1,configurable:!0}),e.prototype.toggle=function(){this.isClosed=!this.isClosed,this.closed.next(this.isClosed)},e.\u0275fac=function(t){return new(t||e)(o.fc(i.C),o.fc(a.Jb),o.fc(c.d))},e.\u0275cmp=o.Zb({type:e,selectors:[["edata-library-item"]],inputs:{icon:"icon",label:"label",indent:"indent",isParent:"isParent",refChangeCount:"refChangeCount",isDraggable:"isDraggable",isVisible:"isVisible",shapeCounts:"shapeCounts"},outputs:{closed:"closed"},decls:8,vars:10,consts:[[1,"edata-library-item",3,"draggable"],[1,"col-menu-item-heading-inner",3,"click"],[1,"col-menu-item-icon"],["class","nu-icon nu-ic-close-thin",3,"ngClass",4,"ngIf"],["class","nu-icon xmedium-grey",4,"ngIf"],[1,"text-container","fx-ellipsis"],[4,"ngIf"],[1,"nu-icon","nu-ic-close-thin",3,"ngClass"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"],[1,"nu-icon","xmedium-grey"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.lc(1,"div",1),o.tc("click",(function(){return t.toggle()})),o.lc(2,"div",2),o.ad(3,d,4,8,"svg",3),o.kc(),o.kc(),o.ad(4,u,2,1,"svg",4),o.lc(5,"div",5),o.cd(6),o.ad(7,p,2,1,"span",6),o.kc(),o.kc()),2&e&&(o.Xc("display",t.isVisible?"none":"flex")("padding-left",t.indentation+"px"),o.Cc("draggable",t.isDraggable),o.Sb(3),o.Cc("ngIf",t.isParent),o.Sb(1),o.Cc("ngIf",t.icon),o.Sb(1),o.Tb("title",t.label.length>15?t.label:""),o.Sb(1),o.ed("",t.label," "),o.Sb(1),o.Cc("ngIf",t.refChangeCount>0))},directives:[s.t,s.q],pipes:[s.b],styles:[".edata-library-panel-container[_ngcontent-%COMP%]{margin-left:10px}.edata-library-panel-container[_ngcontent-%COMP%]  .panel-heading-container{margin-bottom:0}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item-more-options simple-dropdown-button button svg{width:21px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item{width:198px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item-more-options{display:none;height:30px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item:hover .edata-library-item-more-options.is-open{display:block}.number-container[_ngcontent-%COMP%]{margin-right:10px;padding:5px;background-color:#eceef2}.edata-library-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;margin-top:5px}.edata-library-item[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{flex:1;max-width:140px}.edata-library-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-6px}.edata-library-item[_ngcontent-%COMP%]   .nu-icon.expand[_ngcontent-%COMP%]{transform:rotate(90deg)}.collapsable-edata-library-item[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0}),e}()},"62De":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("EM62"),a=n("C05f"),r=n("5xGT"),o=n("2kYt");function c(e,t){1&e&&i.gc(0,"div",11)}function s(e,t){if(1&e){var n=i.mc();i.lc(0,"div",12),i.lc(1,"div",13),i.cd(2),i.kc(),i.lc(3,"button",14),i.tc("click",(function(){return i.Oc(n),i.xc().buttonClicked("use")})),i.cd(4," Use "),i.kc(),i.kc()}if(2&e){var a=i.xc();i.Sb(2),i.ed(" ",a.name," "),i.Sb(1),i.Tb("data-testid",a.name+"-use-button")}}var l=function(e){return{"background-image":e}},d=function(){function e(){this.isTemplate=!0,this.onButtonClick=new i.t,this.loading=new a.a(!1)}return e.prototype.tileClicked=function(){this.isTemplate||this.loading.next(!0)},e.prototype.buttonClicked=function(e){this.onButtonClick.next(e),this.loading.next(!1);var t=this.trackingInfo.type?this.trackingInfo.type.split("#")[1]:this.trackingInfo.type;r.Lb.track(this.trackingInfo.location+".item.click",{value1Type:"templateId",value1:this.trackingInfo.id,value2Type:"name",value2:this.trackingInfo.name,value3Type:"type",value3:t})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["template-thumbnail"]],inputs:{name:"name",isTemplate:"isTemplate",thumbImg:"thumbImg",trackingInfo:"trackingInfo",isUserPaused:"isUserPaused"},outputs:{onButtonClick:"onButtonClick"},decls:13,vars:15,consts:[[1,"template-thumbnail-container",3,"click"],["class","overlay",4,"ngIf"],[1,"template-thumbnail-inner"],[1,"template-thumbnail-image",3,"ngStyle"],[1,"template-thumbnail-name","fx-ellipsis"],["class","template-thumbnail-overlay fx-center-all",4,"ngIf"],[1,"spinner-container","fx-cover","fx-center-all"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[1,"overlay"],[1,"template-thumbnail-overlay","fx-center-all"],[1,"template-thumbnail-overlay-heading"],[1,"nu-btn-med","secondary",3,"click"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.tc("click",(function(){return t.tileClicked()})),i.yc(1,"async"),i.ad(2,c,1,0,"div",1),i.lc(3,"div",2),i.gc(4,"div",3),i.lc(5,"div",4),i.cd(6),i.kc(),i.ad(7,s,5,2,"div",5),i.kc(),i.lc(8,"div",6),i.lc(9,"div",7),i.gc(10,"div",8),i.gc(11,"div",9),i.gc(12,"div",10),i.kc(),i.kc(),i.kc()),2&e&&(i.Xb("show-loading",i.zc(1,11,t.loading))("template",t.isTemplate)("fx-pointer-events-none",t.isUserPaused),i.Tb("data-testid",t.name),i.Sb(2),i.Cc("ngIf",t.isUserPaused),i.Sb(2),i.Cc("ngStyle",i.Hc(13,l,"url("+t.thumbImg+")")),i.Sb(2),i.ed(" ",t.name," "),i.Sb(1),i.Cc("ngIf",t.isTemplate))},directives:[o.t,o.w],pipes:[o.b],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.template-thumbnail-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;width:195px;height:175px;display:inline-block;position:relative;cursor:pointer;border:1px solid #d3d3e7;box-shadow:0 2px 2px #c3c3de}.template-thumbnail-container[_ngcontent-%COMP%]:hover{color:#ffc648}.template-thumbnail-container[_ngcontent-%COMP%]:hover   .template-thumbnail-overlay[_ngcontent-%COMP%]{display:flex}.template-thumbnail-container.template[_ngcontent-%COMP%]:hover   .template-thumbnail-image[_ngcontent-%COMP%], .template-thumbnail-container.template[_ngcontent-%COMP%]:hover   .template-thumbnail-name[_ngcontent-%COMP%]{filter:blur(5px)}.template-thumbnail-container[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{top:0;display:none;background-color:rgba(0,0,0,.5)}.template-thumbnail-container.show-loading[_ngcontent-%COMP%]{pointer-events:none}.template-thumbnail-container.show-loading[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{display:flex}.template-thumbnail-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none}.template-thumbnail-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.template-thumbnail-image[_ngcontent-%COMP%]{flex:1;background-size:contain;background-repeat:no-repeat;background-position:50%;margin:10px}.template-thumbnail-name[_ngcontent-%COMP%]{height:30px;text-align:center;padding-left:10px;padding-right:10px}.template-thumbnail-overlay[_ngcontent-%COMP%]{display:none;flex-direction:column;background-color:rgba(0,0,0,.5);position:absolute;width:100%;height:100%;padding:10px}.template-thumbnail-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:70px}.template-thumbnail-overlay-heading[_ngcontent-%COMP%]{height:44px;color:#fff;text-align:center;line-height:20px;overflow:hidden}"],changeDetection:0}),e}()},"8EYK":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=[{id:"g-popular",name:"TEMPLATE_PANEL.CAT_POPULAR",categories:[{id:"g-popular-default"}]},{id:"g-brainstorm",name:"TEMPLATE_PANEL.CAT_BRAINSTORM",categories:[{id:"g-brainstorm-default"}]},{id:"g-strategy",name:"TEMPLATE_PANEL.CAT_STRATEGY",categories:[{id:"g-strategy-default"}]},{id:"g-projects",name:"TEMPLATE_PANEL.CAT_PROJECTS",categories:[{id:"g-projects-default"}]},{id:"g-software",name:"TEMPLATE_PANEL.CAT_SOFTWARE",categories:[{id:"g-software-default"}]},{id:"g-it",name:"TEMPLATE_PANEL.CAT_NETWORK",categories:[{id:"g-it-network-default"}]},{id:"g-process",name:"TEMPLATE_PANEL.CAT_PROCESS",categories:[{id:"g-process-default"}]},{id:"g-meetings",name:"TEMPLATE_PANEL.CAT_MEETINGS",categories:[{id:"g-meetings-default"}]},{id:"g-document",name:"TEMPLATE_PANEL.CAT_DOCUMENT",categories:[{id:"g-document-default"}]},{id:"g-sales",name:"TEMPLATE_PANEL.CAT_SALES",categories:[{id:"g-sales-default"}]},{id:"g-edu",name:"TEMPLATE_PANEL.CAT_EDU",categories:[{id:"g-edu-default"}]}],a=n("yQxh"),r=[{id:"g4nxEBiLhaI",name:"Flowchart",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/g4nxEBiLhaI",type:"diagram/def/flowchart.js#Flowchart"},{id:"ddPVp5iSnAW",name:"Mind Map",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ddPVp5iSnAW",type:"diagram/def/mindmap.js#MindMap"},{id:"bWR4c0jH0fI",name:"Org Chart",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/bWR4c0jH0fI",type:"diagram/def/org-chart.js#OrgChart"},{id:"vAnBkdf0iQR",name:"Concept Map",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vAnBkdf0iQR",type:"diagram/def/concept-map.js#ConceptMap"},{id:"vyWUec9kb7U",name:"Infographic",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/vyWUec9kb7U",type:"diagram/def/infographics.js#Infographics"},{id:"QntZ3BLMuEE",name:"UML Class",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/QntZ3BLMuEE",type:"diagram/def/uml-class.js#UMLClass"},{id:"tN3HFAAsYmP",name:"UML Use Case",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/tN3HFAAsYmP",type:"diagram/def/usecase.js#UseCase"},{id:"ijS6B7RhEZr",name:"Database",categories:["g-popular-default"],thumbUrl:"https://neutrino-diagram-svg.s3.amazonaws.com/ijS6B7RhEZr",type:"diagram/def/database.js#Database"}],o=n("nsO7"),c=n("EM62"),s=function(){function e(){this.groups=i,this.templates=a.a,this._featuredTemplates=r}return Object.defineProperty(e.prototype,"allTemplateGroups",{get:function(){return this.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"featuredTemplates",{get:function(){return this._featuredTemplates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allTemplates",{get:function(){return this.templates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allCategoryLessTemplates",{get:function(){return this.allTemplates.filter((function(e){return e.categories.length<=0}))},enumerable:!1,configurable:!0}),e.prototype.getTemplatesByCategory=function(e){return this.allTemplates.filter((function(t){return t.categories.includes(e)}))},e.prototype.getTemplatesByGroupCategory=function(e){var t=this,n=this.groups.find((function(t){return t.id===e}));return n&&n.categories?Object(o.flatten)(n.categories.map((function(e){return t.getTemplatesByCategory(e.id)}))):this.getTemplatesByCategory(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},"8Tlt":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("EM62"),a=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["shape-thumbnail-loader"]],decls:5,vars:0,consts:[[1,"thumbnail-loader-container","white"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 50 40"],["points","12.06 17.32 9.96 17.32 9.96 4.98 29.78 4.98 29.78 17.2 27.68 17.2 27.68 7.08 12.06 7.08 12.06 17.32",2,"fill","#f1f0f0"],["points","44.13 28.92 24.64 28.92 24.64 26.82 40.5 26.82 32.45 12.89 25.72 24.55 23.91 23.5 32.45 8.7 44.13 28.92",2,"fill","#f1f0f0"],["d","M15.78,35a9.91,9.91,0,1,1,9.91-9.91A9.92,9.92,0,0,1,15.78,35Zm0-17.72a7.82,7.82,0,1,0,7.82,7.81A7.81,7.81,0,0,0,15.78,17.3Z",2,"fill","#f1f0f0"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.wc(),i.lc(1,"svg",1),i.gc(2,"polygon",2),i.gc(3,"polygon",3),i.gc(4,"path",4),i.kc(),i.kc())},styles:[".thumbnail-loader-container[_ngcontent-%COMP%]{width:100%;height:40px;text-align:center}"],changeDetection:0}),e}()},"8uPo":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("EM62"),a=n("h1tj"),r=n("19Zn"),o=n("C05f"),c=n("6EBr"),s=n("nsO7"),l=n("5xGT"),d=n("TLy2"),u=n("BwBJ"),p=n("8j5Y"),h=n("X0jn"),f=n("D57K"),g=function(e){function t(t){var n=e.call(this,t)||this;return n._zoom=1,n}return Object(f.e)(t,e),t.prototype.destroy=function(){this.canvas=null,this._eventListeners=null},t.prototype.setupStage=function(){this.snapToPixelEnabled=!0,this.updateCanvasSize()},t.prototype.updateCanvasSize=function(){var e=this.canvas,t=e.width!==e.offsetWidth*window.devicePixelRatio,n=e.height!==e.offsetHeight*window.devicePixelRatio;(t||n)&&(t&&e.offsetWidth>0&&(e.width=e.offsetWidth*window.devicePixelRatio),n&&e.offsetHeight>0&&(e.height=e.offsetHeight*window.devicePixelRatio),this.setCanvasScale(),this.update())},t.prototype.setCanvasScale=function(){this.scaleX=window.devicePixelRatio*this._zoom,this.scaleY=window.devicePixelRatio*this._zoom},t}(a.Stage),m=n("8Tlt"),b=n("2kYt"),v=["canvasElement"],O=function(){function e(e){this.rendered=e,this.isPreview=!1,this.canvasIdPrefix="thumb",this.loading=new o.a(!0),this.focusSubject=new o.a(!1),this.subs=[]}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return this.canvasIdPrefix+"-"+this.defId+"-"+this.version},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.canvas=new g(this.canvasElementref.nativeElement),this.canvas.setupStage(),this.canvas.preventSelection=!1,this.canvas.enableDOMEvents(!1),this.thumbnail=new a.Shape,this.canvas.addChild(this.thumbnail),this.focusSubject.next(this.focus),this.subs.push(this.focusSubject.pipe(Object(d.a)((function(t){return e.draw(t).pipe(Object(u.a)(0),Object(p.a)({complete:function(){e.loading.next(!1)}}))}))).subscribe())},e.prototype.ngOnChanges=function(e){(e.focus&&!e.focus.firstChange||e.defId&&!e.defId.firstChange)&&this.focusSubject.next(this.focus)},e.prototype.ngOnDestroy=function(){for(this.canvas&&this.canvas.destroy();this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.draw=function(e){var t=this;void 0===e&&(e=!1);var n=this.thumbnail.graphics,i=new l.vb(5,5,70,70),a=this.getStyles();return e&&(a.lineColor=c.a.primarySelectionColor),this.isPreview||(a.lineThickness=1.4*a.lineThickness),n.clear(),n.beginStroke(a.lineColor),n.setStrokeStyle(a.lineThickness),n.beginFill(a.fillColor),this.rendered.renderThumbnail(n,this.defId,this.version,i,this.drawCode).pipe(Object(p.a)({complete:function(){n.endFill(),n.endStroke(),t.canvas.update()}}))},e.prototype.getStyles=function(){return this.style||(this.style={}),Object(s.merge)({fillStyle:h.i.Solid,fillColor:c.a.defaultShapeFillColor,fillAlpha:1,lineAlpha:1,lineColor:c.a.defaultShapeThumbnailLineColor,lineThickness:c.a.defaultShapeLineThickness},this.style)},e.\u0275fac=function(t){return new(t||e)(i.fc(r.C))},e.\u0275cmp=i.Zb({type:e,selectors:[["thumbnail-canvas"]],viewQuery:function(e,t){var n;(1&e&&i.hd(v,!0,i.r),2&e)&&(i.Lc(n=i.uc())&&(t.canvasElementref=n.first))},inputs:{defId:"defId",drawCode:"drawCode",version:"version",style:"style",focus:"focus",isPreview:"isPreview",canvasIdPrefix:"canvasIdPrefix"},features:[i.Qb],decls:7,vars:7,consts:[["mouseenter","",1,"thumb-img-container","fx-center-all"],[1,"thumb-img-loader-container","white"],[1,"thumb-img-canvas-container"],[3,"id"],["canvasElement",""]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.yc(1,"async"),i.lc(2,"div",1),i.gc(3,"shape-thumbnail-loader"),i.kc(),i.lc(4,"div",2),i.gc(5,"canvas",3,4),i.kc(),i.kc()),2&e&&(i.Xb("loading",i.zc(1,5,t.loading)),i.Sb(4),i.Xb("preview",t.isPreview),i.Sb(1),i.Dc("id",t.canvasId))},directives:[m.a],pipes:[b.b],styles:[".thumb-img-container[_ngcontent-%COMP%]{position:relative}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-loader-container[_ngcontent-%COMP%]{display:block}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%], .thumb-img-container[_ngcontent-%COMP%]   .thumb-img-canvas-container.preview[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:80px;height:80px}.thumb-img-container[_ngcontent-%COMP%]   .thumb-img-canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:35px;height:35px}.thumb-img-canvas-container[_ngcontent-%COMP%], .thumb-img-loader-container[_ngcontent-%COMP%]{width:100%;height:35px}.thumb-img-canvas-container.preview[_ngcontent-%COMP%]{height:auto}.thumb-img-loader-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:none}"],changeDetection:0}),e}()},"D+VW":function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("19Zn"),a=n("C05f"),r=n("6EBr"),o=n("nsO7"),c=n("5xGT"),s=n("8j5Y"),l=n("X0jn"),d=n("EM62"),u=n("sEIs"),p=n("2kYt"),h=n("lQIu");function f(e,t){1&e&&(d.wc(),d.lc(0,"svg",2),d.gc(1,"use",3),d.kc())}var g=function(){function e(e,t,n){this.rendered=e,this.state=t,this.router=n}return e.prototype.isExternalCount=function(){return this.state.get("CurrentDiagram")!==this.diagramId},e.prototype.handleClick=function(){this.isExternalCount()&&(this.router.navigate(["../",this.diagramId,"edit"]),this.state.set("CurrentDiagram",this.diagramId))},e.\u0275fac=function(t){return new(t||e)(d.fc(i.C),d.fc(c.Jb),d.fc(u.d))},e.\u0275cmp=d.Zb({type:e,selectors:[["edata-library-item-count"]],inputs:{diagramId:"diagramId",count:"count"},decls:3,vars:2,consts:[[1,"number-container",3,"click"],["class","nu-icon-small",4,"ngIf"],[1,"nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-expand-thin"]],template:function(e,t){1&e&&(d.lc(0,"div",0),d.tc("click",(function(){return t.handleClick()})),d.cd(1),d.ad(2,f,2,0,"svg",1),d.kc()),2&e&&(d.Sb(1),d.ed(" ",t.count," "),d.Sb(1),d.Cc("ngIf",t.isExternalCount()))},directives:[p.t],styles:[".edata-library-panel-container[_ngcontent-%COMP%]{margin-left:10px}.edata-library-panel-container[_ngcontent-%COMP%]  .panel-heading-container{margin-bottom:0}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item-more-options simple-dropdown-button button svg{width:21px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item{width:198px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item-more-options{display:none;height:30px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item:hover .edata-library-item-more-options.is-open{display:block}.number-container[_ngcontent-%COMP%]{margin-right:10px;padding:5px;background-color:#eceef2}.edata-library-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;margin-top:5px}.edata-library-item[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{flex:1;max-width:140px}.edata-library-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-6px}.edata-library-item[_ngcontent-%COMP%]   .nu-icon.expand[_ngcontent-%COMP%]{transform:rotate(90deg)}.collapsable-edata-library-item[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0}),e}(),m=n("0Gjp");function b(e,t){if(1&e&&d.gc(0,"edata-library-item-count",6),2&e){var n=d.xc().$implicit;d.Cc("diagramId",n.key)("count",n.value)}}function v(e,t){if(1&e&&(d.lc(0,"div",4),d.ad(1,b,1,2,"edata-library-item-count",5),d.kc()),2&e){var n=t.$implicit;d.Sb(1),d.Cc("ngIf",n.value>0)}}function O(e,t){if(1&e&&d.gc(0,"edata-library-item",7),2&e){var n=t.$implicit;d.Cc("label",n.text.title)("icon",n.icon)("shapeCounts",n.text.shapeCount)("isDraggable",!1)}}var y=function(){function e(e,t,n){this.rendered=e,this.state=t,this.router=n}return e.\u0275fac=function(t){return new(t||e)(d.fc(i.C),d.fc(c.Jb),d.fc(u.d))},e.\u0275cmp=d.Zb({type:e,selectors:[["collapsable-edata-library-item"]],inputs:{iconName:"iconName",label:"label",shapeCounts:"shapeCounts",children:"children"},decls:5,vars:6,consts:[[3,"heading","icon"],["header-content","",4,"ngFor","ngForOf"],["content","",1,"collapsable-edata-library-item"],["id","child.id",3,"label","icon","shapeCounts","isDraggable",4,"ngFor","ngForOf"],["header-content",""],["id","item.id",3,"diagramId","count",4,"ngIf"],["id","item.id",3,"diagramId","count"],["id","child.id",3,"label","icon","shapeCounts","isDraggable"]],template:function(e,t){1&e&&(d.lc(0,"collapsable-panel-item",0),d.ad(1,v,2,1,"div",1),d.yc(2,"keyvalue"),d.lc(3,"div",2),d.ad(4,O,1,4,"edata-library-item",3),d.kc(),d.kc()),2&e&&(d.Cc("heading",t.label)("icon",t.iconName),d.Sb(1),d.Cc("ngForOf",d.zc(2,4,t.shapeCounts)),d.Sb(3),d.Cc("ngForOf",t.children))},directives:[h.b,p.s,p.t,g,m.a],pipes:[p.l],styles:[".edata-library-panel-container[_ngcontent-%COMP%]{margin-left:10px}.edata-library-panel-container[_ngcontent-%COMP%]  .panel-heading-container{margin-bottom:0}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item-more-options simple-dropdown-button button svg{width:21px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item{width:198px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item-more-options{display:none;height:30px}.edata-library-panel-container[_ngcontent-%COMP%]  .edata-library-item:hover .edata-library-item-more-options.is-open{display:block}.number-container[_ngcontent-%COMP%]{margin-right:10px;padding:5px;background-color:#eceef2}.edata-library-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;margin-top:5px}.edata-library-item[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{flex:1;max-width:140px}.edata-library-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-6px}.edata-library-item[_ngcontent-%COMP%]   .nu-icon.expand[_ngcontent-%COMP%]{transform:rotate(90deg)}.collapsable-edata-library-item[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0}),e}();function C(e,t){if(1&e&&(d.wc(),d.lc(0,"svg",7),d.gc(1,"use"),d.kc()),2&e){var n=d.xc();d.Sb(1),d.Tb("href",n.iconHref,null,"xlink")}}function x(e,t){if(1&e&&d.gc(0,"collapsable-edata-library-item",8),2&e){var n=t.$implicit;d.Cc("label",n.text.title)("iconName",n.icon)("shapeCounts",n.text.shapeCount)("children",n.children)}}var P=function(){function e(e,t,n){this.rendered=e,this.state=t,this.router=n,this.isPreview=!1,this.canvasIdPrefix="thumb",this.loading=new a.a(!0),this.focusSubject=new a.a(!1),this.subs=[]}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return this.canvasIdPrefix+"-"+this.defId+"-"+this.version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shapeName",{get:function(){return this.name.split(":")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.name.split(":")[1]},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnChanges=function(e){},e.prototype.ngOnDestroy=function(){for(this.canvas&&this.canvas.destroy();this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.handleClick=function(e){this.state.get("CurrentDiagram")!==e&&(this.router.navigate(["../",e,"edit"]),this.state.set("CurrentDiagram",e))},e.prototype.draw=function(e){var t=this;void 0===e&&(e=!1);var n=this.thumbnail.graphics,i=new c.vb(5,5,70,70),a=this.getStyles();return e&&(a.lineColor=r.a.primarySelectionColor),this.isPreview||(a.lineThickness=1.4*a.lineThickness),n.clear(),n.beginStroke(a.lineColor),n.setStrokeStyle(a.lineThickness),n.beginFill(a.fillColor),this.rendered.renderThumbnail(n,this.defId,this.version,i).pipe(Object(s.a)({complete:function(){n.endFill(),n.endStroke(),t.canvas.update()}}))},e.prototype.getStyles=function(){return this.style||(this.style={}),Object(o.merge)({fillStyle:l.i.Solid,fillColor:r.a.defaultShapeFillColor,fillAlpha:1,lineAlpha:1,lineColor:r.a.defaultShapeThumbnailLineColor,lineThickness:r.a.defaultShapeLineThickness},this.style)},e.\u0275fac=function(t){return new(t||e)(d.fc(i.C),d.fc(c.Jb),d.fc(u.d))},e.\u0275cmp=d.Zb({type:e,selectors:[["thumbnail-text"]],inputs:{shapetype:"shapetype",name:"name",icon:"icon",itemInfo:"itemInfo",focus:"focus",defId:"defId",version:"version",style:"style",isPreview:"isPreview",canvasIdPrefix:"canvasIdPrefix"},features:[d.Qb],decls:11,vars:8,consts:[[1,"thumbnail-text"],[1,"thumbnail-text-header"],["class","nu-icon xmedium-grey",4,"ngIf"],[1,"thumbnail-text-header-names"],[1,"thumb-text-container"],[1,"collapsable-items"],[3,"label","iconName","shapeCounts","children",4,"ngFor","ngForOf"],[1,"nu-icon","xmedium-grey"],[3,"label","iconName","shapeCounts","children"]],template:function(e,t){1&e&&(d.lc(0,"div",0),d.lc(1,"div",1),d.ad(2,C,2,1,"svg",2),d.lc(3,"div",3),d.lc(4,"div",4),d.cd(5),d.kc(),d.lc(6,"div",4),d.lc(7,"label"),d.cd(8),d.kc(),d.kc(),d.kc(),d.kc(),d.lc(9,"div",5),d.ad(10,x,1,4,"collapsable-edata-library-item",6),d.kc(),d.kc()),2&e&&(d.Sb(2),d.Cc("ngIf",t.icon),d.Sb(2),d.Xb("preview",t.isPreview),d.Sb(1),d.ed(" ",t.shapeName," "),d.Sb(1),d.Xb("preview",t.isPreview),d.Sb(2),d.dd(t.className),d.Sb(2),d.Cc("ngForOf",t.itemInfo))},directives:[p.t,p.s,y],styles:[".thumbnail-text[_ngcontent-%COMP%]{padding:10px}.thumbnail-text[_ngcontent-%COMP%]  .panel-heading-container, .thumbnail-text[_ngcontent-%COMP%]  .panel-section{margin-bottom:0}.thumb-number-container[_ngcontent-%COMP%]{margin-right:10px;padding:5px;background-color:#eceef2}.thumb-text-container[_ngcontent-%COMP%]{flex:1;top:50px}.thumbnail-text-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}.thumbnail-text-header-names[_ngcontent-%COMP%]{flex:1}.thumbnail-text-header-names[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#7e7e7e}.nu-icon[_ngcontent-%COMP%]{margin-top:-3px;margin-left:-6px}"],changeDetection:0}),e}()},IOVY:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("D57K"),a=n("PGgW"),r=n("s9Xn"),o=n("nsO7"),c=n("sKtG"),s=n("IGWl"),l=n("aSzn"),d=n("X0jn"),u=n("TLy2"),p=n("YtkY"),h=n("jIqt"),f=n("BwBJ"),g=n("Ohay"),m=n("xVbo"),b=n("0B/R"),v=n("ROBh"),O=n("GoAz"),y=n("flPR"),C=n("EM62"),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toolbarGap=10,t}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarManager.get("shape-text-toolbar")},enumerable:!1,configurable:!0}),t.prototype.listenToChanges=function(){var e=this;return this.duringTextEdit({action:"quickhide"},{action:"quickshow"}).pipe(Object(u.a)((function(t){return e.isShowAction(t.action)?e.state.changes("TextEditorState").pipe(Object(p.a)((function(e){return e.selection&&e.selection.width?{action:"quickshow"}:{action:"quickhide"}}))):Object(v.a)(t)})),Object(u.a)((function(t){return e.isShowAction(t.action)?e.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(h.a)(t)):Object(v.a)(t)})),Object(f.a)(1),Object(g.a)())},t.prototype.positionToolbar=function(){var e=this.state.get("TextEditorState");if(e.selection&&e.selection.width){var t=this.state.get("DiagramZoomLevel"),n=this.state.get("DiagramPan"),i=t/e.zoom,a=n.x-e.pan.x*i,r=n.y-e.pan.y*i,o=e.editorBounds.x*i+a+(e.selection.x+e.selection.width/2)*t,c=e.editorBounds.y*i+r+(e.selection.y-this.toolbarGap)*i;this.toolbar.position({x:o,y:c},"bottomcenter")}return Object(v.a)({})},t.prototype.getToolbarItems=function(){var e=this,t=this.state.get("Selected");return t.length>0?this.getTextToolbarItems(t[0]).pipe(Object(u.a)((function(t){return e.state.changes("TextEditorState").pipe(Object(p.a)((function(e){return e.styles})),Object(p.a)((function(n){return t.map((function(i){return i.data&&(i.data.value=void 0===n[i.data.style]?null:n[i.data.style],e.handleListData(i,n[i.data.style]),e.handleHyperlinkButtons(t,n)),Object(o.cloneDeep)(i)}))})))}))):Object(v.a)([])},t.prototype.handleHyperlinkButtons=function(e,t){var n;return(n="string"==typeof t.link||Object(o.isEqual)({},t.link)?e.findIndex((function(e){return"openHyperlinkEditor"===e.featureId})):e.findIndex((function(e){return"unlinkHyperlink"===e.featureId})))>-1&&e.splice(n,1),e},t.prototype.getTextToolbarItems=function(e){var t=this;return this.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(m.a)((function(e){return!!e})),Object(u.a)((function(e){var n=e.getContextualToolbarItemsForTextEdit();return Object(O.a)(n).pipe(Object(u.a)((function(e){return t.isFeatureEnabled(e.featureId).pipe(Object(p.a)((function(t){return{enabled:t,item:e}})),Object(m.a)((function(e){return e.enabled})),Object(p.a)((function(e){return e.item})))})),Object(b.a)())})))},t.prototype.updateShowMethod=function(e){return e},t.prototype.getUIControlType=function(e){if(!e||e===d.d.BINARY)return s.a;if(e===d.d.OPTION_LIST_COMBO)return c.a;if(e===d.d.OPTION_LIST)return a.a;if(e===d.d.OPTION_IMAGES)return r.a;throw new Error("A contextual toolbar UI control is not available for "+e)},t.prototype.handleListData=function(e,t){if(e.data.data){var n=e.data.data;if(n.forEach((function(e){return e.selected=!1})),!(void 0===t||"object"==typeof t&&Object(o.isEmpty)(t))){var i=n.find((function(e){return""+e.value==""+t}));if(i)i.selected=!0;else{var a=n.find((function(e){return e.custom}));a?(a.id=t,a.label=t,a.buttonLabel=t,a.value=t,a.selected=!0):n.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}}}},t.\u0275fac=function(e){return P(e||t)},t.\u0275prov=C.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(y.a)()],t)}(l.a),P=C.nc(x);Object.defineProperty(x,"name",{value:"ShapeTextToolbarHandler"})},JupZ:function(e,t,n){e.exports=function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=i(n(2));e.exports=a.default},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(9)),r=i(n(3)),o=n(4),c=function(){if("undefined"!=typeof window){var e=100,t=["scroll","resize","load"],n={history:[]},i={offset:{},threshold:0,test:o.inViewport},c=(0,a.default)((function(){n.history.forEach((function(e){n[e].check()}))}),e);t.forEach((function(e){return addEventListener(e,c)})),window.MutationObserver&&addEventListener("DOMContentLoaded",(function(){new MutationObserver(c).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}));var s=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return n.history.indexOf(e)>-1?n[e].elements=t:(n[e]=(0,r.default)(t,i),n.history.push(e)),n[e]}};return s.offset=function(e){if(void 0===e)return i.offset;var t=function(e){return"number"==typeof e};return["top","right","bottom","left"].forEach(t(e)?function(t){return i.offset[t]=e}:function(n){return t(e[n])?i.offset[n]=e[n]:null}),i.offset},s.threshold=function(e){return"number"==typeof e&&e>=0&&e<=1?i.threshold=e:i.threshold},s.test=function(e){return"function"==typeof e?i.test=e:i.test},s.is=function(e){return i.test(e,i)},s.offset(0),s}};t.default=c()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,i){n(this,e),this.options=i,this.elements=t,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return i(e,[{key:"check",value:function(){var e=this;return this.elements.forEach((function(t){var n=e.options.test(t,e.options),i=e.current.indexOf(t),a=i>-1,r=!n&&a;n&&!a&&(e.current.push(t),e.emit("enter",t)),r&&(e.current.splice(i,1),e.emit("exit",t))})),this}},{key:"on",value:function(e,t){return this.handlers[e].push(t),this}},{key:"once",value:function(e,t){return this.singles[e].unshift(t),this}},{key:"emit",value:function(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t);for(var n=this.handlers[e].length;--n>-1;)this.handlers[e][n](t);return this}}]),e}();t.default=function(e,t){return new a(e,t)}},function(e,t){"use strict";function n(e,t){var n=e.getBoundingClientRect(),i=n.top,a=n.right,r=n.bottom,o=n.left,c=n.width,s=n.height,l={t:r,r:window.innerWidth-o,b:window.innerHeight-i,l:a},d={x:t.threshold*c,y:t.threshold*s};return l.t>t.offset.top+d.y&&l.r>t.offset.right+d.x&&l.b>t.offset.bottom+d.y&&l.l>t.offset.left+d.x}Object.defineProperty(t,"__esModule",{value:!0}),t.inViewport=n},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var i=n(5),a="object"==typeof self&&self&&self.Object===Object&&self,r=i||a||Function("return this")();e.exports=r},function(e,t,n){function i(e,t,n){function i(t){var n=v,i=O;return v=O=void 0,S=t,C=e.apply(i,n)}function d(e){return S=e,x=setTimeout(h,t),j?i(e):C}function u(e){var n=t-(e-P);return w?l(n,y-(e-S)):n}function p(e){var n=e-P;return void 0===P||n>=t||n<0||w&&e-S>=y}function h(){var e=r();return p(e)?f(e):void(x=setTimeout(h,u(e)))}function f(e){return x=void 0,k&&v?i(e):(v=O=void 0,C)}function g(){void 0!==x&&clearTimeout(x),S=0,v=P=O=x=void 0}function m(){return void 0===x?C:f(r())}function b(){var e=r(),n=p(e);if(v=arguments,O=this,P=e,n){if(void 0===x)return d(P);if(w)return x=setTimeout(h,t),i(P)}return void 0===x&&(x=setTimeout(h,t)),C}var v,O,y,C,x,P,S=0,j=!1,w=!1,k=!0;if("function"!=typeof e)throw new TypeError(c);return t=o(t)||0,a(n)&&(j=!!n.leading,y=(w="maxWait"in n)?s(o(n.maxWait)||0,t):y,k="trailing"in n?!!n.trailing:k),b.cancel=g,b.flush=m,b}var a=n(1),r=n(8),o=n(10),c="Expected a function",s=Math.max,l=Math.min;e.exports=i},function(e,t,n){var i=n(6),a=function(){return i.Date.now()};e.exports=a},function(e,t,n){function i(e,t,n){var i=!0,c=!0;if("function"!=typeof e)throw new TypeError(o);return r(n)&&(i="leading"in n?!!n.leading:i,c="trailing"in n?!!n.trailing:c),a(e,t,{leading:i,maxWait:t,trailing:c})}var a=n(7),r=n(1),o="Expected a function";e.exports=i},function(e,t){function n(e){return e}e.exports=n}])},PDpc:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("D57K"),a=n("Jzy8"),r=n("W9bu"),o=n("X0jn"),c=n("19Zn"),s=n("SKSx"),l=n("5xGT"),d=n("ZTXN"),u=n("g6G6"),p=n("KTx3"),h=n("6Oco"),f=n("TLy2"),g=n("8j5Y"),m=n("xVbo"),b=n("w1VY"),v=n("QoSw"),O=n("flPR"),y=n("sXdR"),C=n("EM62"),x=function(e){function t(t,n,i,a){var r=e.call(this,n)||this;return r.ll=t,r.state=n,r.linkService=i,r.diagToViewport=a,r._indicators=[],r.addSource=new d.a,r.removeSource=new d.a,r.changeSource=new d.a,r}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return this._indicators},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(f.a)((function(t){return e.removeIndicators(),"edit"===t?e.initForEditor():e.initForViewer()})));this.subs.push(t.subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.initForViewer=function(){var e=this;return Object(u.a)(this.addIndicators().pipe(Object(f.a)((function(){return e.handleClick()}))),this.listenToViewportChanges().pipe(Object(y.lodashThrottle)(300,{leading:!1,trailing:!0}),Object(g.a)((function(){return e.updateIndicators()}))))},t.prototype.initForEditor=function(){var e=this;return Object(u.a)(this.hyperlinkKeyEvent("keydown").pipe(Object(y.lodashThrottle)(300,{leading:!0,trailing:!1}),Object(f.a)((function(){return e.addIndicators()})),Object(f.a)((function(){return e.handleClick()}))),this.hyperlinkKeyEvent("keyup").pipe(Object(g.a)((function(){return e.removeIndicators()}))),this.listenToViewportChanges().pipe(Object(g.a)((function(){return e.removeIndicators()}))))},t.prototype.updateIndicators=function(){var e=this;this._indicators.forEach((function(t){e.positionIndicator(t),e.changeSource.next(t)}))},t.prototype.addIndicators=function(){var e=this;return this.ll.forCurrent(!0).getDiagramOnce().pipe(Object(g.a)((function(t){Object.keys(t.shapes).forEach((function(n){var i=t.shapes[n];i.getTextsWithHyperlinks().forEach((function(t){var n=new l.vb(0,0,t.width,t.height),a=e.getPoint(i,t),r=new s.a(t,a),o=c.G.getPointOnText(n,t.alignX,t.alignY);r.regX=o.x,r.regY=o.y,r.rotation=i.transform?i.transform.angle:0,e.positionIndicator(r),e._indicators.push(r),e.addSource.next(r)}))}))})))},t.prototype.getPoint=function(e,t){var n;if(e.isConnector()){var i=e;n=c.G.getPointOnConnector(i,t)}else{var a=e;n=c.G.getPointOnShape(t.position,a.defaultBounds,a.transform)}return n},t.prototype.handleClick=function(){var e=this;if(this.indicators.length>0){var t=this.indicators.map((function(t){var n=t.children.map((function(t){return Object(p.a)(t,"click").pipe(Object(g.a)((function(){return e.navigate(t)})))}));return u.a.apply(void 0,Object(i.j)(n))}));return u.a.apply(void 0,Object(i.j)(t))}return Object(h.b)()},t.prototype.hyperlinkKeyEvent=function(e){return Object(p.a)(window,e).pipe(Object(m.a)((function(e){return e.keyCode===o.k.Command||e.keyCode===o.k.Control})))},t.prototype.positionIndicator=function(e){e.x=this.diagToViewport.x(e.origin.x),e.y=this.diagToViewport.y(e.origin.y);var t=this.state.get("DiagramZoomLevel");e.scaleX=t,e.scaleY=t},t.prototype.removeIndicators=function(){for(;this._indicators.length>0;)this.removeSource.next(this._indicators.pop())},t.prototype.navigate=function(e){this.linkService.navigate(a.G.fromUrl(e.value))},t.prototype.listenToViewportChanges=function(){return Object(u.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel"))},t.\u0275fac=function(e){return new(e||t)(C.pc(v.a),C.pc(l.Jb),C.pc(r.a),C.pc(b.a))},t.\u0275prov=C.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(O.a)(),Object(i.g)("design:paramtypes",[v.a,l.Jb,r.a,b.a])],t)}(O.b)},Q0Yk:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n("C05f"),a=n("xVbo"),r=n("BwBJ"),o=n("8j5Y"),c=n("5xGT"),s=n("EM62"),l=n("2kYt"),d=n("ys29"),u=n("8uPo"),p=n("D+VW"),h=["popoverOuter"];function f(e,t){if(1&e&&s.gc(0,"thumbnail-image",10),2&e){var n=s.xc().ngIf;s.Cc("url",n.thumbnailUrl)("isPreview",!0)}}function g(e,t){if(1&e&&s.gc(0,"thumbnail-canvas",11),2&e){var n=s.xc().ngIf;s.Wc(n.data.style),s.Cc("defId",n.data.defId)("version",n.data.version)("isPreview",!0)("drawCode",n.data.drawCode)("focus",!1)}}function m(e,t){if(1&e&&s.gc(0,"thumbnail-text",12),2&e){var n=s.xc().ngIf;s.Cc("shapetype",n.data.defId)("name",n.text.title)("itemInfo",n.itemInfo)("isPreview",!0)("focus",!0)}}function b(e,t){if(1&e&&(s.lc(0,"p"),s.cd(1),s.kc()),2&e){var n=s.xc(4);s.Sb(1),s.dd(n.text.title)}}function v(e,t){if(1&e&&(s.lc(0,"p"),s.cd(1),s.kc()),2&e){var n=s.xc(4);s.Sb(1),s.dd(n.text.line1)}}function O(e,t){if(1&e&&(s.lc(0,"p"),s.cd(1),s.kc()),2&e){var n=s.xc(4);s.Sb(1),s.dd(n.text.line2)}}function y(e,t){if(1&e&&(s.lc(0,"p"),s.cd(1),s.kc()),2&e){var n=s.xc(4);s.Sb(1),s.dd(n.text.line3)}}function C(e,t){if(1&e&&(s.lc(0,"p"),s.cd(1),s.kc()),2&e){var n=s.xc(4);s.Sb(1),s.dd(n.text.line4)}}function x(e,t){if(1&e&&(s.lc(0,"div",13),s.ad(1,b,2,1,"p",14),s.gc(2,"p"),s.ad(3,v,2,1,"p",14),s.gc(4,"p"),s.ad(5,O,2,1,"p",14),s.gc(6,"p"),s.ad(7,y,2,1,"p",14),s.gc(8,"p"),s.ad(9,C,2,1,"p",14),s.gc(10,"p"),s.kc()),2&e){var n=s.xc(3);s.Sb(1),s.Cc("ngIf",n.text.title),s.Sb(2),s.Cc("ngIf",n.text.line1),s.Sb(2),s.Cc("ngIf",n.text.line2),s.Sb(2),s.Cc("ngIf",n.text.line3),s.Sb(2),s.Cc("ngIf",n.text.line4)}}function P(e,t){if(1&e&&(s.lc(0,"div",4),s.lc(1,"div",5),s.ad(2,f,1,2,"thumbnail-image",6),s.ad(3,g,1,7,"thumbnail-canvas",7),s.ad(4,m,1,5,"thumbnail-text",8),s.kc(),s.ad(5,x,11,5,"div",9),s.kc()),2&e){var n=t.ngIf,i=s.xc(2);s.Sb(2),s.Cc("ngIf","image"===n.thumbnailType),s.Sb(1),s.Cc("ngIf","canvas"===n.thumbnailType),s.Sb(1),s.Cc("ngIf","text"===n.thumbnailType),s.Sb(1),s.Cc("ngIf",i.text&&"text"!==n.thumbnailType)}}var S=function(e){return{show:e}};function j(e,t){if(1&e&&(s.lc(0,"div",1,2),s.yc(2,"async"),s.ad(3,P,6,4,"div",3),s.yc(4,"async"),s.kc()),2&e){var n=s.xc();s.Vb("left-sidebar-popover-container ",n.popoverCssClass,""),s.Cc("ngClass",s.Hc(9,S,s.zc(2,5,n.showPopover))),s.Sb(3),s.Cc("ngIf",s.zc(4,7,n.libraryItemSubject))}}var w=function(){function e(e){this.state=e,this.showPopover=new i.a(!1),this.preparePopover=new i.a(!1),this.libraryItemSubject=new i.a(null),this.subs=[]}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.preparePopover.pipe(Object(a.a)((function(e){return!!e})),Object(r.a)(0),Object(o.a)((function(t){var n=e.state.get("CurrentLibraryPreview");e.position(n.x,n.y),e.showPopover.next(!0)}))).subscribe(),this.state.changes("CurrentLibraryPreview").subscribe((function(t){t&&Object.keys(t).length>0?(e.libraryItemSubject.next(t.item),e.text={title:t.item.text.title,line1:t.item.text.line1,line2:t.item.text.line2,line3:t.item.text.line3,line4:t.item.text.line4},e.popoverCssClass=t.item.popoverCssClass,e.prepare()):(e.showPopover.next(!1),e.preparePopover.next(!1))})))},e.prototype.prepare=function(){this.preparePopover.next(!0)},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.position=function(e,t){if(this.popoverOuter){var n=this.popoverOuter.nativeElement.getBoundingClientRect();n.height+t>=window.innerHeight?t=window.innerHeight-n.height-60:t<0?t=20:t-=75,this.popoverOuter.nativeElement.style.left=e+"px",this.popoverOuter.nativeElement.style.top=t+"px"}},e.\u0275fac=function(t){return new(t||e)(s.fc(c.Jb))},e.\u0275cmp=s.Zb({type:e,selectors:[["library-preview-popover"]],viewQuery:function(e,t){var n;(1&e&&s.hd(h,!0),2&e)&&(s.Lc(n=s.uc())&&(t.popoverOuter=n.first))},decls:2,vars:3,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["popoverOuter",""],["class","lib-preview-tile-container fx-ellipsis",4,"ngIf"],[1,"lib-preview-tile-container","fx-ellipsis"],[1,"lib-preview-thumbnail","fx-center-all"],["class","shape-thumbnail-image",3,"url","isPreview",4,"ngIf"],["class","shape-thumbnail-image","canvasIdPrefix","thumb-preview",3,"defId","version","style","isPreview","drawCode","focus",4,"ngIf"],["canvasIdPrefix","thumb-preview",3,"shapetype","name","itemInfo","isPreview","focus",4,"ngIf"],["class","lib-preview-text",4,"ngIf"],[1,"shape-thumbnail-image",3,"url","isPreview"],["canvasIdPrefix","thumb-preview",1,"shape-thumbnail-image",3,"defId","version","isPreview","drawCode","focus"],["canvasIdPrefix","thumb-preview",3,"shapetype","name","itemInfo","isPreview","focus"],[1,"lib-preview-text"],[4,"ngIf"]],template:function(e,t){1&e&&(s.ad(0,j,5,11,"div",0),s.yc(1,"async")),2&e&&s.Cc("ngIf",s.zc(1,1,t.preparePopover))},directives:[l.t,l.q,d.a,u.a,p.a],pipes:[l.b],styles:[".left-sidebar-popover-container[_ngcontent-%COMP%]{position:absolute;border:1px solid #d3d3e7;opacity:0;transition:opacity .3s linear;background-color:#fff;z-index:2}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-tile-container[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;min-width:200px;height:auto;min-height:170px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-text-container[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;width:250px;height:300px}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-thumbnail[_ngcontent-%COMP%]{flex:1}.left-sidebar-popover-container[_ngcontent-%COMP%]   .lib-preview-text[_ngcontent-%COMP%]{text-align:center;padding:10px 15px 15px;white-space:normal;line-height:20px}.left-sidebar-popover-container.show[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),e}()},Q4Fx:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return I}));var i,a=n("C05f"),r=n("ROBh"),o=n("YtkY"),c=n("wqq/"),s=n("TLy2"),l=n("xVbo"),d=n("Ohay"),u=n("8j5Y"),p=n("nsO7"),h=n("5xGT"),f=n("NNJu"),g=n("4y1S"),m=n("QoSw"),b=n("ZZOX"),v=n("fqe/"),O=n("onas"),y=n("C5+t"),C=n("yn08"),x=n("X0jn"),P=n("EM62"),S=n("s2Ay"),j=["panelContainer"],w=["expandPanelButton"],k=["panelItem"];!function(e){e.Closed="closed",e.Opening="opening",e.Opened="opened",e.Expanding="expanding",e.Expanded="expanded",e.Shrinking="shrinking",e.Collapsing="collapsing",e.Closing="closing"}(i||(i={}));var I=function(){function e(e,t,n,r,s,l,d,u,h){this.ll=e,this.state=t,this.containerEnv=n,this.translate=r,this.modalController=s,this.userLocator=l,this.authentication=d,this.appNavConfigInterpreter=u,this.permManager=h,this.isUserPaused=new a.a(!1),this.hasEDataPermission=!1,this.showAccountButton=new a.a(!0),this.isSidebarExpanded=new a.a(!1),this.subs=[],this.openedWidth=215,this.expandedWidth=890,this.buttons=new a.a(this.getSidebarButtons()),this.manifests=this.state.changes("EnabledPlugins").pipe(Object(o.a)((function(e){return Object(p.filter)(e,(function(e){return e.panels&&Object(p.some)(e.panels,["position","left"])}))})),Object(c.a)(1)),this.currentState=i.Closed,this.hasEDataPermission=this.permManager.check([x.r.CUSTOM_DATABASES+"|"+x.r.GITHUB_INTEGRATION])}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(s.a)((function(e){return""===e||"start"===e?Object(r.a)(!1):Object(r.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(y.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logoutUrl",{get:function(){return h.m.get("COGNITO_LOGOUT_URL")+"?client_id="+h.m.get("COGNITO_CLIENT_ID")+"&logout_uri="+h.m.get("COGNITO_LOGOUT_REDIRECT_URL")},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.projectId=this.ll.forCurrentObserver(!1).pipe(Object(s.a)((function(e){return e.getDiagramModel().pipe(Object(l.a)((function(e){return Boolean(e&&e.project)})),Object(o.a)((function(e){return"string"==typeof e.project?e.project:e.project.id})))}))),this.listenToShapeSearchResults(),this.listenToCurrentUserChanges(),this.listenToAppNavInterpreter(),this.listenToProjectChanges()},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(d.a)(),Object(u.a)((function(t){return e.isUserPaused.next(t)})))},e.prototype.toggleExpand=function(){this.currentState===i.Opened||this.currentState===i.Closed?this.goToNextState(i.Expanded):this.currentState===i.Expanded&&this.goToNextState(i.Closed)},e.prototype.toggleCloseIfOpenedOrExpaned=function(){this.currentState!==i.Opened&&this.currentState!==i.Expanded||this.goToNextState(i.Closed)},e.prototype.getIcon=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.prototype.getSelectedPanelId=function(){return this.selectedPanelId},e.prototype.toggleDashboard=function(){"plugin"===h.m.get("APP_MODE")||this.state.get("ApplicationIsEmbedded")||this.togglePanel("dashboard")},e.prototype.togglePanel=function(e){this.resetMouseControlState();var t=this.getPanel(e),n=t.isExpandable,i=this.toggleOpen(e,n);this.switchPanel(e),this.isSidebarExpanded.next(t.expandSidebar&&i)},e.prototype.resetMouseControlState=function(){var e=this.state.get("MouseControlState");[C.b.Text,C.b.Connector,C.b.Pen,C.b.Highlighter].includes(e)&&this.state.set("MouseControlState",C.b.Normal)},e.prototype.openTeamPortalOverview=function(){h.Lb.track("left.account.click",{value1Type:"button",value1:"overview"}),this.openTeamPortalWindow(O.b.Overview)},e.prototype.openClassicDiagramImport=function(){h.Lb.track("left.account.click",{value1Type:"button",value1:"classic diagram import"}),this.modalController.show(b.a)},e.prototype.openTeamPortalAccount=function(){h.Lb.track("left.account.click",{value1Type:"button",value1:"my account"}),this.openTeamPortalWindow(O.b.Account)},e.prototype.logout=function(){var e=this;h.Lb.track("left.account.click",{value1Type:"button",value1:"signout"}),this.state.set("LoadingIndicatorState",{main:!0,description:this.translate.instant("LOADING_WINDOWS.LOGOUT")}),delete localStorage.appReloadedForOffline,this.authentication.logOut().subscribe({complete:function(){return e.redirect(e.logoutUrl)}})},e.prototype.getExpandTooltip=function(){return this.currentState===i.Expanded?this.translate.instant("TOOLTIPS.COLLAPSE_PANEL"):this.translate.instant("TOOLTIPS.EXPAND_PANEL")},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.getLogoTooltip=function(){return"plugin"===h.m.get("APP_MODE")?this.translate.instant("TOOLTIPS.BACK_CONFLUENCE"):this.state.get("ApplicationIsEmbedded")?"Creately":this.translate.instant("TOOLTIPS.DASHBOARD")},e.prototype.listenToShapeSearchResults=function(){var e=this;this.subs.push(this.state.changes("ShapeSearchResults").subscribe((function(t){t.results.length>0?(e.showHideLeftSideButton("search",!0),e.state.set("SelectedLeftPanel","search")):e.showHideLeftSideButton("search",!1)})),this.state.changes("SelectedLeftPanel").subscribe((function(t){e.setSelectedPanelId(t)})),this.checkUserPauseStatus().subscribe())},e.prototype.listenToProjectChanges=function(){var e=this;this.subs.push(this.state.changes("CurrentProject").subscribe((function(){e.showHideLeftSideButton("task",e.isTaskVisible()),e.showHideLeftSideButton("edata",e.isEDataVisible())})))},e.prototype.listenToCurrentUserChanges=function(){var e=this;this.userMdl=this.userLocator.getUserData(),this.subs.push(this.userMdl.pipe(Object(l.a)((function(e){return!!e}))).subscribe((function(t){t.status===g.A.DEMO?e.showAccountButton.next(!1):e.showAccountButton.next(!0)})))},e.prototype.setState=function(e){this.currentState=e,this.state.set("LeftSidebarState",e||"")},e.prototype.transitionState=function(e,t){var n,a,r={width:"0",transform:"translateX(-"+this.openedWidth+"px)"},o={width:this.openedWidth+"px",transform:"translateX(0)"},c={width:this.expandedWidth+"px",transform:"translateX(0)"};switch(e){case i.Closed:n=r;break;case i.Opened:n=o;break;case i.Expanded:n=c}switch(t){case i.Closed:a=r;break;case i.Opened:a=o;break;case i.Expanded:a=c}var s=new f.e({from:n,to:a,transitionProperty:"width, transform",duration:300,easing:"ease-in-out"});return s.element=this.panelContainer.nativeElement,s},e.prototype.showHideLeftSideButton=function(e,t){var n=this.buttons.getValue(),i=n.find((function(t){return t.id===e}));i&&i.visible!==t&&(i.visible=t,this.buttons.next(n))},e.prototype.toggleOpen=function(e,t){return this.currentState!==i.Opened&&this.currentState!==i.Expanded||this.selectedPanelId!==e?(t||this.currentState!==i.Closed?!t||this.currentState!==i.Closed&&this.currentState!==i.Opened||this.goToNextState(i.Expanded):this.goToNextState(i.Opened),!0):(this.goToNextState(i.Closed),!1)},e.prototype.switchPanel=function(e){this.state.set("SelectedLeftPanel",e),h.Lb.track("left."+e+".click")},e.prototype.goToNextState=function(e){var t=this;if(this.currentState!==e){var n,a=this.currentState;switch(a){case i.Closed:e===i.Opened?n=i.Opening:e===i.Expanded&&(n=i.Expanding);break;case i.Opened:e===i.Expanded?n=i.Expanding:e===i.Closed&&(n=i.Closing);break;case i.Expanded:e===i.Opened?n=i.Shrinking:e===i.Closed&&(n=i.Collapsing)}n&&this.setState(n),this.subs.push(this.transitionState(a,e).start().pipe(Object(u.a)({complete:function(){return t.setState(e)}})).subscribe())}},e.prototype.setSelectedPanelId=function(e){this.selectedPanelId=e;var t=this.getPanel(e);this.isSidebarExpanded.next(t.expandSidebar),void 0!==t.onOpen&&t.onOpen(),t.isExpandable?this.enableExpand():this.disableExpand()},e.prototype.getPanel=function(e){return this.panelItems.filter((function(t){return t.id===e}))[0]},e.prototype.openTeamPortalWindow=function(e){void 0===e&&(e=O.b.Overview),this.modalController.show(O.c,{inputs:{page:e}})},e.prototype.enableExpand=function(){this.isExpandable=!0,this.currentState!==i.Opened&&this.currentState!==i.Closed||this.goToNextState(i.Expanded),this.subs.push(this.toggleExpandButton().start().subscribe())},e.prototype.disableExpand=function(){this.isExpandable=!1,this.currentState===i.Expanded&&this.goToNextState(i.Opened),this.subs.push(this.toggleExpandButton(!1).start().subscribe())},e.prototype.toggleExpandButton=function(e){void 0===e&&(e=!0);var t={transform:"translateX(25px)"},n={transform:"translateX(-2px)"},i=n,a=t;e||(i=t,a=n);var r=new f.e({from:i,to:a,transitionProperty:"transform",duration:200,easing:"ease-in-out"});return r.element=this.expandPanelButton.nativeElement,r},e.prototype.getSidebarButtons=function(){var e=[{id:"template",icon:"templates",tooltip:"TOOLTIPS.TEMPLATE",name:"LABELS.TEMPLATES",visible:!0,disableWithApp:!0},{id:"shapes",icon:"shapes",tooltip:"TOOLTIPS.SHAPES",name:"LABELS.SHAPES",visible:!0,disableWithApp:!0},{id:"image-import",icon:"image",tooltip:"TOOLTIPS.IMAGE",name:"LABELS.IMAGES",visible:!0,disableWithApp:!0},{id:"search",icon:"search",tooltip:"TOOLTIPS.SEARCH_RESULTS",name:"TOOLTIPS.SEARCH_RESULTS",visible:!1,disableWithApp:!0},{id:"google-search-import",icon:"google",tooltip:"TOOLTIPS.GOOGLE_SEARCH",name:"LABELS.GOOGLE_SEARCH",visible:!0,disableWithApp:!0},{id:"icons",icon:"stickers",tooltip:"TOOLTIPS.ICONS",name:"LABELS.ICONS",visible:!0,disableWithApp:!0}];e.push({id:"task",icon:"tasks",tooltip:"TOOLTIPS.TASKS",name:"TOOLTIPS.TASKS",visible:this.isTaskVisible(),disableWithApp:!0});var t=this.isEDataVisible();return e.push({id:"edata",icon:"data",tooltip:"TOOLTIPS.DATA",name:"TOOLTIPS.DATA",visible:t,disableWithApp:!0}),"plugin"===h.m.get("APP_MODE")||this.state.get("ApplicationIsEmbedded")||e.unshift({id:"folders",icon:"folder-thin",tooltip:"TOOLTIPS.FOLDER",name:"LABELS.FOLDERS",visible:!0,disableWithApp:!1}),e},e.prototype.isTaskVisible=function(){return this.permManager.check([x.r.TASK_MANAGEMENT])&&"home"!==this.state.get("CurrentProject")},e.prototype.isEDataVisible=function(){return this.hasEDataPermission&&"home"!==this.state.get("CurrentProject")},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.listenToAppNavInterpreter=function(){var e=this;this.appNavConfigInterpreter.listenToTag("left-side-bar").pipe(Object(u.a)((function(t){e.state.set("SelectedLeftPanel",t[0]),e.state.set("TemplateCategorySelected",t[1])}))).subscribe()},e.\u0275fac=function(t){return new(t||e)(P.fc(m.a),P.fc(h.Jb),P.fc(h.F),P.fc(S.e),P.fc(h.gb),P.fc(g.x),P.fc(v.a),P.fc(h.o),P.fc(g.o))},e.\u0275dir=P.ac({type:e,viewQuery:function(e,t){var n;(1&e&&(P.Vc(j,!0),P.Vc(w,!0),P.hd(k,!0)),2&e)&&(P.Lc(n=P.uc())&&(t.panelContainer=n.first),P.Lc(n=P.uc())&&(t.expandPanelButton=n.first),P.Lc(n=P.uc())&&(t.panelItems=n))}}),e}()},S0Xf:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var i=n("ZTXN"),a=n("mWib"),r=n("iV8b"),o=n("EM62"),c=n("2kYt"),s=n("D57K"),l=n("Jzy8"),d=n("c7W3"),u=n("5xGT"),p=n("X0jn"),h=n("NNJu"),f=n("C05f"),g=n("ROBh"),m=n("xVbo"),b=n("Ohay"),v=n("TLy2"),O=n("J+dc"),y=n("4e/d"),C=n("8j5Y"),x=n("7ntQ"),P=n("4y1S"),S=n("nsO7"),j=n("JupZ"),w=n("xnGY"),k=n("B/3P"),I=n("P1E4"),_=n("yn08"),E=n("C5+t"),M=n("RTAa"),T=n("sEIs"),D=n("K0+f"),A=n("/ege"),L=n("thzy"),R=n("jHi0"),N=n("s2Ay"),U=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["thumbnail-loader"]],decls:14,vars:0,consts:[[1,"thumbnail-loader-container","white","fx-center-all"],[1,"thumbnail-loader-inner"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24.51 30"],["x","8.15","y","5.71","width","7.91","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","3.72","y","14.88","width","6.24","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","3.2","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","10.31","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","17.2","y","22.61","width","4.38","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x","14.2","y","14.88","width","6.24","height","2.59","rx","1.03","ry","1.03",2,"fill","#f1f0f0"],["x1","12.11","y1","8.27","x2","12.11","y2","12.83",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","6.9 15.24 6.9 12.35 17.32 12.35 17.32 15.33",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","17.32 16.17 17.32 19.81 5.39 19.81 5.39 22.87",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["x1","12.5","y1","22.87","x2","12.5","y2","19.81",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"],["points","19.39 22.87 19.39 19.81 17.04 19.81",2,"fill","none","stroke","#f1f0f0","stroke-miterlimit","10"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.lc(1,"div",1),o.wc(),o.lc(2,"svg",2),o.gc(3,"rect",3),o.gc(4,"rect",4),o.gc(5,"rect",5),o.gc(6,"rect",6),o.gc(7,"rect",7),o.gc(8,"rect",8),o.gc(9,"line",9),o.gc(10,"polyline",10),o.gc(11,"polyline",11),o.gc(12,"line",12),o.gc(13,"polyline",13),o.kc(),o.kc(),o.kc())},styles:[".thumbnail-loader-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:10px;left:0}.thumbnail-loader-inner[_ngcontent-%COMP%]{width:70px;height:75px}"],changeDetection:0}),e}(),B=n("uIWG"),F=["svgImageElement"],H=["dropdown"];function V(e,t){if(1&e&&(o.lc(0,"div",9),o.gc(1,"nu-badge",10),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("badgeText",n.status.label)("bgColor",n.status.bgColor)("textColor",n.status.textColor)}}function G(e,t){1&e&&(o.lc(0,"div",11),o.wc(),o.lc(1,"svg",12),o.gc(2,"use",13),o.kc(),o.vc(),o.lc(3,"span",14),o.lc(4,"p",15),o.cd(5,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.HEADING"),o.kc(),o.lc(6,"p",16),o.cd(7,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.DESCRIPTION"),o.kc(),o.kc(),o.kc())}function Y(e,t){1&e&&o.gc(0,"thumbnail-loader")}function z(e,t){if(1&e&&(o.lc(0,"div",17),o.ad(1,Y,1,0,"thumbnail-loader",18),o.yc(2,"async"),o.gc(3,"div",19,20),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("ngIf",!o.zc(2,1,n.thumbnailSVG))}}function W(e,t){1&e&&(o.lc(0,"div",21),o.gc(1,"img",22),o.kc())}var X=function(e){return{value1Type:"diagramId",value1:e}},J=function(e){return{event:"center.diagram.open.click",data:e}};function K(e,t){if(1&e){var n=o.mc();o.lc(0,"a",26),o.tc("click",(function(){o.Oc(n);var e=o.xc(2);return e.navToSelectedDiagram(e.id)})),o.cd(1),o.kc()}if(2&e){var i=o.xc(2);o.Cc("trackAction",o.Hc(4,J,o.Hc(2,X,i.id))),o.Sb(1),o.ed(" ",i.name," ")}}function Z(e,t){if(1&e){var n=o.mc();o.lc(0,"editable-label",27),o.tc("changedText",(function(e){return o.Oc(n),o.xc(2).renameDiagram(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("value",i.name)("focus",!0)("selectAll",!0)("readonly",!1)}}function q(e,t){if(1&e&&(o.lc(0,"div",23),o.ad(1,K,2,6,"a",24),o.ad(2,Z,1,4,"editable-label",25),o.kc()),2&e){var n=t.ngIf;o.Sb(1),o.Cc("ngIf","inactive"===n),o.Sb(1),o.Cc("ngIf","active"===n)}}function Q(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){return o.Oc(n),o.xc(3).enableRenameMode()})),o.cd(1,"DIAGRAM_FEATURE.RENAME"),o.kc()}}function $(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){return o.Oc(n),o.xc(3).duplicateDiagram()})),o.yc(1,"async"),o.cd(2,"DIAGRAM_FEATURE.DUPLICATE"),o.kc()}if(2&e){var i=o.xc(3);o.Xb("disabled",i.isUserPaused||0===o.zc(1,2,i.appConnectionStatus))}}function ee(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){o.Oc(n);var e=o.xc(3);return e.moveDiagram(e.id)})),o.yc(1,"async"),o.cd(2,"DIAGRAM_FEATURE.MOVE"),o.kc()}if(2&e){var i=o.xc(3);o.Xb("disabled",0===o.zc(1,2,i.appConnectionStatus))}}function te(e,t){if(1&e){var n=o.mc();o.lc(0,"a",37),o.tc("click",(function(){return o.Oc(n),o.xc(3).showDeleteConfimationDialog()})),o.yc(1,"async"),o.cd(2,"DIAGRAM_FEATURE.DELETE"),o.kc()}if(2&e){var i=o.xc(3);o.Xb("disabled",0===o.zc(1,2,i.appConnectionStatus))}}function ne(e,t){if(1&e&&(o.wc(),o.vc(),o.lc(0,"div",34),o.ad(1,Q,2,0,"a",35),o.ad(2,$,3,4,"a",36),o.ad(3,ee,3,4,"a",36),o.yc(4,"async"),o.ad(5,te,3,4,"a",36),o.kc()),2&e){var n=o.xc().ngLet,i=o.xc();o.Sb(1),o.Cc("ngIf",5===n||0===n),o.Sb(1),o.Cc("ngIf",5===n||0===n),o.Sb(1),o.Cc("ngIf",0===n&&o.zc(4,4,i.projectCount)>1),o.Sb(2),o.Cc("ngIf",0===n)}}function ie(e,t){if(1&e&&(o.lc(0,"div",28,29),o.lc(2,"button",30),o.wc(),o.lc(3,"svg",31),o.gc(4,"use",32),o.kc(),o.kc(),o.ad(5,ne,6,6,"div",33),o.kc()),2&e){var n=t.ngLet;o.Sb(2),o.Cc("disabled",5!==n&&0!==n),o.Sb(3),o.Cc("ngIf",5===n||0===n)}}var ae=function(){function e(e,t,n,i,a,r,o,c,s,l,d,u,p,h){this.resourceLoader=e,this.state=t,this.commandService=n,this.modalController=i,this.dialogBoxController=a,this.rolePermService=r,this.router=o,this.random=c,this.logger=s,this.planPermManager=l,this.documentManage=d,this.elementRef=u,this.modelSubManager=p,this.diagramNavigation=h,this.renameMode=new f.a("inactive"),this.showBrokenThumbnail=new f.a(!1),this.enteredToViewport=new f.a(!1),this._thumbnailUrl=new f.a(void 0),j.offset({bottom:-400})}return Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.state.get("CurrentDiagram")===this.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollCheck",{set:function(e){!this.enteredToViewport.value&&j.is(this.elementRef.nativeElement)&&this.enteredToViewport.next(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrl",{set:function(e){this._thumbnailUrl.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrlSub",{get:function(){return this._thumbnailUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(E.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.thumbnailSVG=this._thumbnailUrl.pipe(Object(m.a)((function(e){return e&&e.length>0})),Object(b.a)(),Object(v.a)((function(t){var n=t.split("?")[0];return e.enteredToViewport.pipe(Object(m.a)((function(e){return!!e})),Object(O.a)(1),Object(v.a)((function(){return e.resourceLoader.forceLoad(t,n).pipe(Object(y.a)((function(t){return u.db.warning("Thumbnail loading failed for diagram:",e.id),e.showBrokenThumbnail.next(!0),Object(g.a)(void 0)})),Object(C.a)((function(t){return e.svgImageElement.nativeElement.innerHTML=t})))})))}))),this.roleObs=this.rolePermService.getCurrentUserRole(this.id).pipe(Object(x.a)())},e.prototype.showOptDropdown=function(){this.dropdown&&!this.isUserPaused&&(this.dropdown.nativeElement.style.display="block")},e.prototype.hideOptDropdown=function(){this.dropdown&&!this.isUserPaused&&(this.dropdown.nativeElement.style.display="none")},e.prototype.showDeleteConfimationDialog=function(){var e=this;u.Lb.track("left.folder.document.delete.click",{value1Type:"diagramId",value1:this.id});var t={id:"left-sb-delete-diagram-confirmation",heading:"DIALOG_BOX.DELETE_DIAGRAM.HEADING",description:"DIALOG_BOX.DELETE_DIAGRAM.DESCRIPTION",descriptionParams:{diagramName:this.name},type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.DELETE_DIAGRAM",clickHandler:function(){return e.deleteDiagram()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){u.Lb.track("dialog.diagramdelete.cancel.click",{value1Type:"diagramId",value1:e.id})}}]};this.dialogBoxController.showDialog(t)},e.prototype.duplicateDiagram=function(){u.Lb.track("left.folder.document.duplicate.click",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")});var e=this.random.diagramId();this.logger.debug("Creating diagram from template. Diagram id : "+e+" Template id "+this.id),this.dispatchCreateCommand({id:e,templateId:this.id,type:"duplicate"})},e.prototype.renameDiagram=function(e){u.Lb.track("left.folder.document.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.renameMode.next("inactive"),this.commandService.dispatch(d.a.renameDiagram,this.id,{name:e})},e.prototype.enableRenameMode=function(){u.Lb.track("left.folder.document.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.renameMode.next("active"),this.hideOptDropdown()},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");"start"!==n?n===e?this.state.set("SelectedLeftPanel","shapes"):this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(O.a)(1),Object(C.a)((function(){t.state.get("InterfaceControlState")===_.a.View?t.diagramNavigation.navigateToDiagram(e,"view"):t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe():this.state.get("InterfaceControlState")===_.a.View?this.diagramNavigation.navigateToDiagram(e,"view"):this.diagramNavigation.navigateToDiagram(e,"edit")},e.prototype.deleteDiagram=function(){u.Lb.track("left.folder.document.delete.click",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")});var e=this.getNextAvailDiagram(this.id);this.documentManage.deleteDiagram(this.id,e).subscribe()},e.prototype.moveDiagram=function(e){u.Lb.track("left.folder.document.move.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.modalController.show(l.q,{inputs:{diagramIds:[e],name:this.name,sourceProjectId:this.state.get("FolderPanelSelectedProject")}})},e.prototype.dispatchCreateCommand=function(e){var t,n=this;if(this.planPermManager.check([p.r.DIAGRAM_CREATE]))t=I.a.createDiagram;else if(this.planPermManager.check([p.r.DIAGRAM_CREATE_PRIVATE]))t=I.a.createDiagramPrivate;else{if(!this.planPermManager.check([p.r.DIAGRAM_CREATE_PUBLIC]))throw new P.l("Diagram create permission is denied",Object(s.a)(Object(s.a)({},k.a[p.r.DIAGRAM_CREATE_PUBLIC]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.r.DIAGRAM_CREATE_PUBLIC)}}));t=I.a.createDiagramPublic}var i=this.state.get("FolderPanelSelectedProject");this.logger.debug("Creating diagram with id : "+e.id),this.commandService.dispatch(t,i,e).subscribe({error:function(e){n.handleDiagramPermissionError(e)},complete:function(){n.gotoEditor(e.id)}})},e.prototype.handleDiagramPermissionError=function(e){if(1615===e.code)throw new P.l("Diagram create permission is denied by creator",Object(s.a)(Object(s.a)({},k.a[p.r.DIAGRAM_CREATE]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.r.DIAGRAM_CREATE)}}));if(1611===e.code)throw new P.l("Diagram create permission is denied by creator",Object(s.a)(Object(s.a)({},k.a[p.r.DIAGRAM_CREATE_PUBLIC]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.r.DIAGRAM_CREATE_PUBLIC)}}));if(1612===e.code)throw new P.l("Diagram create permission is denied by creator",Object(s.a)(Object(s.a)({},k.a[p.r.DIAGRAM_CREATE_PRIVATE]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(p.r.DIAGRAM_CREATE_PRIVATE)}}))},e.prototype.gotoEditor=function(e){this.router.navigate(["../",e,"edit"])},e.prototype.getNextAvailDiagram=function(e){var t=this.state.get("FolderPanelSelectedTab");if("diagrams"===t){var n=this.state.get("FolderPanelSelectedProject");n===l.D.SHARED_HOME&&(n=l.D.HOME);var i=Object(S.clone)(this.state.get("ProjectDiagrams")[n]);if(i&&i.length>1)return i.reverse(),this.findNextAvailDiagram(i,e)}else if("recent"===t){var a=this.state.get("RecentDiagrams");if(a&&a.length>1)return this.findNextAvailDiagram(a,e)}return""},e.prototype.findNextAvailDiagram=function(e,t){var n=e.findIndex((function(e){return e.id===t})),i=e[n+1];return i?i.id:e[0].id},e.\u0275fac=function(t){return new(t||e)(o.fc(u.Db),o.fc(u.Jb),o.fc(u.B),o.fc(u.gb),o.fc(h.h),o.fc(l.E),o.fc(T.d),o.fc(u.sb),o.fc(u.db),o.fc(P.o),o.fc(l.n),o.fc(o.r),o.fc(w.d),o.fc(M.a))},e.\u0275cmp=o.Zb({type:e,selectors:[["diagram-thumbnail-item"]],viewQuery:function(e,t){var n;(1&e&&(o.hd(F,!0),o.hd(H,!0)),2&e)&&(o.Lc(n=o.uc())&&(t.svgImageElement=n.first),o.Lc(n=o.uc())&&(t.dropdown=n.first))},inputs:{name:"name",isUserPaused:"isUserPaused",projectCount:"projectCount",id:"id",status:"status",scrollCheck:"scrollCheck",thumbnailUrl:"thumbnailUrl"},features:[o.Rb([u.Db])],decls:13,vars:21,consts:[[1,"thumbnail-item",3,"mouseenter","mouseleave"],["class","thumbnail-item-badge",4,"ngIf"],["tooltip","","placement","bottom","class","thumbnail-item-lock",4,"ngIf"],[3,"trackAction","click"],[1,"diagram-thumbnail-item-img-container"],["class","white fx-center-all",4,"ngIf"],["class","diagram-thumbnail-item-broken-image fx-center-all",4,"ngIf"],["class","thumbnail-item-text fx-center-all",4,"ngIf"],["class","thumbnail-dd",4,"ngLet"],[1,"thumbnail-item-badge"],[3,"badgeText","bgColor","textColor"],["tooltip","","placement","bottom",1,"thumbnail-item-lock"],[1,"nu-icon","nu-ic-lock"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-lock"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"],[1,"white","fx-center-all"],[4,"ngIf"],[1,"diagram-thumbnail-item-img"],["svgImageElement",""],[1,"diagram-thumbnail-item-broken-image","fx-center-all"],["src","./assets/images/broken-image.svg","width","65"],[1,"thumbnail-item-text","fx-center-all"],["class","thumbnail-item-inner dark-blue",3,"trackAction","click",4,"ngIf"],[3,"value","focus","selectAll","readonly","changedText",4,"ngIf"],[1,"thumbnail-item-inner","dark-blue",3,"trackAction","click"],[3,"value","focus","selectAll","readonly","changedText"],[1,"thumbnail-dd"],["dropdown",""],[1,"thumbnail-dd-button","nu-btn-med","secondary",3,"disabled"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["class","thumbnail-dd-item",4,"ngIf"],[1,"thumbnail-dd-item"],["translate","",3,"click",4,"ngIf"],["translate","",3,"disabled","click",4,"ngIf"],["translate","",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.tc("mouseenter",(function(){return t.showOptDropdown()}))("mouseleave",(function(){return t.hideOptDropdown()})),o.ad(1,V,2,3,"div",1),o.ad(2,G,8,0,"div",2),o.lc(3,"a",3),o.tc("click",(function(){return t.navToSelectedDiagram(t.id)})),o.lc(4,"div",4),o.ad(5,z,5,3,"div",5),o.yc(6,"async"),o.ad(7,W,2,0,"div",6),o.yc(8,"async"),o.kc(),o.kc(),o.ad(9,q,3,2,"div",7),o.yc(10,"async"),o.ad(11,ie,6,2,"div",8),o.yc(12,"async"),o.kc()),2&e&&(o.Xb("selected",t.isCurrent),o.Sb(1),o.Cc("ngIf","none"!==t.status.id),o.Sb(1),o.Cc("ngIf",t.isUserPaused),o.Sb(1),o.Cc("trackAction",o.Hc(19,J,o.Hc(17,X,t.id))),o.Sb(2),o.Cc("ngIf",o.zc(6,9,t.thumbnailUrlSub)),o.Sb(2),o.Cc("ngIf",o.zc(8,11,t.showBrokenThumbnail)),o.Sb(2),o.Cc("ngIf",o.zc(10,13,t.renameMode)),o.Sb(2),o.Cc("ngLet",o.zc(12,15,t.roleObs)))},directives:[c.t,D.a,A.a,L.a,R.a,N.a,U,B.a],pipes:[c.b],styles:[".thumbnail-item[_ngcontent-%COMP%]{border:1px solid #d3d3e7;border-radius:4px;cursor:pointer;display:block;color:#04263d;position:relative;margin-bottom:10px;background-color:#fff;box-shadow:0 2px 2px #c3c3de;width:196px}.thumbnail-item.selected[_ngcontent-%COMP%], .thumbnail-item[_ngcontent-%COMP%]:hover{border:1px solid #fff6e1}.thumbnail-item[_ngcontent-%COMP%]:hover   .project-thumbnail-dd[_ngcontent-%COMP%]{display:inline-block}.thumbnail-item-text[_ngcontent-%COMP%]{height:50px;position:relative}.thumbnail-item-lock[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;z-index:1}.thumbnail-item-lock[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#aaa}.thumbnail-dd[_ngcontent-%COMP%]{position:absolute;top:5px;right:0;display:none}.thumbnail-dd[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.thumbnail-dd-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.thumbnail-item-inner[_ngcontent-%COMP%]{max-height:40px;line-height:20px;overflow:hidden;padding-left:30px;padding-right:30px;word-break:break-word}.thumbnail-dd-item[_ngcontent-%COMP%]{width:100px;padding:10px;background:#fff;border:1px solid #dcdcdc;border-radius:4px;display:none;position:absolute;z-index:1;right:0}.thumbnail-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.thumbnail-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.thumbnail-dd[_ngcontent-%COMP%]:hover   .thumbnail-dd-item[_ngcontent-%COMP%]{display:block}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%]{overflow:hidden;text-align:center;height:135px;padding:20px 20px 0}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;position:relative;height:115px}.diagram-thumbnail-item-img-container[_ngcontent-%COMP%]   .diagram-thumbnail-broken[_ngcontent-%COMP%]{margin-left:10px}.diagram-thumbnail-item-img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}.diagram-thumbnail-item-img[_ngcontent-%COMP%]  svg{max-height:115px;max-width:152px}editable-label[_ngcontent-%COMP%]  .editable-label-container{width:140px}.thumbnail-item-badge[_ngcontent-%COMP%]{position:absolute;padding:5px;z-index:10}.thumbnail-item[_ngcontent-%COMP%]:hover   .thumbnail-item-badge[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),e}();function re(e,t){if(1&e&&(o.gc(0,"diagram-thumbnail-item",2),o.yc(1,"async"),o.yc(2,"async")),2&e){var n=t.$implicit,i=o.xc();o.Cc("id",null==n?null:n.id)("name",null==n?null:n.name)("status",i.getDocumentStatus(null==n?null:n.status))("scrollCheck",o.zc(1,7,i.scroll))("thumbnailUrl",null==n?null:n.thumbnailUrl)("projectCount",i.projectCount)("isUserPaused",o.zc(2,9,i.isUserPaused))}}var oe=function(e){return{"diagram-list-area-three-columns":e}},ce=function(){function e(t){this.docStatus=t,this._columnCount=1,this._scroll=new i.a,this.scroll=this._scroll.pipe(Object(a.a)(e.scrollDebounce))}return Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnCount},set:function(e){this._columnCount=e},enumerable:!1,configurable:!0}),e.prototype.getDocumentStatus=function(e){return this.docStatus.getDocumentStatus(e)},e.prototype.getDiagramTrackId=function(e,t){return t.id},e.prototype.onScroll=function(e){this._scroll.next(e)},e.scrollDebounce=400,e.\u0275fac=function(t){return new(t||e)(o.fc(r.a))},e.\u0275cmp=o.Zb({type:e,selectors:[["diagram-list-area"]],inputs:{diagramList:"diagramList",projectCount:"projectCount",isUserPaused:"isUserPaused",columnCount:"columnCount"},decls:3,vars:7,consts:[[1,"diagram-list-area-container","diagram-list-area-grid",3,"ngClass"],[3,"id","name","status","scrollCheck","thumbnailUrl","projectCount","isUserPaused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","name","status","scrollCheck","thumbnailUrl","projectCount","isUserPaused"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.ad(1,re,3,11,"diagram-thumbnail-item",1),o.yc(2,"async"),o.kc()),2&e&&(o.Cc("ngClass",o.Hc(5,oe,3===t.columnCount)),o.Sb(1),o.Cc("ngForOf",o.zc(2,3,t.diagramList))("ngForTrackBy",t.getDiagramTrackId))},directives:[c.q,c.s,ae],pipes:[c.b],styles:[".diagram-list-area-grid.diagram-list-area-three-columns[_ngcontent-%COMP%]{display:inline-grid;grid-template-columns:repeat(auto-fit,minmax(195px,195px));grid-row-gap:16px;grid-column-gap:18px;width:100%}.diagram-list-area-grid.diagram-list-area-three-columns[_ngcontent-%COMP%]   diagram-thumbnail-item[_ngcontent-%COMP%]{width:31%;margin-right:7px;margin-left:7px}"],changeDetection:0}),e}()},Sf0Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("2kYt"),a=n("nIj0"),r=n("ulve"),o=n("3Uyd"),c=n("29Wa"),s=n("bFHC"),l=n("Cd2c"),d=n("s2Ay"),u=n("5xGT"),p=n("NNJu"),h=n("z3tU"),f=n("IOVY"),g=n("A7ZO"),m=n("8EYK"),b=n("aSzn"),v=n("xcrX"),O=n("6qzS"),y=n("qlkn"),C=n("I4UX"),x=n("EM62"),P=function(){function e(){}return e.\u0275mod=x.dc({type:e}),e.\u0275inj=x.cc({factory:function(t){return new(t||e)},providers:[C.a,v.a,h.a,b.a,f.a,O.a,m.a,y.a],imports:[[i.c,a.m,a.C,p.o,g.a,u.S,d.c,r.b,c.e,l.c,o.b,s.b]]}),e}()},WH6p:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("D57K"),a=n("EePP"),r=n("QoSw"),o=n("5xGT"),c=n("h1tj"),s=function(e){function t(){var t=e.call(this)||this,n=new Image;return n.src="data:image/svg+xml;base64,"+btoa('<svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="9.5" cy="9.5" r="9" fill="#E5E5E5" stroke="white"/> <path d="M13.5823 5.49257C13.599 5.82378 11.4179 6.35456 9.25776 6.34607C7.13519 6.34183 4.98338 5.81953 5.0001 5.49257C5.02099 5.12314 7.81625 5 9.29118 5C10.7536 5 13.5614 5.12314 13.5823 5.49257Z" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 11.017C12.6883 11.3737 11.1883 11.845 9.28297 11.845C7.38604 11.845 5.89439 11.3737 5.00024 11.017" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 8.3121C12.6883 8.66879 11.1883 9.14013 9.28297 9.14013C7.38604 9.14013 5.89439 8.66879 5.00024 8.3121" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> <path d="M13.5824 5.49257V13.7473C12.6883 14.104 11.1883 14.5754 9.28297 14.5754C7.38604 14.5754 5.89439 14.104 5.00024 13.7473V5.49257" stroke="#04263D" stroke-width="0.5" stroke-miterlimit="10"/> </svg>'),t.icon=new c.Bitmap(n),t.icon.regX=9.5,t.icon.regY=9.5,t.addChild(t.icon),t}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.update=function(e){this.name=e.id;var t=o.ob.onRect({x:{type:"fixed-end",value:3},y:{type:"fixed-end",value:3}},e.defaultBounds,e.transform);this.icon.x=t.x,this.icon.y=t.y,this.icon.rotation=e.transform.angle||0},t}(c.Container),l=n("Wpmq"),d=n("wx9+"),u=n("ZTXN"),p=n("KTx3"),h=n("g6G6"),f=n("P4Xx"),g=n("TLy2"),m=n("YtkY"),b=n("BwBJ"),v=n("J+dc"),O=n("8j5Y"),y=n("nsO7"),C=n("flPR"),x=n("0jHB"),P=n("EM62"),S=function(e){function t(t,n,i,a,r){var o=e.call(this,a)||this;return o.viewport=t,o.vtod=n,o.ll=i,o.state=a,o.defLocator=r,o.rolloutDelaytime=100,o._indicators={},o.subs=[],o.indicatorSubs={},o.addSource=new u.a,o.removeSource=new u.a,o.changeSource=new u.a,o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(y.values)(this._indicators)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(g.a)((function(){return e.removeIndicators(),e.init()})));this.subs.push(t.subscribe(),this.handleVisibility().subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.subscribeToMouseEnter=function(e){var t=this;return Object(p.a)(e.icon,"rollover").pipe(Object(m.a)((function(n){t.state.set("ShapeDataViewer",{shapeId:e.name,open:!0,src:"icon"})})))},t.prototype.subscribeToMouseLeave=function(e){var t=this;return Object(p.a)(e.icon,"rollout").pipe(Object(b.a)(this.rolloutDelaytime),Object(m.a)((function(e){var n=t.state.get("ShapeDataViewer");n.open&&"icon"===n.src&&t.state.set("ShapeDataViewer",{open:!1,src:"icon"})})))},t.prototype.removeIndicators=function(){var e=this;Object.keys(this._indicators).forEach((function(t){return e.removeIndicator(t)})),this._indicators={}},t.prototype.init=function(){var e=this;return Object(h.a)(this.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getDiagramModel()})),Object(g.a)((function(t){return e.manageIndicators(t)}))),this.viewport.getShapeModels().pipe(Object(g.a)((function(t){return e.updateIndicators(t)}))))},t.prototype.manageIndicators=function(e){var t=this;return this.viewport.getShapeModels().pipe(Object(v.a)(1),Object(O.a)((function(e){var n=Object(y.values)(e);if(n.length>0){var i=n.map((function(e){return t.defLocator.getDefinition(e.defId,e.version)}));Object(f.a)(i).subscribe((function(e){var i=n.filter((function(n,i){return t.shouldShowIndicator(n,e[i])})).map((function(e){return e.id}));t.manageIndicatorsRemove(i),t.manageIndicatorsAdd(i)}))}else t.manageIndicatorsRemove([]),t.manageIndicatorsAdd([])})))},t.prototype.manageIndicatorsAdd=function(e){var t=this;e.forEach((function(e){t._indicators[e]||(t._indicators[e]=new s,t.subs[e]=Object(h.a)(t.subscribeToMouseEnter(t._indicators[e]),t.subscribeToMouseLeave(t._indicators[e])).subscribe(),t.addSource.next(t._indicators[e]))}))},t.prototype.manageIndicatorsRemove=function(e){var t=this;Object.keys(this._indicators).forEach((function(n){e.includes(n)||(t.subs[n].unsubscribe(),delete t.subs[n],t.removeIndicator(n))}))},t.prototype.updateIndicators=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getDiagramOnce()})),Object(O.a)((function(n){Object.keys(t._indicators).forEach((function(n){var i=e[n];if(i){var a=t._indicators[n];a.update(i),t.changeSource.next(a)}}))})))},t.prototype.handleVisibility=function(){var e=this;return Object(h.a)(this.duringInteractions(!0,!1)).pipe(Object(O.a)((function(t){e.indicators.forEach((function(t){t.visible=!0,e.changeSource.next(t)}))})))},t.prototype.removeIndicator=function(e){var t=this._indicators[e];this.removeSource.next(t),delete this._indicators[e]},t.prototype.shouldShowIndicator=function(e,t){return!!e.dataItems&&(!(!e.dataItems[a.a]||this.isContentEmpty(e.dataItems[a.a].value))&&(!(!(t&&e.dataItems[a.a]&&t.data&&t.data[a.a])||Object(y.isEqual)(t.data[a.a].value.ops,e.dataItems[a.a].value.ops))||(!!e.dataSetId||(e.dataItems.description&&this.isContentEmpty(e.dataItems.description.value)?!(t.data&&t.data[a.a]&&Object(y.isEqual)(t.data[a.a].value.ops,e.dataItems[a.a].value.ops)):t&&t.data&&t.data.description?!Object(y.isEqual)(t.data.description.value.ops,e.dataItems.description.value.ops):!!e.dataItems[a.a]))))},t.prototype.isContentEmpty=function(e){return!e.ops||1===e.ops.length&&"\n"===e.ops[0].insert},t.\u0275fac=function(e){return new(e||t)(P.pc(d.a),P.pc(l.a),P.pc(r.a),P.pc(o.Jb),P.pc(x.a))},t.\u0275prov=P.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(C.a)(),Object(i.g)("design:paramtypes",[d.a,l.a,r.a,o.Jb,x.a])],t)}(C.b)},YJWy:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var i=n("D57K"),a=n("5xGT"),r=n("d9KY"),o=n("QoSw"),c=n("nsO7"),s=n("8j5Y"),l=n("7SLS"),d=n("EM62"),u=function(e){function t(t){var n=e.call(this)||this;return n.ll=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dataDefinition",{get:function(){return{type:!1}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(s.a)((function(t){if(e.data&&e.data.type){var n=[];Object(c.map)(t.shapes,(function(t,i){t instanceof e.data.type&&n.push(i)})),e.resultData={shapeIds:n}}else e.resultData={shapeIds:Object(c.keys)(t.shapes)}})),Object(l.a)(!0))},t.\u0275fac=function(e){return new(e||t)(d.pc(o.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[o.a])],t)}(a.b);Object.defineProperty(u,"name",{value:"GetShapeIds"});var p=n("rW6H"),h=n("kXwT"),f=n("19Zn"),g=n("dKf+"),m=n("W0Mc"),b=n("d0OC"),v=function(e){function t(t,n,i){var a=e.call(this,t)||this;return a.ds=t,a.reconnectSvc=n,a.stateSvc=i,a}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{changes:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.resultData={},this.ds.getChangeModel(this.resourceId,this.eventData.eventId,this.eventData.scenario).pipe(Object(s.a)((function(t){var n,a,r=function(n){var i=e.data.changes[n];e.reconnectShape(n,i,t).forEach((function(t){return e.replaceOrPush(i,t)})),e.resultData[n]=i};try{for(var o=Object(i.k)(Object.keys(e.data.changes)),c=o.next();!c.done;c=o.next()){r(c.value)}}catch(s){n={error:s}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}})))},t.prototype.execute=function(){return!0},t.prototype.reconnectShape=function(e,t,n){if(!n.shapes[e])return[];var i=this.getEndpoints(e,t,n),r=this.stateSvc.get("CustomGluePoint");if(!i[0].shapeId){var o=n.shapes[e];o.defId=f.h.defId,o.version=f.h.version}return this.eventData.scenario===a.A.EXECUTE&&(i&&i[0].shapeId&&n.shapes[e].id&&this.createPickedConnection(e,i),r&&r.shapeId&&i.forEach((function(e){1!==i.length&&e.shapeId!==r.shapeId||(e.shapeId=r.shapeId,e.gluepointId=r.gluepoint.id,e.gluepointLocked=!0)}))),this.reconnectSvc.reconnect(e,n,i)},t.prototype.getEndpoints=function(e,t,n){var i=n.shapes[e].getPoints(),a=[i[0].id,Object(c.last)(i).id];return t.filter((function(e){return a.indexOf(e.id)>=0}))},t.prototype.replaceOrPush=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n?e.splice(n,1,t):e.push(t)},t.prototype.createPickedConnection=function(e,t){var n=this.changeModel.shapes[e];if(n.fromEndpoint.shape){var i=n.fromEndpoint.shape.id,r=t[0].shapeId,o=this.changeModel.getPotentialConnections(i,r).filter((function(e){return"connector"===e.connection.type})),c=this.selectConnection(o,n);if(c){var s=a.sb.connectionId(),l=this.selectDefinition(c.definitions,n),d=c.connection;l&&(n.defId=l.defId,n.version=l.version),d&&(n.connectionId=s,this.changeModel.connections[s]=d)}}},t.prototype.selectConnection=function(e,t){return t&&e.find((function(e){return!!e.definitions.find((function(e){return e.defId===t.defId}))}))||e[0]},t.prototype.selectDefinition=function(e,t){return t&&e.find((function(e){return e.defId===t.defId}))||e[0]},t.\u0275fac=function(e){return new(e||t)(d.pc(g.a),d.pc(m.a),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[g.a,m.a,a.Jb])],t)}(b.a);Object.defineProperty(v,"name",{value:"ReconnectConnector"});var O=n("7/v2"),y=n("X0jn"),C=n("5vYS"),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this,t=this.getCurrentEntities(this.data.shapeIds),n=t.map((function(e){return e.bounds})),i=this.alignShapes(n,this.data.isVertical,this.data.alignment);t.forEach((function(t,a){var r=i[a];if("shape"===t.type)e.transformShape(t.shapeId,r);else if("group"===t.type){var o=n[a],c={x:o.x-r.x,y:o.y-r.y};t.shapeIds.forEach((function(n,i){var a=t.shapeBounds[i];r.x=a.x-c.x,r.y=a.y-c.y,e.transformShape(n,r)}))}}))},t.prototype.transformShape=function(e,t){var n=this.changeModel.shapes[e];if(n.type===y.u.Connector)this.setConnectorPosition(n,t);else{var i=n.transform,a=t.x-(n.bounds.x-i.x),r=t.y-(n.bounds.y-i.y);this.setShapePosition(n,{x:a,y:r})}},t.prototype.getCurrentEntities=function(e){var t=this,n=[],a=[],r=[];return e.forEach((function(e){if(t.changeModel.isShapeInGroup([e])){if(!r.includes(e)){var i=t.changeModel.getAllShapesInGroupHierarchy([e]);r=r.concat(i);var o=t.getShapeBounds(i),c=t.getGroupedBounds(o);a.push({type:"group",shapeIds:i,shapeBounds:o,bounds:c})}}else n.push({type:"shape",shapeId:e,bounds:t.getShapeBounds([e])[0]})})),Object(i.j)(n,a)},t.prototype.getGroupedBounds=function(e){var t=a.vb.from(e[0]);return e.forEach((function(e,n){if(n>0){var i=a.vb.from(e);t.absorb(i)}})),t},t.prototype.getShapeBounds=function(e){var t,n,a=[];try{for(var r=Object(i.k)(e),o=r.next();!o.done;o=r.next()){var c=o.value,s=this.changeModel.shapes[c];s.type,y.u.Connector,a.push(s.bounds)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a},t.prototype.alignShapes=function(e,t,n){return t?Object(a.Pb)(e,n):Object(a.Ob)(e,n)},t.prototype.setShapePosition=function(e,t){e.x=t.x,e.y=t.y},t.prototype.setConnectorPosition=function(e,t){var n,a;if(!e.fromEndpoint.shape&&!e.toEndpoint.shape){var r=e.bounds,o=t.x-r.x,s=t.y-r.y,l=e.getPoints(),d=Object(c.cloneDeep)(l);try{for(var u=Object(i.k)(d),p=u.next();!p.done;p=u.next()){var h=p.value;h.x+=o,h.y+=s,h.c1&&(h.c1.x+=o,h.c1.y+=s),h.c2&&(h.c2.x+=o,h.c2.y+=s)}}catch(f){n={error:f}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}e.path=C.a.createPathFromPoints(d)}},t.\u0275fac=function(e){return P(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)()],t)}(b.a),P=d.nc(x);Object.defineProperty(x,"name",{value:"AlignShapes"});var S=n("uWBd"),j=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.pathingSvc=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e,t;try{for(var n=Object(i.k)(this.data.connectorIds),a=n.next();!a.done;a=n.next()){var r=a.value,o=this.changeModel.shapes[r],s=this.pathingSvc.reverse(r,this.changeModel),l=C.a.createPathFromPoints(s);Object(c.isEqual)(o.path,l)||(o.path=l)}}catch(d){e={error:d}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.\u0275fac=function(e){return new(e||t)(d.pc(g.a),d.pc(S.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[g.a,S.a])],t)}(b.a);Object.defineProperty(j,"name",{value:"FlipConnector"});var w=n("Cm/l"),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{shapeId:!0,vectorId:!0,points:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this.changeModel.shapes[this.data.shapeId];if(e&&!e.isLocked){var t=e.defaultBounds,n=e.transform,i=e.vectors[this.data.vectorId];i.id=this.data.vectorId,i.movement=i.movement,i.withInBounds=i.withInBounds;var a=this.data.points.map((function(a,r){a=e.diagramToShapeCordinate(a);var o=i.points[r].x.type,c=i.points[r].y.type;return{x:{type:o,value:"relative"===o?a.x/(t.width*n.scaleX):a.x},y:{type:c,value:"relative"===c?a.y/(t.height*n.scaleY):a.y}}}));i.points=a}},t.\u0275fac=function(e){return I(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)()],t)}(b.a),I=d.nc(k);Object.defineProperty(k,"name",{value:"MoveVisualVector"});var _=n("Wpmq"),E=function(e){function t(t){var n=e.call(this)||this;return n.convert=t,n}return Object(i.e)(t,e),t.prototype.prepareData=function(){if(this.resultData={},this.data.shapes)for(var e in this.resultData.shapes={},this.data.shapes){var t=this.data.shapes[e];this.resultData.shapes[e]=this.convert.matrix(t)}if(this.data.connectors)for(var e in this.resultData.connectors={},this.data.connectors){var n=this.data.connectors[e],i=n.prev,a=n.next;this.resultData.connectors[e]={prev:this.convert.matrix(i),next:this.convert.matrix(a)}}},t.prototype.execute=function(){return!0},t.\u0275fac=function(e){return new(e||t)(d.pc(_.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[_.a])],t)}(a.b);Object.defineProperty(E,"name",{value:"ConvertViewportForTransform"});var M=n("9KTM"),T=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.restriction=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this,t=["ShapeBounds","GridService"];for(var n in this.data.shapes){var i=this.data.shapes[n].toTransform();i.skewX=0,i.skewY=0;var r=this.changeModel.shapes[n];if(!r||r.isLocked)return;var o=this.restriction.shapeTransform(r,i,t);r.x!==o.x&&(r.x=o.x),r.y!==o.y&&(r.y=o.y),r.transformSettings.hScale&&!this.isEqual(r.scaleX,o.scaleX)&&(r.scaleX=o.scaleX,!1!==r.autoResizeWidth&&(r.autoResizeWidth=!1),r.userSetWidth=r.bounds.width),r.transformSettings.vScale&&!this.isEqual(r.scaleY,o.scaleY)&&(r.scaleY=o.scaleY,!1!==r.autoResizeHeight&&(r.autoResizeHeight=!1),r.userSetHeight=r.bounds.height),r.transformSettings.rotate&&r.angle!==o.angle&&(r.angle=o.angle),0!==r.skewX&&(r.skewX=0),0!==r.skewY&&(r.skewY=0)}var s=function(t){var n=l.changeModel.shapes[t];if(!n)return{value:void 0};if(!l.shouldTransform(n))return"continue";var i=l.data.connectors[t],r=i.prev,o=i.next,s=a.fb.fromMatrix(o.appendMatrix(r.invert())),d=n.getPoints().map((function(t){return e.transformPoint(t,s)})),u=C.a.createPathFromPoints(d);Object(c.isEqual)(n.path,u)||(n.path=u)},l=this;for(var n in this.data.connectors){var d=s(n);if("object"==typeof d)return d.value}},t.prototype.isEqual=function(e,t){return parseFloat(e.toFixed(8))===parseFloat(t.toFixed(8))},t.prototype.shouldTransform=function(e){var t=e.getPoints(),n=t[0],i=t[t.length-1];return!!(!n.shapeId||this.data.shapes&&this.data.shapes[n.shapeId])&&!!(!i.shapeId||this.data.shapes&&this.data.shapes[i.shapeId])},t.prototype.transformPoint=function(e,t){var n=Object(c.cloneDeep)(e);return t.transformPoint(n.x,n.y,n),n.c1&&t.transformPoint(n.c1.x,n.c1.y,n.c1),n.c2&&t.transformPoint(n.c2.x,n.c2.y,n.c2),n.bumps=[],n},t.\u0275fac=function(e){return new(e||t)(d.pc(g.a),d.pc(M.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[g.a,M.a])],t)}(b.a);Object.defineProperty(T,"name",{value:"TransformShapes"});var D=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.state=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){this.addShapesToGroup(this.getShapeIds())},t.prototype.addShapesToGroup=function(e){var t=this;if(!this.changeModel.isShapeInGroup(e)){var n=[],i=[];e.forEach((function(e){if(t.changeModel.isShapeInGroup([e])){var a=t.changeModel.getGroupHierarchy(e);i.push(a[0])}else n.push(e)})),i=Object(c.uniq)(i);var r=a.sb.groupId();this.changeModel.groups[r]={shapes:n,groups:i}}},t.prototype.getShapeIds=function(){var e=void 0===this.data.shapeIds?[]:this.data.shapeIds;return(void 0===this.data.includeSelected||this.data.includeSelected)&&(e=e.concat(this.state.get("Selected"))),e},t.\u0275fac=function(e){return new(e||t)(d.pc(g.a),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[g.a,a.Jb])],t)}(b.a);Object.defineProperty(D,"name",{value:"GroupShapes"});var A=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.state=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e=this.getShapeIds();if(this.changeModel.isShapeInGroup(e)){var t=this.changeModel.getGroupHierarchy(e[0])[0];delete this.changeModel.groups[t]}},t.prototype.getShapeIds=function(){var e=void 0===this.data.shapeIds?[]:this.data.shapeIds;return(void 0===this.data.includeSelected||this.data.includeSelected)&&(e=e.concat(this.state.get("Selected"))),e},t.\u0275fac=function(e){return new(e||t)(d.pc(g.a),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[g.a,a.Jb])],t)}(b.a);Object.defineProperty(A,"name",{value:"UnGroupShapes"});var L=function(e){function t(t,n){var i=e.call(this,t)||this;return i.ds=t,i.stateSvc=n,i}return Object(i.e)(t,e),t.prototype.prepareData=function(){var e,t,n,r,o,c,s,l;if(this.eventData.scenario!==a.A.PREVIEW){var d={};try{for(var u=Object(i.k)(Object.keys(this.changeModel.shapes)),p=u.next();!p.done;p=u.next()){var h=p.value,f=this.changeModel.shapes[h];if(this.isConnectorModel(f))try{for(var g=(n=void 0,Object(i.k)(this.getConnectedGluepoints(f))),m=g.next();!m.done;m=g.next()){d[S=m.value]=!0}}catch(k){n={error:k}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}else try{for(var b=(o=void 0,Object(i.k)(Object.keys(f.gluepoints))),v=b.next();!v.done;v=b.next()){var O=v.value,y=f.gluepoints[O],C=f.id+"."+O;"custom"!==y.type||d[C]||(d[C]=!1)}}catch(I){o={error:I}}finally{try{v&&!v.done&&(c=b.return)&&c.call(b)}finally{if(o)throw o.error}}}}catch(_){e={error:_}}finally{try{p&&!p.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}try{for(var x=Object(i.k)(Object.keys(d)),P=x.next();!P.done;P=x.next()){var S;if(!d[S=P.value]){var j=Object(i.h)(S.split("."),2);h=j[0],O=j[1];delete(f=this.changeModel.shapes[h]).gluepoints[O]}}}catch(E){s={error:E}}finally{try{P&&!P.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}var w=this.stateSvc.get("CustomGluePoint");if(w&&w.shapeId&&w.gluepoint)(f=this.changeModel.shapes[w.shapeId]).gluepoints[w.gluepoint.id]=w.gluepoint}},t.prototype.isConnectorModel=function(e){return e.type===y.u.Connector},t.prototype.getConnectedGluepoints=function(e){var t,n,a=[],r=e.getPoints(),o=[r[0],r[r.length-1]],c=function(t){var n=s.data.changes[e.id];n&&n.find((function(e){return e.id===t.id}))||a.push(t.shapeId+"."+t.gluepointId)},s=this;try{for(var l=Object(i.k)(o),d=l.next();!d.done;d=l.next()){c(d.value)}}catch(u){t={error:u}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},t.\u0275fac=function(e){return new(e||t)(d.pc(g.a),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[g.a,a.Jb])],t)}(b.a);Object.defineProperty(L,"name",{value:"UpdateCustomGluepoints"});var R=n("icO7"),N=n("phng"),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.registerSelectAll=function(e){e.mapSequence(t.selectAll).add(u).add(r.a)},t.registerMoveVector=function(e){e.mapSequence(t.moveVisualVector).add(h.a).add(k).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerTransformShapesAndConnectors=function(e){e.mapSequence(t.transformShapesAndConnectors).add(E).add(T).add(w.a,{transform:function(e){var t;return e.eventInfo.scenario===a.A.PREVIEW?{changes:{}}:{changes:(t={},t[e.resultData[0].id]={},t)}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerMoveConnectorEndPointOnViewport=function(e){e.mapSequence(t.moveConnectorEndPointOnViewport).add(h.a).add(L,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(v,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(p.a,{transform:function(e){return{changes:e.resultData[2]}}}).add(w.a,{transform:function(e){if(e.eventInfo.scenario===a.A.PREVIEW)return{changes:{}};var t=e.resultData[2],n={};return Object.keys(t).forEach((function(e){return n[e]={}})),{changes:n}}}).add(O.a,{transform:function(e){var t;return{changes:(t={},t[e.resultData[0].id]=null,t),updateConnections:e.eventData.updateConnections,updateDefinitions:e.eventData.updateDefinitions}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerMoveConnectorPathPointOnViewport=function(e){e.mapSequence(t.moveConnectorPathPointOnViewport).add(h.a).add(p.a,{transform:function(e){var t,n=e.resultData[0];return{changes:(t={},t[n.id]=n.points,t)}}}).add(w.a,{transform:function(e){var t;return e.eventInfo.scenario===a.A.PREVIEW?{changes:{}}:{changes:(t={},t[e.resultData[0].id]={},t)}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerChangeConnectedGluepoint=function(e){e.mapSequence(t.changeConnectedGluepoint).add(v,{transform:function(e){var t,n=e.data[0],i={id:n.endpointId,shapeId:n.shapeId,gluepointId:n.gluepointId,gluepointLocked:!0};return{changes:(t={},t[n.connectorId]=[i],t)}}}).add(p.a,{transform:function(e){return{changes:e.resultData[0]}}}).add(w.a,{transform:function(e){if(e.eventInfo.scenario===a.A.PREVIEW)return{changes:{}};var t=e.resultData[0],n={};return Object.keys(t).forEach((function(e){return n[e]={}})),{changes:n}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerFlipConnector=function(e){e.mapSequence(t.flipConnector).add(j).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerAlignShapes=function(e){e.mapSequence(this.alignShapes).add(N.a).add(x,{transform:function(e){return{shapeIds:e.resultData[0].shapeIds,isVertical:e.eventData.isVertical,alignment:e.eventData.alignment}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerGroupShapes=function(e){e.mapSequence(t.groupShapes).add(N.a).add(D,{transform:function(e){return{shapeIds:e.resultData[0].shapeIds,includeSelected:!1}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.registerUnGroupShapes=function(e){e.mapSequence(t.unGroupShapes).add(N.a).add(A,{transform:function(e){return{shapeIds:e.resultData[0].shapeIds,includeSelected:!1}}}).add(R.a,{alter:function(e){return"RunExecutionStep"===e.stepName&&"completed"===e.stepStatus}})},t.selectAll=new t("SelectAll"),t.moveVisualVector=new t("MoveVisualVector"),t.transformShapesAndConnectors=new t("TransformShapesAndConnectors"),t.moveConnectorEndPointOnViewport=new t("MoveConnectorEndPointOnViewport"),t.moveConnectorPathPointOnViewport=new t("MoveConnectorPathPointOnViewport"),t.changeConnectedGluepoint=new t("ChangeConnectedGluepoint"),t.flipConnector=new t("FlipConnector"),t.alignShapes=new t("AlignShapes"),t.groupShapes=new t("GroupShapes"),t.unGroupShapes=new t("UnGroupShapes"),t}(a.d)},f6YR:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n("D57K"),a=n("5xGT"),r=n("hX56"),o=n("nsO7"),c=n("ZTXN"),s=n("g6G6"),l=n("ROBh"),d=n("KTx3"),u=n("6Oco"),p=n("8j5Y"),h=n("TLy2"),f=n("YtkY"),g=n("Ohay"),m=n("5uDM"),b=n("xVbo"),v=n("O6K7"),O=n("yn08"),y=n("w1VY"),C=n("Wpmq"),x=n("QoSw"),P=n("3+4Q"),S=n("flPR"),j=n("h1tj"),w=function(e){function t(t){var n=e.call(this)||this;return n.model=t,n.prepare(),n}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.prepare=function(){var e=new j.Shape;e.graphics.clear(),e.graphics.beginFill(this.model.resolved?t.RESOLVED_ICON_COLOR:t.ICON_COLOR),e.graphics.beginStroke("#FFFFFF"),e.graphics.setStrokeStyle(2),e.graphics.drawCircle(0,0,15),e.graphics.endStroke(),e.graphics.endFill(),e.shadow=new j.Shadow("rgba(0, 0, 0, 0.25)",0,2,3),this.addChild(e);var n=new j.Bitmap('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="22.84" height="17.07"><path fill="rgb(255, 255, 255)" d="M22.84,7.46C22.84,3.34,17.73,0,11.42,0S0,3.34,0,7.46s5.11,7.46,11.42,7.46a17.57,17.57,0,0,0,3.21-.3l4.3,2.43a.17.17,0,0,0,.25-.15l0-3.95C21.42,11.59,22.84,9.63,22.84,7.46Z" /></svg>');n.scaleX=.8,n.scaleY=.8,n.x=-9,n.y=-6,this.addChild(n)},t.ICON_COLOR="#F39C12",t.RESOLVED_ICON_COLOR="#7e7e7e",t}(j.Container),k=n("4y1S"),I=n("EM62"),_=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,n)||this;return l.ll=t,l.state=n,l.datastore=i,l.commandService=a,l.diagToViewport=r,l.viewToDiagram=o,l.userLocator=s,l.addSource=new c.a,l.removeSource=new c.a,l.changeSource=new c.a,l.shapeComments={},l.diagramComments={},l}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(i.j)(Object(o.values)(this.diagramComments),Object(o.flatten)(Object(o.values)(this.shapeComments).map((function(e){return Object(o.values)(e)}))))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(p.a)((function(){e.hideCommentThreadView(),e.removeAllIndicators()})),Object(h.a)((function(){return Object(s.a)(e.listenToCreateEvents(),e.listenToSingleCommentInsertChanges(),e.listenToCommentUpdateChanges(),e.listenToOpenPanelChanges().pipe(Object(h.a)((function(t){return e.userLocator.getCommentToggleState().pipe(Object(h.a)((function(n){return t||n?Object(s.a)(e.listenToCommentInsertChanges(),e.listenToViewportChanges(),e.listenToDiagramChanges(),e.listenToResolvedCommentChanges()):(e.hideCommentThreadView(),e.removeAllIndicators())})))}))))}))).subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.removeResolvedCommentIndicators=function(){var e,t,n,a,r,o;try{for(var c=Object(i.k)(Object.keys(this.diagramComments)),s=c.next();!s.done;s=c.next()){var l=s.value;!(g=this.diagramComments[l]).model.parentId&&g.model.resolved&&(this.removeSource.next(g),delete this.diagramComments[l])}}catch(m){e={error:m}}finally{try{s&&!s.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}try{for(var d=Object(i.k)(Object.keys(this.shapeComments)),u=d.next();!u.done;u=d.next()){var p=u.value;try{for(var h=(r=void 0,Object(i.k)(Object.keys(this.shapeComments[p]))),f=h.next();!f.done;f=h.next()){var g;l=f.value;!(g=this.shapeComments[p][l]).model.parentId&&g.model.resolved&&(this.removeSource.next(g),delete this.shapeComments[p][l])}}catch(b){r={error:b}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}}catch(v){n={error:v}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}},t.prototype.listenToOpenPanelChanges=function(){return this.state.changes(n.SIDEBAR_STATE_KEY).pipe(Object(f.a)((function(e){return e===n.SIDEBAR_STATE_VAL})),Object(g.a)())},t.prototype.listenToCommentInsertChanges=function(){var e=this,t=this.state.get("CurrentDiagram");return Object(s.a)(this.datastore.findLatest(P.a,{diagramId:t}).pipe(Object(f.a)((function(e){return{type:"insert",docs:e}}))),this.datastore.watch(P.a,{diagramId:t}).pipe(Object(m.a)((function(e){return e.docs?a.L.build({docs:P.a},e):Object(l.a)(e)})))).pipe(Object(b.a)((function(e){return"insert"===e.type||"remove"===e.type})),Object(p.a)((function(t){"insert"===t.type?t.docs.filter((function(e){return!e.parentId&&!e.resolved})).forEach((function(t){return e.createCommentIndicator(t)})):"remove"===t.type&&t.docs.forEach((function(t){return e.removeCommentIndicator(t)}))})))},t.prototype.listenToCommentUpdateChanges=function(){var e=this,t=this.state.get("CurrentDiagram");return Object(s.a)(this.datastore.findLatest(P.a,{diagramId:t}).pipe(Object(f.a)((function(e){return{type:"insert",docs:e}}))),this.datastore.watch(P.a,{diagramId:t}).pipe(Object(m.a)((function(e){return e.docs?a.L.build({docs:P.a},e):Object(l.a)(e)})))).pipe(Object(b.a)((function(e){return"update"===e.type})),Object(p.a)((function(t){t.docs.filter((function(e){return e.resolved})).forEach((function(t){e.removeCommentIndicator(t),e.singleComment&&t.id===e.singleComment.id&&(e.singleComment=null)}))})))},t.prototype.listenToViewportChanges=function(){var e=this;return Object(s.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(h.a)((function(){return e.locator.getDiagramOnce()})),Object(p.a)((function(t){return e.updateIndicatorPositions(t)})))},t.prototype.listenToDiagramChanges=function(){var e=this;return this.locator.getDiagramChanges().pipe(Object(p.a)((function(t){var n,a,r,o;if(t.split.shapes)try{for(var c=Object(i.k)(Object.keys(t.split.shapes)),s=c.next();!s.done;s=c.next()){var l=s.value;if(e.shapeComments[l])try{for(var d=(r=void 0,Object(i.k)(Object.keys(e.shapeComments[l]))),u=d.next();!u.done;u=d.next()){var p=u.value,h=e.shapeComments[l][p];e.positionShapeCommentIndicator(h,t.model.shapes[l]),e.changeSource.next(h)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}}catch(g){n={error:g}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}})))},t.prototype.listenToCreateEvents=function(){var e=this;return Object(d.a)(this.indicatorLayer,v.b.CreateComment).pipe(Object(p.a)((function(t){e.showCommentThreadView(t.getShapeId(),t.getPosition()),e.switchToNormalState()})))},t.prototype.listenToResolvedCommentChanges=function(){var e=this;return this.state.changes("CommentThreadData").pipe(Object(p.a)((function(t){e.removeResolvedCommentIndicators(),t.comments&&t.comments.forEach((function(t){!t.parentId&&t.resolved&&e.createCommentIndicator(t)}))})))},t.prototype.removeAllIndicators=function(){var e,t;try{for(var n=Object(i.k)(this.indicators),a=n.next();!a.done;a=n.next()){var r=a.value;this.removeSource.next(r),r.destroy()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.shapeComments={},this.diagramComments={},Object(u.b)()},t.prototype.updateIndicatorPositions=function(e){var t,n,a,r,o,c;try{for(var s=Object(i.k)(Object.keys(this.diagramComments)),l=s.next();!l.done;l=s.next()){var d=l.value,u=this.diagramComments[d];this.positionDiagramCommentIndicator(u),this.changeSource.next(u)}}catch(b){t={error:b}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}try{for(var p=Object(i.k)(Object.keys(this.shapeComments)),h=p.next();!h.done;h=p.next()){var f=h.value;try{for(var g=(o=void 0,Object(i.k)(Object.keys(this.shapeComments[f]))),m=g.next();!m.done;m=g.next()){d=m.value,u=this.shapeComments[f][d];this.positionShapeCommentIndicator(u,e.shapes[f]),this.changeSource.next(u)}}catch(v){o={error:v}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(o)throw o.error}}}}catch(O){a={error:O}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(a)throw a.error}}},t.prototype.listenToSingleCommentInsertChanges=function(){var e=this;return this.state.changes("CommentThreadData").pipe(Object(h.a)((function(t){return e.listenToOpenPanelChanges().pipe(Object(b.a)((function(e){return!e})),Object(h.a)((function(){return t&&t.visible&&t.threadId&&t.comments.length?(e.createSingleCommentIndicator(t.comments[0]),Object(u.b)()):t&&!t.visible?e.userLocator.getCommentToggleState().pipe(Object(g.a)(),Object(f.a)((function(t){!t&&e.singleComment&&e.removeSingleCommentIndicator()}))):Object(u.b)()})))})))},t.prototype.createCommentIndicator=function(e){e.shapeId?this.createShapeCommentIndicator(e):this.createDiagramCommentIndicator(e)},t.prototype.createSingleCommentIndicator=function(e){this.singleComment=e,this.createCommentIndicator(e)},t.prototype.createDiagramCommentIndicator=function(e){if(e.locOnDiagram&&(!this.diagramComments[e.id]||this.diagramComments[e.id].model.resolved!==e.resolved)){var t=new w(e);this.positionDiagramCommentIndicator(t),this.setupCommentInteractions(t),this.diagramComments[e.id]=t,this.addSource.next(t)}},t.prototype.positionDiagramCommentIndicator=function(e){e.x=this.diagToViewport.x(e.model.locOnDiagram.x),e.y=this.diagToViewport.y(e.model.locOnDiagram.y)},t.prototype.createShapeCommentIndicator=function(e){var t=this;this.locator.getShapeOnce(e.shapeId).subscribe((function(n){if(t.shapeComments[e.shapeId]||(t.shapeComments[e.shapeId]={}),!t.shapeComments[e.shapeId][e.id]||t.shapeComments[e.shapeId][e.id].model.resolved!==e.resolved){var i=new w(e);t.positionShapeCommentIndicator(i,n),t.setupCommentInteractions(i),t.shapeComments[e.shapeId][e.id]=i,t.addSource.next(i)}}))},t.prototype.positionShapeCommentIndicator=function(e,t){if(!t)return this.positionDiagramCommentIndicator(e);var n=a.ob.onRect(e.model.locOnShape,t.defaultBounds,t.transform);e.x=this.diagToViewport.x(n.x),e.y=this.diagToViewport.y(n.y)},t.prototype.removeCommentIndicator=function(e){var t=this.indicators.find((function(t){return t.model.id===e.id}));this.removeSource.next(t),this.hideCommentThreadView()},t.prototype.removeSingleCommentIndicator=function(){var e,t,n=this,a=this.singleComment.id,r=this.indicators.find((function(e){return e.model.id===n.singleComment.id}));if(this.removeSource.next(r),this.singleComment=null,this.diagramComments[a])delete this.diagramComments[a];else try{for(var o=Object(i.k)(Object.keys(this.shapeComments)),c=o.next();!c.done;c=o.next()){var s=c.value;this.shapeComments[s][a]&&delete this.shapeComments[s][a]}}catch(l){e={error:l}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.setupCommentInteractions=function(e){var t=this;this.subs.push(Object(d.a)(e,"click").subscribe((function(){a.Lb.track("right.comment.show",{value1Type:"trigger",value1:"canvas"});var n=e.model,i={visible:!0,threadId:n.id,comments:[n]};t.state.set("CommentThreadData",i)})))},t.prototype.showCommentThreadView=function(e,t){var n={visible:!0,shapeId:e,position:{x:this.viewToDiagram.x(t.x),y:this.viewToDiagram.y(t.y)}};this.state.set("CommentThreadData",n)},t.prototype.switchToNormalState=function(){this.state.set("MouseControlState",O.b.Normal)},t.prototype.hideCommentThreadView=function(){this.state.set("CommentThreadData",{})},t.SIDEBAR_STATE_KEY="RightSidebarPanel",t.SIDEBAR_STATE_VAL="diagramcomments",t.\u0275fac=function(e){return new(e||t)(I.pc(x.a),I.pc(a.Jb),I.pc(r.b),I.pc(a.B),I.pc(y.a),I.pc(C.a),I.pc(k.x))},t.\u0275prov=I.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(S.a)(),Object(i.g)("design:paramtypes",[x.a,a.Jb,r.b,a.B,y.a,C.a,k.x])],t)}(S.b)},foQ2:function(e,t,n){"use strict";n.d(t,"b",(function(){return Fe})),n.d(t,"c",(function(){return He})),n.d(t,"a",(function(){return Ge}));var i=n("D57K"),a=n("C5+t"),r=n("5xGT"),o=n("NNJu"),c=n("X0jn"),s=n("Jzy8"),l=n("xnGY"),d=n("4y1S"),u=n("XWWj"),p=n("nsO7"),h=n("C05f"),f=n("ZTXN"),g=n("ROBh"),m=n("g6G6"),b=n("6Oco"),v=n("rYDR"),O=n("8j5Y"),y=n("J+dc"),C=n("TLy2"),x=n("Ohay"),P=n("TaSY"),S=n("xVbo"),j=n("YtkY"),w=n("0Woy"),k=n("7SLS"),I=n("jIqt"),_=n("mWib"),E=n("QoSw"),M=n("B/3P"),T=n("c7W3"),D=n("Q4Fx"),A=n("S0Xf"),L=n("EM62"),R=n("sEIs"),N=n("s2Ay"),U=n("2kYt"),B=n("K0+f"),F=function(e){return{value1Type:"projectId",value1:e}},H=function(e){return{event:"left.folder.folder.click",data:e}},V=function(){function e(e){this.state=e}return e.prototype.setAsSelected=function(){this.state.set("FolderPanelSelectedProject",this.id)},e.\u0275fac=function(t){return new(t||e)(L.fc(r.Jb))},e.\u0275cmp=L.Zb({type:e,selectors:[["project-list-item"]],inputs:{name:"name",id:"id"},decls:6,vars:6,consts:[[1,"list-item","sidebar-item",3,"trackAction","click"],[1,"sidebar-icon-container"],[1,"nu-icon","nu-ic-folder-thin","orange"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-folder-thin"]],template:function(e,t){1&e&&(L.lc(0,"div",0),L.tc("click",(function(){return t.setAsSelected()})),L.lc(1,"div",1),L.wc(),L.lc(2,"svg",2),L.gc(3,"use",3),L.kc(),L.kc(),L.vc(),L.lc(4,"a"),L.cd(5),L.kc(),L.kc()),2&e&&(L.Cc("trackAction",L.Hc(4,H,L.Hc(2,F,t.id))),L.Sb(5),L.dd(t.name))},directives:[B.a],styles:[".list-item[_ngcontent-%COMP%]{display:flex;padding:5px;align-items:center;width:202px}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}"],changeDetection:0}),e}();function G(e,t){if(1&e&&(L.gc(0,"project-list-item",2),L.yc(1,"translate")),2&e){var n=t.$implicit;L.Cc("id",null==n?null:n.id)("name",L.zc(1,2,null==n?null:n.name))}}var Y=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=L.Zb({type:e,selectors:[["project-list"]],inputs:{projectList:"projectList"},decls:3,vars:3,consts:[[1,"project-list-container"],[3,"id","name",4,"ngFor","ngForOf"],[3,"id","name"]],template:function(e,t){1&e&&(L.lc(0,"div",0),L.ad(1,G,2,4,"project-list-item",1),L.yc(2,"async"),L.kc()),2&e&&(L.Sb(1),L.Cc("ngForOf",L.zc(2,1,t.projectList)))},directives:[U.s,V],pipes:[U.b,N.d],styles:[".project-list-container[_ngcontent-%COMP%]{height:-webkit-min-content;height:-moz-min-content;height:min-content}.project-list-container[_ngcontent-%COMP%]  .ps-content{padding:0}"],changeDetection:0}),e}(),z=function(){function e(e){this.translate=e}return e.\u0275fac=function(t){return new(t||e)(L.fc(N.e))},e.\u0275cmp=L.Zb({type:e,selectors:[["project-bar-item"]],inputs:{isUserPaused:"isUserPaused",projectList:"projectList"},decls:2,vars:1,consts:[[3,"projectList"]],template:function(e,t){1&e&&(L.jc(0),L.gc(1,"project-list",0),L.ic()),2&e&&(L.Sb(1),L.Cc("projectList",t.projectList))},directives:[Y],styles:[".project-bar-item.selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}"],changeDetection:0}),e}(),W=n("jHi0"),X=["componentContainer"],J=function(e,t){return{expanded:e,collapsed:t}},K=function(e,t){return{"light-nv-blue":e,"medium-grey":t}},Z=function(){return{event:"left.folder.createFolder.click"}},q=function(e){function t(t,n,i,a,r,o,c,s){var l=e.call(this,t,n,i,a)||this;return l.componentFactoryResolver=t,l.injector=n,l.cdr=i,l.translate=a,l.commandService=r,l.planPermManager=o,l.state=c,l.userLocator=s,l.removable=!1,l.hideHeaderButton=!1,l.shareWithTeam=!1,l.secondaryMenu=!1,l.isUserPaused=new h.a(!1),l.subs=[],l.toggleChild=new L.t,l.removeChild=new L.t,l.subs.push(l.checkUserPauseStatus().subscribe()),l}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.menuItem.id},enumerable:!1,configurable:!0}),t.prototype.createProject=function(){var e=this;if(!this.planPermManager.check([c.r.PROJECT_CREATE]))throw new d.l("Project create permission is denied",M.a[c.r.PROJECT_CREATE]);var t=r.sb.projectId();return(this.shareWithTeam?this.commandService.dispatch(s.v.createProjectAndShareWithTeam,{id:t}):this.commandService.dispatch(s.v.createProject,{id:t})).subscribe({complete:function(){e.state.set("FolderPanelSelectedProject",t)}})},t.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(x.a)(),Object(O.a)((function(t){return e.isUserPaused.next(t)})))},t.prototype.ngOnDestroy=function(){for(this.toggleChild=null,this.removeChild=null,this.menuItem=null,this._parent=null,this._isOpen=!1;this.subs.length;)this.subs.pop().unsubscribe()},t.prototype.toggle=function(e){this.toggleChild.emit(this)},t.\u0275fac=function(e){return new(e||t)(L.fc(L.m),L.fc(L.C),L.fc(L.j),L.fc(N.e),L.fc(r.B),L.fc(d.o),L.fc(r.Jb),L.fc(d.x))},t.\u0275cmp=L.Zb({type:t,selectors:[["project-collapsible-menu-item"]],viewQuery:function(e,t){var n;(1&e&&L.Vc(X,!0,L.hb),2&e)&&(L.Lc(n=L.uc())&&(t.componentContainer=n.first))},inputs:{removable:"removable",hideHeaderButton:"hideHeaderButton",shareWithTeam:"shareWithTeam",id:"id"},outputs:{toggleChild:"toggleChild",removeChild:"removeChild"},features:[L.Pb],decls:20,vars:20,consts:[[1,"col-menu-item-container",3,"ngClass"],[1,"col-menu-item-heading","fx-no-selection"],[1,"col-menu-item-heading-inner",3,"click"],[1,"col-menu-item-icon"],[1,"nu-icon","nu-ic-close-thin",3,"ngClass"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"],[1,"col-menu-item-heading-title","fx-ellipsis"],[1,"col-menu-item-icon-right",3,"hidden"],["data-testid","add-project-button","tooltip","","placement","bottom",1,"fx-button","fx-icon",3,"trackAction","disabled","click"],[1,"nu-icon","nu-ic-plus","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],[1,"tooltip-content"],[1,"col-menu-item-content"],[1,"fx-invisible-item"],["componentContainer",""]],template:function(e,t){1&e&&(L.lc(0,"div",0),L.lc(1,"div",1),L.lc(2,"div",2),L.tc("click",(function(e){return t.toggle(e)})),L.lc(3,"div",3),L.wc(),L.lc(4,"svg",4),L.gc(5,"use",5),L.kc(),L.kc(),L.vc(),L.lc(6,"div",6),L.cd(7),L.yc(8,"async"),L.kc(),L.kc(),L.lc(9,"div",7),L.lc(10,"button",8),L.tc("click",(function(){return t.createProject()})),L.yc(11,"async"),L.wc(),L.lc(12,"svg",9),L.gc(13,"use",10),L.kc(),L.vc(),L.lc(14,"div",11),L.cd(15),L.yc(16,"async"),L.kc(),L.kc(),L.kc(),L.kc(),L.lc(17,"div",12),L.gc(18,"div",13,14),L.kc(),L.kc()),2&e&&(L.Cc("ngClass",L.Ic(13,J,t.active,!t.active)),L.Sb(4),L.Cc("ngClass",L.Ic(16,K,t.active,!t.active)),L.Sb(3),L.dd(L.zc(8,7,t.translate.get(t.title))),L.Sb(2),L.Cc("hidden",t.hideHeaderButton),L.Sb(1),L.Cc("trackAction",L.Gc(19,Z))("disabled",L.zc(11,9,t.isUserPaused)),L.Sb(5),L.ed(" ",L.zc(16,11,t.translate.get("TOOLTIPS.NEW_FOLDER"))," "))},directives:[U.q,W.a,B.a],pipes:[U.b],styles:[".col-menu-item-icon[_ngcontent-%COMP%]{width:30px;height:30px;transition:transform .3s ease}.col-menu-item-heading[_ngcontent-%COMP%]{height:30px;line-height:30px;cursor:pointer;color:#7e7e7e}.col-menu-item-heading[_ngcontent-%COMP%]:hover{color:#ffc648}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-heading[_ngcontent-%COMP%]{color:#04263d}.col-menu-item-heading-inner[_ngcontent-%COMP%]{width:calc(100% - 35px);display:flex;flex-direction:row;float:left}.col-menu-item-heading-title[_ngcontent-%COMP%]{flex:1}.col-menu-item-icon-right[_ngcontent-%COMP%]{width:30px;height:30px;float:right;margin-right:4px}.col-menu-item-container[_ngcontent-%COMP%]{overflow:hidden;min-height:30px}.col-menu-item-container.expanded[_ngcontent-%COMP%]{margin-bottom:30px}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-content[_ngcontent-%COMP%]{height:auto}.col-menu-item-container.expanded[_ngcontent-%COMP%]   .col-menu-item-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.col-menu-item-content[_ngcontent-%COMP%]{height:0;margin-top:10px;padding-left:5px}"],changeDetection:0}),t}(o.a),Q=n("crdX"),$=n("Ownj"),ee=function(){return{event:"left.folder.recent.click"}},te=function(){function e(e,t,n,i,a,r){var o=this;this.commandService=e,this.planPermManager=t,this.state=n,this.translate=i,this.userLocator=a,this.projectsLocator=r,this.isUserPaused=new h.a(!1),this.subs=[],this.isDemoUser=new h.a(!1),this.subs.push(t.isDemoUser().subscribe((function(e){return o.isDemoUser.next(e)})))}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(a.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.checkUserPauseStatus().subscribe(),this.loadFolderCategories().subscribe())},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(x.a)(),Object(O.a)((function(t){t?e.isUserPaused.next(!0):e.isUserPaused.next(!1)})))},e.prototype.showRecentDiagrams=function(){this.state.set("FolderPanelSelectedTab","recent")},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.checkTeamShared=function(e,t){return!(!e.team||!t.collabs)&&(t.privacy&&(t.privacy.level===d.p.ANYONE_IN_TEAM||t.privacy.level===d.p.ANYONE_IN_TEAM_WITH_LINK)&&e.team.isInTeam(t.owner.id))},e.prototype.getYourFolders=function(e){var t=this;return this.projectList.pipe(Object(j.a)((function(n){return n.filter((function(n){return!!n.isHomeProject||!t.checkTeamShared(e,n)&&!(!n.owner||n.owner.id!==e.id)}))})))},e.prototype.getTeamFolders=function(e){var t=this;return this.projectList.pipe(Object(j.a)((function(n){return n.filter((function(n){return t.checkTeamShared(e,n)}))})))},e.prototype.getSharedFolders=function(e){var t=this;return this.projectList.pipe(Object(j.a)((function(n){return n.filter((function(n){return!n.isHomeProject&&(!t.checkTeamShared(e,n)&&(!n.owner||n.owner.id!==e.id))}))})),Object(C.a)((function(e){var t=new s.x(s.D.SHARED_HOME,"LABELS.SHARED_HOME");return e.push(t),Object(g.a)(e)})))},e.prototype.loadFolderCategories=function(){var e=this;return this.getFolderCategories().pipe(Object(O.a)((function(t){t.forEach((function(t){e.collapsibleMenu.has(t.id)||e.subs.push(e.collapsibleMenu.add(q,z,t,!1,{shareWithTeam:t.shareWithTeam,hideHeaderButton:t.hideHeaderButton}).subscribe())}))})))},e.prototype.getFolderCategories=function(){var e=this;return this.userLocator.getUserData().pipe(Object(S.a)((function(e){return!!e})),Object(j.a)((function(t){var n={id:"your-folders",title:"FOLDER_PANEL.MY_WORKSPACES",projectList:e.getYourFolders(t),shareWithTeam:!1,hideHeaderButton:!1},i={id:"shared-folders",title:"FOLDER_PANEL.SHARED_WITH_ME",projectList:e.getSharedFolders(t),shareWithTeam:!1,hideHeaderButton:!0},a=[];return a.push(n),t.team&&t.team.teamSize>0&&a.push({id:"team-folder",title:t.team.organizationName||"FOLDER_PANEL.SHARED_WITH_TEAM",projectList:e.getTeamFolders(t),shareWithTeam:!0,hideHeaderButton:!0}),a.push(i),a})))},e.\u0275fac=function(t){return new(t||e)(L.fc(r.B),L.fc(d.o),L.fc(r.Jb),L.fc(N.e),L.fc(d.x),L.fc(s.w))},e.\u0275cmp=L.Zb({type:e,selectors:[["project-bar"]],viewQuery:function(e,t){var n;(1&e&&L.Vc(r.t,!0),2&e)&&(L.Lc(n=L.uc())&&(t.collapsibleMenu=n.first))},inputs:{projectList:"projectList"},decls:12,vars:6,consts:[[1,"project-bar-container"],["translate","",1,"fx-margin-bottom-15","panel-main-header"],[1,"list-item","project-bar-item",3,"trackAction","click"],[1,"project-bar-icon-container"],[1,"nu-icon","nu-ic-time-thin","purple"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-time-thin"],["translate",""],[1,"col-menu-scrollbar"],[1,"project-collapsible-menu"]],template:function(e,t){1&e&&(L.lc(0,"div",0),L.yc(1,"async"),L.lc(2,"h2",1),L.cd(3,"FOLDER_PANEL.FOLDERS"),L.kc(),L.lc(4,"div",2),L.tc("click",(function(){return t.showRecentDiagrams()})),L.lc(5,"div",3),L.wc(),L.lc(6,"svg",4),L.gc(7,"use",5),L.kc(),L.kc(),L.vc(),L.lc(8,"a",6),L.cd(9,"FOLDER_PANEL.RECENT"),L.kc(),L.kc(),L.lc(10,"perfect-scrollbar",7),L.gc(11,"collapsible-menu",8),L.kc(),L.kc()),2&e&&(L.Xb("not-demo",!L.zc(1,3,t.isDemoUser)),L.Sb(4),L.Cc("trackAction",L.Gc(5,ee)))},directives:[N.a,B.a,Q.b,$.a],pipes:[U.b],styles:[".project-bar-item.selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}.project-bar-container[_ngcontent-%COMP%]{height:100vh;padding:30px 10px 80px}.project-collapsible-menu[_ngcontent-%COMP%]{padding-left:0}.list-item[_ngcontent-%COMP%]{display:flex;padding:5px;align-items:center}.list-item[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.project-bar-section-header[_ngcontent-%COMP%]{display:flex}.project-bar-section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1}.panel-main-header[_ngcontent-%COMP%]{margin-left:5px}.project-bar-section-add-project[_ngcontent-%COMP%]{padding:0;margin-right:-5px}"],changeDetection:0}),e}(),ne=n("Wrqg"),ie=n("HM3f"),ae=n("YsaH"),re=n("rwb9"),oe=function(){return{event:"header.right.avatar.click"}};function ce(e,t){if(1&e&&(L.lc(0,"div",5),L.gc(1,"user-image",6),L.lc(2,"div",7),L.lc(3,"div",8),L.lc(4,"p",9),L.cd(5),L.kc(),L.lc(6,"p"),L.lc(7,"label",10),L.cd(8),L.kc(),L.kc(),L.lc(9,"p"),L.lc(10,"span",11),L.cd(11),L.kc(),L.kc(),L.lc(12,"p",12),L.cd(13),L.yc(14,"translate"),L.kc(),L.kc(),L.kc(),L.kc()),2&e){var n=L.xc().$implicit;L.Sb(1),L.Cc("hasImage",n.collab.hasImage)("imagePath",n.collab.image)("userColor",n.collab.displayColor)("userInitials",n.collab.initial)("userRegistered",n.collab.isRegistered)("trackAction",L.Gc(13,oe))("userOnlineStatus",n.collab.online),L.Sb(4),L.dd(n.collab.fullName),L.Sb(3),L.dd(n.collab.roleTitle),L.Sb(3),L.dd(n.collab.email),L.Sb(2),L.dd(L.zc(14,11,n.collab.lastSeenMoment))}}function se(e,t){if(1&e&&(L.lc(0,"div",13),L.lc(1,"div",14),L.lc(2,"span"),L.cd(3),L.kc(),L.kc(),L.kc()),2&e){var n=L.xc().$implicit;L.Sb(3),L.ed("+",n.remainingCount,"")}}var le=function(e,t){return{right:e,"z-index":t}},de=function(e,t){return{active:e,inactive:t}};function ue(e,t){if(1&e&&(L.lc(0,"div",2),L.ad(1,ce,15,14,"div",3),L.ad(2,se,4,1,"div",4),L.kc()),2&e){var n=t.$implicit;L.Cc("ngStyle",L.Ic(4,le,n.position+"px",n.index))("ngClass",L.Ic(7,de,n.collab&&n.collab.online,n.collab&&!n.collab.online)),L.Sb(1),L.Cc("ngIf",!!n.collab),L.Sb(1),L.Cc("ngIf",!n.collab)}}var pe=function(e){function t(t,n,a){var r=e.call(this)||this;return r.collabLocator=t,r.state=a,r.limitCount=0,r.collabs=n.getUserData().pipe(Object(S.a)((function(e){return!!e})),Object(C.a)((function(){return Object(ie.b)([a.changes("FolderPanelSelectedProject").pipe(Object(C.a)((function(e){return e===s.D.HOME||e===s.D.SHARED_HOME?Object(g.a)([]):t.getCollabs(e).pipe(Object(S.a)((function(e){return!!e})),Object(j.a)((function(e){return e.filter((function(e){return e.id!==r.state.get("CurrentUser")}))})))}))),r.collabHover]).pipe(Object(j.a)((function(e){var t=Object(i.h)(e,2),n=t[0],a=t[1];return r.getCollabViews(n,a)})))}))),r}return Object(i.e)(t,e),t.\u0275fac=function(e){return new(e||t)(L.fc(s.t),L.fc(d.x),L.fc(r.Jb))},t.\u0275cmp=L.Zb({type:t,selectors:[["project-user-strip"]],inputs:{limitCount:"limitCount"},features:[L.Pb],decls:3,vars:4,consts:[[1,"user-strip-container"],["class","user-strip-img-wrapper",3,"ngStyle","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"user-strip-img-wrapper",3,"ngStyle","ngClass"],["tooltip","","placement","bottom","style","display: inline-block;",4,"ngIf"],["style","display: inline-block;",4,"ngIf"],["tooltip","","placement","bottom",2,"display","inline-block"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","trackAction","userOnlineStatus"],[1,"tooltip-content"],[1,"user-info-bubble"],[1,"nu-text-bold"],["translate",""],[1,"white"],[1,"nu-text-small"],[2,"display","inline-block"],[1,"user-count-inner","fx-round"]],template:function(e,t){1&e&&(L.lc(0,"div",0),L.ad(1,ue,3,10,"div",1),L.yc(2,"async"),L.kc()),2&e&&(L.Sb(1),L.Cc("ngForOf",L.zc(2,2,t.collabs))("ngForTrackBy",t.getCollabTrackingId))},directives:[U.s,U.w,U.q,U.t,W.a,re.a,B.a,N.a],pipes:[U.b,N.d],styles:['.user-strip-container[_ngcontent-%COMP%]{height:27px;position:fixed;margin-right:5px;top:10px}.user-info-bubble[_ngcontent-%COMP%]{padding:5px}.user-count-inner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:30px;width:30px;position:fixed;background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#b9b9b9;position:relative;overflow:hidden;text-align:center;border:1px solid #d3d3e7}.user-count-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;height:28px}.user-count-inner[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;height:inherit;width:inherit;top:0;background:hsla(0,0%,100%,.7)}.user-strip-img-wrapper[_ngcontent-%COMP%]{max-width:100px;transition:all .2s linear;transition-delay:0s;position:absolute}.user-strip-img-wrapper[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{position:relative;transform:scale(1);transition:all .2s linear;transition-delay:.3s}.user-strip-container[_ngcontent-%COMP%]     .user-img-inner{box-shadow:2px 0 #f9f8f7}.user-strip-container[_ngcontent-%COMP%]     .user-img-container.active .user-img-inner{box-shadow:none}'],changeDetection:0}),t}(ae.a),he=n("pYIu"),fe=n("TdEb"),ge=n("pVzg"),me=n("uIWG"),be=n("xEGh"),ve=["dropdownItem"],Oe=["diagramArea"],ye=["contentContainer"];function Ce(e,t){1&e&&(L.lc(0,"div",36),L.lc(1,"div",37),L.lc(2,"label",38),L.cd(3,"FOLDER_PANEL.RECENT"),L.kc(),L.kc(),L.kc())}function xe(e,t){if(1&e){var n=L.mc();L.lc(0,"editable-label",44),L.tc("changedText",(function(e){L.Oc(n);var t=L.xc(2).ngIf;return L.xc(2).renameProject(null==t?null:t.id,e)})),L.kc()}if(2&e){var i=L.xc(2).ngIf;L.Dc("value",null==i?null:i.name)}}function Pe(e,t){if(1&e){var n=L.mc();L.lc(0,"editable-label",45),L.tc("changedText",(function(e){L.Oc(n);var t=L.xc(2).ngIf;return L.xc(2).renameProject(null==t?null:t.id,e)})),L.kc()}if(2&e){var i=L.xc(2).ngIf;L.Dc("value",null==i?null:i.name),L.Cc("focus",!0)("selectAll",!0)}}function Se(e,t){if(1&e&&(L.lc(0,"div"),L.ad(1,xe,1,1,"editable-label",42),L.yc(2,"async"),L.ad(3,Pe,1,3,"editable-label",43),L.yc(4,"async"),L.kc()),2&e){var n=L.xc(3);L.Sb(1),L.Cc("ngIf","inactive"===L.zc(2,2,n.renameMode)),L.Sb(2),L.Cc("ngIf","active"===L.zc(4,4,n.renameMode))}}function je(e,t){1&e&&(L.lc(0,"div"),L.lc(1,"label",38),L.cd(2,"LABELS.HOME"),L.kc(),L.kc())}function we(e,t){1&e&&(L.lc(0,"div"),L.lc(1,"label",38),L.cd(2,"LABELS.SHARED_HOME"),L.kc(),L.kc())}function ke(e,t){if(1&e){var n=L.mc();L.lc(0,"button",52),L.tc("mouseenter",(function(){return L.Oc(n),L.xc(4).showOptDropdown()})),L.wc(),L.lc(1,"svg",15),L.gc(2,"use",53),L.kc(),L.kc()}}function Ie(e,t){if(1&e){var n=L.mc();L.lc(0,"a",54),L.tc("click",(function(){return L.Oc(n),L.xc(4).enableRenameMode()})),L.cd(1,"PROJECT_FEATURE.RENAME"),L.kc()}}function _e(e,t){if(1&e){var n=L.mc();L.lc(0,"a",54),L.tc("click",(function(){return L.Oc(n),L.xc(4).deleteProject()})),L.yc(1,"async"),L.cd(2,"PROJECT_FEATURE.DELETE"),L.kc()}if(2&e){var i=L.xc(4);L.Xb("disabled",0===L.zc(1,2,i.appConnectionStatus))}}var Ee=function(e){return{id:e,role:"EDITOR"}},Me=function(e){return{id:e,role:"OWNER"}};function Te(e,t){if(1&e){var n=L.mc();L.lc(0,"div",46),L.ad(1,ke,3,0,"button",47),L.lc(2,"div",48,49),L.tc("mouseleave",(function(){return L.Oc(n),L.xc(3).hideOptDropdown()})),L.ad(4,Ie,2,0,"a",50),L.ad(5,_e,3,4,"a",51),L.kc(),L.kc()}if(2&e){var i=L.xc().ngIf;L.Sb(1),L.Cc("projectRole",L.Hc(3,Ee,null==i?null:i.id)),L.Sb(3),L.Cc("projectRole",L.Hc(5,Ee,null==i?null:i.id)),L.Sb(1),L.Cc("projectRole",L.Hc(7,Me,null==i?null:i.id))}}function De(e,t){if(1&e&&(L.lc(0,"div",37),L.ad(1,Se,5,6,"div",40),L.ad(2,je,3,0,"div",40),L.ad(3,we,3,0,"div",40),L.ad(4,Te,6,9,"div",41),L.kc()),2&e){var n=t.ngIf;L.Sb(1),L.Cc("ngIf","home"!=(null==n?null:n.id)&&"shared-home"!=(null==n?null:n.id)),L.Sb(1),L.Cc("ngIf","home"===(null==n?null:n.id)),L.Sb(1),L.Cc("ngIf","shared-home"===(null==n?null:n.id)),L.Sb(1),L.Cc("ngIf","home"!=(null==n?null:n.id)&&"shared-home"!=(null==n?null:n.id))}}function Ae(e,t){if(1&e&&(L.lc(0,"div",36),L.ad(1,De,5,4,"div",39),L.yc(2,"async"),L.kc()),2&e){var n=L.xc();L.Sb(1),L.Cc("ngIf",L.zc(2,1,n.projectMdl))}}function Le(e,t){if(1&e){var n=L.mc();L.lc(0,"button",55),L.tc("click",(function(){return L.Oc(n),L.xc().openShareWindow()})),L.yc(1,"async"),L.wc(),L.lc(2,"svg",15),L.gc(3,"use",56),L.kc(),L.cd(4," LABELS.SHARE "),L.kc()}if(2&e){var i=L.xc();L.Cc("disabled",0===L.zc(1,1,i.appConnectionStatus))}}function Re(e,t){if(1&e){var n=L.mc();L.lc(0,"simple-dropdown-item",57),L.lc(1,"a",58),L.tc("click",(function(){L.Oc(n);var e=t.$implicit;return L.xc().updateSortOrder(e)})),L.cd(2),L.kc(),L.kc()}if(2&e){var i=t.$implicit;L.Cc("item",i),L.Sb(2),L.dd(i.label)}}function Ne(e,t){if(1&e){var n=L.mc();L.lc(0,"simple-dropdown-item",57),L.lc(1,"a",58),L.tc("click",(function(){L.Oc(n);var e=t.$implicit;return L.xc().updatePermissionFilter(e)})),L.cd(2),L.kc(),L.kc()}if(2&e){var i=t.$implicit;L.Cc("item",i),L.Sb(2),L.dd(i.label)}}function Ue(e,t){1&e&&(L.wc(),L.vc(),L.gc(0,"loading-bubbles",59))}function Be(e,t){1&e&&(L.lc(0,"div",60),L.lc(1,"p",61),L.cd(2,"FOLDER_PANEL.EMPTY_FOLDER"),L.gc(3,"br"),L.cd(4,"FOLDER_PANEL.EMPTY_FOLDER_SLUG"),L.kc(),L.kc())}var Fe,He,Ve=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}};!function(e){e[e.ANY=1]="ANY",e[e.CREATED_BY_ME=2]="CREATED_BY_ME",e[e.SHARED_BY_ME=3]="SHARED_BY_ME",e[e.SHARED_BY_OTHERS=4]="SHARED_BY_OTHERS",e[e.NOT_SHARED=5]="NOT_SHARED",e[e.PRIVATE=6]="PRIVATE",e[e.PUBLIC=7]="PUBLIC"}(Fe||(Fe={})),function(e){e[e.LAST_UPDATED=1]="LAST_UPDATED",e[e.LAST_CREATED=2]="LAST_CREATED"}(He||(He={}));var Ge=function(){function e(e,t,n,i,a,r,o,c,s,l,d,u,p,g){this.projectLocator=e,this.userLocator=t,this.diagramInfoLocator=n,this.commandService=i,this.planPermManager=a,this.router=r,this.state=o,this.modelSubManager=c,this.logger=s,this.ll=l,this.changeDetectorRef=d,this.translate=u,this.documentManage=p,this.mdlCtrl=g,this.id="folders",this.debounce=200,this.isFolderEmpty=new h.a(!1),this.isUserPaused=new h.a(!1),this.showLoadingIndicator=new h.a(!0),this.selectedTab=new h.a("diagrams"),this.columns=3,this.projectCount=new h.a(0),this.renameMode=new h.a("inactive"),this.projectDiagramNavigation=new f.a,this.searchText=new f.a,this.permissionFilter=new h.a(Fe.ANY),this.sortOrder=new h.a(He.LAST_UPDATED),this.isExpandable=!0,this.subs=[],this.projectDiagramNavigation=new f.a,this.projectModels=new h.a([])}return Object.defineProperty(e.prototype,"filterOptions",{get:function(){return[{label:this.translate.instant("PERMISSION_STATES.NONE"),value:Fe.ANY,select:this.permissionFilter.value===Fe.ANY},{label:this.translate.instant("PERMISSION_STATES.CREATED_BY_ME"),value:Fe.CREATED_BY_ME,select:this.permissionFilter.value===Fe.CREATED_BY_ME},{label:this.translate.instant("PERMISSION_STATES.SHARED_BY_ME"),value:Fe.SHARED_BY_ME,select:this.permissionFilter.value===Fe.SHARED_BY_ME},{label:this.translate.instant("PERMISSION_STATES.SHARED_BY_OTHERS"),value:Fe.SHARED_BY_OTHERS,select:this.permissionFilter.value===Fe.SHARED_BY_OTHERS},{label:this.translate.instant("PERMISSION_STATES.NOT_SHARED"),value:Fe.NOT_SHARED,select:this.permissionFilter.value===Fe.NOT_SHARED},{label:this.translate.instant("PERMISSION_STATES.PRIVATE"),value:Fe.PRIVATE,select:this.permissionFilter.value===Fe.PRIVATE},{label:this.translate.instant("PERMISSION_STATES.PUBLIC"),value:Fe.PUBLIC,select:this.permissionFilter.value===Fe.PUBLIC}]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortOptions",{get:function(){return[{label:this.translate.instant("SORT_ORDERS.LAST_UPDATED"),value:He.LAST_UPDATED,select:this.sortOrder.value===He.LAST_UPDATED},{label:this.translate.instant("SORT_ORDERS.LAST_CREATED"),value:He.LAST_CREATED,select:this.sortOrder.value===He.LAST_CREATED}]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){var e=this;return this.state.changes(a.c).pipe(Object(O.a)((function(t){t===a.c.ONLINE&&"folders"===e.state.get("SelectedLeftPanel")&&e.state.get("LeftSidebarState")===D.b.Opened&&e.onOpen()})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.dispatchGetUserProjects().subscribe(),this.listenToSelectedProjectChange().subscribe(),this.listenToTabChanges().subscribe(),this.projectDiagramNavigation.pipe(Object(y.a)(1),Object(C.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(y.a)(1),Object(C.a)((function(t){return t.getDiagramModel().pipe(Object(y.a)(1),Object(O.a)((function(t){var n=s.D.HOME;"string"==typeof t.project?n=t.project:t.project&&t.project.id&&(n=t.project.id),e.navigateToProjectDiagrams(n)})))})))}))).subscribe(),this.listenToSidebarStateChanges().subscribe(),this.checkUserPauseStatus().subscribe(),this.listenToDocumentStatusChange().subscribe((function(t){return e.onDocumentStatusChange(t)}))),this.listenToDiagramListChanges()},e.prototype.onOpen=function(){this.state.get("FolderPanelSelectedProject")||this.projectDiagramNavigation.next(),this.dispatchGetUserProjects().subscribe()},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(x.a)(),Object(O.a)((function(t){t?e.isUserPaused.next(!0):e.isUserPaused.next(!1)})))},e.prototype.createDiagram=function(){var e=this;if(r.Lb.track("left.folder.createDocument.click",{value1Type:"location",value1:""+this.selectedTab.getValue()}),!(this.planPermManager.check([c.r.DIAGRAM_CREATE])||this.planPermManager.check([c.r.DIAGRAM_CREATE_PRIVATE])||this.planPermManager.check([c.r.DIAGRAM_CREATE_PUBLIC])))throw new d.l("Diagram create permission is denied",Object(i.a)(Object(i.a)({},M.a[c.r.DIAGRAM_CREATE_PUBLIC]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(c.r.DIAGRAM_CREATE_PUBLIC)}}));var t=this.state.get("CurrentDiagram");"start"===t?this.router.navigate(["start/new","project",this.state.get("FolderPanelSelectedProject")]).catch((function(t){return e.handlePermError(t)})):this.modelSubManager.stop(t,!0).pipe(Object(y.a)(1),Object(O.a)((function(){e.router.navigate(["start/new","project",e.state.get("FolderPanelSelectedProject")]).catch((function(t){return e.handlePermError(t)}))}))).subscribe()},e.prototype.createFolder=function(){var e=this;if(r.Lb.track("left.folder.createFolder.click"),!this.planPermManager.check([c.r.PROJECT_CREATE]))throw new d.l("Project create permission is denied",M.a[c.r.PROJECT_CREATE]);var t=r.sb.projectId(),n=this.commandService.dispatch(s.v.createProject,{id:t}).pipe(Object(P.a)(),Object(O.a)((function(t){e.navigateToProjectDiagrams(t.eventData.id)}))).subscribe();this.subs.push(n)},e.prototype.setSelectedTab=function(e){this.state.set("FolderPanelSelectedTab",e)},e.prototype.onSearchInputClick=function(){r.Lb.track("left.folder.search",{value1Type:"location",value1:""+this.state.get("FolderPanelSelectedTab")})},e.prototype.navigateToProjectList=function(){this.setSelectedTab("diagrams"),this.setSelectedProject(s.D.HOME),this.projectMdl=null},e.prototype.renameProject=function(e,t){this.renameMode.next("inactive"),this.commandService.dispatch(s.v.renameProject,e,{name:t}),this.updateProjectList(e,{action:"rename",name:t})},e.prototype.enableRenameMode=function(){r.Lb.track("left.folder.rename.change",{value1Type:"location",value1:this.state.get("FolderPanelSelectedTab")}),this.hideOptDropdown(),this.renameMode.next("active")},e.prototype.showOptDropdown=function(){this.dropdownItem&&(this.dropdownItem.nativeElement.style.display="block")},e.prototype.hideOptDropdown=function(){this.dropdownItem&&(this.dropdownItem.nativeElement.style.display="none")},e.prototype.updateSortOrder=function(e){r.Lb.track("left.folder.panel.sort.click",{value1Type:"selectedValue",value1:e.value,value2Type:"selectedLabel",value2:e.label}),this.sortOrder.next(e.value)},e.prototype.updatePermissionFilter=function(e){r.Lb.track("left.folder.panel.filter.click",{value1Type:"selectedValue",value1:e.value,value2Type:"selectedLabel",value2:e.label}),this.permissionFilter.next(e.value)},e.prototype.deleteProject=function(){var e=this;r.Lb.track("left.folder.delete.click"),this.hideOptDropdown();var t=this.state.get("FolderPanelSelectedProject");this.documentManage.deleteProject(t,!0).subscribe((function(){e.updateProjectList(t,{action:"delete"})}))},e.prototype.openShareWindow=function(){var e=this.state.get("FolderPanelSelectedProject");this.state.set("HighlightedProject",e),r.Lb.track("left.folder.share.click"),this.mdlCtrl.show(s.I)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.dispatchGetUserProjects=function(){var e=this;return this.commandService.dispatch(s.v.getUserProjectsInfo).pipe(Object(P.a)(),Object(O.a)((function(t){var n=t.resultData[0].projects;n.forEach((function(e){e.owner=Object(p.find)(e.collabs,{role:s.g.OWNER})})),e.projectCount.next(n.length),e.projectModels.next(n)})))},e.prototype.dispatchGetProjectDiagrams=function(e){return this.diagramInfoLocator.hasProjectDiagrams(e)?(this.commandService.dispatch(s.v.getProjectDiagrams,e,null),Object(g.a)(void 0)):this.commandService.dispatch(s.v.getProjectDiagrams,e,null).pipe(Object(P.a)())},e.prototype.dispatchGetRecentDiagrams=function(){return this.diagramInfoLocator.hasRecentDiagrams()?(this.commandService.dispatch(T.a.getRecentDiagrams),Object(g.a)([])):this.commandService.dispatch(T.a.getRecentDiagrams).pipe(Object(P.a)())},e.prototype.startSubscriptions=function(e){var t=this;if(e&&e.length){var n=e.filter((function(e){return e!==s.D.HOME})).map((function(e){return t.modelSubManager.start(s.C,e).pipe(Object(C.a)((function(e){return e.status})),Object(S.a)((function(e){return e.subStatus!==l.f.created})),Object(O.a)((function(e){e.subStatus===l.f.errored&&t.logger.error("Error occurred when starting project subscription: ",e.error)})),Object(y.a)(1))}));return n.length>0?m.a.apply(void 0,Object(i.j)(n)):Object(g.a)({})}throw new Error("No ids were received by the GetUserProjects command.")},e.prototype.handlePermError=function(e){e.data&&setTimeout((function(){throw new d.l("diagram create failed",e.data)}))},e.prototype.listenToTabChanges=function(){var e=this;return this.state.changes("FolderPanelSelectedTab").pipe(Object(S.a)((function(e){return!!e})),Object(O.a)((function(t){e.selectedTab.next(t)})),Object(S.a)((function(e){return"recent"!==e})))},e.prototype.onDocumentStatusChange=function(e){var t=this.state.get("FolderPanelSelectedTab");if("recent"===t){var n=this.state.get("RecentDiagrams");-1!==(a=n.findIndex((function(t){return t.id===e.id})))&&(n[a].status=e.status,this.state.set("RecentDiagrams",Object(i.j)(n)))}else if(t){var a,r=this.state.get("FolderPanelSelectedProject")||s.D.HOME,o=this.state.get("ProjectDiagrams"),c=o[r];-1!==(a=c.findIndex((function(t){return t.id===e.id})))&&(c[a].status=e.status,o[r]=Object(i.j)(c),this.state.set("ProjectDiagrams",o))}},e.prototype.listenToDocumentStatusChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(C.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(C.a)((function(e){return e.getDiagramChanges()})),Object(j.a)((function(e){return{id:e.model.id,status:e.model.status}})),Object(w.a)(),Object(S.a)((function(e){var t=Object(i.h)(e,2),n=t[0],a=t[1];return n.status!==a.status})),Object(j.a)((function(e){var t=Object(i.h)(e,2);t[0];return t[1]})))})))},e.prototype.listenToDiagramListChanges=function(){var e=this;this.diagramList=this.state.changes("FolderPanelSelectedTab").pipe(Object(C.a)((function(t){if(e.isFolderEmpty.next(!1),e.showLoadingIndicator.next(!0),"recent"===t)return e.dispatchGetRecentDiagrams().pipe(Object(C.a)((function(){return e.diagramInfoLocator.getRecentDiagrams()})));var n=e.state.get("FolderPanelSelectedProject")||s.D.HOME;return e.getDiagrams(n)})),Object(C.a)((function(t){return e.searchList(t)})),Object(C.a)((function(t){return e.filterList(t)})),Object(C.a)((function(t){return e.sortList(t)})),Object(O.a)((function(t){var n=!(t.length>0);e.isFolderEmpty.next(n),e.showLoadingIndicator.next(!1)})))},e.prototype.getDiagrams=function(e){var t=this.state.get("CurrentUser");return e===s.D.HOME||e===s.D.SHARED_HOME?this.diagramInfoLocator.getDiagrams(s.D.HOME).pipe(Object(j.a)((function(n){return n.filter((function(n){var i=Object(p.find)(n.collabs,{role:s.g.OWNER});return e===s.D.SHARED_HOME?i&&i.id!==t:i&&i.id===t}))}))):this.diagramInfoLocator.getDiagrams(e)},e.prototype.listenToSidebarStateChanges=function(){var e=this;return this.state.changes("LeftSidebarState").pipe(Object(C.a)((function(t){switch(e.sidebarState=t,e.changeDetectorRef.markForCheck(),t){case D.b.Expanding:return e.fadeContent(!1).start().pipe(Object(O.a)({complete:function(){return e.columns=3}}));case D.b.Shrinking:case D.b.Collapsing:return e.fadeContent(!1).start().pipe(Object(O.a)({complete:function(){e.columns=1,e.permissionFilter.next(Fe.ANY),e.sortOrder.next(He.LAST_UPDATED)}}));case D.b.Expanded:case D.b.Opened:return e.fadeContent().start();case D.b.Closed:return e.fadeContent(!1).start();default:return b.a}})))},e.prototype.fadeContent=function(e){void 0===e&&(e=!0);var t={opacity:1},n={opacity:0},i=n,a=t;e||(i=t,a=n);var r=new o.e({from:i,to:a,transitionProperty:"opacity",duration:50,easing:"linear"});return r.element=this.contentContainer.nativeElement,r},e.prototype.listenToSelectedProjectChange=function(){var e=this;return this.state.changes("FolderPanelSelectedProject").pipe(Object(S.a)((function(e){return e&&""!==e})),Object(C.a)((function(t){return e.dispatchGetUserProjects().pipe(Object(k.a)(t))})),Object(C.a)((function(t){return e.projectModels.value.find((function(e){return e.id===t}))?(e.isFolderEmpty.next(!1),e.startSubscriptions([t]).pipe(Object(k.a)(t))):v.a})),Object(j.a)((function(t){var n=t===s.D.SHARED_HOME?s.D.HOME:t;return e.projectMdl=e.projectModels.pipe(Object(j.a)((function(e){return t===s.D.SHARED_HOME?new s.x(s.D.SHARED_HOME,"LABELS.SHARED_HOME"):e.find((function(e){return e.id===t}))}))),n})),Object(C.a)((function(t){return e.dispatchGetProjectDiagrams(t).pipe(Object(P.a)(),Object(O.a)((function(){e.state.set("FolderPanelSelectedTab","diagrams")})))})))},e.prototype.searchList=function(e){return this.searchText.pipe(Object(I.a)(""),Object(_.a)(this.debounce),Object(j.a)((function(t){return t?Object(u.go)(t,e,{key:"name"}).map((function(e){return e.obj})):e})))},e.prototype.filterList=function(e){var t=this;return this.permissionFilter.pipe(Object(j.a)((function(n){var i=t.state.get("CurrentUser");switch(n){case Fe.ANY:return e;case Fe.CREATED_BY_ME:return e.filter((function(e){return!!e.collabs&&e.collabs.filter((function(e){return e.id===i&&e.role===s.g.OWNER})).length>0}));case Fe.SHARED_BY_ME:return e.filter((function(e){return!!e.collabs&&e.collabs.length>1&&e.collabs.filter((function(e){return e.id===i&&e.role===s.g.OWNER})).length>0}));case Fe.SHARED_BY_OTHERS:return e.filter((function(e){return!!e.collabs&&e.collabs.length>1&&e.collabs.filter((function(e){return e.id===i&&(e.role===s.g.EDITOR||e.role===s.g.REVIEWER)})).length>0}));case Fe.NOT_SHARED:return e.filter((function(e){return!!e.collabs&&1===e.collabs.length&&e.collabs.filter((function(e){return e.id===i&&e.role===s.g.OWNER})).length>0}));case Fe.PRIVATE:return e.filter((function(e){return!!e.privacy&&e.privacy.level===d.p.SPECIFIC&&!!e.collabs&&1===e.collabs.length}));case Fe.PUBLIC:return e.filter((function(e){return!!e.privacy&&e.privacy.level===d.p.PUBLIC}));default:return e}})))},e.prototype.sortList=function(e){return this.sortOrder.pipe(Object(j.a)((function(t){switch(t){case He.LAST_UPDATED:return Object(p.orderBy)(e,["lastUpdated"],["desc"]);case He.LAST_CREATED:return Object(p.orderBy)(e,["createdTime"],["desc"]);default:return e}})))},e.prototype.navigateToProjectDiagrams=function(e){this.setSelectedProject(e),this.setSelectedTab("diagrams")},e.prototype.setSelectedProject=function(e){this.state.set("FolderPanelSelectedProject",e)},e.prototype.updateProjectList=function(e,t){var n=this.projectModels.value,i=n.findIndex((function(t){return t.id===e})),a=n[i];a&&"rename"===t.action?a.name=t.name:a&&"delete"===t.action&&i>-1&&n.splice(i,1),this.projectModels.next(n)},e.\u0275fac=function(t){return new(t||e)(L.fc(s.w),L.fc(d.x),L.fc(s.i),L.fc(r.B),L.fc(d.o),L.fc(R.d),L.fc(r.Jb),L.fc(l.d),L.fc(r.db),L.fc(E.a),L.fc(L.j),L.fc(N.e),L.fc(s.n),L.fc(r.gb))},e.\u0275cmp=L.Zb({type:e,selectors:[["folder-panel"]],viewQuery:function(e,t){var n;(1&e&&(L.hd(ve,!0),L.hd(Oe,!0,A.a),L.Vc(ye,!0)),2&e)&&(L.Lc(n=L.uc())&&(t.dropdownItem=n.first),L.Lc(n=L.uc())&&(t.diagramArea=n.first),L.Lc(n=L.uc())&&(t.contentContainer=n.first))},decls:58,vars:53,consts:[[1,"folder-panel","left-sidebar-panel",3,"ngClass"],["contentContainer",""],[1,"folder-panel-project-bar"],[3,"projectList"],[1,"folder-panel-container"],[1,"folder-panel-header","folder-panel-padding","fx-margin-bottom-10"],["class","folder-panel-arrow-header",4,"ngIf"],["icon","search-thin","data-testid","fp-search-input",1,"folder-panel-search",3,"showClearButton","emitForInputChange","placeholder","updateText"],[1,"folder-panel-header-buttons"],[1,"project-collabs"],[3,"limitCount"],["class","nu-btn-med nu-btn-icon-text primary folder-panel-header-button","translate","",3,"disabled","click",4,"ngIf"],["data-testid","fp-sort-by","direction","down",1,"sort-drop-down",3,"settings"],["sortDropDown",""],["ddbutton","",3,"items"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-sort"],["dditem","",1,"simple-dd-item"],["translate","",1,"grey","dt-dropdown-item-label"],["dditem","","class","simple-dd-item",3,"item",4,"ngFor","ngForOf"],["data-testid","fp-filter","direction","down",1,"filter-drop-down",3,"settings"],["filterDropDown",""],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-filter"],[1,"folder-panel-expanded-search-container","folder-panel-padding","fx-margin-bottom-10"],[1,"folder-panel-search-section-wrapper"],[1,"folder-panel-search-container"],["icon","search-thin",1,"folder-panel-search",3,"showClearButton","emitForInputChange","placeholder","updateText"],[1,"folder-panel-btn-container"],["data-testid","fp-create-workspace-button","translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["class","fx-margin-top-10","color","grey",4,"ngIf"],[1,"folder-panel-content"],["class","folder-panel-default-msg fx-margin-top-20",4,"ngIf"],[1,"project-diagrams-scrollbar",3,"psScrollY"],[3,"diagramList","columnCount","projectCount","isUserPaused"],["diagramArea",""],[1,"folder-panel-arrow-header"],[1,"folder-panel-folder-name-heading"],["translate","",1,"nu-text-medium"],["class","folder-panel-folder-name-heading",4,"ngIf"],[4,"ngIf"],["class","option-dd",4,"ngIf"],[3,"value","changedText",4,"ngIf"],[3,"value","focus","selectAll","changedText",4,"ngIf"],[3,"value","changedText"],[3,"value","focus","selectAll","changedText"],[1,"option-dd"],["class","option-dd-button nu-btn-med secondary",3,"mouseenter",4,"projectRole"],[1,"option-dd-item",3,"mouseleave"],["dropdownItem",""],["translate","",3,"click",4,"projectRole"],["translate","",3,"disabled","click",4,"projectRole"],[1,"option-dd-button","nu-btn-med","secondary",3,"mouseenter"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["translate","",3,"click"],["translate","",1,"nu-btn-med","nu-btn-icon-text","primary","folder-panel-header-button",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-share"],["dditem","",1,"simple-dd-item",3,"item"],[1,"dt-dropdown-item",3,"click"],["color","grey",1,"fx-margin-top-10"],[1,"folder-panel-default-msg","fx-margin-top-20"],["translate","",1,"grey","fx-center"]],template:function(e,t){if(1&e){var n=L.mc();L.lc(0,"div",0,1),L.lc(2,"div",2),L.gc(3,"project-bar",3),L.kc(),L.lc(4,"div",4),L.lc(5,"div",5),L.ad(6,Ce,4,0,"div",6),L.yc(7,"async"),L.ad(8,Ae,3,3,"div",6),L.yc(9,"async"),L.lc(10,"text-input",7),L.tc("updateText",(function(e){return t.searchText.next(e)})),L.yc(11,"translate"),L.kc(),L.lc(12,"div",8),L.lc(13,"div",9),L.gc(14,"project-user-strip",10),L.kc(),L.ad(15,Le,5,3,"button",11),L.yc(16,"async"),L.yc(17,"async"),L.lc(18,"abs-dropdown",12,13),L.lc(20,"simple-dropdown-button",14),L.wc(),L.lc(21,"svg",15),L.gc(22,"use",16),L.kc(),L.kc(),L.vc(),L.lc(23,"simple-dropdown-item",17),L.lc(24,"label",18),L.cd(25,"LABELS.SORT_BY"),L.kc(),L.kc(),L.ad(26,Re,3,2,"simple-dropdown-item",19),L.kc(),L.lc(27,"abs-dropdown",20,21),L.lc(29,"simple-dropdown-button",14),L.wc(),L.lc(30,"svg",15),L.gc(31,"use",22),L.kc(),L.kc(),L.vc(),L.lc(32,"simple-dropdown-item",17),L.lc(33,"label",18),L.cd(34,"LABELS.FILTER_BY"),L.kc(),L.kc(),L.ad(35,Ne,3,2,"simple-dropdown-item",19),L.kc(),L.kc(),L.kc(),L.lc(36,"div",23),L.lc(37,"div",24),L.lc(38,"div",25),L.lc(39,"text-input",26),L.tc("updateText",(function(e){return t.searchText.next(e)})),L.yc(40,"translate"),L.kc(),L.kc(),L.lc(41,"div",27),L.lc(42,"button",28),L.tc("click",(function(){return t.createDiagram()})),L.yc(43,"async"),L.yc(44,"async"),L.wc(),L.lc(45,"svg",15),L.gc(46,"use",29),L.kc(),L.cd(47," FOLDER_PANEL.CREATE_DOCUMENT "),L.kc(),L.kc(),L.kc(),L.ad(48,Ue,1,0,"loading-bubbles",30),L.yc(49,"async"),L.kc(),L.vc(),L.lc(50,"div",31),L.yc(51,"async"),L.yc(52,"async"),L.ad(53,Be,5,0,"div",32),L.yc(54,"async"),L.lc(55,"perfect-scrollbar",33),L.tc("psScrollY",(function(e){L.Oc(n);var t=L.Mc(57);return null==t?null:t.onScroll(e)})),L.gc(56,"diagram-list-area",34,35),L.kc(),L.kc(),L.kc(),L.kc()}if(2&e){var i=null;L.Cc("ngClass",t.sidebarState),L.Sb(3),L.Cc("projectList",t.projectModels),L.Sb(3),L.Cc("ngIf","recent"===L.zc(7,27,t.selectedTab)),L.Sb(2),L.Cc("ngIf","recent"!==L.zc(9,29,t.selectedTab)),L.Sb(2),L.Dc("placeholder",L.zc(11,31,"PLACEHOLDERS.SEARCH")),L.Cc("showClearButton",!0)("emitForInputChange",!0),L.Sb(4),L.Cc("limitCount",5),L.Sb(1),L.Cc("ngIf","home"!==(null==(i=L.zc(16,33,t.projectMdl))?null:i.id)&&"shared-home"!==(null==(i=L.zc(17,35,t.projectMdl))?null:i.id)),L.Sb(3),L.Cc("settings",L.Gc(51,Ve)),L.Sb(2),L.Cc("items",t.sortOptions),L.Sb(6),L.Cc("ngForOf",t.sortOptions),L.Sb(1),L.Cc("settings",L.Gc(52,Ve)),L.Sb(2),L.Cc("items",t.filterOptions),L.Sb(6),L.Cc("ngForOf",t.filterOptions),L.Sb(4),L.Dc("placeholder",L.zc(40,37,"PLACEHOLDERS.SEARCH")),L.Cc("showClearButton",!0)("emitForInputChange",!0),L.Sb(3),L.Cc("disabled",L.zc(43,39,t.isUserPaused)||0===L.zc(44,41,t.appConnectionStatus)),L.Sb(6),L.Cc("ngIf",L.zc(49,43,t.showLoadingIndicator)),L.Sb(2),L.Xb("folder-panel-content-recent","recent"===L.zc(51,45,t.selectedTab)||"diagrams"===L.zc(52,47,t.selectedTab)),L.Sb(3),L.Cc("ngIf",L.zc(54,49,t.isFolderEmpty)),L.Sb(3),L.Cc("diagramList",t.diagramList)("columnCount",t.columns)("projectCount",t.projectCount)("isUserPaused",t.isUserPaused)}},directives:[U.q,te,U.t,ne.a,pe,he.a,fe.a,ge.a,N.a,U.s,Q.b,A.a,me.a,s.A,be.a],pipes:[U.b,N.d],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:215px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.folder-panel[_ngcontent-%COMP%]{display:flex;will-change:opacity;background-color:#f6f6f9;border-right:1px solid #d3d3e7}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%]{margin-top:0;width:-webkit-max-content;width:-moz-max-content;width:max-content;margin-left:10px}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-default-msg[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-loading-bubbles[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-header[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%]{display:none}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]{display:block}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .folder-panel-search[_ngcontent-%COMP%]{display:block;width:100%}.folder-panel.collapsing[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%], .folder-panel.expanded[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%], .folder-panel.shrinking[_ngcontent-%COMP%]   .folder-panel-expanded-search-container[_ngcontent-%COMP%]   .filter-drop-down[_ngcontent-%COMP%]{min-width:138px}.project-collabs[_ngcontent-%COMP%]{margin-right:10px}.option-dd[_ngcontent-%COMP%]{position:relative}.option-dd[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.option-dd-button[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.option-dd-item[_ngcontent-%COMP%]{width:100px;padding:10px;background:#fff;border:1px solid #dcdcdc;border-radius:4px;display:none;position:absolute;z-index:1;right:0}.option-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.option-dd-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.folder-panel-container[_ngcontent-%COMP%]{margin-top:10px;width:100%}.folder-panel-project-bar[_ngcontent-%COMP%]{background-color:#fff;border-right:1px solid #d3d3e7;height:100vh;width:300px}.folder-panel-header[_ngcontent-%COMP%]   .folder-panel-header-button[_ngcontent-%COMP%]{margin-top:10px;width:100%}.folder-panel-expanded-search-container[_ngcontent-%COMP%]{display:none}.folder-panel-search-section-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:5px}.folder-panel-search-container[_ngcontent-%COMP%]{flex-grow:1}.folder-panel-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-left:10px}.folder-panel-content[_ngcontent-%COMP%]{height:calc(100vh - 109px)}.folder-panel-content-recent[_ngcontent-%COMP%]{height:calc(100vh - 113px)}.folder-panel-tabs[_ngcontent-%COMP%]{display:flex;font-size:14px;padding-right:10px}.folder-panel-arrow-header[_ngcontent-%COMP%]{display:flex}.folder-panel-arrow-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer;width:30px}.folder-panel-arrow-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{color:#ffc648}.folder-panel-arrow-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;padding-left:10px;padding-top:2px}.folder-panel-heading[_ngcontent-%COMP%]{width:100px}.folder-panel-heading[_ngcontent-%COMP%]:hover{color:#ffc648}.folder-panel-heading[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{border-bottom:2px solid #ffc648}.folder-panel-heading[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;padding-bottom:5px}.folder-panel-default-msg[_ngcontent-%COMP%]{line-height:20px;padding-left:15px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;padding-left:5px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .editable-label-container{white-space:normal;height:auto;word-break:break-all}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .editable-label{font-size:16px}.folder-panel-folder-name-heading[_ngcontent-%COMP%]  .option-dd .option-dd-button, .folder-panel-folder-name-heading[_ngcontent-%COMP%]  .option-dd .option-dd-button .nu-icon{height:25px}.folder-panel-header-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.folder-panel-header-buttons[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]{margin-left:10px}.folder-panel-header-buttons[_ngcontent-%COMP%]  .dt-dropdown-item{display:block}.folder-panel-header-buttons[_ngcontent-%COMP%]  .dt-dropdown-item-label{display:block;margin-bottom:10px}.folder-panel-header-buttons[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper simple-dropdown-item:not(:last-child) .dt-dropdown-item{margin-bottom:5px}"],changeDetection:0}),e}()},jDMA:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("D57K"),a=n("qMyy"),r=n("5xGT"),o=n("nsO7"),c=n("ZTXN"),s=n("g6G6"),l=n("ROBh"),d=n("6Oco"),u=n("3p4X"),p=n("xVbo"),h=n("TLy2"),f=n("8j5Y"),g=n("J+dc"),m=n("cJ9h"),b=n("YtkY"),v=n("w1VY"),O=n("7zx0"),y=n("flPR"),C=n("h1tj"),x=function(e){function t(t,n){var i=e.call(this)||this;return i.peerId=t,i.user=n,i.onChange=function(){return null},i.prepare(),i}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.animate=function(e,n,i){void 0===i&&(i=t.ANIMATION_DURATION),C.Tween.get(this,{override:!0,onChange:this.onChange}).to({x:e,y:n},i,C.Ease.linear)},t.prototype.prepare=function(){var e=new C.Shape;e.graphics.clear(),e.graphics.beginFill(this.user.displayColor),e.graphics.moveTo(0,0),e.graphics.lineTo(3,12),e.graphics.lineTo(4,4),e.graphics.lineTo(12,3),e.graphics.lineTo(0,0),e.graphics.endFill();var t=new C.Text(this.user.fullName,"12px Arial","#fff");t.x=12,t.y=12;var n=new C.Shape,i=t.getMeasuredWidth()+12,a=t.getMeasuredHeight()+12;n.graphics.beginFill(this.user.displayColor),n.graphics.drawRect(6,6,i,a),n.graphics.endFill(),this.addChild(e),this.addChild(n),this.addChild(t)},t.ANIMATION_DURATION=100,t}(C.Container),P=n("wkcE"),S=n("EM62"),j=function(e){function t(t,n,i,a,r){var o=e.call(this,t)||this;return o.state=t,o.diagToViewport=n,o.realtimeStates=i,o.commandService=a,o.collabLocator=r,o.addSource=new c.a,o.removeSource=new c.a,o.changeSource=new c.a,o.pointers={},o.pointerData={},o}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(o.values)(this.pointers)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("RealtimeConnectionStatus").pipe(Object(p.a)((function(e){return e===O.a.ONLINE})),Object(h.a)((function(){return e.state.changes("CurrentDiagram").pipe(Object(f.a)((function(){e.removeAllIndicators()})),Object(h.a)((function(){return Object(s.a)(e.listenToViewportChanges(),e.listenToRealtimePointerStates(),e.listenToRealtimeSelectedStates(),e.listenToAddedPeers(),e.listenToCleanupInterval(),e.listenToRemovedPeers())})))}))).subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.listenToRealtimeSelectedStates=function(){var e=this;return this.realtimeStates.get(n.KEY_SELECTED).pipe(Object(f.a)((function(t){var n=JSON.parse(t.value),i=e.state.get("Selected").filter((function(e){return n.includes(e)}));i.length&&e.commandService.dispatch(a.a.selectShapes,{shapeIds:i,remove:!0}),e.updateSelectionBlockState(t.userId,n)})))},t.prototype.listenToAddedPeers=function(){var e=this;return this.realtimeStates.addedPeers().pipe(Object(h.a)((function(t){return e.realtimeStates.get(n.KEY_POINTERS).pipe(Object(p.a)((function(e){return e.peerId===t})),Object(g.a)(1))})),Object(f.a)((function(){e.realtimeStates.set("selected",JSON.stringify(e.state.get("Selected")))})))},t.prototype.updateSelectionBlockState=function(e,t){var n=this.state.get("SelectionBlocked"),i=n&&n.length?n.find((function(t){return t.userId===e})):void 0;i?(i.selected=t,this.state.set("SelectionBlocked",n)):(n.push({userId:e,selected:t}),this.state.set("SelectionBlocked",n))},t.prototype.listenToRealtimePointerStates=function(){var e=this;return this.realtimeStates.get(n.KEY_POINTERS).pipe(Object(m.a)((function(t){var n=Boolean(e.pointerData[t.peerId]);return e.pointerData[t.peerId]=JSON.parse(t.value),e.pointerTime[t.peerId]=Date.now(),e.pointers[t.peerId]?Object(l.a)(e.pointers[t.peerId]):n?Object(d.b)():e.collabLocator.getCollab(t.userId).pipe(Object(p.a)((function(e){return!!e})),Object(g.a)(1),Object(b.a)((function(n){return e.createRealtimePointerIndicator(n,t.peerId)})))})),Object(f.a)((function(t){e.updateRealtimePointerIndicator(t)})))},t.prototype.listenToViewportChanges=function(){var e=this;return Object(s.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(f.a)((function(){return e.updateIndicatorPositions()})))},t.prototype.listenToCleanupInterval=function(){var e=this;return Object(u.a)(n.TIME_INACTIVE).pipe(Object(f.a)((function(){return e.removeOldIndicators()})))},t.prototype.listenToRemovedPeers=function(){var e=this;return this.realtimeStates.removedPeers().pipe(Object(f.a)((function(t){return e.removeIndicator(t)})))},t.prototype.removeIndicator=function(e){var t=this.pointers[e];t&&this.updateSelectionBlockState(t.user.id,[]);var n=this.indicators.findIndex((function(e){return e===t}));return this.indicators.splice(n,1),this.removeSource.next(t),delete this.pointers[e],delete this.pointerData[e],delete this.pointerTime[e],Object(d.b)()},t.prototype.removeAllIndicators=function(){var e,t;try{for(var n=Object(i.k)(this.indicators),a=n.next();!a.done;a=n.next()){var r=a.value;this.removeSource.next(r),r.destroy()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.pointers={},this.pointerData={},this.pointerTime={},Object(d.b)()},t.prototype.removeOldIndicators=function(){var e,t,a=Date.now()-n.TIME_INACTIVE;try{for(var r=Object(i.k)(Object.entries(this.pointerTime)),o=r.next();!o.done;o=r.next()){var c=Object(i.h)(o.value,2),s=c[0];c[1]<a&&this.removeIndicator(s)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return Object(d.b)()},t.prototype.updateIndicatorPositions=function(){var e,t;try{for(var n=Object(i.k)(Object.keys(this.pointers)),a=n.next();!a.done;a=n.next()){var r=a.value,o=this.pointers[r];this.updateRealtimePointerIndicator(o)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.createRealtimePointerIndicator=function(e,t){var n=this,i=new x(t,e);return this.pointers[t]=i,this.addSource.next(i),i.onChange=function(){return n.changeSource.next(i)},this.updateRealtimePointerIndicator(i,!1),i},t.prototype.updateRealtimePointerIndicator=function(e,t){void 0===t&&(t=!0);var n=this.pointerData[e.peerId],i=this.diagToViewport.x(n[0]),a=this.diagToViewport.y(n[1]);t?e.animate(i,a):(e.x=i,e.y=a)},t.KEY_POINTERS="pointer",t.KEY_SELECTED="selected",t.TIME_INACTIVE=6e4,t.\u0275fac=function(e){return new(e||t)(S.pc(r.Jb),S.pc(v.a),S.pc(O.b),S.pc(r.B),S.pc(P.a))},t.\u0275prov=S.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[r.Jb,v.a,O.b,r.B,P.a])],t)}(y.b)},qlkn:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("5xGT"),a=n("fqe/"),r=n("EM62"),o=function(){function e(e){this.auth=e}return Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.m.get("CYCLR_API_COMMANDS_URL")},enumerable:!1,configurable:!0}),e.prototype.fetchPost=function(e){return void 0===e&&(e={}),fetch(""+this.httpUrl,{method:"POST",headers:{"Content-Type":"application/json","creately-gravity-token":this.auth.token},body:JSON.stringify(e)}).then((function(e){if(e.status>=400&&e.status<600)throw new Error("Internal server error");return e.json()}))},e.\u0275fac=function(t){return new(t||e)(r.pc(a.a))},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},tHMF:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("D57K"),a=n("W9bu"),r=n("X0jn"),o=n("wx9+"),c=n("h1tj"),s=function(e){function t(n){var i=e.call(this)||this;i.translate=n,i.animationDuration=30,i.textPadding=5,i.onChange=function(){return null},i.text=new c.Text(i.translate.instant("TOOLTIPS.CLICK_TO_OPEN_LINK"),"12px Arial","#7E7E7E"),i.textRect=new c.Shape;var a=i.text.getMeasuredWidth()+2*i.textPadding,r=i.text.getMeasuredHeight()+2*i.textPadding;return i.clickableRect=new c.Shape,i.clickableRect.name=t.clickableRectName,i.clickableRect.alpha=0,i.textRect.graphics.clear().setStrokeStyle(1).beginStroke("#ECECEC").beginFill("#fff").drawRect(0,0,a,r).endFill(),i.textRect.setBounds(0,0,a,r),i.text.setBounds(0,0,i.text.getMeasuredWidth(),i.text.getMeasuredHeight()),i.circle=new c.Shape,i.addChild(i.circle),i.addChild(i.textRect),i.addChild(i.text),i.addChild(i.clickableRect),i.circle.graphics.clear(),i.circle.graphics.beginFill(t.ICON_COLOR),i.circle.graphics.beginStroke("#FFFFFF"),i.circle.graphics.setStrokeStyle(2),i.circle.graphics.drawCircle(0,0,5),i.circle.graphics.endStroke(),i.circle.graphics.endFill(),i.circle.shadow=new c.Shadow("rgba(0, 0, 0, 0.25)",0,2,3),i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"clickable",{set:function(e){this.clickableRect.alpha=e?1:0},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){},t.prototype.update=function(e,t){this.bounds=e,this.link=t,this.circle.x=e.right,this.circle.y=e.bottom,this.text.x=e.centerX-this.text.getBounds().width/2,this.text.y=e.bottom+this.textPadding+15,this.clickableRect.graphics.clear().beginFill("rgba(0,0,0,0.01)").drawRect(0,0,e.width,e.height).endFill(),this.clickableRect.x=e.x,this.clickableRect.y=e.y,this.textRect.x=e.centerX-this.textRect.getBounds().width/2,this.textRect.y=e.bottom+15,this.setVisibilty([this.text,this.textRect],!1)},t.prototype.toggleInfo=function(e){var t=this.text.isVisible()&&this.textRect.isVisible();if(this.bounds){var n=this.bounds.contains({x:e.x,y:e.y,width:0,height:0});!t&&n&&this.setVisibilty([this.text,this.textRect],!0),t&&!n&&this.setVisibilty([this.text,this.textRect],!1)}},t.prototype.setVisibilty=function(e,t){var n=this;e.forEach((function(e){return c.Tween.get(e,{override:!0,onChange:n.onChange}).to({alpha:t?1:0,visible:t},n.animationDuration)}))},t.ICON_COLOR="#5B7AEA",t.clickableRectName="clickableRect",t}(c.Container),l=n("5xGT"),d=n("ZTXN"),u=n("g6G6"),p=n("KTx3"),h=n("TLy2"),f=n("8j5Y"),g=n("YtkY"),m=n("J+dc"),b=n("xVbo"),v=n("QoSw"),O=n("flPR"),y=n("nsO7"),C=n("sXdR"),x=n("s2Ay"),P=n("EM62"),S=function(e){function t(t,n,i,a,r){var o=e.call(this,a)||this;return o.linkService=t,o.viewport=n,o.ll=i,o.state=a,o.translate=r,o._indicators={},o.addSource=new d.a,o.removeSource=new d.a,o.changeSource=new d.a,o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return Object(y.values)(this._indicators)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this.indicators.forEach((function(t){return t.visible=e}))},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(h.a)((function(){return e.removeIndicators(),e.init()})));this.subs.push(t.subscribe(),this.handleVisibility().subscribe(),this.handleKeyDown().subscribe(),this.handleKeyUp().subscribe(),this.handleClick().subscribe(),this.pointerMove().subscribe((function(t){e.indicators.forEach((function(e){return e.toggleInfo(t)}))})))},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.init=function(){var e=this;return Object(u.a)(this.ll.forCurrentObserver(!0).pipe(Object(h.a)((function(e){return e.getDiagramModel()})),Object(h.a)((function(t){return e.manageIndicators(t)}))),this.viewport.getShapeModels().pipe(Object(h.a)((function(t){return e.updateIndicators(t)}))))},t.prototype.handleKeyDown=function(){var e=this;return this.getKeyEvent("keydown").pipe(Object(f.a)((function(){return e.indicators.forEach((function(t){t.clickable=!0,e.changeSource.next(t)}))})))},t.prototype.handleKeyUp=function(){var e=this;return this.getKeyEvent("keyup").pipe(Object(f.a)((function(){return e.indicators.forEach((function(t){t.clickable=!1,e.changeSource.next(t)}))})))},t.prototype.handleClick=function(){var e=this;return Object(p.a)(this.indicatorLayer,"click").pipe(Object(f.a)((function(t){if(t.target&&t.target.name===s.clickableRectName){var n=t.target.parent;n.link&&e.linkService.navigate(n.link)}})))},t.prototype.handleVisibility=function(){var e=this;return this.state.changes("Selected").pipe(Object(h.a)((function(t){return e.ll.forCurrentObserver(!0).pipe(Object(h.a)((function(e){return e.getDiagramModel()})),Object(g.a)((function(e){return{ids:t,diagram:e}})))})),Object(f.a)((function(t){var n=t.ids,i=t.diagram;if(0===n.length)e.indicators.forEach((function(t){t.circle.visible=!0,e.changeSource.next(t)}));else if(1===n.length){(a=e._indicators[n[0]])&&(a.circle.visible=!1,e.changeSource.next(a))}else if(n.length>1&&i.isShapeInGroup(n)){var a,r=i.getGroupHierarchy(n[0])[0];(a=e._indicators[r])&&(a.circle.visible=!1,e.changeSource.next(a))}})))},t.prototype.pointerMove=function(e){return void 0===e&&(e=200),Object(p.a)(this.indicatorLayer.canvas,"mousemove").pipe(Object(C.lodashThrottle)(e,{leading:!0,trailing:!0}),Object(g.a)((function(e){return{x:e.x,y:e.y}})))},t.prototype.manageIndicators=function(e){var t=this,n=[];for(var a in e.groups){var r=e.groups[a];(r.links&&r.links.length>0||r.link)&&n.push(a)}return this.viewport.getShapeModels().pipe(Object(m.a)(1),Object(f.a)((function(e){var a=Object(y.values)(e).filter((function(e){return e.links&&e.links.length>0||e.link})).map((function(e){return e.id})),r=Object(i.j)(n,a);t.manageIndicatorsRemove(r),t.manageIndicatorsAdd(r)})))},t.prototype.manageIndicatorsRemove=function(e){var t=this;Object.keys(this._indicators).forEach((function(n){e.includes(n)||t.removeIndicator(n)}))},t.prototype.removeIndicators=function(){var e=this;Object.keys(this._indicators).forEach((function(t){return e.removeIndicator(t)})),this._indicators={}},t.prototype.manageIndicatorsAdd=function(e){var t=this;e.forEach((function(e){t._indicators[e]||(t._indicators[e]=new s(t.translate),t._indicators[e].onChange=function(){return t.changeSource.next(t._indicators[e])},t.addSource.next(t._indicators[e]))}))},t.prototype.updateIndicators=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(h.a)((function(e){return e.getDiagramOnce()})),Object(f.a)((function(n){Object.keys(t._indicators).forEach((function(i){var a=e[i];if(a){var r=t._indicators[i],o=a.bounds,c=void 0;a.links&&a.links.length>0?c=a.links[0]:a.link&&(c=a.link),r.update(o,c),t.changeSource.next(r)}else if(n.groups[i]){r=t._indicators[i];var s=n.groups[i],l=s.shapes.map((function(t){return e[t]})),d=l[0].bounds;l.forEach((function(e,t){t>0&&d.absorb(e.bounds)}));c=void 0;s.links&&s.links.length>0?c=s.links[0]:s.link&&(c=s.link),r.update(d,c),t.changeSource.next(r)}}))})))},t.prototype.getKeyEvent=function(e){return Object(p.a)(window,e).pipe(Object(b.a)((function(e){return e.keyCode===r.k.Command||e.keyCode===r.k.Control})))},t.prototype.removeIndicator=function(e){var t=this._indicators[e];this.removeSource.next(t),delete this._indicators[e]},t.\u0275fac=function(e){return new(e||t)(P.pc(a.a),P.pc(o.a),P.pc(v.a),P.pc(l.Jb),P.pc(x.e))},t.\u0275prov=P.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(O.a)(),Object(i.g)("design:paramtypes",[a.a,o.a,v.a,l.Jb,x.e])],t)}(O.b)},weoZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));var i=n("Jzy8"),a=n("8j5Y"),r=n("J+dc"),o=n("TaSY"),c=n("xVbo"),s=n("TLy2"),l=n("C05f"),d=n("ROBh"),u=n("HM3f"),p=n("6Oco"),h=n("5xGT"),f=n("4y1S"),g=n("xnGY"),m=n("S0Xf"),b=n("NNJu"),v=n("C5+t"),O=n("foQ2"),y=n("8EYK"),C=n("QoSw"),x=n("Q4Fx"),P=n("c7W3"),S=n("EM62"),j=n("sEIs"),w=n("s2Ay"),k=n("2kYt"),I=n("crdX"),_=n("K0+f"),E=n("ZTXN"),M=n("mWib"),T=n("RTAa"),D=n("JupZ"),A=n("jHi0");function L(e,t){1&e&&(S.lc(0,"div",9),S.wc(),S.lc(1,"svg",10),S.gc(2,"use",11),S.kc(),S.vc(),S.lc(3,"span",12),S.lc(4,"p",13),S.cd(5,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.HEADING"),S.kc(),S.lc(6,"p",14),S.cd(7,"TOOLTIPS.DOCUMENT_LOCK.DOCUMENT_LOCK_INDICATOR.DESCRIPTION"),S.kc(),S.kc(),S.kc())}var R=function(e){return{value1Type:"diagramId",value1:e}},N=function(e){return{event:"left.dashboard.recentDocument.click",data:e}},U=function(){function e(e,t,n,i,a){this.state=e,this.router=t,this.elementRef=n,this.modelSubManager=i,this.diagramNavigation=a,this.enteredToViewport=new l.a(!1)}return Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.state.get("CurrentDiagram")===this.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollCheck",{set:function(e){!this.enteredToViewport.value&&D.is(this.elementRef.nativeElement)&&this.enteredToViewport.next(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.state.get("CurrentDiagram");"start"!==n?n===e?this.state.set("SelectedLeftPanel","shapes"):this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(r.a)(1),Object(a.a)((function(){t.diagramNavigation.navigateToDiagram(e,"edit")}))).subscribe():this.diagramNavigation.navigateToDiagram(e,"edit")},e.\u0275fac=function(t){return new(t||e)(S.fc(h.Jb),S.fc(j.d),S.fc(S.r),S.fc(g.d),S.fc(T.a))},e.\u0275cmp=S.Zb({type:e,selectors:[["diagram-info-item"]],inputs:{name:"name",folderName:"folderName",lastUpdatedMoment:"lastUpdatedMoment",isUserPaused:"isUserPaused",id:"id",scrollCheck:"scrollCheck"},features:[S.Rb([h.Ab])],decls:13,vars:8,consts:[[1,"diagram-info-item",3,"trackAction","click"],[1,"diagram-info-icon"],[1,"nu-icon","purple"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-document"],[1,"diagram-info-text-info","fx-ellipsis"],[1,"diagram-info-doc-name","fx-margin-bottom-5"],[1,"fx-ellipsis"],["translate",""],["tooltip","","placement","bottom",4,"ngIf"],["tooltip","","placement","bottom"],[1,"nu-icon","nu-icon-small","grey"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-lock"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"]],template:function(e,t){1&e&&(S.lc(0,"div",0),S.tc("click",(function(){return t.navToSelectedDiagram(t.id)})),S.lc(1,"div",1),S.wc(),S.lc(2,"svg",2),S.gc(3,"use",3),S.kc(),S.kc(),S.vc(),S.lc(4,"div",4),S.lc(5,"div",5),S.lc(6,"h2",6),S.cd(7),S.kc(),S.kc(),S.lc(8,"span",7),S.cd(9,"LABELS.LAST_OPENED"),S.kc(),S.lc(10,"span"),S.cd(11),S.kc(),S.kc(),S.ad(12,L,8,0,"div",8),S.kc()),2&e&&(S.Cc("trackAction",S.Hc(6,N,S.Hc(4,R,t.id))),S.Sb(7),S.dd(t.name),S.Sb(4),S.ed(" "," "+t.lastUpdatedMoment,""),S.Sb(1),S.Cc("ngIf",t.isUserPaused))},directives:[_.a,w.a,k.t,A.a],styles:[".diagram-info-item[_ngcontent-%COMP%]{padding:15px 20px;display:flex;align-items:center;border:1px solid #d3d3e7;border-radius:4px;background-color:#fff;box-shadow:0 2px 2px #c3c3de;width:396.5px}.diagram-info-item[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #bcbcda;background-color:#f4fcfa}.diagram-info-text-info[_ngcontent-%COMP%]{flex:1}.diagram-info-text-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px;flex:1;margin:0}.diagram-info-text-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#7e7e7e}.diagram-info-doc-name[_ngcontent-%COMP%]{display:flex;align-items:center}.diagram-info-icon[_ngcontent-%COMP%]{margin-right:20px}.diagram-info-call[_ngcontent-%COMP%]{margin-left:20px}.diagram-info-user-count[_ngcontent-%COMP%]{display:flex}.diagram-info-count-bubble[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:100%;text-align:center;line-height:25px;color:#fff;position:relative}.diagram-info-notifications[_ngcontent-%COMP%]{margin-right:-5px;margin-left:20px;background-color:#f36c67;z-index:1}.diagram-info-user-count-lbl[_ngcontent-%COMP%]{background-color:#f6f6fa;margin-right:-10px}.diagram-info-user-count[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block}"],changeDetection:0}),e}();function B(e,t){if(1&e&&(S.gc(0,"diagram-info-item",2),S.yc(1,"async")),2&e){var n=t.$implicit,i=S.xc();S.Cc("id",null==n?null:n.id)("name",null==n?null:n.name)("folderName",null==n?null:n.project)("lastUpdatedMoment",i.getLastOpenedMoment(n))("scrollCheck",S.zc(1,6,i.scroll))("isUserPaused",i.isUserPaused)}}var F=function(e){return{"diagram-info-list-area-three-columns":e}},H=function(){function e(){this._columnCount=1,this._scroll=new E.a,this.scroll=this._scroll.pipe(Object(M.a)(e.scrollDebounce))}return Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnCount},set:function(e){this._columnCount=e},enumerable:!1,configurable:!0}),e.prototype.getDiagramTrackId=function(e,t){return t.id},e.prototype.getLastOpenedMoment=function(e){return new i.j(e.id,e.name,e).lastUpdatedMoment()},e.prototype.onScroll=function(e){this._scroll.next(e)},e.scrollDebounce=400,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=S.Zb({type:e,selectors:[["diagram-info-list-area"]],inputs:{diagramList:"diagramList",isUserPaused:"isUserPaused",columnCount:"columnCount"},decls:3,vars:7,consts:[[1,"diagram-info-list-area-container","diagram-info-list-area-grid",3,"ngClass"],[3,"id","name","folderName","lastUpdatedMoment","scrollCheck","isUserPaused",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","name","folderName","lastUpdatedMoment","scrollCheck","isUserPaused"]],template:function(e,t){1&e&&(S.lc(0,"div",0),S.ad(1,B,2,8,"diagram-info-item",1),S.yc(2,"async"),S.kc()),2&e&&(S.Cc("ngClass",S.Hc(5,F,3===t.columnCount)),S.Sb(1),S.Cc("ngForOf",S.zc(2,3,t.diagramList))("ngForTrackBy",t.getDiagramTrackId))},directives:[k.q,k.s,U],pipes:[k.b],styles:[".diagram-info-list-area-container[_ngcontent-%COMP%]   diagram-info-item[_ngcontent-%COMP%]{float:left;box-sizing:border-box;margin-bottom:15px}.diagram-info-list-area-container[_ngcontent-%COMP%]   diagram-info-item[_ngcontent-%COMP%]:nth-child(odd){margin-right:10px}.diagram-info-list-area-container[_ngcontent-%COMP%]   diagram-info-item[_ngcontent-%COMP%]:nth-child(2n){margin-left:10px}"],changeDetection:0}),e}(),V=n("xEGh"),G=n("62De"),Y=["diagramArea"],z=["contentContainer"];function W(e,t){if(1&e&&(S.lc(0,"h1"),S.cd(1),S.yc(2,"async"),S.kc()),2&e){var n=t.ngIf,i=S.xc();S.Sb(1),S.ed("",S.zc(2,1,i.getWelcomeHeader(n.firstName)),"!")}}function X(e,t){1&e&&S.gc(0,"loading-bubbles",21)}var J=function(){return{event:"left.dashboard.moreDocuments.click"}};function K(e,t){if(1&e){var n=S.mc();S.lc(0,"div",22),S.lc(1,"a",23),S.tc("click",(function(){return S.Oc(n),S.xc(2).showDocuments(!0)})),S.cd(2,"DASHBOARD_PANEL.MORE_RECENT"),S.kc(),S.kc()}2&e&&(S.Sb(1),S.Cc("trackAction",S.Gc(1,J)))}function Z(e,t){if(1&e&&(S.wc(),S.vc(),S.lc(0,"div",14),S.lc(1,"h2",15),S.cd(2,"DASHBOARD_PANEL.CONTINUE_YOUR_WORK"),S.kc(),S.ad(3,X,1,0,"loading-bubbles",16),S.yc(4,"async"),S.lc(5,"div",17),S.gc(6,"diagram-info-list-area",18,19),S.yc(8,"async"),S.kc(),S.ad(9,K,3,2,"div",20),S.yc(10,"async"),S.kc()),2&e){var n=S.xc();S.Sb(3),S.Cc("ngIf",S.zc(4,5,n.showLoadingIndicator)),S.Sb(3),S.Cc("diagramList",n.diagramList)("columnCount",n.columns)("isUserPaused",S.zc(8,7,n.isUserPaused)),S.Sb(3),S.Cc("ngIf",S.zc(10,9,n.recentCount)>8)}}var q=function(e,t,n){return{id:e,name:t,type:n,location:"left.dashboard.featuredTemplate"}};function Q(e,t){if(1&e){var n=S.mc();S.lc(0,"template-thumbnail",26),S.tc("onButtonClick",(function(e){S.Oc(n);var t=S.xc().$implicit;return S.xc().navigateToTemplate(t.id,e)})),S.yc(1,"async"),S.kc()}if(2&e){var i=S.xc().$implicit,a=S.xc();S.Cc("name",i.name)("thumbImg",i.thumbUrl)("isUserPaused",S.zc(1,4,a.isUserPaused))("trackingInfo",S.Jc(6,q,i.id,i.name,i.type))}}function $(e,t){if(1&e&&(S.lc(0,"div",24),S.ad(1,Q,2,10,"template-thumbnail",25),S.kc()),2&e){var n=t.$implicit;S.Sb(1),S.Cc("ngIf",n)}}var ee=function(){return{event:"left.dashboard.createDiagram.click"}},te=function(){return{event:"left.dashboard.viewAllDiagram.click"}},ne=function(){function e(e,t,n,i,a,r,o,c,s,d,u,p,h,f){this.diagramInfoLocator=e,this.commandService=t,this.planPermManager=n,this.random=i,this.router=a,this.state=r,this.modelSubManager=o,this.logger=c,this.ll=s,this.changeDetectorRef=d,this.translate=u,this.env=p,this.userLocator=h,this.templateLoader=f,this.id="dashboard",this.expandSidebar=!0,this.debounce=200,this.showLoadingIndicator=new l.a(!0),this.isUserPaused=new l.a(!1),this.columns=1,this.permissionFilter=new l.a(O.b.ANY),this.sortOrder=new l.a(O.c.LAST_UPDATED),this.isExpandable=!0,this.subs=[],this.recentCount=new l.a(1)}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){var e=this;return this.state.changes(v.c).pipe(Object(a.a)((function(t){t===v.c.ONLINE&&e.state.get("LeftSidebarState")===x.b.Opened&&e.onOpen()})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.listenToSidebarStateChanges().subscribe(),this.checkUserPauseStatus().subscribe()),this.fetchRecentDiagram(),this.userMdl=this.userLocator.getUserData()},e.prototype.onOpen=function(){},e.prototype.getWelcomeHeader=function(e){return this.translate.get("DASHBOARD_PANEL.WELCOME",{name:e})},e.prototype.getfeaturedTemplates=function(){return this.templateLoader.featuredTemplates},e.prototype.navigateToTemplate=function(e,t){"use"===t&&this.createDiagram(e)},e.prototype.checkUserPauseStatus=function(){var e=this;return this.userLocator.isUserPaused().pipe(Object(r.a)(1),Object(a.a)((function(t){return e.isUserPaused.next(t)})))},e.prototype.showDocuments=function(e){this.state.set("SelectedLeftPanel","folders"),e?this.state.set("FolderPanelSelectedTab","recent"):this.state.set("FolderPanelSelectedTab","diagrams")},e.prototype.createDiagram=function(e){var t=this;void 0===e&&(e="");var n={};e&&e.length>0&&(n={templateId:e}),this.router.navigate(["start/new/project/home"],{queryParams:n}).catch((function(e){return t.handlePermError(e)}))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.dispatchGetRecentDiagrams=function(){return this.diagramInfoLocator.hasRecentDiagrams()?(this.commandService.dispatch(P.a.getRecentDiagrams),Object(d.a)([])):this.commandService.dispatch(P.a.getRecentDiagrams).pipe(Object(o.a)())},e.prototype.handlePermError=function(e){e.data&&setTimeout((function(){throw new f.l("diagram create failed",e.data)}))},e.prototype.fetchRecentDiagram=function(){var e=this;this.diagramList=Object(u.b)(this.state.changes("LeftSidebarState").pipe(Object(c.a)((function(e){return"expanded"===e}))),this.state.changes("SelectedLeftPanel").pipe(Object(c.a)((function(e){return"dashboard"===e})))).pipe(Object(a.a)((function(){e.showLoadingIndicator.next(!0)})),Object(s.a)((function(){return e.dispatchGetRecentDiagrams().pipe(Object(s.a)((function(){return e.diagramInfoLocator.getRecentDiagrams().pipe(Object(a.a)((function(t){e.recentCount.next(t.length),e.showLoadingIndicator.next(!1)})),Object(s.a)((function(e){return Object(d.a)(e.slice(0,8))})))})))})))},e.prototype.listenToSidebarStateChanges=function(){var e=this;return this.state.changes("LeftSidebarState").pipe(Object(s.a)((function(t){switch(e.sidebarState=t,e.changeDetectorRef.markForCheck(),t){case x.b.Expanding:return e.fadeContent(!1).start().pipe(Object(a.a)({complete:function(){return e.columns=2}}));case x.b.Shrinking:case x.b.Collapsing:return e.fadeContent(!1).start().pipe(Object(a.a)({complete:function(){e.columns=1,e.permissionFilter.next(O.b.ANY),e.sortOrder.next(O.c.LAST_UPDATED)}}));case x.b.Expanded:case x.b.Opened:return e.fadeContent().start();default:return p.a}})))},e.prototype.fadeContent=function(e){void 0===e&&(e=!0);var t={opacity:1},n={opacity:0},i=n,a=t;e||(i=t,a=n);var r=new b.e({from:i,to:a,transitionProperty:"opacity",duration:50,easing:"linear"});return r.element=this.contentContainer.nativeElement,r},e.\u0275fac=function(t){return new(t||e)(S.fc(i.i),S.fc(h.B),S.fc(f.o),S.fc(h.sb),S.fc(j.d),S.fc(h.Jb),S.fc(g.d),S.fc(h.db),S.fc(C.a),S.fc(S.j),S.fc(w.e),S.fc(h.F),S.fc(f.x),S.fc(y.a))},e.\u0275cmp=S.Zb({type:e,selectors:[["dashboard-panel"]],viewQuery:function(e,t){var n;(1&e&&(S.hd(Y,!0,m.a),S.Vc(z,!0)),2&e)&&(S.Lc(n=S.uc())&&(t.diagramArea=n.first),S.Lc(n=S.uc())&&(t.contentContainer=n.first))},decls:23,vars:17,consts:[[1,"dashboard-panel","left-sidebar-panel",3,"ngClass"],["contentContainer",""],[1,"dashboard-panel-inner"],[4,"ngIf"],[1,"dashboard-buttons"],["data-testid","create-workspace-button","translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"trackAction","disabled","click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["translate","",1,"nu-btn-med","nu-btn-on-grey","fx-no-margin","dashboard-panel-header-button",3,"trackAction","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-documents"],["class","dashboard-panel-content",4,"ngIf"],["translate","",1,"fx-margin-top-30"],[1,"template-thumbnail-items-container"],["class","template-thumbnail",4,"ngFor","ngForOf"],[1,"dashboard-panel-content"],["translate",""],["class","fx-margin-top-20","color","grey",4,"ngIf"],[1,"dashboard-recent-docs-container"],[3,"diagramList","columnCount","isUserPaused"],["diagramArea",""],["class","fx-text-right",4,"ngIf"],["color","grey",1,"fx-margin-top-20"],[1,"fx-text-right"],["translate","",1,"dashboard-panel-more-recent","primary",3,"trackAction","click"],[1,"template-thumbnail"],[3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick",4,"ngIf"],[3,"name","thumbImg","isUserPaused","trackingInfo","onButtonClick"]],template:function(e,t){1&e&&(S.lc(0,"div",0,1),S.lc(2,"perfect-scrollbar"),S.lc(3,"div",2),S.ad(4,W,3,3,"h1",3),S.yc(5,"async"),S.lc(6,"div",4),S.lc(7,"button",5),S.tc("click",(function(){return t.createDiagram()})),S.yc(8,"async"),S.yc(9,"async"),S.wc(),S.lc(10,"svg",6),S.gc(11,"use",7),S.kc(),S.cd(12," FOLDER_PANEL.CREATE_DOCUMENT "),S.kc(),S.vc(),S.lc(13,"button",8),S.tc("click",(function(){return t.showDocuments(!1)})),S.wc(),S.lc(14,"svg",6),S.gc(15,"use",9),S.kc(),S.cd(16," DASHBOARD_PANEL.VIEW_ALL_DIAGRAM "),S.kc(),S.kc(),S.ad(17,Z,11,11,"div",10),S.yc(18,"async"),S.vc(),S.lc(19,"h2",11),S.cd(20,"DASHBOARD_PANEL.FEATURED_TEMPLATES"),S.kc(),S.lc(21,"div",12),S.ad(22,$,2,1,"div",13),S.kc(),S.kc(),S.kc(),S.kc()),2&e&&(S.Cc("ngClass",t.sidebarState),S.Sb(4),S.Cc("ngIf",S.zc(5,7,t.userMdl)),S.Sb(3),S.Cc("trackAction",S.Gc(15,ee))("disabled",S.zc(8,9,t.isUserPaused)||0===S.zc(9,11,t.appConnectionStatus)),S.Sb(6),S.Cc("trackAction",S.Gc(16,te)),S.Sb(4),S.Cc("ngIf",S.zc(18,13,t.recentCount)>0),S.Sb(5),S.Cc("ngForOf",t.getfeaturedTemplates()))},directives:[k.q,I.b,k.t,w.a,_.a,k.s,H,V.a,G.a],pipes:[k.b],styles:[".left-sidebar-panel[_ngcontent-%COMP%]{width:215px}.left-sidebar-panel.collapsing[_ngcontent-%COMP%], .left-sidebar-panel.expanded[_ngcontent-%COMP%], .left-sidebar-panel.shrinking[_ngcontent-%COMP%]{width:890px}.left-sidebar-panel.closed[_ngcontent-%COMP%]{transform:translateX(-215px);width:0}.left-sidebar-panel-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.left-sidebar-panel[_ngcontent-%COMP%]{width:100%;background-color:#f6f6f9;padding-left:25px}.dashboard-panel-inner[_ngcontent-%COMP%]{padding-right:25px}.dashboard-panel[_ngcontent-%COMP%]{height:100vh;border-right:1px solid #d3d3e7;background-image:url(/assets/images/dashboard/dashboard-bg.svg);background-position:100% 0;background-repeat:no-repeat}.dashboard-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dashboard-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Questrial,sans-serif}.dashboard-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:25px;margin-bottom:25px;margin-top:35px}.dashboard-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px}.dashboard-section[_ngcontent-%COMP%]{margin-bottom:70px}.dashboard-buttons[_ngcontent-%COMP%]{margin-bottom:25px;display:flex}.dashboard-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}.dashboard-buttons[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-left:-8px}.dashboard-recent-docs-container[_ngcontent-%COMP%]{display:flex}.template-thumbnail-items-container[_ngcontent-%COMP%]{margin-bottom:20px;display:inline-grid;grid-template-columns:auto auto auto;grid-row-gap:10px;grid-column-gap:10px;grid-template-columns:repeat(auto-fit,minmax(195px,195px));width:100%}.dashboard-panel-more-recent[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0}),e}()},"wp/b":function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("D57K"),a=n("h1tj"),r=function(e){function t(){var t=e.call(this)||this;return t.onChange=function(){return null},t.shape=new a.Shape,t.addChild(t.shape),t}return Object(i.e)(t,e),t.prototype.destroy=function(){},t.prototype.initDraw=function(e){this.shape.alpha=1,this.shape.visible=!0,this.shape.graphics.clear().setStrokeStyle(t.thickness).beginStroke(t.color).drawRect(0,0,e.width,e.height).endStroke(),this.updatePosition(e),this.animate()},t.prototype.updatePosition=function(e){this.shape.x=e.x,this.shape.y=e.y},t.prototype.animate=function(){a.Tween.get(this.shape,{override:!0,onChange:this.onChange}).to({alpha:0,visible:!1},t.animationDuration)},t.animationDuration=2e3,t.color="#F6AA00",t.thickness=2,t}(a.Container),o=n("wx9+"),c=n("5xGT"),s=n("ZTXN"),l=n("8lHc"),d=n("6Oco"),u=n("Ohay"),p=n("TLy2"),h=n("xVbo"),f=n("kuMc"),g=n("jIqt"),m=n("0Woy"),b=n("8j5Y"),v=n("YtkY"),O=n("QoSw"),y=n("flPR"),C=n("nsO7"),x=n("EM62"),P=function(e){function t(t,n,i){var a=e.call(this,i)||this;return a.viewport=t,a.ll=n,a.state=i,a.addSource=new s.a,a.removeSource=new s.a,a.changeSource=new s.a,a}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return[this._indicator]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){this.indicators.forEach((function(t){return t.visible=e}))},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this.state.changes("InterfaceControlState").pipe(Object(u.a)(C.isEqual),Object(p.a)((function(t){return e.removeIndicator(),e.init()})));this.subs.push(t.subscribe())},t.prototype.createAddSource=function(){return this.addSource},t.prototype.createRemoveSource=function(){return this.removeSource},t.prototype.createChangeSource=function(){return this.changeSource},t.prototype.init=function(){var e=this;return this.state.changes("ShapelinkTarget").pipe(Object(h.a)((function(e){return e.shapeId||e.groupId})),Object(p.a)((function(t){return e.addIndicator(),e.getBounds(t).pipe(Object(f.a)(Object(l.a)(r.animationDuration)),Object(g.a)(null),Object(m.a)(),Object(b.a)((function(t){var n=Object(i.h)(t,2),a=n[0],r=n[1];null===a?(e._indicator.initDraw(r),e.changeSource.next(e._indicator)):(e._indicator.updatePosition(r),e.changeSource.next(e._indicator))})))})))},t.prototype.getBounds=function(e){var t=this;return e.shapeId?this.viewport.getShapeModel(e.shapeId).pipe(Object(v.a)((function(e){return e.bounds}))):e.groupId?this.ll.forCurrentObserver(!0).pipe(Object(p.a)((function(e){return e.getDiagramOnce()})),Object(p.a)((function(n){if(n.groups[e.groupId]){var i=n.getShapesInGroup(e.groupId);return t.viewport.getShapeModels(i).pipe(Object(v.a)((function(e){var t=Object(C.values)(e),n=t[0].bounds;return t.forEach((function(e){n.absorb(e.bounds)})),n})))}return Object(d.b)()}))):void 0},t.prototype.addIndicator=function(){var e=this;this._indicator||(this._indicator=new r,this.addSource.next(this._indicator),this._indicator.onChange=function(){return e.changeSource.next(e._indicator)})},t.prototype.removeIndicator=function(){this._indicator&&(this.removeSource.next(this._indicator),this._indicator=null)},t.\u0275fac=function(e){return new(e||t)(x.pc(o.a),x.pc(O.a),x.pc(c.Jb))},t.\u0275prov=x.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(y.a)(),Object(i.g)("design:paramtypes",[o.a,O.a,c.Jb])],t)}(y.b)},ys29:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("C05f"),a=n("EM62"),r=n("8Tlt"),o=n("2kYt"),c=function(){function e(){this.isPreview=!1,this.loading=new i.a(!0)}return e.prototype.imageLoaded=function(){var e=this;setTimeout((function(){e.loading.next(!1)}),0)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Zb({type:e,selectors:[["thumbnail-image"]],inputs:{url:"url",isPreview:"isPreview"},decls:7,vars:7,consts:[[1,"thumb-img-container","fx-center-all"],[1,"thumb-img-loader-container","white"],[1,"thumb-img-image-container","fx-center-all"],["draggable","false",3,"src","load"],["thumbnail",""]],template:function(e,t){1&e&&(a.lc(0,"div",0),a.yc(1,"async"),a.lc(2,"div",1),a.gc(3,"shape-thumbnail-loader"),a.kc(),a.lc(4,"div",2),a.lc(5,"img",3,4),a.tc("load",(function(){return t.imageLoaded()})),a.kc(),a.kc(),a.kc()),2&e&&(a.Xb("loading",a.zc(1,5,t.loading)),a.Sb(4),a.Xb("preview",t.isPreview),a.Sb(1),a.Cc("src",t.url,a.Rc))},directives:[r.a],pipes:[o.b],styles:[".thumb-img-container[_ngcontent-%COMP%]{position:relative}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-loader-container[_ngcontent-%COMP%]{display:block}.thumb-img-container.loading[_ngcontent-%COMP%]   .thumb-img-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumb-img-container[_ngcontent-%COMP%]   .thumb-img-image-container.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:80px;max-height:80px}.thumb-img-container[_ngcontent-%COMP%]   .thumb-img-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:35px;max-height:35px}.thumb-img-image-container[_ngcontent-%COMP%], .thumb-img-loader-container[_ngcontent-%COMP%]{width:100%;height:35px}.thumb-img-loader-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:none}"],changeDetection:0}),e}()}}]);
//# sourceMappingURL=1.bab9c29189d0dc69c16b.js.map