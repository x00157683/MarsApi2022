(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+AVE":function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,n){function i(){var e=a;r(e)&&e.a.parentNode&&n(e.g)}var a=e;t(e.b,i),t(e.c,i),r(e)}function o(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,c=null,u=null,l=null;function p(){return null===l&&(l=!!document.fonts),l}function d(){if(null===u){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}u=""!==e.style.font}return u}function h(e,t){return[e.style,e.weight,d()?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var r=this,o=e||"BESbswy",u=0,l=t||3e3,d=(new Date).getTime();return new Promise((function(e,t){if(p()&&!function(){if(null===c)if(p()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);c=!!e&&603>parseInt(e[1],10)}else c=!1;return c}()){var f=new Promise((function(e,t){!function n(){(new Date).getTime()-d>=l?t(Error(l+"ms timeout exceeded")):document.fonts.load(h(r,'"'+r.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),g=new Promise((function(e,t){u=setTimeout((function(){t(Error(l+"ms timeout exceeded"))}),l)}));Promise.race([g,f]).then((function(){clearTimeout(u),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=m&&-1!=v||-1!=m&&-1!=b||-1!=v&&-1!=b)&&((t=m!=v&&m!=b&&v!=b)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(m==y&&v==y&&b==y||m==C&&v==C&&b==C||m==O&&v==O&&b==O)),t=!t),t&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(u),e(r))}var p=new n(o),f=new n(o),g=new n(o),m=-1,v=-1,b=-1,y=-1,C=-1,O=-1,x=document.createElement("div");x.dir="ltr",i(p,h(r,"sans-serif")),i(f,h(r,"serif")),i(g,h(r,"monospace")),x.appendChild(p.a),x.appendChild(f.a),x.appendChild(g.a),document.body.appendChild(x),y=p.a.offsetWidth,C=f.a.offsetWidth,O=g.a.offsetWidth,function e(){if((new Date).getTime()-d>=l)x.parentNode&&x.parentNode.removeChild(x),t(Error(l+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(m=p.a.offsetWidth,v=f.a.offsetWidth,b=g.a.offsetWidth,c()),u=setTimeout(e,50)}}(),a(p,(function(e){m=e,c()})),i(p,h(r,'"'+r.family+'",sans-serif')),a(f,(function(e){v=e,c()})),i(f,h(r,'"'+r.family+'",serif')),a(g,(function(e){b=e,c()})),i(g,h(r,'"'+r.family+'",monospace'))}))}))},e.exports=o}()},"+B2w":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("D57K"),r=n("C05f"),a=n("4y1S"),o=n("5xGT"),s=n("NNJu"),c=n("EM62"),u=["tourContainer"],l=["tourInner"];function p(e,t){if(1&e){var n=c.mc();c.lc(0,"div"),c.lc(1,"div",6),c.gc(2,"tour-card",7),c.kc(),c.lc(3,"div",8),c.lc(4,"div",9),c.lc(5,"tour-pagination",10),c.tc("navButtonClicked",(function(e){return c.Oc(n),c.xc().navigateToCard(e)})),c.kc(),c.kc(),c.lc(6,"div",11),c.gc(7,"tour-buttons",12),c.kc(),c.kc(),c.kc()}if(2&e){var i=t.ngIf,r=c.xc();c.Sb(2),c.Cc("heading",i.heading)("description",i.description)("image",i.image)("alignment",i.alignment),c.Sb(3),c.Cc("cardList",r.cards)("selected",i.id),c.Sb(2),c.Cc("buttons",i.buttons)}}var d=function(e){function t(t,n,i){var a=e.call(this)||this;return a.user=t,a.commandService=n,a.modalController=i,a.tourVideoLinks=["https://creately-tour-videos.s3.amazonaws.com/1.mp4","https://creately-tour-videos.s3.amazonaws.com/2.mp4","https://creately-tour-videos.s3.amazonaws.com/3.mp4","https://creately-tour-videos.s3.amazonaws.com/4.mp4","https://creately-tour-videos.s3.amazonaws.com/5.mp4"],a.subs=[],a.currentCard=new r.a(0),a}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"currentData",{get:function(){var e=this;return this.cards.filter((function(t){return t.id===e.currentCard.value}))[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultButtons",{get:function(){var e=this;return[{id:"tour.button.later",label:"TOUR.BUTTONS.LATER",style:"outlined",clickHandler:function(){return e.closeWindow()},testId:"tour-button-later"},{id:"tour.button.next",label:"TOUR.BUTTONS.NEXT",style:"primary",clickHandler:function(){return e.nextCard()},testId:"tour-button-next"}]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cards",{get:function(){var e=this;return[{id:0,heading:"TOUR.CARD1.HEADING",description:"TOUR.CARD1.DESC",image:"./assets/images/tour/tour-start.svg",alignment:"center",paginationSymbol:"dot",buttons:[{id:"tour.button.later",label:"TOUR.BUTTONS.MAYBE_LATER",style:"outlined",clickHandler:function(){return e.closeWindow()},testId:"tour-button-later"},{id:"tour.button.start",label:"TOUR.BUTTONS.HAVE_A_LOOK",style:"primary",clickHandler:function(){return e.nextCard()},testId:"tour-button-start"}]},{id:1,heading:"TOUR.CARD2.HEADING",description:"TOUR.CARD2.DESC",image:"https://creately-tour-videos.s3.amazonaws.com/1.mp4",alignment:"left",paginationSymbol:"dot",buttons:this.defaultButtons},{id:2,heading:"TOUR.CARD3.HEADING",description:"TOUR.CARD3.DESC",image:"https://creately-tour-videos.s3.amazonaws.com/2.mp4",alignment:"left",paginationSymbol:"dot",buttons:this.defaultButtons},{id:3,heading:"TOUR.CARD4.HEADING",description:"TOUR.CARD4.DESC",image:"https://creately-tour-videos.s3.amazonaws.com/3.mp4",alignment:"left",paginationSymbol:"dot",buttons:this.defaultButtons},{id:4,heading:"TOUR.CARD5.HEADING",description:"TOUR.CARD5.DESC",image:"https://creately-tour-videos.s3.amazonaws.com/4.mp4",alignment:"left",paginationSymbol:"dot",buttons:this.defaultButtons},{id:5,heading:"TOUR.CARD6.HEADING",description:"TOUR.CARD6.DESC",image:"https://creately-tour-videos.s3.amazonaws.com/5.mp4",alignment:"left",paginationSymbol:"dot",buttons:this.defaultButtons},{id:6,heading:"TOUR.CARD7.HEADING",description:"TOUR.CARD7.DESC",image:"./assets/images/tour/tour-end.svg",alignment:"center",paginationSymbol:"present",buttons:[{id:"tour.button.complete",label:"TOUR.BUTTONS.DONE",style:"primary",clickHandler:function(){return e.closeWindow()},testId:"tour-button-complete"}]}]},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.prefetchTourVideosIfNeeded();var e=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(e)},t.prototype.prefetchTourVideosIfNeeded=function(){document.head.hasAttribute("tour-preloaded")||(this.tourVideoLinks.forEach((function(e){var t=document.createElement("link");t.setAttribute("rel","prefetch"),t.setAttribute("href",e),t.setAttribute("as","video"),t.setAttribute("type","video/mp4"),document.head.appendChild(t)})),document.head.setAttribute("tour-preloaded","true"))},t.prototype.nextCard=function(){this.currentCard.value+1<=this.cards.length-1&&this.currentCard.next(this.cards[this.currentCard.value+1].id)},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide(),e.commandService.dispatch(a.u.updateUserPreference,{preferenceName:"app_tour_progress",value:-1})}});this.subs.push(t)},t.prototype.navigateToCard=function(e){this.currentCard.next(e)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.fc(a.x),c.fc(o.B),c.fc(o.gb))},t.\u0275cmp=c.Zb({type:t,selectors:[["tour-window"]],viewQuery:function(e,t){var n;(1&e&&(c.Vc(u,!0),c.Vc(l,!0)),2&e)&&(c.Lc(n=c.uc())&&(t.container=n.first),c.Lc(n=c.uc())&&(t.containerInner=n.first))},features:[c.Pb],decls:6,vars:1,consts:[[1,"tour-window","fx-cover"],["tourContainer",""],[1,"tour-inner-positioning","fx-center-without-flex"],[1,"tour-inner"],["tourInner",""],[4,"ngIf"],[1,"tour-cards-container","primary"],[3,"heading","description","image","alignment"],[1,"tour-controls-container","white","fx-center-vertical"],[1,"tour-pagination-container"],[3,"cardList","selected","navButtonClicked"],[1,"tour-buttons-container"],[3,"buttons"]],template:function(e,t){1&e&&(c.lc(0,"div",0,1),c.lc(2,"div",2),c.lc(3,"div",3,4),c.ad(5,p,8,7,"div",5),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(5),c.Cc("ngIf",t.currentData))},styles:[".tour-window[_ngcontent-%COMP%]{z-index:10;opacity:0;background-color:hsla(0,0%,40.8%,.8)}.tour-inner[_ngcontent-%COMP%], .tour-window[_ngcontent-%COMP%]{will-change:transform,opacity}.tour-inner[_ngcontent-%COMP%]{width:740px;height:560px;border-radius:4px;overflow:hidden;position:relative;display:flex;flex-direction:column;transform:translateY(30px)}.tour-controls-container[_ngcontent-%COMP%]{height:80px;padding-left:20px;padding-right:20px;border-top:1px solid #d3d3e7}.tour-cards-container[_ngcontent-%COMP%], .tour-pagination-container[_ngcontent-%COMP%]{flex:1}.tour-close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}"],changeDetection:0}),t}(s.q)},"+ETr":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("QoSw"),r=n("nsO7"),a=n("Xpu5"),o=n("K5wl"),s=n("TLy2"),c=n("xVbo"),u=n("8j5Y"),l=n("x77O"),p=n("5xGT"),d=n("6Oco"),h=n("EM62"),f=function(){function e(e,t,n,i){this.ll=e,this.commandService=t,this.changeBuilder=n,this.syncEdata=i}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeEDataChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=this,i=e.__sakota__.getChanges();return Object(r.isEmpty)(e.eData)||Object(r.isEmpty)(i)||"Execute"!==t?d.a:this.ll.forDiagram(e.id,!1).getDiagramOnce().pipe(Object(s.a)((function(t){return n.changeBuilder.buildChanges(e,t).pipe(Object(c.a)((function(e){return e.length>0})),Object(u.a)((function(t){n.syncEdata.syncEdataChanges(t,[e]),t.forEach((function(e){var t=e.__sakota__.getChanges();n.commandService.dispatch(a.a.applyModifierEData,e.id,{modifier:t})}))})))})))},e.\u0275fac=function(t){return new(t||e)(h.pc(i.a),h.pc(p.B),h.pc(l.a),h.pc(o.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},"/6pf":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("xVbo"),r=n("J+dc"),a=n("YtkY"),o=n("5xGT"),s=n("ROBh"),c=n("EM62"),u=function(){function e(e){this.state=e}return e.prototype.getFeatureData=function(e,t){return Object(s.a)(t)},e.prototype.getApplyData=function(e,t){return this.state.get("EditingText").open?this.state.changes("EditingText").pipe(Object(i.a)((function(e){return!e.open})),Object(r.a)(1),Object(a.a)((function(){return t}))):Object(s.a)(t)},e.\u0275fac=function(t){return new(t||e)(c.pc(o.Jb))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},"/AMt":function(e,t,n){"use strict";n.d(t,"a",(function(){return Dt}));var i,r,a=n("zjfJ"),o=n("K/z8"),s=n("0Jwk"),c=n("qDiq"),u=n("zygG"),l=(n("pWxA"),n("2h71")),p=n("PRnZ"),d=n("sRHE"),h=n("8K1b"),f=n("AqVP"),g=n("fGyu"),m=n("9fIP"),v=n("MMYH");function b(e){if(":"!=e[0])return[null,e];var t=e.indexOf(":",1);if(-1==t)throw new Error('Unsupported format "'.concat(e,'" expecting ":namespace:name"'));return[e.slice(1,t),e.slice(t+1)]}function y(e){return"ng-container"===b(e)[1]}function C(e){return"ng-content"===b(e)[1]}function O(e){return"ng-template"===b(e)[1]}function x(e){return null===e?null:b(e)[0]}function S(e,t){return e?":".concat(e,":").concat(t):t}!function(e){e[e.RAW_TEXT=0]="RAW_TEXT",e[e.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",e[e.PARSABLE_DATA=2]="PARSABLE_DATA"}(r||(r={}));var k={Aacute:"\xc1",aacute:"\xe1",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",AElig:"\xc6",aelig:"\xe6",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",Alpha:"\u0391",alpha:"\u03b1",amp:"&",and:"\u2227",ang:"\u2220",apos:"'",Aring:"\xc5",aring:"\xe5",asymp:"\u2248",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",bdquo:"\u201e",Beta:"\u0392",beta:"\u03b2",brvbar:"\xa6",bull:"\u2022",cap:"\u2229",Ccedil:"\xc7",ccedil:"\xe7",cedil:"\xb8",cent:"\xa2",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",clubs:"\u2663",cong:"\u2245",copy:"\xa9",crarr:"\u21b5",cup:"\u222a",curren:"\xa4",dagger:"\u2020",Dagger:"\u2021",darr:"\u2193",dArr:"\u21d3",deg:"\xb0",Delta:"\u0394",delta:"\u03b4",diams:"\u2666",divide:"\xf7",Eacute:"\xc9",eacute:"\xe9",Ecirc:"\xca",ecirc:"\xea",Egrave:"\xc8",egrave:"\xe8",empty:"\u2205",emsp:"\u2003",ensp:"\u2002",Epsilon:"\u0395",epsilon:"\u03b5",equiv:"\u2261",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",exist:"\u2203",fnof:"\u0192",forall:"\u2200",frac12:"\xbd",frac14:"\xbc",frac34:"\xbe",frasl:"\u2044",Gamma:"\u0393",gamma:"\u03b3",ge:"\u2265",gt:">",harr:"\u2194",hArr:"\u21d4",hearts:"\u2665",hellip:"\u2026",Iacute:"\xcd",iacute:"\xed",Icirc:"\xce",icirc:"\xee",iexcl:"\xa1",Igrave:"\xcc",igrave:"\xec",image:"\u2111",infin:"\u221e",int:"\u222b",Iota:"\u0399",iota:"\u03b9",iquest:"\xbf",isin:"\u2208",Iuml:"\xcf",iuml:"\xef",Kappa:"\u039a",kappa:"\u03ba",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",laquo:"\xab",larr:"\u2190",lArr:"\u21d0",lceil:"\u2308",ldquo:"\u201c",le:"\u2264",lfloor:"\u230a",lowast:"\u2217",loz:"\u25ca",lrm:"\u200e",lsaquo:"\u2039",lsquo:"\u2018",lt:"<",macr:"\xaf",mdash:"\u2014",micro:"\xb5",middot:"\xb7",minus:"\u2212",Mu:"\u039c",mu:"\u03bc",nabla:"\u2207",nbsp:"\xa0",ndash:"\u2013",ne:"\u2260",ni:"\u220b",not:"\xac",notin:"\u2209",nsub:"\u2284",Ntilde:"\xd1",ntilde:"\xf1",Nu:"\u039d",nu:"\u03bd",Oacute:"\xd3",oacute:"\xf3",Ocirc:"\xd4",ocirc:"\xf4",OElig:"\u0152",oelig:"\u0153",Ograve:"\xd2",ograve:"\xf2",oline:"\u203e",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",oplus:"\u2295",or:"\u2228",ordf:"\xaa",ordm:"\xba",Oslash:"\xd8",oslash:"\xf8",Otilde:"\xd5",otilde:"\xf5",otimes:"\u2297",Ouml:"\xd6",ouml:"\xf6",para:"\xb6",permil:"\u2030",perp:"\u22a5",Phi:"\u03a6",phi:"\u03c6",Pi:"\u03a0",pi:"\u03c0",piv:"\u03d6",plusmn:"\xb1",pound:"\xa3",prime:"\u2032",Prime:"\u2033",prod:"\u220f",prop:"\u221d",Psi:"\u03a8",psi:"\u03c8",quot:'"',radic:"\u221a",rang:"\u27e9",raquo:"\xbb",rarr:"\u2192",rArr:"\u21d2",rceil:"\u2309",rdquo:"\u201d",real:"\u211c",reg:"\xae",rfloor:"\u230b",Rho:"\u03a1",rho:"\u03c1",rlm:"\u200f",rsaquo:"\u203a",rsquo:"\u2019",sbquo:"\u201a",Scaron:"\u0160",scaron:"\u0161",sdot:"\u22c5",sect:"\xa7",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sim:"\u223c",spades:"\u2660",sub:"\u2282",sube:"\u2286",sum:"\u2211",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supe:"\u2287",szlig:"\xdf",Tau:"\u03a4",tau:"\u03c4",there4:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thinsp:"\u2009",THORN:"\xde",thorn:"\xfe",tilde:"\u02dc",times:"\xd7",trade:"\u2122",Uacute:"\xda",uacute:"\xfa",uarr:"\u2191",uArr:"\u21d1",Ucirc:"\xdb",ucirc:"\xfb",Ugrave:"\xd9",ugrave:"\xf9",uml:"\xa8",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",Uuml:"\xdc",uuml:"\xfc",weierp:"\u2118",Xi:"\u039e",xi:"\u03be",Yacute:"\xdd",yacute:"\xfd",yen:"\xa5",yuml:"\xff",Yuml:"\u0178",Zeta:"\u0396",zeta:"\u03b6",zwj:"\u200d",zwnj:"\u200c"};k.ngsp="\ue500";var w,E,I=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.closedByChildren,a=n.implicitNamespacePrefix,o=n.contentType,s=void 0===o?r.PARSABLE_DATA:o,c=n.closedByParent,u=void 0!==c&&c,l=n.isVoid,p=void 0!==l&&l,d=n.ignoreFirstLf,h=void 0!==d&&d,f=n.preventNamespaceInheritance,g=void 0!==f&&f;Object(m.a)(this,e),this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,i&&i.length>0&&i.forEach((function(e){return t.closedByChildren[e]=!0})),this.isVoid=p,this.closedByParent=u||p,this.implicitNamespacePrefix=a||null,this.contentType=s,this.ignoreFirstLf=h,this.preventNamespaceInheritance=g}return Object(v.a)(e,[{key:"isClosedByChild",value:function(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}}]),e}();function T(e){var t,n;return E||(w=new I,E={base:new I({isVoid:!0}),meta:new I({isVoid:!0}),area:new I({isVoid:!0}),embed:new I({isVoid:!0}),link:new I({isVoid:!0}),img:new I({isVoid:!0}),input:new I({isVoid:!0}),param:new I({isVoid:!0}),hr:new I({isVoid:!0}),br:new I({isVoid:!0}),source:new I({isVoid:!0}),track:new I({isVoid:!0}),wbr:new I({isVoid:!0}),p:new I({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new I({closedByChildren:["tbody","tfoot"]}),tbody:new I({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new I({closedByChildren:["tbody"],closedByParent:!0}),tr:new I({closedByChildren:["tr"],closedByParent:!0}),td:new I({closedByChildren:["td","th"],closedByParent:!0}),th:new I({closedByChildren:["td","th"],closedByParent:!0}),col:new I({isVoid:!0}),svg:new I({implicitNamespacePrefix:"svg"}),foreignObject:new I({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new I({implicitNamespacePrefix:"math"}),li:new I({closedByChildren:["li"],closedByParent:!0}),dt:new I({closedByChildren:["dt","dd"]}),dd:new I({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new I({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new I({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new I({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new I({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new I({closedByChildren:["optgroup"],closedByParent:!0}),option:new I({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new I({ignoreFirstLf:!0}),listing:new I({ignoreFirstLf:!0}),style:new I({contentType:r.RAW_TEXT}),script:new I({contentType:r.RAW_TEXT}),title:new I({contentType:r.ESCAPABLE_RAW_TEXT}),textarea:new I({contentType:r.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),null!==(n=null!==(t=E[e])&&void 0!==t?t:E[e.toLowerCase()])&&void 0!==n?n:w}var _,j,P=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g"),A=function(){function e(){Object(m.a)(this,e),this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return Object(v.a)(e,[{key:"isElementSelector",value:function(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}},{key:"hasElementSelector",value:function(){return!!this.element}},{key:"setElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.element=e}},{key:"getMatchingElementTemplate",value:function(){for(var e=this.element||"div",t=this.classNames.length>0?' class="'.concat(this.classNames.join(" "),'"'):"",n="",i=0;i<this.attrs.length;i+=2){var r=this.attrs[i],a=""!==this.attrs[i+1]?'="'.concat(this.attrs[i+1],'"'):"";n+=" ".concat(r).concat(a)}return T(e).isVoid?"<".concat(e).concat(t).concat(n,"/>"):"<".concat(e).concat(t).concat(n,"></").concat(e,">")}},{key:"getAttrs",value:function(){var e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}},{key:"addAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.attrs.push(e,t&&t.toLowerCase()||"")}},{key:"addClassName",value:function(e){this.classNames.push(e.toLowerCase())}},{key:"toString",value:function(){var e=this.element||"";if(this.classNames&&this.classNames.forEach((function(t){return e+=".".concat(t)})),this.attrs)for(var t=0;t<this.attrs.length;t+=2){var n=this.attrs[t],i=this.attrs[t+1];e+="[".concat(n).concat(i?"="+i:"","]")}return this.notSelectors.forEach((function(t){return e+=":not(".concat(t,")")})),e}}],[{key:"parse",value:function(t){var n,i=[],r=function(e,t){t.notSelectors.length>0&&!t.element&&0==t.classNames.length&&0==t.attrs.length&&(t.element="*"),e.push(t)},a=new e,o=a,s=!1;for(P.lastIndex=0;n=P.exec(t);){if(n[1]){if(s)throw new Error("Nesting :not in a selector is not allowed");s=!0,o=new e,a.notSelectors.push(o)}var c=n[2];if(c){var u=n[3];"#"===u?o.addAttribute("id",c.substr(1)):"."===u?o.addClassName(c.substr(1)):o.setElement(c)}var l=n[4];if(l&&o.addAttribute(l,n[6]),n[7]&&(s=!1,o=a),n[8]){if(s)throw new Error("Multiple selectors in :not are not supported");r(i,a),a=o=new e}}return r(i,a),i}}]),e}(),M=function(){function e(){Object(m.a)(this,e),this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}return Object(v.a)(e,[{key:"addSelectables",value:function(e,t){var n=null;e.length>1&&(n=new D(e),this._listContexts.push(n));for(var i=0;i<e.length;i++)this._addSelectable(e[i],t,n)}},{key:"_addSelectable",value:function(e,t,n){var i=this,r=e.element,a=e.classNames,o=e.attrs,s=new R(e,t,n);r&&(0===o.length&&0===a.length?this._addTerminal(i._elementMap,r,s):i=this._addPartial(i._elementPartialMap,r));if(a)for(var c=0;c<a.length;c++){var u=0===o.length&&c===a.length-1,l=a[c];u?this._addTerminal(i._classMap,l,s):i=this._addPartial(i._classPartialMap,l)}if(o)for(var p=0;p<o.length;p+=2){var d=p===o.length-2,h=o[p],f=o[p+1];if(d){var g=i._attrValueMap,m=g.get(h);m||(m=new Map,g.set(h,m)),this._addTerminal(m,f,s)}else{var v=i._attrValuePartialMap,b=v.get(h);b||(b=new Map,v.set(h,b)),i=this._addPartial(b,f)}}}},{key:"_addTerminal",value:function(e,t,n){var i=e.get(t);i||(i=[],e.set(t,i)),i.push(n)}},{key:"_addPartial",value:function(t,n){var i=t.get(n);return i||(i=new e,t.set(n,i)),i}},{key:"match",value:function(e,t){for(var n=!1,i=e.element,r=e.classNames,a=e.attrs,o=0;o<this._listContexts.length;o++)this._listContexts[o].alreadyMatched=!1;if(n=this._matchTerminal(this._elementMap,i,e,t)||n,n=this._matchPartial(this._elementPartialMap,i,e,t)||n,r)for(var s=0;s<r.length;s++){var c=r[s];n=this._matchTerminal(this._classMap,c,e,t)||n,n=this._matchPartial(this._classPartialMap,c,e,t)||n}if(a)for(var u=0;u<a.length;u+=2){var l=a[u],p=a[u+1],d=this._attrValueMap.get(l);p&&(n=this._matchTerminal(d,"",e,t)||n),n=this._matchTerminal(d,p,e,t)||n;var h=this._attrValuePartialMap.get(l);p&&(n=this._matchPartial(h,"",e,t)||n),n=this._matchPartial(h,p,e,t)||n}return n}},{key:"_matchTerminal",value:function(e,t,n,i){if(!e||"string"!=typeof t)return!1;var r=e.get(t)||[],a=e.get("*");if(a&&(r=r.concat(a)),0===r.length)return!1;for(var o=!1,s=0;s<r.length;s++)o=r[s].finalize(n,i)||o;return o}},{key:"_matchPartial",value:function(e,t,n,i){if(!e||"string"!=typeof t)return!1;var r=e.get(t);return!!r&&r.match(n,i)}}],[{key:"createNotMatcher",value:function(t){var n=new e;return n.addSelectables(t,null),n}}]),e}(),D=function e(t){Object(m.a)(this,e),this.selectors=t,this.alreadyMatched=!1},R=function(){function e(t,n,i){Object(m.a)(this,e),this.selector=t,this.cbContext=n,this.listContext=i,this.notSelectors=t.notSelectors}return Object(v.a)(e,[{key:"finalize",value:function(e,t){var n=!0;!(this.notSelectors.length>0)||this.listContext&&this.listContext.alreadyMatched||(n=!M.createNotMatcher(this.notSelectors).match(e,null));return!n||!t||this.listContext&&this.listContext.alreadyMatched||(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),n}}]),e}();U("Inject",(function(e){return{token:e}})),U("InjectionToken",(function(e){return{_desc:e,"\u0275prov":void 0}})),U("Attribute",(function(e){return{attributeName:e}})),U("ContentChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)})),U("ContentChild",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)})),U("ViewChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)})),U("ViewChild",(function(e,t){return Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)})),U("Directive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}));!function(e){e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(_||(_={})),function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(j||(j={}));U("Component",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({changeDetection:j.Default},e)})),U("Pipe",(function(e){return Object.assign({pure:!0},e)})),U("Input",(function(e){return{bindingPropertyName:e}})),U("Output",(function(e){return{bindingPropertyName:e}})),U("HostBinding",(function(e){return{hostPropertyName:e}})),U("HostListener",(function(e,t){return{eventName:e,args:t}})),U("NgModule",(function(e){return e})),U("Injectable",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}));var L,F,N={name:"custom-elements"},B={name:"no-errors-schema"};U("Optional"),U("Self"),U("SkipSelf"),U("Host");function U(e,t){function n(){var n=t?t.apply(void 0,arguments):{};return Object.assign({ngMetadataName:e},n)}return n.isTypeOf=function(t){return t&&t.ngMetadataName===e},n.ngMetadataName=e,n}function z(e){var t=function(e){var t=e.classNames&&e.classNames.length?[8].concat(Object(g.a)(e.classNames)):[];return[e.element&&"*"!==e.element?e.element:""].concat(Object(g.a)(e.attrs),Object(g.a)(t))}(e),n=e.notSelectors&&e.notSelectors.length?e.notSelectors.map((function(e){return function(e){var t=e.classNames&&e.classNames.length?[8].concat(Object(g.a)(e.classNames)):[];return e.element?[5,e.element].concat(Object(g.a)(e.attrs),Object(g.a)(t)):e.attrs.length?[3].concat(Object(g.a)(e.attrs),Object(g.a)(t)):e.classNames&&e.classNames.length?[9].concat(Object(g.a)(e.classNames)):[]}(e)})):[];return t.concat.apply(t,Object(g.a)(n))}function V(e){return e?A.parse(e).map(z):[]}!function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(L||(L={})),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore"}(F||(F={}));var G;!function(e){e[e.Const=0]="Const"}(G||(G={}));var H,W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(m.a)(this,e),this.modifiers=t}return Object(v.a)(e,[{key:"hasModifier",value:function(e){return-1!==this.modifiers.indexOf(e)}}]),e}();!function(e){e[e.Dynamic=0]="Dynamic",e[e.Bool=1]="Bool",e[e.String=2]="String",e[e.Int=3]="Int",e[e.Number=4]="Number",e[e.Function=5]="Function",e[e.Inferred=6]="Inferred",e[e.None=7]="None"}(H||(H={}));var Y,X,q=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r;return Object(m.a)(this,n),(r=t.call(this,i)).name=e,r}return Object(v.a)(n,[{key:"visitType",value:function(e,t){return e.visitBuiltinType(this,t)}}]),n}(W),K=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(m.a)(this,n),(r=t.call(this,i)).value=e,r.typeParams=a,r}return Object(v.a)(n,[{key:"visitType",value:function(e,t){return e.visitExpressionType(this,t)}}]),n}(W),J=new q(H.Dynamic),Z=new q(H.Inferred),Q=new q(H.Bool),$=(new q(H.Int),new q(H.Number)),ee=new q(H.String),te=(new q(H.Function),new q(H.None));function ne(e,t){return null==e||null==t?e==t:e.isEquivalent(t)}function ie(e,t){var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].isEquivalent(t[i]))return!1;return!0}!function(e){e[e.Minus=0]="Minus",e[e.Plus=1]="Plus"}(Y||(Y={})),function(e){e[e.Equals=0]="Equals",e[e.NotEquals=1]="NotEquals",e[e.Identical=2]="Identical",e[e.NotIdentical=3]="NotIdentical",e[e.Minus=4]="Minus",e[e.Plus=5]="Plus",e[e.Divide=6]="Divide",e[e.Multiply=7]="Multiply",e[e.Modulo=8]="Modulo",e[e.And=9]="And",e[e.Or=10]="Or",e[e.BitwiseAnd=11]="BitwiseAnd",e[e.Lower=12]="Lower",e[e.LowerEquals=13]="LowerEquals",e[e.Bigger=14]="Bigger",e[e.BiggerEquals=15]="BiggerEquals"}(X||(X={}));var re,ae=function(){function e(t,n){Object(m.a)(this,e),this.type=t||null,this.sourceSpan=n||null}return Object(v.a)(e,[{key:"prop",value:function(e,t){return new Re(this,e,null,t)}},{key:"key",value:function(e,t,n){return new Le(this,e,t,n)}},{key:"callMethod",value:function(e,t,n){return new he(this,e,t,null,n)}},{key:"callFn",value:function(e,t,n){return new fe(this,e,null,t,n)}},{key:"instantiate",value:function(e,t,n){return new ge(this,e,t,n)}},{key:"conditional",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new Ie(this,e,t,null,n)}},{key:"equals",value:function(e,t){return new De(X.Equals,this,e,null,t)}},{key:"notEquals",value:function(e,t){return new De(X.NotEquals,this,e,null,t)}},{key:"identical",value:function(e,t){return new De(X.Identical,this,e,null,t)}},{key:"notIdentical",value:function(e,t){return new De(X.NotIdentical,this,e,null,t)}},{key:"minus",value:function(e,t){return new De(X.Minus,this,e,null,t)}},{key:"plus",value:function(e,t){return new De(X.Plus,this,e,null,t)}},{key:"divide",value:function(e,t){return new De(X.Divide,this,e,null,t)}},{key:"multiply",value:function(e,t){return new De(X.Multiply,this,e,null,t)}},{key:"modulo",value:function(e,t){return new De(X.Modulo,this,e,null,t)}},{key:"and",value:function(e,t){return new De(X.And,this,e,null,t)}},{key:"bitwiseAnd",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new De(X.BitwiseAnd,this,e,null,t,n)}},{key:"or",value:function(e,t){return new De(X.Or,this,e,null,t)}},{key:"lower",value:function(e,t){return new De(X.Lower,this,e,null,t)}},{key:"lowerEquals",value:function(e,t){return new De(X.LowerEquals,this,e,null,t)}},{key:"bigger",value:function(e,t){return new De(X.Bigger,this,e,null,t)}},{key:"biggerEquals",value:function(e,t){return new De(X.BiggerEquals,this,e,null,t)}},{key:"isBlank",value:function(e){return this.equals(ze,e)}},{key:"cast",value:function(e,t){return new je(this,e,t)}},{key:"toStmt",value:function(){return new Xe(this,null)}}]),e}();!function(e){e[e.This=0]="This",e[e.Super=1]="Super",e[e.CatchError=2]="CatchError",e[e.CatchStack=3]="CatchStack"}(re||(re={}));var oe,se=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),a=t.call(this,i,r),"string"==typeof e?(a.name=e,a.builtin=null):(a.name=null,a.builtin=e),a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&this.builtin===e.builtin}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadVarExpr(this,t)}},{key:"set",value:function(e){if(!this.name)throw new Error("Built in variable ".concat(this.builtin," can not be assigned to."));return new le(this.name,e,null,this.sourceSpan)}}]),n}(ae),ce=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).expr=e,a}return Object(v.a)(n,[{key:"visitExpression",value:function(e,t){return e.visitTypeofExpr(this,t)}},{key:"isEquivalent",value:function(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}},{key:"isConstant",value:function(){return this.expr.isConstant()}}]),n}(ae),ue=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).node=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.node===e.node}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWrappedNodeExpr(this,t)}}]),n}(ae),le=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,r||i.type,a)).name=e,o.value=i,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWriteVarExpr(this,t)}},{key:"toDeclStmt",value:function(e,t){return new We(this.name,this.value,e,t,this.sourceSpan)}},{key:"toConstDecl",value:function(){return this.toDeclStmt(Z,[we.Final])}}]),n}(ae),pe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,a||r.type,o)).receiver=e,s.index=i,s.value=r,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWriteKeyExpr(this,t)}}]),n}(ae),de=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,a||r.type,o)).receiver=e,s.name=i,s.value=r,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWritePropExpr(this,t)}}]),n}(ae);!function(e){e[e.ConcatArray=0]="ConcatArray",e[e.SubscribeObservable=1]="SubscribeObservable",e[e.Bind=2]="Bind"}(oe||(oe={}));var he=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,a,o)).receiver=e,s.args=r,"string"==typeof i?(s.name=i,s.builtin=null):(s.name=null,s.builtin=i),s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.builtin===e.builtin&&ie(this.args,e.args)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInvokeMethodExpr(this,t)}}]),n}(ae),fe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(m.a)(this,n),(o=t.call(this,r,a)).fn=e,o.args=i,o.pure=s,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.fn.isEquivalent(e.fn)&&ie(this.args,e.args)&&this.pure===e.pure}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInvokeFunctionExpr(this,t)}}]),n}(ae),ge=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,r,a)).classExpr=e,o.args=i,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.classExpr.isEquivalent(e.classExpr)&&ie(this.args,e.args)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInstantiateExpr(this,t)}}]),n}(ae),me=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).value=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value===e.value}},{key:"isConstant",value:function(){return!0}},{key:"visitExpression",value:function(e,t){return e.visitLiteralExpr(this,t)}}]),n}(ae),ve=function e(t,n){Object(m.a)(this,e),this.text=t,this.sourceSpan=n},be=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return n}(ve),ye=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return n}(ve),Ce=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,ee,o)).metaBlock=e,s.messageParts=i,s.placeHolderNames=r,s.expressions=a,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return!1}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitLocalizedString(this,t)}},{key:"serializeI18nHead",value:function(){var e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e="".concat(this.metaBlock.meaning).concat("|").concat(e)),this.metaBlock.customId&&(e="".concat(e).concat("@@").concat(this.metaBlock.customId)),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach((function(t){e="".concat(e).concat("\u241f").concat(t)})),ke(e,this.messageParts[0].text)}},{key:"getMessagePartSourceSpan",value:function(e){var t,n;return null!==(n=null===(t=this.messageParts[e])||void 0===t?void 0:t.sourceSpan)&&void 0!==n?n:this.sourceSpan}},{key:"getPlaceholderSourceSpan",value:function(e){var t,n,i,r;return null!==(r=null!==(n=null===(t=this.placeHolderNames[e])||void 0===t?void 0:t.sourceSpan)&&void 0!==n?n:null===(i=this.expressions[e])||void 0===i?void 0:i.sourceSpan)&&void 0!==r?r:this.sourceSpan}},{key:"serializeI18nTemplatePart",value:function(e){return ke(this.placeHolderNames[e-1].text,this.messageParts[e].text)}}]),n}(ae),Oe=function(e){return e.replace(/\\/g,"\\\\")},xe=function(e){return e.replace(/:/g,"\\:")},Se=function(e){return e.replace(/`/g,"\\`").replace(/\${/g,"$\\{")};function ke(e,t){return""===e?{cooked:t,raw:Se((n=Oe(t),n.replace(/^:/,"\\:")))}:{cooked:":".concat(e,":").concat(t),raw:Se(":".concat(xe(Oe(e)),":").concat(Oe(t)))};var n}var we,Ee=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return Object(m.a)(this,n),(r=t.call(this,i,o)).value=e,r.typeParams=a,r}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitExternalExpr(this,t)}}]),n}(ae),Ie=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(m.a)(this,n),(r=t.call(this,o||i.type,s)).condition=e,r.falseCase=a,r.trueCase=i,r}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&ne(this.falseCase,e.falseCase)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitConditionalExpr(this,t)}}]),n}(ae),Te=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r;return Object(m.a)(this,n),(r=t.call(this,Q,i)).condition=e,r}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitNotExpr(this,t)}}]),n}(ae),_e=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r;return Object(m.a)(this,n),(r=t.call(this,e.type,i)).condition=e,r}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitAssertNotNullExpr(this,t)}}]),n}(ae),je=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).value=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitCastExpr(this,t)}}]),n}(ae),Pe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(m.a)(this,e),this.name=t,this.type=n}return Object(v.a)(e,[{key:"isEquivalent",value:function(e){return this.name===e.name}}]),e}(),Ae=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,r,a)).params=e,s.statements=i,s.name=o,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&ie(this.params,e.params)&&ie(this.statements,e.statements)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitFunctionExpr(this,t)}},{key:"toDeclStmt",value:function(e,t){return new Ye(e,this.params,this.statements,this.type,t,this.sourceSpan)}}]),n}(ae),Me=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Object(m.a)(this,n),(o=t.call(this,r||$,a)).operator=e,o.expr=i,o.parens=s,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitUnaryOperatorExpr(this,t)}}]),n}(ae),De=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return Object(m.a)(this,n),(s=t.call(this,a||i.type,o)).operator=e,s.rhs=r,s.parens=c,s.lhs=i,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitBinaryOperatorExpr(this,t)}}]),n}(ae),Re=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,r,a)).receiver=e,o.name=i,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadPropExpr(this,t)}},{key:"set",value:function(e){return new de(this.receiver,this.name,e,null,this.sourceSpan)}}]),n}(ae),Le=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,r,a)).receiver=e,o.index=i,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadKeyExpr(this,t)}},{key:"set",value:function(e){return new pe(this.receiver,this.index,e,null,this.sourceSpan)}}]),n}(ae),Fe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).entries=e,a}return Object(v.a)(n,[{key:"isConstant",value:function(){return this.entries.every((function(e){return e.isConstant()}))}},{key:"isEquivalent",value:function(e){return e instanceof n&&ie(this.entries,e.entries)}},{key:"visitExpression",value:function(e,t){return e.visitLiteralArrayExpr(this,t)}}]),n}(ae),Ne=function(){function e(t,n,i){Object(m.a)(this,e),this.key=t,this.value=n,this.quoted=i}return Object(v.a)(e,[{key:"isEquivalent",value:function(e){return this.key===e.key&&this.value.isEquivalent(e.value)}}]),e}(),Be=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).entries=e,a.valueType=null,i&&(a.valueType=i.valueType),a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&ie(this.entries,e.entries)}},{key:"isConstant",value:function(){return this.entries.every((function(e){return e.value.isConstant()}))}},{key:"visitExpression",value:function(e,t){return e.visitLiteralMapExpr(this,t)}}]),n}(ae),Ue=(new se(re.This,null,null),new se(re.Super,null,null),new se(re.CatchError,null,null),new se(re.CatchStack,null,null),new me(null,null,null)),ze=new me(null,Z,null);!function(e){e[e.Final=0]="Final",e[e.Private=1]="Private",e[e.Exported=2]="Exported",e[e.Static=3]="Static"}(we||(we={}));var Ve=function(){function e(t,n,i){Object(m.a)(this,e),this.text=t,this.multiline=n,this.trailingNewline=i}return Object(v.a)(e,[{key:"toString",value:function(){return this.multiline?" ".concat(this.text," "):this.text}}]),e}(),Ge=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this,"",!0,!0)).tags=e,i}return Object(v.a)(n,[{key:"toString",value:function(){return function(e){if(0===e.length)return"";if(1===e.length&&e[0].tagName&&!e[0].text)return"*".concat(ot(e[0])," ");var t,n="*\n",i=Object(l.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;n+=" *",n+=ot(r).replace(/\n/g,"\n * "),n+="\n"}}catch(a){i.e(a)}finally{i.f()}return n+=" "}(this.tags)}}]),n}(Ve),He=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;Object(m.a)(this,e),this.modifiers=t,this.sourceSpan=n,this.leadingComments=i}return Object(v.a)(e,[{key:"hasModifier",value:function(e){return-1!==this.modifiers.indexOf(e)}},{key:"addLeadingComment",value:function(e){var t;this.leadingComments=null!==(t=this.leadingComments)&&void 0!==t?t:[],this.leadingComments.push(e)}}]),e}(),We=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,a,o,s)).name=e,c.value=i,c.type=r||i&&i.type||null,c}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}},{key:"visitStatement",value:function(e,t){return e.visitDeclareVarStmt(this,t)}}]),n}(He),Ye=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s,c){var u;return Object(m.a)(this,n),(u=t.call(this,o,s,c)).name=e,u.params=i,u.statements=r,u.type=a||null,u}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&ie(this.params,e.params)&&ie(this.statements,e.statements)}},{key:"visitStatement",value:function(e,t){return e.visitDeclareFunctionStmt(this,t)}}]),n}(He),Xe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,[],i,r)).expr=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}},{key:"visitStatement",value:function(e,t){return e.visitExpressionStmt(this,t)}}]),n}(He),qe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;return Object(m.a)(this,n),(i=t.call(this,[],r,a)).value=e,i}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.isEquivalent(e.value)}},{key:"visitStatement",value:function(e,t){return e.visitReturnStmt(this,t)}}]),n}(He),Ke=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(m.a)(this,n),(r=t.call(this,[],o,s)).condition=e,r.trueCase=i,r.falseCase=a,r}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&ie(this.trueCase,e.trueCase)&&ie(this.falseCase,e.falseCase)}},{key:"visitStatement",value:function(e,t){return e.visitIfStmt(this,t)}}]),n}(He);function Je(e,t,n){return new se(e,t,n)}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new Ee(e,null,t,n)}function Qe(e,t,n){return new K(e,t,n)}function $e(e){return new ce(e)}function et(e,t,n){return new Fe(e,t,n)}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Be(e.map((function(e){return new Ne(e.key,e.value,e.quoted)})),t,null)}function nt(e,t,n,i,r){return new Ae(e,t,n,i,r)}function it(e,t,n,i,r){return new Ke(e,t,n,i,r)}function rt(e,t,n){return new me(e,t,n)}function at(e){return e instanceof me&&null===e.value}function ot(e){var t="";if(e.tagName&&(t+=" @".concat(e.tagName)),e.text){if(e.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');t+=" "+e.text.replace(/@/g,"\\@")}return t}var st=/-+([a-z0-9])/g;function ct(e,t){return ut(e,":",t)}function ut(e,t,n){var i=e.indexOf(t);return-1==i?n:[e.slice(0,i).trim(),e.slice(i+1).trim()]}function lt(e){throw new Error("Internal Error: ".concat(e))}function pt(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}Object.getPrototypeOf({});function dt(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319&&e.length>n+1){var r=e.charCodeAt(n+1);r>=56320&&r<=57343&&(n++,i=(i-55296<<10)+r-56320+65536)}i<=127?t+=String.fromCharCode(i):i<=2047?t+=String.fromCharCode(i>>6&31|192,63&i|128):i<=65535?t+=String.fromCharCode(i>>12|224,i>>6&63|128,63&i|128):i<=2097151&&(t+=String.fromCharCode(i>>18&7|240,i>>12&63|128,i>>6&63|128,63&i|128))}return t}function ht(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ht).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);if(!e.toString)return"object";var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var ft="undefined"!=typeof window&&window,gt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,mt="undefined"!=typeof global&&global||ft||gt;function vt(e,t){for(var n=[],i=0;i<e;i++)n.push(t);return n}function bt(e,t){var n=[],i=[];return e.forEach((function(e){(t(e)?n:i).push(e)})),[n,i]}var yt=Je("<unknown>"),Ct={},Ot=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this,e.type)).resolved=e,i.original=e,i}return Object(v.a)(n,[{key:"visitExpression",value:function(e,t){return t===Ct?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}},{key:"isEquivalent",value:function(e){return e instanceof n&&this.resolved.isEquivalent(e.resolved)}},{key:"isConstant",value:function(){return!0}},{key:"fixup",value:function(e){this.resolved=e,this.shared=!0}}]),n}(ae),xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(m.a)(this,e),this.isClosureCompilerEnabled=t,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.injectorDefinitions=new Map,this.directiveDefinitions=new Map,this.componentDefinitions=new Map,this.pipeDefinitions=new Map,this.nextNameIndex=0}return Object(v.a)(e,[{key:"getConstLiteral",value:function(e,t){if(e instanceof me&&!Et(e)||e instanceof Ot)return e;var n=this.keyOf(e),i=this.literals.get(n),r=!1;if(i||(i=new Ot(e),this.literals.set(n,i),r=!0),!r&&!i.shared||r&&t){var a,o,s=this.freshName();this.isClosureCompilerEnabled&&Et(e)?(a=Je(s).set(new Ae([],[new qe(e)])),o=Je(s).callFn([])):(a=Je(s).set(e),o=Je(s)),this.statements.push(a.toDeclStmt(Z,[we.Final])),i.fixup(o)}return i}},{key:"getDefinition",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.definitionsOf(t),a=r.get(e),o=!1;if(!a){var s=this.propertyNameOf(t);a=new Ot(n.importExpr(e).prop(s)),r.set(e,a),o=!0}if(!o&&!a.shared||o&&i){var c=this.freshName();this.statements.push(Je(c).set(a.resolved).toDeclStmt(Z,[we.Final])),a.fixup(Je(c))}return a}},{key:"getLiteralFactory",value:function(e){if(e instanceof Fe){var t=e.entries.map((function(e){return e.isConstant()?e:yt})),n=this.keyOf(et(t));return this._getLiteralFactory(n,e.entries,(function(e){return et(e)}))}var i=tt(e.entries.map((function(e){return{key:e.key,value:e.value.isConstant()?e.value:yt,quoted:e.quoted}}))),r=this.keyOf(i);return this._getLiteralFactory(r,e.entries.map((function(e){return e.value})),(function(t){return tt(t.map((function(t,n){return{key:e.entries[n].key,value:t,quoted:e.entries[n].quoted}})))}))}},{key:"_getLiteralFactory",value:function(e,t,n){var i=this,r=this.literalFactories.get(e),a=t.filter((function(e){return!e.isConstant()}));if(!r){var o=t.map((function(e,t){return e.isConstant()?i.getConstLiteral(e,!0):Je("a".concat(t))})),s=nt(o.filter(wt).map((function(e){return new Pe(e.name,J)})),[new qe(n(o))],Z),c=this.freshName();this.statements.push(Je(c).set(s).toDeclStmt(Z,[we.Final])),r=Je(c),this.literalFactories.set(e,r)}return{literalFactory:r,literalFactoryArguments:a}}},{key:"uniqueName",value:function(e){return"".concat(e).concat(this.nextNameIndex++)}},{key:"definitionsOf",value:function(e){switch(e){case 2:return this.componentDefinitions;case 1:return this.directiveDefinitions;case 0:return this.injectorDefinitions;case 3:return this.pipeDefinitions}return lt("Unknown definition kind ".concat(e)),this.componentDefinitions}},{key:"propertyNameOf",value:function(e){switch(e){case 2:return"\u0275cmp";case 1:return"\u0275dir";case 0:return"\u0275inj";case 3:return"\u0275pipe"}return lt("Unknown definition kind ".concat(e)),"<unknown>"}},{key:"freshName",value:function(){return this.uniqueName("_c")}},{key:"keyOf",value:function(e){return e.visitExpression(new St,Ct)}}]),e}(),St=function(){function e(){Object(m.a)(this,e),this.visitWrappedNodeExpr=kt,this.visitWriteVarExpr=kt,this.visitWriteKeyExpr=kt,this.visitWritePropExpr=kt,this.visitInvokeMethodExpr=kt,this.visitInvokeFunctionExpr=kt,this.visitInstantiateExpr=kt,this.visitConditionalExpr=kt,this.visitNotExpr=kt,this.visitAssertNotNullExpr=kt,this.visitCastExpr=kt,this.visitFunctionExpr=kt,this.visitUnaryOperatorExpr=kt,this.visitBinaryOperatorExpr=kt,this.visitReadPropExpr=kt,this.visitReadKeyExpr=kt,this.visitCommaExpr=kt,this.visitLocalizedString=kt}return Object(v.a)(e,[{key:"visitLiteralExpr",value:function(e){return"".concat("string"==typeof e.value?'"'+e.value+'"':e.value)}},{key:"visitLiteralArrayExpr",value:function(e,t){var n=this;return"[".concat(e.entries.map((function(e){return e.visitExpression(n,t)})).join(","),"]")}},{key:"visitLiteralMapExpr",value:function(e,t){var n=this;return"{".concat(e.entries.map((function(e){return"".concat(function(e){var t=e.quoted?'"':"";return"".concat(t).concat(e.key).concat(t)}(e),":").concat(e.value.visitExpression(n,t))})).join(","))}},{key:"visitExternalExpr",value:function(e){return e.value.moduleName?"EX:".concat(e.value.moduleName,":").concat(e.value.name):"EX:".concat(e.value.runtime.name)}},{key:"visitReadVarExpr",value:function(e){return"VAR:".concat(e.name)}},{key:"visitTypeofExpr",value:function(e,t){return"TYPEOF:".concat(e.expr.visitExpression(this,t))}}]),e}();function kt(e){throw new Error("Invalid state: Visitor ".concat(this.constructor.name," doesn't handle ").concat(e.constructor.name))}function wt(e){return e instanceof se}function Et(e){return e instanceof me&&"string"==typeof e.value&&e.value.length>=50}var It="@angular/core",Tt=function e(){Object(m.a)(this,e)};Tt.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleName:It},Tt.ElementRef={name:"ElementRef",moduleName:It},Tt.NgModuleRef={name:"NgModuleRef",moduleName:It},Tt.ViewContainerRef={name:"ViewContainerRef",moduleName:It},Tt.ChangeDetectorRef={name:"ChangeDetectorRef",moduleName:It},Tt.QueryList={name:"QueryList",moduleName:It},Tt.TemplateRef={name:"TemplateRef",moduleName:It},Tt.Renderer2={name:"Renderer2",moduleName:It},Tt.CodegenComponentFactoryResolver={name:"\u0275CodegenComponentFactoryResolver",moduleName:It},Tt.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleName:It},Tt.ComponentFactory={name:"ComponentFactory",moduleName:It},Tt.ComponentRef={name:"ComponentRef",moduleName:It},Tt.NgModuleFactory={name:"NgModuleFactory",moduleName:It},Tt.createModuleFactory={name:"\u0275cmf",moduleName:It},Tt.moduleDef={name:"\u0275mod",moduleName:It},Tt.moduleProviderDef={name:"\u0275mpd",moduleName:It},Tt.RegisterModuleFactoryFn={name:"\u0275registerModuleFactory",moduleName:It},Tt.inject={name:"\u0275\u0275inject",moduleName:It},Tt.directiveInject={name:"\u0275\u0275directiveInject",moduleName:It},Tt.INJECTOR={name:"INJECTOR",moduleName:It},Tt.Injector={name:"Injector",moduleName:It},Tt.\u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:It},Tt.InjectableDef={name:"\u0275\u0275InjectableDef",moduleName:It},Tt.ViewEncapsulation={name:"ViewEncapsulation",moduleName:It},Tt.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:It},Tt.SecurityContext={name:"SecurityContext",moduleName:It},Tt.LOCALE_ID={name:"LOCALE_ID",moduleName:It},Tt.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleName:It},Tt.inlineInterpolate={name:"\u0275inlineInterpolate",moduleName:It},Tt.interpolate={name:"\u0275interpolate",moduleName:It},Tt.EMPTY_ARRAY={name:"\u0275EMPTY_ARRAY",moduleName:It},Tt.EMPTY_MAP={name:"\u0275EMPTY_MAP",moduleName:It},Tt.Renderer={name:"Renderer",moduleName:It},Tt.viewDef={name:"\u0275vid",moduleName:It},Tt.elementDef={name:"\u0275eld",moduleName:It},Tt.anchorDef={name:"\u0275and",moduleName:It},Tt.textDef={name:"\u0275ted",moduleName:It},Tt.directiveDef={name:"\u0275did",moduleName:It},Tt.providerDef={name:"\u0275prd",moduleName:It},Tt.queryDef={name:"\u0275qud",moduleName:It},Tt.pureArrayDef={name:"\u0275pad",moduleName:It},Tt.pureObjectDef={name:"\u0275pod",moduleName:It},Tt.purePipeDef={name:"\u0275ppd",moduleName:It},Tt.pipeDef={name:"\u0275pid",moduleName:It},Tt.nodeValue={name:"\u0275nov",moduleName:It},Tt.ngContentDef={name:"\u0275ncd",moduleName:It},Tt.unwrapValue={name:"\u0275unv",moduleName:It},Tt.createRendererType2={name:"\u0275crt",moduleName:It},Tt.RendererType2={name:"RendererType2",moduleName:It},Tt.ViewDefinition={name:"\u0275ViewDefinition",moduleName:It},Tt.createComponentFactory={name:"\u0275ccf",moduleName:It},Tt.setClassMetadata={name:"\u0275setClassMetadata",moduleName:It};var _t=function(){function e(t,n,i){Object(m.a)(this,e),this.filePath=t,this.name=n,this.members=i}return Object(v.a)(e,[{key:"assertNoMembers",value:function(){if(this.members.length)throw new Error("Illegal state: symbol without members expected, but got ".concat(JSON.stringify(this),"."))}}]),e}();function jt(e){return e.replace(/\W/g,"_")}var Pt,At=0;function Mt(e){if(!e||!e.reference)return null;var t=e.reference;if(t instanceof _t)return t.name;if(t.__anonymousType)return t.__anonymousType;var n=ht(t);return n.indexOf("(")>=0?(n="anonymous_".concat(At++),t.__anonymousType=n):n=jt(n),n}!function(e){e[e.Pipe=0]="Pipe",e[e.Directive=1]="Directive",e[e.NgModule=2]="NgModule",e[e.Injectable=3]="Injectable"}(Pt||(Pt={}));function Dt(e){return e.reduce((function(e,t){var n=Array.isArray(t)?Dt(t):t;return e.concat(n)}),[])}var Rt="@angular/core",Lt=function e(){Object(m.a)(this,e)};function Ft(e){return tt(Object.keys(e).map((function(t){return{key:t,value:e[t],quoted:!1}})))}function Nt(e,t){if(0===t)return Qe(e);for(var n=[],i=0;i<t;i++)n.push(J);return Qe(e,void 0,n)}Lt.NEW_METHOD="factory",Lt.TRANSFORM_METHOD="transform",Lt.PATCH_DEPS="patchedDeps",Lt.namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:Rt},Lt.namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:Rt},Lt.namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:Rt},Lt.element={name:"\u0275\u0275element",moduleName:Rt},Lt.elementStart={name:"\u0275\u0275elementStart",moduleName:Rt},Lt.elementEnd={name:"\u0275\u0275elementEnd",moduleName:Rt},Lt.advance={name:"\u0275\u0275advance",moduleName:Rt},Lt.syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:Rt},Lt.syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:Rt},Lt.attribute={name:"\u0275\u0275attribute",moduleName:Rt},Lt.attributeInterpolate1={name:"\u0275\u0275attributeInterpolate1",moduleName:Rt},Lt.attributeInterpolate2={name:"\u0275\u0275attributeInterpolate2",moduleName:Rt},Lt.attributeInterpolate3={name:"\u0275\u0275attributeInterpolate3",moduleName:Rt},Lt.attributeInterpolate4={name:"\u0275\u0275attributeInterpolate4",moduleName:Rt},Lt.attributeInterpolate5={name:"\u0275\u0275attributeInterpolate5",moduleName:Rt},Lt.attributeInterpolate6={name:"\u0275\u0275attributeInterpolate6",moduleName:Rt},Lt.attributeInterpolate7={name:"\u0275\u0275attributeInterpolate7",moduleName:Rt},Lt.attributeInterpolate8={name:"\u0275\u0275attributeInterpolate8",moduleName:Rt},Lt.attributeInterpolateV={name:"\u0275\u0275attributeInterpolateV",moduleName:Rt},Lt.classProp={name:"\u0275\u0275classProp",moduleName:Rt},Lt.elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:Rt},Lt.elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:Rt},Lt.elementContainer={name:"\u0275\u0275elementContainer",moduleName:Rt},Lt.styleMap={name:"\u0275\u0275styleMap",moduleName:Rt},Lt.styleMapInterpolate1={name:"\u0275\u0275styleMapInterpolate1",moduleName:Rt},Lt.styleMapInterpolate2={name:"\u0275\u0275styleMapInterpolate2",moduleName:Rt},Lt.styleMapInterpolate3={name:"\u0275\u0275styleMapInterpolate3",moduleName:Rt},Lt.styleMapInterpolate4={name:"\u0275\u0275styleMapInterpolate4",moduleName:Rt},Lt.styleMapInterpolate5={name:"\u0275\u0275styleMapInterpolate5",moduleName:Rt},Lt.styleMapInterpolate6={name:"\u0275\u0275styleMapInterpolate6",moduleName:Rt},Lt.styleMapInterpolate7={name:"\u0275\u0275styleMapInterpolate7",moduleName:Rt},Lt.styleMapInterpolate8={name:"\u0275\u0275styleMapInterpolate8",moduleName:Rt},Lt.styleMapInterpolateV={name:"\u0275\u0275styleMapInterpolateV",moduleName:Rt},Lt.classMap={name:"\u0275\u0275classMap",moduleName:Rt},Lt.classMapInterpolate1={name:"\u0275\u0275classMapInterpolate1",moduleName:Rt},Lt.classMapInterpolate2={name:"\u0275\u0275classMapInterpolate2",moduleName:Rt},Lt.classMapInterpolate3={name:"\u0275\u0275classMapInterpolate3",moduleName:Rt},Lt.classMapInterpolate4={name:"\u0275\u0275classMapInterpolate4",moduleName:Rt},Lt.classMapInterpolate5={name:"\u0275\u0275classMapInterpolate5",moduleName:Rt},Lt.classMapInterpolate6={name:"\u0275\u0275classMapInterpolate6",moduleName:Rt},Lt.classMapInterpolate7={name:"\u0275\u0275classMapInterpolate7",moduleName:Rt},Lt.classMapInterpolate8={name:"\u0275\u0275classMapInterpolate8",moduleName:Rt},Lt.classMapInterpolateV={name:"\u0275\u0275classMapInterpolateV",moduleName:Rt},Lt.styleProp={name:"\u0275\u0275styleProp",moduleName:Rt},Lt.stylePropInterpolate1={name:"\u0275\u0275stylePropInterpolate1",moduleName:Rt},Lt.stylePropInterpolate2={name:"\u0275\u0275stylePropInterpolate2",moduleName:Rt},Lt.stylePropInterpolate3={name:"\u0275\u0275stylePropInterpolate3",moduleName:Rt},Lt.stylePropInterpolate4={name:"\u0275\u0275stylePropInterpolate4",moduleName:Rt},Lt.stylePropInterpolate5={name:"\u0275\u0275stylePropInterpolate5",moduleName:Rt},Lt.stylePropInterpolate6={name:"\u0275\u0275stylePropInterpolate6",moduleName:Rt},Lt.stylePropInterpolate7={name:"\u0275\u0275stylePropInterpolate7",moduleName:Rt},Lt.stylePropInterpolate8={name:"\u0275\u0275stylePropInterpolate8",moduleName:Rt},Lt.stylePropInterpolateV={name:"\u0275\u0275stylePropInterpolateV",moduleName:Rt},Lt.nextContext={name:"\u0275\u0275nextContext",moduleName:Rt},Lt.templateCreate={name:"\u0275\u0275template",moduleName:Rt},Lt.text={name:"\u0275\u0275text",moduleName:Rt},Lt.enableBindings={name:"\u0275\u0275enableBindings",moduleName:Rt},Lt.disableBindings={name:"\u0275\u0275disableBindings",moduleName:Rt},Lt.getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:Rt},Lt.textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:Rt},Lt.textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:Rt},Lt.textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:Rt},Lt.textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:Rt},Lt.textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:Rt},Lt.textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:Rt},Lt.textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:Rt},Lt.textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:Rt},Lt.textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:Rt},Lt.textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:Rt},Lt.restoreView={name:"\u0275\u0275restoreView",moduleName:Rt},Lt.pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:Rt},Lt.pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:Rt},Lt.pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:Rt},Lt.pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:Rt},Lt.pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:Rt},Lt.pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:Rt},Lt.pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:Rt},Lt.pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:Rt},Lt.pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:Rt},Lt.pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:Rt},Lt.pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:Rt},Lt.pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:Rt},Lt.pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:Rt},Lt.pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:Rt},Lt.pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:Rt},Lt.hostProperty={name:"\u0275\u0275hostProperty",moduleName:Rt},Lt.property={name:"\u0275\u0275property",moduleName:Rt},Lt.propertyInterpolate={name:"\u0275\u0275propertyInterpolate",moduleName:Rt},Lt.propertyInterpolate1={name:"\u0275\u0275propertyInterpolate1",moduleName:Rt},Lt.propertyInterpolate2={name:"\u0275\u0275propertyInterpolate2",moduleName:Rt},Lt.propertyInterpolate3={name:"\u0275\u0275propertyInterpolate3",moduleName:Rt},Lt.propertyInterpolate4={name:"\u0275\u0275propertyInterpolate4",moduleName:Rt},Lt.propertyInterpolate5={name:"\u0275\u0275propertyInterpolate5",moduleName:Rt},Lt.propertyInterpolate6={name:"\u0275\u0275propertyInterpolate6",moduleName:Rt},Lt.propertyInterpolate7={name:"\u0275\u0275propertyInterpolate7",moduleName:Rt},Lt.propertyInterpolate8={name:"\u0275\u0275propertyInterpolate8",moduleName:Rt},Lt.propertyInterpolateV={name:"\u0275\u0275propertyInterpolateV",moduleName:Rt},Lt.i18n={name:"\u0275\u0275i18n",moduleName:Rt},Lt.i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:Rt},Lt.i18nExp={name:"\u0275\u0275i18nExp",moduleName:Rt},Lt.i18nStart={name:"\u0275\u0275i18nStart",moduleName:Rt},Lt.i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:Rt},Lt.i18nApply={name:"\u0275\u0275i18nApply",moduleName:Rt},Lt.i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:Rt},Lt.pipe={name:"\u0275\u0275pipe",moduleName:Rt},Lt.projection={name:"\u0275\u0275projection",moduleName:Rt},Lt.projectionDef={name:"\u0275\u0275projectionDef",moduleName:Rt},Lt.reference={name:"\u0275\u0275reference",moduleName:Rt},Lt.inject={name:"\u0275\u0275inject",moduleName:Rt},Lt.injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:Rt},Lt.injectPipeChangeDetectorRef={name:"\u0275\u0275injectPipeChangeDetectorRef",moduleName:Rt},Lt.directiveInject={name:"\u0275\u0275directiveInject",moduleName:Rt},Lt.invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:Rt},Lt.invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:Rt},Lt.templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:Rt},Lt.resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:Rt},Lt.resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:Rt},Lt.resolveBody={name:"\u0275\u0275resolveBody",moduleName:Rt},Lt.defineComponent={name:"\u0275\u0275defineComponent",moduleName:Rt},Lt.setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:Rt},Lt.ComponentDefWithMeta={name:"\u0275\u0275ComponentDefWithMeta",moduleName:Rt},Lt.FactoryDef={name:"\u0275\u0275FactoryDef",moduleName:Rt},Lt.defineDirective={name:"\u0275\u0275defineDirective",moduleName:Rt},Lt.DirectiveDefWithMeta={name:"\u0275\u0275DirectiveDefWithMeta",moduleName:Rt},Lt.InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:Rt},Lt.defineInjector={name:"\u0275\u0275defineInjector",moduleName:Rt},Lt.NgModuleDefWithMeta={name:"\u0275\u0275NgModuleDefWithMeta",moduleName:Rt},Lt.ModuleWithProviders={name:"ModuleWithProviders",moduleName:Rt},Lt.defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:Rt},Lt.setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:Rt},Lt.PipeDefWithMeta={name:"\u0275\u0275PipeDefWithMeta",moduleName:Rt},Lt.definePipe={name:"\u0275\u0275definePipe",moduleName:Rt},Lt.queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:Rt},Lt.viewQuery={name:"\u0275\u0275viewQuery",moduleName:Rt},Lt.staticViewQuery={name:"\u0275\u0275staticViewQuery",moduleName:Rt},Lt.staticContentQuery={name:"\u0275\u0275staticContentQuery",moduleName:Rt},Lt.loadQuery={name:"\u0275\u0275loadQuery",moduleName:Rt},Lt.contentQuery={name:"\u0275\u0275contentQuery",moduleName:Rt},Lt.NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:Rt},Lt.InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:Rt},Lt.CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:Rt},Lt.ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:Rt},Lt.listener={name:"\u0275\u0275listener",moduleName:Rt},Lt.getFactoryOf={name:"\u0275\u0275getFactoryOf",moduleName:Rt},Lt.getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:Rt},Lt.sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:Rt},Lt.sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:Rt},Lt.sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:Rt},Lt.sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:Rt},Lt.sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:Rt},Lt.sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:Rt};var Bt="@";function Ut(e){return"".concat(Bt).concat(e)}function zt(e,t){return"".concat(Bt).concat(e,".").concat(t)}function Vt(e,t){return"animation_".concat(e,"_").concat(t)}var Gt=10,Ht=41,Wt=44,Yt=47,Xt=58,qt=59,Kt=61,Jt=62,Zt=97,Qt=122,$t=123,en=125;function tn(e){return e>=9&&e<=32||160==e}function nn(e){return 48<=e&&e<=57}function rn(e){return e>=Zt&&e<=Qt||e>=65&&e<=90}function an(e){return e===Gt||13===e}function on(e){return 48<=e&&e<=55}var sn,cn=function(){function e(t,n,i,r){Object(m.a)(this,e),this.file=t,this.offset=n,this.line=i,this.col=r}return Object(v.a)(e,[{key:"toString",value:function(){return null!=this.offset?"".concat(this.file.url,"@").concat(this.line,":").concat(this.col):this.file.url}},{key:"moveBy",value:function(t){for(var n=this.file.content,i=n.length,r=this.offset,a=this.line,o=this.col;r>0&&t<0;){if(r--,t++,n.charCodeAt(r)==Gt){a--;var s=n.substr(0,r-1).lastIndexOf(String.fromCharCode(Gt));o=s>0?r-s:r}else o--}for(;r<i&&t>0;){var c=n.charCodeAt(r);r++,t--,c==Gt?(a++,o=0):o++}return new e(this.file,r,a,o)}},{key:"getContext",value:function(e,t){var n=this.file.content,i=this.offset;if(null!=i){i>n.length-1&&(i=n.length-1);for(var r=i,a=0,o=0;a<e&&i>0&&(a++,"\n"!=n[--i]||++o!=t););for(a=0,o=0;a<e&&r<n.length-1&&(a++,"\n"!=n[++r]||++o!=t););return{before:n.substring(i,this.offset),after:n.substring(this.offset,r+1)}}return null}}]),e}(),un=function e(t,n){Object(m.a)(this,e),this.content=t,this.url=n},ln=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(m.a)(this,e),this.start=t,this.end=n,this.fullStart=i,this.details=r}return Object(v.a)(e,[{key:"toString",value:function(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}]),e}();!function(e){e[e.WARNING=0]="WARNING",e[e.ERROR=1]="ERROR"}(sn||(sn={}));var pn=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;Object(m.a)(this,e),this.span=t,this.msg=n,this.level=i}return Object(v.a)(e,[{key:"contextualMessage",value:function(){var e=this.span.start.getContext(100,3);return e?"".concat(this.msg,' ("').concat(e.before,"[").concat(sn[this.level]," ->]").concat(e.after,'")'):this.msg}},{key:"toString",value:function(){var e=this.span.details?", ".concat(this.span.details):"";return"".concat(this.contextualMessage(),": ").concat(this.span.start).concat(e)}}]),e}();var dn=function(){function e(t,n){Object(m.a)(this,e),this.value=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitText(this)}}]),e}(),hn=function(){function e(t,n,i){Object(m.a)(this,e),this.value=t,this.sourceSpan=n,this.i18n=i}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitBoundText(this)}}]),e}(),fn=function(){function e(t,n,i,r,a){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=i,this.valueSpan=r,this.i18n=a}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitTextAttribute(this)}}]),e}(),gn=function(){function e(t,n,i,r,a,o,s,c){Object(m.a)(this,e),this.name=t,this.type=n,this.securityContext=i,this.value=r,this.unit=a,this.sourceSpan=o,this.valueSpan=s,this.i18n=c}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitBoundAttribute(this)}}],[{key:"fromBoundElementProperty",value:function(t,n){return new e(t.name,t.type,t.securityContext,t.value,t.unit,t.sourceSpan,t.valueSpan,n)}}]),e}(),mn=function(){function e(t,n,i,r,a,o,s){Object(m.a)(this,e),this.name=t,this.type=n,this.handler=i,this.target=r,this.phase=a,this.sourceSpan=o,this.handlerSpan=s}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitBoundEvent(this)}}],[{key:"fromParsedEvent",value:function(t){var n=0===t.type?t.targetOrPhase:null,i=1===t.type?t.targetOrPhase:null;return new e(t.name,t.type,t.handler,n,i,t.sourceSpan,t.handlerSpan)}}]),e}(),vn=function(){function e(t,n,i,r,a,o,s,c,u,l){Object(m.a)(this,e),this.name=t,this.attributes=n,this.inputs=i,this.outputs=r,this.children=a,this.references=o,this.sourceSpan=s,this.startSourceSpan=c,this.endSourceSpan=u,this.i18n=l,0===a.length&&c&&u&&(this.sourceSpan=new ln(s.start,u.end))}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitElement(this)}}]),e}(),bn=function(){function e(t,n,i,r,a,o,s,c,u,l,p,d){Object(m.a)(this,e),this.tagName=t,this.attributes=n,this.inputs=i,this.outputs=r,this.templateAttrs=a,this.children=o,this.references=s,this.variables=c,this.sourceSpan=u,this.startSourceSpan=l,this.endSourceSpan=p,this.i18n=d}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitTemplate(this)}}]),e}(),yn=function(){function e(t,n,i,r){Object(m.a)(this,e),this.selector=t,this.attributes=n,this.sourceSpan=i,this.i18n=r,this.name="ng-content"}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitContent(this)}}]),e}(),Cn=function(){function e(t,n,i,r){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=i,this.valueSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitVariable(this)}}]),e}(),On=function(){function e(t,n,i,r){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=i,this.valueSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitReference(this)}}]),e}(),xn=function(){function e(t,n,i,r){Object(m.a)(this,e),this.vars=t,this.placeholders=n,this.sourceSpan=i,this.i18n=r}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitIcu(this)}}]),e}();function Sn(e,t){var n=[];if(e.visit){var i,r=Object(l.a)(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.visit(a)||a.visit(e)}}catch(u){r.e(u)}finally{r.f()}}else{var o,s=Object(l.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value.visit(e);c&&n.push(c)}}catch(u){s.e(u)}finally{s.f()}}return n}var kn=function e(t,n,i,r,a,o){Object(m.a)(this,e),this.nodes=t,this.placeholders=n,this.placeholderToMessage=i,this.meaning=r,this.description=a,this.customId=o,this.id=this.customId,this.legacyIds=[],t.length?this.sources=[{filePath:t[0].sourceSpan.start.file.url,startLine:t[0].sourceSpan.start.line+1,startCol:t[0].sourceSpan.start.col+1,endLine:t[t.length-1].sourceSpan.end.line+1,endCol:t[0].sourceSpan.start.col+1}]:this.sources=[]},wn=function(){function e(t,n){Object(m.a)(this,e),this.value=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),e}(),En=function(){function e(t,n){Object(m.a)(this,e),this.children=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitContainer(this,t)}}]),e}(),In=function(){function e(t,n,i,r){Object(m.a)(this,e),this.expression=t,this.type=n,this.cases=i,this.sourceSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitIcu(this,t)}}]),e}(),Tn=function(){function e(t,n,i,r,a,o,s,c,u){Object(m.a)(this,e),this.tag=t,this.attrs=n,this.startName=i,this.closeName=r,this.children=a,this.isVoid=o,this.sourceSpan=s,this.startSourceSpan=c,this.endSourceSpan=u}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitTagPlaceholder(this,t)}}]),e}(),_n=function(){function e(t,n,i){Object(m.a)(this,e),this.value=t,this.name=n,this.sourceSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitPlaceholder(this,t)}}]),e}(),jn=function(){function e(t,n,i){Object(m.a)(this,e),this.value=t,this.name=n,this.sourceSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitIcuPlaceholder(this,t)}}]),e}();function Pn(e){return function(e){var t=dt(e),n=function(e,t){for(var n=e.length+3>>>2,i=[],r=0;r<n;r++)i[r]=Kn(e,4*r,t);return i}(t,Ln.Big),i=8*t.length,r=vt(80),a=1732584193,o=4023233417,s=2562383102,c=271733878,u=3285377520;n[i>>5]|=128<<24-i%32,n[15+(i+64>>9<<4)]=i;for(var l=0;l<n.length;l+=16){for(var p=a,d=o,h=s,f=c,g=u,m=0;m<80;m++){r[m]=m<16?n[l+m]:Yn(r[m-3]^r[m-8]^r[m-14]^r[m-16],1);var v=Nn(m,o,s,c),b=v[0],y=v[1],C=[Yn(a,5),b,u,y,r[m]].reduce(Vn);u=c,c=s,s=Yn(o,30),o=a,a=C}a=Vn(a,p),o=Vn(o,d),s=Vn(s,h),c=Vn(c,f),u=Vn(u,g)}return function(e){for(var t="",n=0;n<e.length;n++){var i=qn(e,n);t+=(i>>>4).toString(16)+(15&i).toString(16)}return t.toLowerCase()}(Jn([a,o,s,c,u]))}((t=e.nodes,t.map((function(e){return e.visit(Rn,null)}))).join("")+"[".concat(e.meaning,"]"));var t}function An(e){return e.id||Mn(e)}function Mn(e){var t=new Fn;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Bn(e);if(t){var i=Bn(t);n=Hn(Xn(n,1),i)}var r=n[0],a=n[1];return Zn(Jn([2147483647&r,a]))}(e.nodes.map((function(e){return e.visit(t,null)})).join(""),e.meaning)}var Dn=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitText",value:function(e,t){return e.value}},{key:"visitContainer",value:function(e,t){var n=this;return"[".concat(e.children.map((function(e){return e.visit(n)})).join(", "),"]")}},{key:"visitIcu",value:function(e,t){var n=this,i=Object.keys(e.cases).map((function(t){return"".concat(t," {").concat(e.cases[t].visit(n),"}")}));return"{".concat(e.expression,", ").concat(e.type,", ").concat(i.join(", "),"}")}},{key:"visitTagPlaceholder",value:function(e,t){var n=this;return e.isVoid?'<ph tag name="'.concat(e.startName,'"/>'):'<ph tag name="'.concat(e.startName,'">').concat(e.children.map((function(e){return e.visit(n)})).join(", "),'</ph name="').concat(e.closeName,'">')}},{key:"visitPlaceholder",value:function(e,t){return e.value?'<ph name="'.concat(e.name,'">').concat(e.value,"</ph>"):'<ph name="'.concat(e.name,'"/>')}},{key:"visitIcuPlaceholder",value:function(e,t){return'<ph icu name="'.concat(e.name,'">').concat(e.value.visit(this),"</ph>")}}]),e}(),Rn=new Dn;var Ln,Fn=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"visitIcu",value:function(e,t){var n=this,i=Object.keys(e.cases).map((function(t){return"".concat(t," {").concat(e.cases[t].visit(n),"}")}));return"{".concat(e.type,", ").concat(i.join(", "),"}")}}]),n}(Dn);function Nn(e,t,n,i){return e<20?[t&n|~t&i,1518500249]:e<40?[t^n^i,1859775393]:e<60?[t&n|t&i|n&i,2400959708]:[t^n^i,3395469782]}function Bn(e){var t=dt(e),n=Un(t,0),i=Un(t,102072);return 0!=n||0!=i&&1!=i||(n^=319790063,i^=-1801410264),[n,i]}function Un(e,t){var n,i=2654435769,r=2654435769,a=e.length;for(n=0;n+12<=a;n+=12){var o=zn(i=Vn(i,Kn(e,n,Ln.Little)),r=Vn(r,Kn(e,n+4,Ln.Little)),t=Vn(t,Kn(e,n+8,Ln.Little)));i=o[0],r=o[1],t=o[2]}return i=Vn(i,Kn(e,n,Ln.Little)),r=Vn(r,Kn(e,n+4,Ln.Little)),t=Vn(t,a),zn(i,r,t=Vn(t,Kn(e,n+8,Ln.Little)<<8))[2]}function zn(e,t,n){return e=Wn(e,t),e=Wn(e,n),e^=n>>>13,t=Wn(t,n),t=Wn(t,e),t^=e<<8,n=Wn(n,e),n=Wn(n,t),n^=t>>>13,e=Wn(e,t),e=Wn(e,n),e^=n>>>12,t=Wn(t,n),t=Wn(t,e),t^=e<<16,n=Wn(n,e),n=Wn(n,t),n^=t>>>5,e=Wn(e,t),e=Wn(e,n),e^=n>>>3,t=Wn(t,n),t=Wn(t,e),t^=e<<10,n=Wn(n,e),n=Wn(n,t),[e,t,n^=t>>>15]}function Vn(e,t){return Gn(e,t)[1]}function Gn(e,t){var n=(65535&e)+(65535&t),i=(e>>>16)+(t>>>16)+(n>>>16);return[i>>>16,i<<16|65535&n]}function Hn(e,t){var n=e[0],i=e[1],r=t[0],a=Gn(i,t[1]),o=a[0],s=a[1];return[Vn(Vn(n,r),o),s]}function Wn(e,t){var n=(65535&e)-(65535&t);return(e>>16)-(t>>16)+(n>>16)<<16|65535&n}function Yn(e,t){return e<<t|e>>>32-t}function Xn(e,t){var n=e[0],i=e[1];return[n<<t|i>>>32-t,i<<t|n>>>32-t]}function qn(e,t){return t>=e.length?0:255&e.charCodeAt(t)}function Kn(e,t,n){var i=0;if(n===Ln.Big)for(var r=0;r<4;r++)i+=qn(e,t+r)<<24-8*r;else for(var a=0;a<4;a++)i+=qn(e,t+a)<<8*a;return i}function Jn(e){return e.reduce((function(e,t){return e+function(e){for(var t="",n=0;n<4;n++)t+=String.fromCharCode(e>>>8*(3-n)&255);return t}(t)}),"")}function Zn(e){for(var t="",n="1",i=e.length-1;i>=0;i--)t=Qn(t,$n(qn(e,i),n)),n=$n(256,n);return t.split("").reverse().join("")}function Qn(e,t){for(var n="",i=Math.max(e.length,t.length),r=0,a=0;r<i||a;r++){var o=a+ +(e[r]||0)+ +(t[r]||0);o>=10?(a=1,n+=o-10):(a=0,n+=o)}return n}function $n(e,t){for(var n="",i=t;0!==e;e>>>=1)1&e&&(n=Qn(n,i)),i=Qn(i,i);return n}!function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(Ln||(Ln={}));new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitTag",value:function(e){var t=this,n=this._serializeAttributes(e.attrs);if(0==e.children.length)return"<".concat(e.name).concat(n,"/>");var i=e.children.map((function(e){return e.visit(t)}));return"<".concat(e.name).concat(n,">").concat(i.join(""),"</").concat(e.name,">")}},{key:"visitText",value:function(e){return e.value}},{key:"visitDeclaration",value:function(e){return"<?xml".concat(this._serializeAttributes(e.attrs)," ?>")}},{key:"_serializeAttributes",value:function(e){var t=Object.keys(e).map((function(t){return"".concat(t,'="').concat(e[t],'"')})).join(" ");return t.length>0?" "+t:""}},{key:"visitDoctype",value:function(e){return"<!DOCTYPE ".concat(e.rootTag," [\n").concat(e.dtd,"\n]>")}}]),e}());function ei(e){return e.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var ti="i18n",ni="i18n-",ii="\ufffd";function ri(e){return e===ti||e.startsWith(ni)}function ai(e){return e instanceof kn}function oi(e){return ai(e)&&1===e.nodes.length&&e.nodes[0]instanceof In}function si(e){return!!e.i18n}function ci(e){return e.nodes[0]}function ui(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t>0?":".concat(t):"";return"".concat(ii).concat(e).concat(n).concat(ii)}function li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e;return function(){return t++}}function pi(e){var t={};return e.forEach((function(e,n){t[n]=rt(e.length>1?"[".concat(e.join("|"),"]"):e[0])})),t}function di(e,t){for(var n=e.get(t)||[],i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];n.push.apply(n,r),e.set(t,n)}function hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t,r=new Map,a=e instanceof kn?e.nodes.find((function(e){return e instanceof En})):e;return a&&a.children.filter((function(e){return e instanceof _n})).forEach((function(e,t){var a=ui(i+t,n);di(r,e.name,a)})),r}function fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};return e&&Object.keys(e).length&&Object.keys(e).forEach((function(i){return n[gi(i,t)]=e[i]})),n}function gi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=ei(e);if(!t)return n;var i,r=n.split("_");if(1===r.length)return e.toLowerCase();/^\d+$/.test(r[r.length-1])&&(i=r.pop());var a=r.shift().toLowerCase();return r.length&&(a+=r.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join("")),i?"".concat(a,"_").concat(i):a}function mi(e){return"".concat("MSG_").concat(e).toUpperCase()}function vi(e){return new We(e.name,void 0,Z,void 0,e.sourceSpan)}var bi=/[-.]/,yi="_t",Ci="ctx",Oi="rf";function xi(e,t){var n=null;return function(){return n||(e.push(new We(yi,void 0,J)),n=Je(t)),n}}function Si(e){if(this)throw new Error("Builder ".concat(this.constructor.name," doesn't support ").concat(e," yet"));throw new Error("Feature ".concat(e," is not supported yet"))}function ki(e){throw new Error("Invalid state: Visitor ".concat(this.constructor.name," doesn't handle ").concat(e.constructor.name))}function wi(e){return Array.isArray(e)?et(e.map(wi)):rt(e,Z)}function Ei(e,t){return Object.getOwnPropertyNames(e).length>0?function(e,t){return tt(Object.getOwnPropertyNames(e).map((function(n){var i,r,a,o=e[n];if(Array.isArray(o)){var s=Object(u.a)(o,2);r=s[0],i=s[1]}else{var c=ct(n,[n,o]),l=Object(u.a)(c,2);i=l[0],r=l[1]}return{key:a=i,quoted:bi.test(a),value:t&&r!==i?et([wi(r),wi(i)]):wi(r)}})))}(e,t):null}function Ii(e){for(;at(e[e.length-1]);)e.pop();return e}function Ti(e,t){if(Array.isArray(e.predicate)){var n=[];return e.predicate.forEach((function(e){var t=e.split(",").map((function(e){return rt(e.trim())}));n.push.apply(n,Object(g.a)(t))})),t.getConstLiteral(et(n),!0)}return e.predicate}var _i,ji,Pi,Ai=function(){function e(){Object(m.a)(this,e),this.values=[]}return Object(v.a)(e,[{key:"set",value:function(e,t){t&&this.values.push({key:e,value:t,quoted:!1})}},{key:"toLiteralMap",value:function(){return tt(this.values)}}]),e}();function Mi(e){var t={};return e instanceof bn&&"ng-template"!==e.tagName?e.templateAttrs.forEach((function(e){return t[e.name]=""})):(e.attributes.forEach((function(e){ri(e.name)||(t[e.name]=e.value)})),e.inputs.forEach((function(e){t[e.name]=""})),e.outputs.forEach((function(e){t[e.name]=""}))),t}function Di(e,t,n){var i=Ze(e,null,n);if(t.length>0)for(var r=0;r<t.length;r++)i=i.callFn(t[r],n);else i=i.callFn([],n);return i}function Ri(e){var t=e.expressions,n=e.strings;return 1===t.length&&2===n.length&&""===n[0]&&""===n[1]?1:t.length+n.length}function Li(e){var t,n,i,r=Je("t"),a=[],o=te,s=Ni(e)?r:new De(X.Or,r,e.internalType),c=null;if(null!==e.deps)"invalid"!==e.deps&&(c=new ge(s,Fi(e.deps,e.injectFn,e.target===ji.Pipe)),t=e.deps,n=!1,i=t.map((function(e){var t=function(e){var t=[];return e.resolved===Pi.Attribute&&null!==e.attribute&&t.push({key:"attribute",value:e.attribute,quoted:!1}),e.optional&&t.push({key:"optional",value:rt(!0),quoted:!1}),e.host&&t.push({key:"host",value:rt(!0),quoted:!1}),e.self&&t.push({key:"self",value:rt(!0),quoted:!1}),e.skipSelf&&t.push({key:"skipSelf",value:rt(!0),quoted:!1}),t.length>0?tt(t):null}(e);return null!==t?(n=!0,t):rt(null)})),o=n?Qe(et(i)):te);else{var u=Je("\u0275".concat(e.name,"_BaseFactory")),l=Ze(Lt.getInheritedFactory),p=u.set(l.callFn([e.internalType],void 0,!0)).toDeclStmt(Z,[we.Exported,we.Final]);a.push(p),c=u.callFn([s])}var d=c,h=[],f=null;function g(e){var t=Je("r");h.push(t.set(Ue).toDeclStmt());var n=null;return n=null!==d?t.set(d).toStmt():Ze(Lt.invalidFactory).callFn([]).toStmt(),h.push(it(r,[n],[t.set(e).toStmt()])),t}if(Ni(e)&&e.delegateType===_i.Factory){var m=Je("\u0275".concat(e.name,"_BaseFactory")),v=Ze(Lt.getFactoryOf);if(e.delegate.isEquivalent(e.internalType))throw new Error("Illegal state: compiling factory that delegates to itself");var b=m.set(v.callFn([e.delegate])).toDeclStmt(Z,[we.Exported,we.Final]);a.push(b),f=g(m.callFn([]))}else if(Ni(e)){var y=Fi(e.delegateDeps,e.injectFn,e.target===ji.Pipe);f=g(new(e.delegateType===_i.Class?ge:fe)(e.delegate,y))}else f=function(e){return void 0!==e.expression}(e)?g(e.expression):c;return null!==f?h.push(new qe(f)):h.push(Ze(Lt.invalidFactory).callFn([]).toStmt()),{factory:nt([new Pe("t",J)],h,Z,void 0,"".concat(e.name,"_Factory")),statements:a,type:Qe(Ze(Lt.FactoryDef,[Nt(e.type.type,e.typeArgumentCount),o]))}}function Fi(e,t,n){return e.map((function(e,i){return function(e,t,n,i){switch(e.resolved){case Pi.Token:case Pi.ChangeDetectorRef:var r=0|(e.self?2:0)|(e.skipSelf?4:0)|(e.host?1:0)|(e.optional?8:0),a=0!==r||e.optional?rt(r):null;if(n&&e.resolved===Pi.ChangeDetectorRef)return Ze(Lt.injectPipeChangeDetectorRef).callFn(a?[a]:[]);var o=[e.token];return a&&o.push(a),Ze(t).callFn(o);case Pi.Attribute:return Ze(Lt.injectAttribute).callFn([e.token]);case Pi.Invalid:return Ze(Lt.invalidFactoryDep).callFn([rt(i)]);default:return Si("Unknown R3ResolvedDependencyType: ".concat(Pi[e.resolved]))}}(e,t,n,i)}))}function Ni(e){return void 0!==e.delegateType}function Bi(e,t){return{statements:[],factory:e.node===t.node?t.prop("\u0275fac"):nt([new Pe("t",J)],[new qe(t.callMethod("\u0275fac",[Je("t")]))])}}!function(e){e[e.Class=0]="Class",e[e.Function=1]="Function",e[e.Factory=2]="Factory"}(_i||(_i={})),function(e){e[e.Directive=0]="Directive",e[e.Component=1]="Component",e[e.Injectable=2]="Injectable",e[e.Pipe=3]="Pipe",e[e.NgModule=4]="NgModule"}(ji||(ji={})),function(e){e[e.Token=0]="Token",e[e.Attribute=1]="Attribute",e[e.ChangeDetectorRef=2]="ChangeDetectorRef",e[e.Invalid=3]="Invalid"}(Pi||(Pi={}));var Ui=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function zi(e,t){if(!(null==t||Array.isArray(t)&&2==t.length))throw new Error("Expected '".concat(e,"' to be an array, [start, end]."));if(null!=t){var n=t[0],i=t[1];Ui.forEach((function(e){if(e.test(n)||e.test(i))throw new Error("['".concat(n,"', '").concat(i,"'] contains unusable interpolation symbol."))}))}}var Vi=function(){function e(t,n){Object(m.a)(this,e),this.start=t,this.end=n}return Object(v.a)(e,null,[{key:"fromArray",value:function(t){return t?(zi("interpolation",t),new e(t[0],t[1])):Gi}}]),e}(),Gi=new Vi("{{","}}"),Hi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(m.a)(this,e),this.file=t,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}return Object(v.a)(e,[{key:"addSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}},{key:"addLine",value:function(){return this.lines.push([]),this.lastCol0=0,this}},{key:"addMapping",value:function(e,t,n,i){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error('Unknown source file "'.concat(t,'"'));if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==n||null==i))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:n,sourceCol0:i}),this}},{key:"currentLine",get:function(){return this.lines.slice(-1)[0]}},{key:"toJSON",value:function(){var e=this;if(!this.hasMappings)return null;var t=new Map,n=[],i=[];Array.from(this.sourcesContent.keys()).forEach((function(r,a){t.set(r,a),n.push(r),i.push(e.sourcesContent.get(r)||null)}));var r="",a=0,o=0,s=0,c=0;return this.lines.forEach((function(e){a=0,r+=e.map((function(e){var n=Wi(e.col0-a);return a=e.col0,null!=e.sourceUrl&&(n+=Wi(t.get(e.sourceUrl)-o),o=t.get(e.sourceUrl),n+=Wi(e.sourceLine0-s),s=e.sourceLine0,n+=Wi(e.sourceCol0-c),c=e.sourceCol0),n})).join(","),r+=";"})),r=r.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:n,sourcesContent:i,mappings:r}}},{key:"toJsComment",value:function(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function(e){var t="";e=dt(e);for(var n=0;n<e.length;){var i=e.charCodeAt(n++),r=e.charCodeAt(n++),a=e.charCodeAt(n++);t+=Yi(i>>2),t+=Yi((3&i)<<4|(isNaN(r)?0:r>>4)),t+=isNaN(r)?"=":Yi((15&r)<<2|a>>6),t+=isNaN(r)||isNaN(a)?"=":Yi(63&a)}return t}(JSON.stringify(this,null,0)):""}}]),e}();function Wi(e){e=e<0?1+(-e<<1):e<<1;var t="";do{var n=31&e;(e>>=5)>0&&(n|=32),t+=Yi(n)}while(e>0);return t}function Yi(e){if(e<0||e>=64)throw new Error("Can only encode value in the range [0, 63]");return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}var Xi=/'|\\|\n|\r|\$/g,qi=/^[$A-Z_][0-9A-Z_$]*$/i,Ki="  ",Ji=Je("error",null,null),Zi=Je("stack",null,null),Qi=function e(t){Object(m.a)(this,e),this.indent=t,this.partsLength=0,this.parts=[],this.srcSpans=[]},$i=function(){function e(t){Object(m.a)(this,e),this._indent=t,this._classes=[],this._preambleLineCount=0,this._lines=[new Qi(t)]}return Object(v.a)(e,[{key:"_currentLine",get:function(){return this._lines[this._lines.length-1]}},{key:"println",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.print(e||null,t,!0)}},{key:"lineIsEmpty",value:function(){return 0===this._currentLine.parts.length}},{key:"lineLength",value:function(){return this._currentLine.indent*Ki.length+this._currentLine.partsLength}},{key:"print",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),n&&this._lines.push(new Qi(this._indent))}},{key:"removeEmptyLastLine",value:function(){this.lineIsEmpty()&&this._lines.pop()}},{key:"incIndent",value:function(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}},{key:"decIndent",value:function(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}},{key:"pushClass",value:function(e){this._classes.push(e)}},{key:"popClass",value:function(){return this._classes.pop()}},{key:"currentClass",get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null}},{key:"toSource",value:function(){return this.sourceLines.map((function(e){return e.parts.length>0?nr(e.indent)+e.parts.join(""):""})).join("\n")}},{key:"toSourceMapGenerator",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Hi(e),i=!1,r=function(){i||(n.addSource(e," ").addMapping(0,e,0,0),i=!0)},a=0;a<t;a++)n.addLine(),r();return this.sourceLines.forEach((function(e,t){n.addLine();for(var a=e.srcSpans,o=e.parts,s=e.indent*Ki.length,c=0;c<a.length&&!a[c];)s+=o[c].length,c++;for(c<a.length&&0===t&&0===s?i=!0:r();c<a.length;){var u=a[c],l=u.start.file,p=u.start.line,d=u.start.col;for(n.addSource(l.url,l.content).addMapping(s,l.url,p,d),s+=o[c].length,c++;c<a.length&&(u===a[c]||!a[c]);)s+=o[c].length,c++}})),n}},{key:"setPreambleLineCount",value:function(e){return this._preambleLineCount=e}},{key:"spanOf",value:function(e,t){var n=this._lines[e-this._preambleLineCount];if(n)for(var i=t-nr(n.indent).length,r=0;r<n.parts.length;r++){var a=n.parts[r];if(a.length>i)return n.srcSpans[r];i-=a.length}return null}},{key:"sourceLines",get:function(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}],[{key:"createRoot",value:function(){return new e(0)}}]),e}(),er=function(){function e(t){Object(m.a)(this,e),this._escapeDollarInStrings=t}return Object(v.a)(e,[{key:"printLeadingComments",value:function(e,t){if(void 0!==e.leadingComments){var n,i=Object(l.a)(e.leadingComments);try{for(i.s();!(n=i.n()).done;){var r=n.value;r instanceof Ge?t.print(e,"/*".concat(r.toString(),"*/"),r.trailingNewline):r.multiline?t.print(e,"/* ".concat(r.text," */"),r.trailingNewline):r.text.split("\n").forEach((function(n){t.println(e,"// ".concat(n))}))}}catch(a){i.e(a)}finally{i.f()}}}},{key:"visitExpressionStmt",value:function(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}},{key:"visitReturnStmt",value:function(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}},{key:"visitIfStmt",value:function(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");var n=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!n?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),n&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}},{key:"visitThrowStmt",value:function(e,t){return this.printLeadingComments(e,t),t.print(e,"throw "),e.error.visitExpression(this,t),t.println(e,";"),null}},{key:"visitWriteVarExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),t.print(e,"".concat(e.name," = ")),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitWriteKeyExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitWritePropExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,".".concat(e.name," = ")),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitInvokeMethodExpr",value:function(e,t){e.receiver.visitExpression(this,t);var n=e.name;return null!=e.builtin&&null==(n=this.getBuiltinMethodName(e.builtin))||(t.print(e,".".concat(n,"(")),this.visitAllExpressions(e.args,t,","),t.print(e,")")),null}},{key:"visitInvokeFunctionExpr",value:function(e,t){return e.fn.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}},{key:"visitWrappedNodeExpr",value:function(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}},{key:"visitTypeofExpr",value:function(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}},{key:"visitReadVarExpr",value:function(e,t){var n=e.name;if(null!=e.builtin)switch(e.builtin){case re.Super:n="super";break;case re.This:n="this";break;case re.CatchError:n=Ji.name;break;case re.CatchStack:n=Zi.name;break;default:throw new Error("Unknown builtin variable ".concat(e.builtin))}return t.print(e,n),null}},{key:"visitInstantiateExpr",value:function(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}},{key:"visitLiteralExpr",value:function(e,t){var n=e.value;return"string"==typeof n?t.print(e,tr(n,this._escapeDollarInStrings)):t.print(e,"".concat(n)),null}},{key:"visitLocalizedString",value:function(e,t){var n=e.serializeI18nHead();t.print(e,"$localize `"+n.raw);for(var i=1;i<e.messageParts.length;i++)t.print(e,"${"),e.expressions[i-1].visitExpression(this,t),t.print(e,"}".concat(e.serializeI18nTemplatePart(i).raw));return t.print(e,"`"),null}},{key:"visitConditionalExpr",value:function(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}},{key:"visitNotExpr",value:function(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}},{key:"visitAssertNotNullExpr",value:function(e,t){return e.condition.visitExpression(this,t),null}},{key:"visitUnaryOperatorExpr",value:function(e,t){var n;switch(e.operator){case Y.Plus:n="+";break;case Y.Minus:n="-";break;default:throw new Error("Unknown operator ".concat(e.operator))}return e.parens&&t.print(e,"("),t.print(e,n),e.expr.visitExpression(this,t),e.parens&&t.print(e,")"),null}},{key:"visitBinaryOperatorExpr",value:function(e,t){var n;switch(e.operator){case X.Equals:n="==";break;case X.Identical:n="===";break;case X.NotEquals:n="!=";break;case X.NotIdentical:n="!==";break;case X.And:n="&&";break;case X.BitwiseAnd:n="&";break;case X.Or:n="||";break;case X.Plus:n="+";break;case X.Minus:n="-";break;case X.Divide:n="/";break;case X.Multiply:n="*";break;case X.Modulo:n="%";break;case X.Lower:n="<";break;case X.LowerEquals:n="<=";break;case X.Bigger:n=">";break;case X.BiggerEquals:n=">=";break;default:throw new Error("Unknown operator ".concat(e.operator))}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e," ".concat(n," ")),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}},{key:"visitReadPropExpr",value:function(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}},{key:"visitReadKeyExpr",value:function(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}},{key:"visitLiteralArrayExpr",value:function(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}},{key:"visitLiteralMapExpr",value:function(e,t){var n=this;return t.print(e,"{"),this.visitAllObjects((function(i){t.print(e,"".concat(tr(i.key,n._escapeDollarInStrings,i.quoted),":")),i.value.visitExpression(n,t)}),e.entries,t,","),t.print(e,"}"),null}},{key:"visitCommaExpr",value:function(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}},{key:"visitAllExpressions",value:function(e,t,n){var i=this;this.visitAllObjects((function(e){return e.visitExpression(i,t)}),e,t,n)}},{key:"visitAllObjects",value:function(e,t,n,i){for(var r=!1,a=0;a<t.length;a++)a>0&&(n.lineLength()>80?(n.print(null,i,!0),r||(n.incIndent(),n.incIndent(),r=!0)):n.print(null,i,!1)),e(t[a]);r&&(n.decIndent(),n.decIndent())}},{key:"visitAllStatements",value:function(e,t){var n=this;e.forEach((function(e){return e.visitStatement(n,t)}))}}]),e}();function tr(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e)return null;var i=e.replace(Xi,(function(){return"$"==(arguments.length<=0?void 0:arguments[0])?t?"\\$":"$":"\n"==(arguments.length<=0?void 0:arguments[0])?"\\n":"\r"==(arguments.length<=0?void 0:arguments[0])?"\\r":"\\".concat(arguments.length<=0?void 0:arguments[0])})),r=n||!qi.test(i);return r?"'".concat(i,"'"):i}function nr(e){for(var t="",n=0;n<e;n++)t+=Ki;return t}var ir=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.call(this,!1)}return Object(v.a)(n,[{key:"visitDeclareClassStmt",value:function(e,t){var n=this;return t.pushClass(e),this._visitClassConstructor(e,t),null!=e.parent&&(t.print(e,"".concat(e.name,".prototype = Object.create(")),e.parent.visitExpression(this,t),t.println(e,".prototype);")),e.getters.forEach((function(i){return n._visitClassGetter(e,i,t)})),e.methods.forEach((function(i){return n._visitClassMethod(e,i,t)})),t.popClass(),null}},{key:"_visitClassConstructor",value:function(e,t){t.print(e,"function ".concat(e.name,"(")),null!=e.constructorMethod&&this._visitParams(e.constructorMethod.params,t),t.println(e,") {"),t.incIndent(),null!=e.constructorMethod&&e.constructorMethod.body.length>0&&(t.println(e,"var self = this;"),this.visitAllStatements(e.constructorMethod.body,t)),t.decIndent(),t.println(e,"}")}},{key:"_visitClassGetter",value:function(e,t,n){n.println(e,"Object.defineProperty(".concat(e.name,".prototype, '").concat(t.name,"', { get: function() {")),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"}});")}},{key:"_visitClassMethod",value:function(e,t,n){n.print(e,"".concat(e.name,".prototype.").concat(t.name," = function(")),this._visitParams(t.params,n),n.println(e,") {"),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"};")}},{key:"visitWrappedNodeExpr",value:function(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}},{key:"visitReadVarExpr",value:function(e,t){if(e.builtin===re.This)t.print(e,"self");else{if(e.builtin===re.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");Object(p.a)(Object(d.a)(n.prototype),"visitReadVarExpr",this).call(this,e,t)}return null}},{key:"visitDeclareVarStmt",value:function(e,t){return t.print(e,"var ".concat(e.name)),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}},{key:"visitCastExpr",value:function(e,t){return e.value.visitExpression(this,t),null}},{key:"visitInvokeFunctionExpr",value:function(e,t){var i=e.fn;return i instanceof se&&i.builtin===re.Super?(t.currentClass.parent.visitExpression(this,t),t.print(e,".call(this"),e.args.length>0&&(t.print(e,", "),this.visitAllExpressions(e.args,t,",")),t.print(e,")")):Object(p.a)(Object(d.a)(n.prototype),"visitInvokeFunctionExpr",this).call(this,e,t),null}},{key:"visitFunctionExpr",value:function(e,t){return t.print(e,"function".concat(e.name?" "+e.name:"","(")),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}},{key:"visitDeclareFunctionStmt",value:function(e,t){return t.print(e,"function ".concat(e.name,"(")),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}},{key:"visitTryCatchStmt",value:function(e,t){t.println(e,"try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println(e,"} catch (".concat(Ji.name,") {")),t.incIndent();var n=[Zi.set(Ji.prop("stack")).toDeclStmt(null,[we.Final])].concat(e.catchStmts);return this.visitAllStatements(n,t),t.decIndent(),t.println(e,"}"),null}},{key:"visitLocalizedString",value:function(e,t){var n=this;t.print(e,'$localize((this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})(');for(var i=[e.serializeI18nHead()],r=1;r<e.messageParts.length;r++)i.push(e.serializeI18nTemplatePart(r));return t.print(e,"[".concat(i.map((function(e){return tr(e.cooked,!1)})).join(", "),"], ")),t.print(e,"[".concat(i.map((function(e){return tr(e.raw,!1)})).join(", "),"])")),e.expressions.forEach((function(i){t.print(e,", "),i.visitExpression(n,t)})),t.print(e,")"),null}},{key:"_visitParams",value:function(e,t){this.visitAllObjects((function(e){return t.print(null,e.name)}),e,t,",")}},{key:"getBuiltinMethodName",value:function(e){var t;switch(e){case oe.ConcatArray:t="concat";break;case oe.SubscribeObservable:t="subscribe";break;case oe.Bind:t="bind";break;default:throw new Error("Unknown builtin method: ".concat(e))}return t}}]),n}(er),rr=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"evaluateStatements",value:function(e,t,n,i){var r=new ar(n),a=$i.createRoot();return t.length>0&&!t[0].isEquivalent(rt("use strict").toStmt())&&(t=[rt("use strict").toStmt()].concat(Object(g.a)(t))),r.visitAllStatements(t,a),r.createReturnStmt(a),this.evaluateCode(e,a,r.getArgs(),i)}},{key:"evaluateCode",value:function(e,t,n,i){var r='"use strict";'.concat(t.toSource(),"\n//# sourceURL=").concat(e),a=[],o=[];for(var s in n)o.push(n[s]),a.push(s);if(i){var u=Object(c.a)(Function,Object(g.a)(a.concat("return null;"))).toString(),l=u.slice(0,u.indexOf("return null;")).split("\n").length-1;r+="\n".concat(t.toSourceMapGenerator(e,l).toJsComment())}var p=Object(c.a)(Function,Object(g.a)(a.concat(r)));return this.executeFunction(p,o)}},{key:"executeFunction",value:function(e,t){return e.apply(void 0,Object(g.a)(t))}}]),e}(),ar=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this)).reflector=e,i._evalArgNames=[],i._evalArgValues=[],i._evalExportedVars=[],i}return Object(v.a)(n,[{key:"createReturnStmt",value:function(e){new qe(new Be(this._evalExportedVars.map((function(e){return new Ne(e,Je(e),!1)})))).visitStatement(this,e)}},{key:"getArgs",value:function(){for(var e={},t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}},{key:"visitExternalExpr",value:function(e,t){return this._emitReferenceToExternal(e,this.reflector.resolveExternalReference(e.value),t),null}},{key:"visitWrappedNodeExpr",value:function(e,t){return this._emitReferenceToExternal(e,e.node,t),null}},{key:"visitDeclareVarStmt",value:function(e,t){return e.hasModifier(we.Exported)&&this._evalExportedVars.push(e.name),Object(p.a)(Object(d.a)(n.prototype),"visitDeclareVarStmt",this).call(this,e,t)}},{key:"visitDeclareFunctionStmt",value:function(e,t){return e.hasModifier(we.Exported)&&this._evalExportedVars.push(e.name),Object(p.a)(Object(d.a)(n.prototype),"visitDeclareFunctionStmt",this).call(this,e,t)}},{key:"visitDeclareClassStmt",value:function(e,t){return e.hasModifier(we.Exported)&&this._evalExportedVars.push(e.name),Object(p.a)(Object(d.a)(n.prototype),"visitDeclareClassStmt",this).call(this,e,t)}},{key:"_emitReferenceToExternal",value:function(e,t,n){var i=this._evalArgValues.indexOf(t);if(-1===i){i=this._evalArgValues.length,this._evalArgValues.push(t);var r=Mt({reference:t})||"val";this._evalArgNames.push("jit_".concat(r,"_").concat(i))}n.print(e,this._evalArgNames[i])}}]),n}(ir);var or=function(){function e(t){Object(m.a)(this,e),this.context=t}return Object(v.a)(e,[{key:"resolveExternalReference",value:function(e){if("@angular/core"!==e.moduleName)throw new Error("Cannot resolve external reference to ".concat(e.moduleName,", only references to @angular/core are supported."));if(!this.context.hasOwnProperty(e.name))throw new Error("No value provided for @angular/core symbol '".concat(e.name,"'."));return this.context[e.name]}},{key:"parameters",value:function(e){throw new Error("Not implemented.")}},{key:"annotations",value:function(e){throw new Error("Not implemented.")}},{key:"shallowAnnotations",value:function(e){throw new Error("Not implemented.")}},{key:"tryAnnotations",value:function(e){throw new Error("Not implemented.")}},{key:"propMetadata",value:function(e){throw new Error("Not implemented.")}},{key:"hasLifecycleHook",value:function(e,t){throw new Error("Not implemented.")}},{key:"guards",value:function(e){throw new Error("Not implemented.")}},{key:"componentModuleUrl",value:function(e,t){throw new Error("Not implemented.")}}]),e}();function sr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tt(Object.keys(e).map((function(n){return{key:n,quoted:t,value:e[n]}})))}function cr(e){var t=e.internalType,n=e.type,i=e.bootstrap,r=e.declarations,a=e.imports,o=e.exports,s=e.schemas,c=e.containsForwardDecls,u=e.emitInline,l=e.id,p=[],d={type:t};if(i.length&&(d.bootstrap=lr(i,c)),u)r.length&&(d.declarations=lr(r,c)),a.length&&(d.imports=lr(a,c)),o.length&&(d.exports=lr(o,c));else{var h=function(e){var t=e.adjacentType,n=e.declarations,i=e.imports,r=e.exports,a=e.containsForwardDecls,o={};n.length&&(o.declarations=lr(n,a));i.length&&(o.imports=lr(i,a));r.length&&(o.exports=lr(r,a));if(0===Object.keys(o).length)return null;var s=(u=new fe(Ze(Lt.setNgModuleScope),[t,Ft(o)]),l=new Ee({name:"ngJitMode",moduleName:null}),p=new De(X.Identical,new ce(l),rt("undefined")),d=new De(X.Or,p,l,void 0,void 0,!0),new De(X.And,d,u)),c=new Ae([],[s.toStmt()]);var u,l,p,d;return new fe(c,[]).toStmt()}(e);null!==h&&p.push(h)}return s&&s.length&&(d.schemas=et(s.map((function(e){return e.value})))),l&&(d.id=l),{expression:Ze(Lt.defineNgModule).callFn([Ft(d)]),type:new K(Ze(Lt.NgModuleDefWithMeta,[new K(n.type),ur(r),ur(a),ur(o)])),additionalStatements:p}}function ur(e){var t=e.map((function(e){return $e(e.type)}));return e.length>0?Qe(et(t)):te}function lr(e,t){var n=et(e.map((function(e){return e.value})));return t?nt([],[new qe(n)]):n}function pr(e){var t=[];return t.push({key:"name",value:rt(e.pipeName),quoted:!1}),t.push({key:"type",value:e.type.value,quoted:!1}),t.push({key:"pure",value:rt(e.pure),quoted:!1}),{expression:Ze(Lt.definePipe).callFn([tt(t)]),type:new K(Ze(Lt.PipeDefWithMeta,[Nt(e.type.type,e.typeArgumentCount),new K(new me(e.pipeName))]))}}var dr,hr=function e(t,n,i,r){Object(m.a)(this,e),this.input=n,this.errLocation=i,this.ctxLocation=r,this.message="Parser Error: ".concat(t," ").concat(i," [").concat(n,"] in ").concat(r)},fr=function(){function e(t,n){Object(m.a)(this,e),this.start=t,this.end=n}return Object(v.a)(e,[{key:"toAbsolute",value:function(e){return new Br(e+this.start,e+this.end)}}]),e}(),gr=function(){function e(t,n){Object(m.a)(this,e),this.span=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null}},{key:"toString",value:function(){return"AST"}}]),e}(),mr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,e,i)).nameSpan=r,a}return n}(gr),vr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,i)).prefix=r,s.uninterpretedExpression=a,s.location=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitQuote(this,t)}},{key:"toString",value:function(){return"Quote"}}]),n}(gr),br=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"visit",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),n}(gr),yr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitImplicitReceiver(this,t)}}]),n}(gr),Cr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,e,i)).expressions=r,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitChain(this,t)}}]),n}(gr),Or=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,i)).condition=r,s.trueExp=a,s.falseExp=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitConditional(this,t)}}]),n}(gr),xr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,i,r)).receiver=a,s.name=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPropertyRead(this,t)}}]),n}(mr),Sr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,i,r)).receiver=a,c.name=o,c.value=s,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPropertyWrite(this,t)}}]),n}(mr),kr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,i,r)).receiver=a,s.name=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitSafePropertyRead(this,t)}}]),n}(mr),wr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,i)).obj=r,o.key=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitKeyedRead(this,t)}}]),n}(gr),Er=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,i)).obj=r,s.key=a,s.value=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitKeyedWrite(this,t)}}]),n}(gr),Ir=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,i,s)).exp=r,c.name=a,c.args=o,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPipe(this,t)}}]),n}(mr),Tr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,e,i)).value=r,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralPrimitive(this,t)}}]),n}(gr),_r=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,e,i)).expressions=r,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralArray(this,t)}}]),n}(gr),jr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,i)).keys=r,o.values=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralMap(this,t)}}]),n}(gr),Pr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,i)).strings=r,o.expressions=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitInterpolation(this,t)}}]),n}(gr),Ar=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,i)).operation=r,s.left=a,s.right=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitBinary(this,t)}}]),n}(gr),Mr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s,c){var u;return Object(m.a)(this,n),(u=t.call(this,e,i,o,s,c)).operator=r,u.expr=a,u}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}}],[{key:"createMinus",value:function(e,t,i){return new n(e,t,"-",i,"-",new Tr(e,t,0),i)}},{key:"createPlus",value:function(e,t,i){return new n(e,t,"+",i,"-",i,new Tr(e,t,0))}}]),n}(Ar),Dr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,e,i)).expression=r,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPrefixNot(this,t)}}]),n}(gr),Rr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,e,i)).expression=r,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitNonNullAssert(this,t)}}]),n}(gr),Lr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,i,r)).receiver=a,c.name=o,c.args=s,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitMethodCall(this,t)}}]),n}(mr),Fr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,i,r)).receiver=a,c.name=o,c.args=s,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitSafeMethodCall(this,t)}}]),n}(mr),Nr=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,i)).target=r,o.args=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitFunctionCall(this,t)}}]),n}(gr),Br=function e(t,n){Object(m.a)(this,e),this.start=t,this.end=n},Ur=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,new fr(0,null===i?0:i.length),new Br(a,null===i?a:a+i.length))).ast=e,s.source=i,s.location=r,s.errors=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}},{key:"toString",value:function(){return"".concat(this.source," in ").concat(this.location)}}]),n}(gr),zr=function e(t,n,i){Object(m.a)(this,e),this.sourceSpan=t,this.key=n,this.value=i},Vr=function e(t,n,i){Object(m.a)(this,e),this.sourceSpan=t,this.key=n,this.value=i},Gr=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visit",value:function(e,t){e.visit(this,t)}},{key:"visitUnary",value:function(e,t){this.visit(e.expr,t)}},{key:"visitBinary",value:function(e,t){this.visit(e.left,t),this.visit(e.right,t)}},{key:"visitChain",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitConditional",value:function(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}},{key:"visitPipe",value:function(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}},{key:"visitFunctionCall",value:function(e,t){e.target&&this.visit(e.target,t),this.visitAll(e.args,t)}},{key:"visitImplicitReceiver",value:function(e,t){}},{key:"visitInterpolation",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitKeyedRead",value:function(e,t){this.visit(e.obj,t),this.visit(e.key,t)}},{key:"visitKeyedWrite",value:function(e,t){this.visit(e.obj,t),this.visit(e.key,t),this.visit(e.value,t)}},{key:"visitLiteralArray",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitLiteralMap",value:function(e,t){this.visitAll(e.values,t)}},{key:"visitLiteralPrimitive",value:function(e,t){}},{key:"visitMethodCall",value:function(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}},{key:"visitPrefixNot",value:function(e,t){this.visit(e.expression,t)}},{key:"visitNonNullAssert",value:function(e,t){this.visit(e.expression,t)}},{key:"visitPropertyRead",value:function(e,t){this.visit(e.receiver,t)}},{key:"visitPropertyWrite",value:function(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}},{key:"visitSafePropertyRead",value:function(e,t){this.visit(e.receiver,t)}},{key:"visitSafeMethodCall",value:function(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}},{key:"visitQuote",value:function(e,t){}},{key:"visitAll",value:function(e,t){var n,i=Object(l.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;this.visit(r,t)}}catch(a){i.e(a)}finally{i.f()}}}]),e}(),Hr=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){return e}},{key:"visitInterpolation",value:function(e,t){return new Pr(e.span,e.sourceSpan,e.strings,this.visitAll(e.expressions))}},{key:"visitLiteralPrimitive",value:function(e,t){return new Tr(e.span,e.sourceSpan,e.value)}},{key:"visitPropertyRead",value:function(e,t){return new xr(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}},{key:"visitPropertyWrite",value:function(e,t){return new Sr(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,e.value.visit(this))}},{key:"visitSafePropertyRead",value:function(e,t){return new kr(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}},{key:"visitMethodCall",value:function(e,t){return new Lr(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,this.visitAll(e.args))}},{key:"visitSafeMethodCall",value:function(e,t){return new Fr(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,this.visitAll(e.args))}},{key:"visitFunctionCall",value:function(e,t){return new Nr(e.span,e.sourceSpan,e.target.visit(this),this.visitAll(e.args))}},{key:"visitLiteralArray",value:function(e,t){return new _r(e.span,e.sourceSpan,this.visitAll(e.expressions))}},{key:"visitLiteralMap",value:function(e,t){return new jr(e.span,e.sourceSpan,e.keys,this.visitAll(e.values))}},{key:"visitUnary",value:function(e,t){switch(e.operator){case"+":return Mr.createPlus(e.span,e.sourceSpan,e.expr.visit(this));case"-":return Mr.createMinus(e.span,e.sourceSpan,e.expr.visit(this));default:throw new Error("Unknown unary operator ".concat(e.operator))}}},{key:"visitBinary",value:function(e,t){return new Ar(e.span,e.sourceSpan,e.operation,e.left.visit(this),e.right.visit(this))}},{key:"visitPrefixNot",value:function(e,t){return new Dr(e.span,e.sourceSpan,e.expression.visit(this))}},{key:"visitNonNullAssert",value:function(e,t){return new Rr(e.span,e.sourceSpan,e.expression.visit(this))}},{key:"visitConditional",value:function(e,t){return new Or(e.span,e.sourceSpan,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}},{key:"visitPipe",value:function(e,t){return new Ir(e.span,e.sourceSpan,e.exp.visit(this),e.name,this.visitAll(e.args),e.nameSpan)}},{key:"visitKeyedRead",value:function(e,t){return new wr(e.span,e.sourceSpan,e.obj.visit(this),e.key.visit(this))}},{key:"visitKeyedWrite",value:function(e,t){return new Er(e.span,e.sourceSpan,e.obj.visit(this),e.key.visit(this),e.value.visit(this))}},{key:"visitAll",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].visit(this);return t}},{key:"visitChain",value:function(e,t){return new Cr(e.span,e.sourceSpan,this.visitAll(e.expressions))}},{key:"visitQuote",value:function(e,t){return new vr(e.span,e.sourceSpan,e.prefix,e.uninterpretedExpression,e.location)}}]),e}(),Wr=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){return e}},{key:"visitInterpolation",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new Pr(e.span,e.sourceSpan,e.strings,n):e}},{key:"visitLiteralPrimitive",value:function(e,t){return e}},{key:"visitPropertyRead",value:function(e,t){var n=e.receiver.visit(this);return n!==e.receiver?new xr(e.span,e.sourceSpan,e.nameSpan,n,e.name):e}},{key:"visitPropertyWrite",value:function(e,t){var n=e.receiver.visit(this),i=e.value.visit(this);return n!==e.receiver||i!==e.value?new Sr(e.span,e.sourceSpan,e.nameSpan,n,e.name,i):e}},{key:"visitSafePropertyRead",value:function(e,t){var n=e.receiver.visit(this);return n!==e.receiver?new kr(e.span,e.sourceSpan,e.nameSpan,n,e.name):e}},{key:"visitMethodCall",value:function(e,t){var n=e.receiver.visit(this),i=this.visitAll(e.args);return n!==e.receiver||i!==e.args?new Lr(e.span,e.sourceSpan,e.nameSpan,n,e.name,i):e}},{key:"visitSafeMethodCall",value:function(e,t){var n=e.receiver.visit(this),i=this.visitAll(e.args);return n!==e.receiver||i!==e.args?new Fr(e.span,e.sourceSpan,e.nameSpan,n,e.name,i):e}},{key:"visitFunctionCall",value:function(e,t){var n=e.target&&e.target.visit(this),i=this.visitAll(e.args);return n!==e.target||i!==e.args?new Nr(e.span,e.sourceSpan,n,i):e}},{key:"visitLiteralArray",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new _r(e.span,e.sourceSpan,n):e}},{key:"visitLiteralMap",value:function(e,t){var n=this.visitAll(e.values);return n!==e.values?new jr(e.span,e.sourceSpan,e.keys,n):e}},{key:"visitUnary",value:function(e,t){var n=e.expr.visit(this);if(n!==e.expr)switch(e.operator){case"+":return Mr.createPlus(e.span,e.sourceSpan,n);case"-":return Mr.createMinus(e.span,e.sourceSpan,n);default:throw new Error("Unknown unary operator ".concat(e.operator))}return e}},{key:"visitBinary",value:function(e,t){var n=e.left.visit(this),i=e.right.visit(this);return n!==e.left||i!==e.right?new Ar(e.span,e.sourceSpan,e.operation,n,i):e}},{key:"visitPrefixNot",value:function(e,t){var n=e.expression.visit(this);return n!==e.expression?new Dr(e.span,e.sourceSpan,n):e}},{key:"visitNonNullAssert",value:function(e,t){var n=e.expression.visit(this);return n!==e.expression?new Rr(e.span,e.sourceSpan,n):e}},{key:"visitConditional",value:function(e,t){var n=e.condition.visit(this),i=e.trueExp.visit(this),r=e.falseExp.visit(this);return n!==e.condition||i!==e.trueExp||r!==e.falseExp?new Or(e.span,e.sourceSpan,n,i,r):e}},{key:"visitPipe",value:function(e,t){var n=e.exp.visit(this),i=this.visitAll(e.args);return n!==e.exp||i!==e.args?new Ir(e.span,e.sourceSpan,n,e.name,i,e.nameSpan):e}},{key:"visitKeyedRead",value:function(e,t){var n=e.obj.visit(this),i=e.key.visit(this);return n!==e.obj||i!==e.key?new wr(e.span,e.sourceSpan,n,i):e}},{key:"visitKeyedWrite",value:function(e,t){var n=e.obj.visit(this),i=e.key.visit(this),r=e.value.visit(this);return n!==e.obj||i!==e.key||r!==e.value?new Er(e.span,e.sourceSpan,n,i,r):e}},{key:"visitAll",value:function(e){for(var t=[],n=!1,i=0;i<e.length;++i){var r=e[i],a=r.visit(this);t[i]=a,n=n||a!==r}return n?t:e}},{key:"visitChain",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new Cr(e.span,e.sourceSpan,n):e}},{key:"visitQuote",value:function(e,t){return e}}]),e}(),Yr=function e(t,n,i,r,a){Object(m.a)(this,e),this.name=t,this.expression=n,this.type=i,this.sourceSpan=r,this.valueSpan=a,this.isLiteral=this.type===dr.LITERAL_ATTR,this.isAnimation=this.type===dr.ANIMATION};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LITERAL_ATTR=1]="LITERAL_ATTR",e[e.ANIMATION=2]="ANIMATION"}(dr||(dr={}));var Xr=function e(t,n,i,r,a,o){Object(m.a)(this,e),this.name=t,this.targetOrPhase=n,this.type=i,this.handler=r,this.sourceSpan=a,this.handlerSpan=o},qr=function e(t,n,i,r,a){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=i,this.keySpan=r,this.valueSpan=a},Kr=function e(t,n,i,r,a,o,s){Object(m.a)(this,e),this.name=t,this.type=n,this.securityContext=i,this.value=r,this.unit=a,this.sourceSpan=o,this.valueSpan=s},Jr=function e(){Object(m.a)(this,e)};Jr.event=Je("$event");var Zr=function e(t,n){Object(m.a)(this,e),this.stmts=t,this.allowDefault=n,this.render3Stmts=t.map((function(e){if(e instanceof We&&e.name==n.name&&e.value instanceof De){var t=e.value.lhs;return new qe(t.value)}return e}))};function Qr(e,t,n,i,r,a,o){e||(e=new pa);var s=$r({createLiteralArrayConverter:function(e){return function(e){return et(e)}},createLiteralMapConverter:function(e){return function(t){return tt(e.map((function(e,n){return{key:e.key,value:t[n],quoted:e.quoted}})))}},createPipeConverter:function(e){throw new Error("Illegal State: Actions are not allowed to contain pipes. Pipe: ".concat(e))}},n),c=new la(e,t,i,r,a,o),u=[];!function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):n.push(t)}(s.visit(c,ta.Statement),u),function(e,t,n){for(var i=e-1;i>=0;i--)n.unshift(oa(t,i))}(c.temporaryCount,i,u),c.usesImplicitReceiver&&e.notifyImplicitReceiverUse();var l=u.length-1,p=null;if(l>=0){var d=function(e){if(e instanceof Xe)return e.expr;if(e instanceof qe)return e.value;return null}(u[l]);d&&(p=function(e){return Je("pd_".concat(e))}(i),u[l]=p.set(d.cast(J).notIdentical(rt(!1))).toDeclStmt(null,[we.Final]))}return new Zr(u,p)}function $r(e,t){return function(e,t){var n=new ua(e);return t.visit(n)}(e,t)}var ea,ta,na=function e(t,n){Object(m.a)(this,e),this.stmts=t,this.currValExpr=n};function ia(e,t,n,i,r,a){e||(e=new pa);var o=new la(e,t,i,a),s=n.visit(o,ta.Expression),c=ra(o,i);if(o.usesImplicitReceiver&&e.notifyImplicitReceiverUse(),0===o.temporaryCount&&r==ea.TrySimple)return new na([],s);if(r===ea.Expression)return new na(c,s);var u=function(e){return Je("currVal_".concat(e))}(i);return c.push(u.set(s).toDeclStmt(J,[we.Final])),new na(c,u)}function ra(e,t){for(var n=[],i=0;i<e.temporaryCount;i++)n.push(oa(t,i));return n}function aa(e,t){return"tmp_".concat(e,"_").concat(t)}function oa(e,t){return new We(aa(e,t),Ue)}function sa(e,t){if(e!==ta.Expression)throw new Error("Expected an expression, but saw ".concat(t))}function ca(e,t){return e===ta.Statement?t.toStmt():t}!function(e){e[e.General=0]="General",e[e.TrySimple=1]="TrySimple",e[e.Expression=2]="Expression"}(ea||(ea={})),function(e){e[e.Statement=0]="Statement",e[e.Expression=1]="Expression"}(ta||(ta={}));var ua=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this))._converterFactory=e,i}return Object(v.a)(n,[{key:"visitPipe",value:function(e,t){var n=this,i=[e.exp].concat(Object(g.a)(e.args)).map((function(e){return e.visit(n,t)}));return new da(e.span,e.sourceSpan,i,this._converterFactory.createPipeConverter(e.name,i.length))}},{key:"visitLiteralArray",value:function(e,t){var n=this,i=e.expressions.map((function(e){return e.visit(n,t)}));return new da(e.span,e.sourceSpan,i,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}},{key:"visitLiteralMap",value:function(e,t){var n=this,i=e.values.map((function(e){return e.visit(n,t)}));return new da(e.span,e.sourceSpan,i,this._converterFactory.createLiteralMapConverter(e.keys))}}]),n}(Hr),la=function(){function e(t,n,i,r,a,o){Object(m.a)(this,e),this._localResolver=t,this._implicitReceiver=n,this.bindingId=i,this.interpolationFunction=r,this.baseSourceSpan=a,this.implicitReceiverAccesses=o,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}return Object(v.a)(e,[{key:"visitUnary",value:function(e,t){var n;switch(e.operator){case"+":n=Y.Plus;break;case"-":n=Y.Minus;break;default:throw new Error("Unsupported operator ".concat(e.operator))}return ca(t,new Me(n,this._visit(e.expr,ta.Expression),void 0,this.convertSourceSpan(e.span)))}},{key:"visitBinary",value:function(e,t){var n;switch(e.operation){case"+":n=X.Plus;break;case"-":n=X.Minus;break;case"*":n=X.Multiply;break;case"/":n=X.Divide;break;case"%":n=X.Modulo;break;case"&&":n=X.And;break;case"||":n=X.Or;break;case"==":n=X.Equals;break;case"!=":n=X.NotEquals;break;case"===":n=X.Identical;break;case"!==":n=X.NotIdentical;break;case"<":n=X.Lower;break;case">":n=X.Bigger;break;case"<=":n=X.LowerEquals;break;case">=":n=X.BiggerEquals;break;default:throw new Error("Unsupported operation ".concat(e.operation))}return ca(t,new De(n,this._visit(e.left,ta.Expression),this._visit(e.right,ta.Expression),void 0,this.convertSourceSpan(e.span)))}},{key:"visitChain",value:function(e,t){return function(e,t){if(e!==ta.Statement)throw new Error("Expected a statement, but saw ".concat(t))}(t,e),this.visitAll(e.expressions,t)}},{key:"visitConditional",value:function(e,t){return ca(t,this._visit(e.condition,ta.Expression).conditional(this._visit(e.trueExp,ta.Expression),this._visit(e.falseExp,ta.Expression),this.convertSourceSpan(e.span)))}},{key:"visitPipe",value:function(e,t){throw new Error("Illegal state: Pipes should have been converted into functions. Pipe: ".concat(e.name))}},{key:"visitFunctionCall",value:function(e,t){var n=this.visitAll(e.args,ta.Expression);return ca(t,e instanceof da?e.converter(n):this._visit(e.target,ta.Expression).callFn(n,this.convertSourceSpan(e.span)))}},{key:"visitImplicitReceiver",value:function(e,t){return sa(t,e),this.usesImplicitReceiver=!0,this._implicitReceiver}},{key:"visitInterpolation",value:function(e,t){sa(t,e);for(var n=[rt(e.expressions.length)],i=0;i<e.strings.length-1;i++)n.push(rt(e.strings[i])),n.push(this._visit(e.expressions[i],ta.Expression));return n.push(rt(e.strings[e.strings.length-1])),this.interpolationFunction?this.interpolationFunction(n):e.expressions.length<=9?Ze(Tt.inlineInterpolate).callFn(n):Ze(Tt.interpolate).callFn([n[0],et(n.slice(1),void 0,this.convertSourceSpan(e.span))])}},{key:"visitKeyedRead",value:function(e,t){var n=this.leftMostSafeNode(e);return n?this.convertSafeAccess(e,n,t):ca(t,this._visit(e.obj,ta.Expression).key(this._visit(e.key,ta.Expression)))}},{key:"visitKeyedWrite",value:function(e,t){var n=this._visit(e.obj,ta.Expression),i=this._visit(e.key,ta.Expression),r=this._visit(e.value,ta.Expression);return ca(t,n.key(i).set(r))}},{key:"visitLiteralArray",value:function(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}},{key:"visitLiteralMap",value:function(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}},{key:"visitLiteralPrimitive",value:function(e,t){var n=null===e.value||void 0===e.value||!0===e.value||!0===e.value?Z:void 0;return ca(t,rt(e.value,n,this.convertSourceSpan(e.span)))}},{key:"_getLocal",value:function(e){return this._localResolver.getLocal(e)}},{key:"visitMethodCall",value:function(e,t){if(e.receiver instanceof yr&&"$any"==e.name){var n=this.visitAll(e.args,ta.Expression);if(1!=n.length)throw new Error("Invalid call to $any, expected 1 argument but received ".concat(n.length||"none"));return n[0].cast(J,this.convertSourceSpan(e.span))}var i=this.leftMostSafeNode(e);if(i)return this.convertSafeAccess(e,i,t);var r=this.visitAll(e.args,ta.Expression),a=this.usesImplicitReceiver,o=null,s=this._visit(e.receiver,ta.Expression);if(s===this._implicitReceiver){var c=this._getLocal(e.name);c&&(this.usesImplicitReceiver=a,o=c.callFn(r)),this.addImplicitReceiverAccess(e.name)}return null==o&&(o=s.callMethod(e.name,r,this.convertSourceSpan(e.span))),ca(t,o)}},{key:"visitPrefixNot",value:function(e,t){return ca(t,(n=this._visit(e.expression,ta.Expression),new Te(n,i)));var n,i}},{key:"visitNonNullAssert",value:function(e,t){return ca(t,(n=this._visit(e.expression,ta.Expression),new _e(n,i)));var n,i}},{key:"visitPropertyRead",value:function(e,t){var n=this.leftMostSafeNode(e);if(n)return this.convertSafeAccess(e,n,t);var i=null,r=this.usesImplicitReceiver,a=this._visit(e.receiver,ta.Expression);return a===this._implicitReceiver&&((i=this._getLocal(e.name))&&(this.usesImplicitReceiver=r),this.addImplicitReceiverAccess(e.name)),null==i&&(i=a.prop(e.name)),ca(t,i)}},{key:"visitPropertyWrite",value:function(e,t){var n=this._visit(e.receiver,ta.Expression),i=this.usesImplicitReceiver,r=null;if(n===this._implicitReceiver){var a=this._getLocal(e.name);if(a){if(!(a instanceof Re)){var o=e.name,s=e.value instanceof xr?e.value.name:void 0;throw new Error('Cannot assign value "'.concat(s,'" to template variable "').concat(o,'". Template variables are read-only.'))}r=a,this.usesImplicitReceiver=i,this.addImplicitReceiverAccess(e.name)}}return null===r&&(r=n.prop(e.name)),ca(t,r.set(this._visit(e.value,ta.Expression)))}},{key:"visitSafePropertyRead",value:function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}},{key:"visitSafeMethodCall",value:function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}},{key:"visitAll",value:function(e,t){var n=this;return e.map((function(e){return n._visit(e,t)}))}},{key:"visitQuote",value:function(e,t){throw new Error("Quotes are not supported for evaluation!\n        Statement: ".concat(e.uninterpretedExpression," located at ").concat(e.location))}},{key:"_visit",value:function(e,t){var n=this._resultMap.get(e);return n||(this._nodeMap.get(e)||e).visit(this,t)}},{key:"convertSafeAccess",value:function(e,t,n){var i=this._visit(t.receiver,ta.Expression),r=void 0;this.needsTemporary(t.receiver)&&(i=(r=this.allocateTemporary()).set(i),this._resultMap.set(t.receiver,r));var a=i.isBlank();t instanceof Fr?this._nodeMap.set(t,new Lr(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name,t.args)):this._nodeMap.set(t,new xr(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name));var o=this._visit(e,ta.Expression);return this._nodeMap.delete(t),r&&this.releaseTemporary(r),ca(n,a.conditional(rt(null),o))}},{key:"leftMostSafeNode",value:function(e){var t=this,n=function(e,n){return(t._nodeMap.get(n)||n).visit(e)};return e.visit({visitUnary:function(e){return null},visitBinary:function(e){return null},visitChain:function(e){return null},visitConditional:function(e){return null},visitFunctionCall:function(e){return null},visitImplicitReceiver:function(e){return null},visitInterpolation:function(e){return null},visitKeyedRead:function(e){return n(this,e.obj)},visitKeyedWrite:function(e){return null},visitLiteralArray:function(e){return null},visitLiteralMap:function(e){return null},visitLiteralPrimitive:function(e){return null},visitMethodCall:function(e){return n(this,e.receiver)},visitPipe:function(e){return null},visitPrefixNot:function(e){return null},visitNonNullAssert:function(e){return null},visitPropertyRead:function(e){return n(this,e.receiver)},visitPropertyWrite:function(e){return null},visitQuote:function(e){return null},visitSafeMethodCall:function(e){return n(this,e.receiver)||e},visitSafePropertyRead:function(e){return n(this,e.receiver)||e}})}},{key:"needsTemporary",value:function(e){var t=this,n=function(e,n){return n&&(t._nodeMap.get(n)||n).visit(e)};return e.visit({visitUnary:function(e){return n(this,e.expr)},visitBinary:function(e){return n(this,e.left)||n(this,e.right)},visitChain:function(e){return!1},visitConditional:function(e){return n(this,e.condition)||n(this,e.trueExp)||n(this,e.falseExp)},visitFunctionCall:function(e){return!0},visitImplicitReceiver:function(e){return!1},visitInterpolation:function(e){return function(e,t){return t.some((function(t){return n(e,t)}))}(this,e.expressions)},visitKeyedRead:function(e){return!1},visitKeyedWrite:function(e){return!1},visitLiteralArray:function(e){return!0},visitLiteralMap:function(e){return!0},visitLiteralPrimitive:function(e){return!1},visitMethodCall:function(e){return!0},visitPipe:function(e){return!0},visitPrefixNot:function(e){return n(this,e.expression)},visitNonNullAssert:function(e){return n(this,e.expression)},visitPropertyRead:function(e){return!1},visitPropertyWrite:function(e){return!1},visitQuote:function(e){return!1},visitSafeMethodCall:function(e){return!0},visitSafePropertyRead:function(e){return!1}})}},{key:"allocateTemporary",value:function(){var e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new se(aa(this.bindingId,e))}},{key:"releaseTemporary",value:function(e){if(this._currentTemporary--,e.name!=aa(this.bindingId,this._currentTemporary))throw new Error("Temporary ".concat(e.name," released out of order"))}},{key:"convertSourceSpan",value:function(e){if(this.baseSourceSpan){var t=this.baseSourceSpan.start.moveBy(e.start),n=this.baseSourceSpan.start.moveBy(e.end),i=this.baseSourceSpan.fullStart.moveBy(e.start);return new ln(t,n,i)}return null}},{key:"addImplicitReceiverAccess",value:function(e){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(e)}}]),e}();var pa=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"notifyImplicitReceiverUse",value:function(){}},{key:"getLocal",value:function(e){return e===Jr.event.name?Jr.event:null}}]),e}();var da=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,i,null,r)).args=r,o.converter=a,o}return n}(Nr),ha=function(){function e(){Object(m.a)(this,e),this.strictStyling=!0}return Object(v.a)(e,[{key:"shimCssText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=Da(e);e=Aa(e),e=this._insertDirectives(e);var r=this._scopeCssText(e,t,n);return[r].concat(Object(g.a)(i)).join("\n")}},{key:"_insertDirectives",value:function(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}},{key:"_insertPolyfillDirectivesInCssText",value:function(e){return e.replace(ga,(function(){return(arguments.length<=2?void 0:arguments[2])+"{"}))}},{key:"_insertPolyfillRulesInCssText",value:function(e){return e.replace(ma,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0].replace(t[1],"").replace(t[2],"");return t[4]+i}))}},{key:"_scopeCssText",value:function(e,t,n){var i=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeSelectors(e,t,n)),(e=e+"\n"+i).trim()}},{key:"_extractUnscopedRulesFromCssText",value:function(e){var t,n="";for(va.lastIndex=0;null!==(t=va.exec(e));){n+=t[0].replace(t[2],"").replace(t[1],t[4])+"\n\n"}return n}},{key:"_convertColonHost",value:function(e){return this._convertColonRule(e,Oa,this._colonHostPartReplacer)}},{key:"_convertColonHostContext",value:function(e){return this._convertColonRule(e,xa,this._colonHostContextPartReplacer)}},{key:"_convertColonRule",value:function(e,t,n){return e.replace(t,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t[2]){for(var r=t[2].split(","),a=[],o=0;o<r.length;o++){var s=r[o].trim();if(!s)break;a.push(n(Sa,s,t[3]))}return a.join(",")}return Sa+t[3]}))}},{key:"_colonHostContextPartReplacer",value:function(e,t,n){return t.indexOf(ba)>-1?this._colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n}},{key:"_colonHostPartReplacer",value:function(e,t,n){return e+t.replace(ba,"")+n}},{key:"_convertShadowDOMSelectors",value:function(e){return wa.reduce((function(e,t){return e.replace(t," ")}),e)}},{key:"_scopeSelectors",value:function(e,t,n){var i,r,a,o,s,c=this;return i=function(e){var i=e.selector,r=e.content;return"@"!=e.selector[0]?i=c._scopeSelector(e.selector,t,n,c.strictStyling):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(r=c._scopeSelectors(e.content,t,n)),new za(i,r)},r=Ga(e,Ua,La),a=Ga(r.escapedString,Ba,Ra),o=0,s=0,a.escapedString.replace(Fa,(function(){var e=arguments.length<=2?void 0:arguments[2],t="",n=arguments.length<=4?void 0:arguments[4],r="";n&&n.startsWith("{%BLOCK%")&&(t=a.blocks[o++],n=n.substring(Ra.length+1),r="{");var s=i(new za(e,t));return"".concat(arguments.length<=1?void 0:arguments[1]).concat(s.selector).concat(arguments.length<=3?void 0:arguments[3]).concat(r).concat(s.content).concat(n)})).replace(Na,(function(){return r.blocks[s++]}))}},{key:"_scopeSelector",value:function(e,t,n,i){var r=this;return e.split(",").map((function(e){return e.trim().split(Ea)})).map((function(e){var a=Object(s.a)(e),o=a[0],c=a.slice(1);return[function(e){return r._selectorNeedsScoping(e,t)?i?r._applyStrictSelectorScope(e,t,n):r._applySelectorScope(e,t,n):e}(o)].concat(Object(g.a)(c)).join(" ")})).join(", ")}},{key:"_selectorNeedsScoping",value:function(e,t){return!this._makeScopeMatcher(t).test(e)}},{key:"_makeScopeMatcher",value:function(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+Ia,"m")}},{key:"_applySelectorScope",value:function(e,t,n){return this._applySimpleSelectorScope(e,t,n)}},{key:"_applySimpleSelectorScope",value:function(e,t,n){if(Ta.lastIndex=0,Ta.test(e)){var i=this.strictStyling?"[".concat(n,"]"):t;return e.replace(ka,(function(e,t){return t.replace(/([^:]*)(:*)(.*)/,(function(e,t,n,r){return t+i+n+r}))})).replace(Ta,i+" ")}return t+" "+e}},{key:"_applyStrictSelectorScope",value:function(e,t,n){for(var i,r=this,a="["+(t=t.replace(/\[is=([^\]]*)\]/g,(function(e){return arguments.length<=1?void 0:arguments[1]})))+"]",o=function(e){var i=e.trim();if(!i)return"";if(e.indexOf(Sa)>-1)i=r._applySimpleSelectorScope(e,t,n);else{var o=e.replace(Ta,"");if(o.length>0){var s=o.match(/([^:]*)(:*)(.*)/);s&&(i=s[1]+a+s[2]+s[3])}}return i},s=new fa(e),c="",u=0,l=/( |>|\+|~(?!=))\s*/g,p=!((e=s.content()).indexOf(Sa)>-1);null!==(i=l.exec(e));){var d=i[1],h=e.slice(u,i.index).trim(),f=(p=p||h.indexOf(Sa)>-1)?o(h):h;c+="".concat(f," ").concat(d," "),u=l.lastIndex}var g=e.substring(u);return c+=(p=p||g.indexOf(Sa)>-1)?o(g):g,s.restore(c)}},{key:"_insertPolyfillHostInCssText",value:function(e){return e.replace(ja,ya).replace(_a,ba)}}]),e}(),fa=function(){function e(t){var n=this;Object(m.a)(this,e),this.placeholders=[],this.index=0,t=t.replace(/(\[[^\]]*\])/g,(function(e,t){var i="__ph-".concat(n.index,"__");return n.placeholders.push(t),n.index++,i})),this._content=t.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(function(e,t,i){var r="__ph-".concat(n.index,"__");return n.placeholders.push(i),n.index++,t+r}))}return Object(v.a)(e,[{key:"restore",value:function(e){var t=this;return e.replace(/__ph-(\d+)__/g,(function(e,n){return t.placeholders[+n]}))}},{key:"content",value:function(){return this._content}}]),e}(),ga=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,ma=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,va=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,ba="-shadowcsshost",ya="-shadowcsscontext",Ca=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Oa=new RegExp("("+ba+Ca,"gim"),xa=new RegExp("("+ya+Ca,"gim"),Sa=ba+"-no-combinator",ka=/-shadowcsshost-no-combinator([^\s]*)/,wa=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],Ea=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,Ia="([>\\s~+[.,{:][\\s\\S]*)?$",Ta=/-shadowcsshost/gim,_a=/:host/gim,ja=/:host-context/gim,Pa=/\/\*\s*[\s\S]*?\*\//g;function Aa(e){return e.replace(Pa,"")}var Ma=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g;function Da(e){return e.match(Ma)||[]}var Ra="%BLOCK%",La="%QUOTED%",Fa=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Na=/%QUOTED%/g,Ba=new Map([["{","}"]]),Ua=new Map([['"','"'],["'","'"]]),za=function e(t,n){Object(m.a)(this,e),this.selector=t,this.content=n};var Va=function e(t,n){Object(m.a)(this,e),this.escapedString=t,this.blocks=n};function Ga(e,t,n){for(var i,r,a=[],o=[],s=0,c=0,u=-1,l=0;l<e.length;l++){var p=e[l];"\\"===p?l++:p===r?0===--s&&(o.push(e.substring(u,l)),a.push(n),c=l,u=-1,i=r=void 0):p===i?s++:0===s&&t.has(p)&&(i=p,r=t.get(p),s=1,u=l+1,a.push(e.substring(c,u)))}return-1!==u?(o.push(e.substring(u)),a.push(n)):a.push(e.substring(c)),new Va(a.join(""),o)}var Ha="%COMP%",Wa="_nghost-".concat(Ha),Ya="_ngcontent-".concat(Ha);var Xa=function e(t,n){Object(m.a)(this,e),this.sourceSpan=t,this.i18n=n},qa=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).value=e,a}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),n}(Xa),Ka=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,a,s)).switchValue=e,c.type=i,c.cases=r,c.switchValueSourceSpan=o,c}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitExpansion(this,t)}}]),n}(Xa),Ja=function(){function e(t,n,i,r,a){Object(m.a)(this,e),this.value=t,this.expression=n,this.sourceSpan=i,this.valueSourceSpan=r,this.expSourceSpan=a}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitExpansionCase(this,t)}}]),e}(),Za=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,r,o)).name=e,s.value=i,s.valueSpan=a,s}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitAttribute(this,t)}}]),n}(Xa),Qa=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6?arguments[6]:void 0;return Object(m.a)(this,n),(o=t.call(this,a,u)).name=e,o.attrs=i,o.children=r,o.startSourceSpan=s,o.endSourceSpan=c,o}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitElement(this,t)}}]),n}(Xa),$a=function(){function e(t,n){Object(m.a)(this,e),this.value=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitComment(this,t)}}]),e}();function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[],r=e.visit?function(t){return e.visit(t,n)||t.visit(e,n)}:function(t){return t.visit(e,n)};return t.forEach((function(e){var t=r(e);t&&i.push(t)})),i}var to;!function(e){e[e.TAG_OPEN_START=0]="TAG_OPEN_START",e[e.TAG_OPEN_END=1]="TAG_OPEN_END",e[e.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",e[e.TAG_CLOSE=3]="TAG_CLOSE",e[e.TEXT=4]="TEXT",e[e.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",e[e.RAW_TEXT=6]="RAW_TEXT",e[e.COMMENT_START=7]="COMMENT_START",e[e.COMMENT_END=8]="COMMENT_END",e[e.CDATA_START=9]="CDATA_START",e[e.CDATA_END=10]="CDATA_END",e[e.ATTR_NAME=11]="ATTR_NAME",e[e.ATTR_QUOTE=12]="ATTR_QUOTE",e[e.ATTR_VALUE=13]="ATTR_VALUE",e[e.DOC_TYPE=14]="DOC_TYPE",e[e.EXPANSION_FORM_START=15]="EXPANSION_FORM_START",e[e.EXPANSION_CASE_VALUE=16]="EXPANSION_CASE_VALUE",e[e.EXPANSION_CASE_EXP_START=17]="EXPANSION_CASE_EXP_START",e[e.EXPANSION_CASE_EXP_END=18]="EXPANSION_CASE_EXP_END",e[e.EXPANSION_FORM_END=19]="EXPANSION_FORM_END",e[e.EOF=20]="EOF"}(to||(to={}));var no=function e(t,n,i){Object(m.a)(this,e),this.type=t,this.parts=n,this.sourceSpan=i},io=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,r,e)).tokenType=i,a}return n}(pn),ro=function e(t,n,i){Object(m.a)(this,e),this.tokens=t,this.errors=n,this.nonNormalizedIcuExpressions=i};var ao,oo=/\r\n?/g;function so(e){var t=0===e?"EOF":String.fromCharCode(e);return'Unexpected character "'.concat(t,'"')}function co(e){return'Unknown entity "'.concat(e,'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax')}!function(e){e.HEX="hexadecimal",e.DEC="decimal"}(ao||(ao={}));var uo=function e(t){Object(m.a)(this,e),this.error=t},lo=function(){function e(t,n,i){Object(m.a)(this,e),this._getTagDefinition=n,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=i.tokenizeExpansionForms||!1,this._interpolationConfig=i.interpolationConfig||Gi,this._leadingTriviaCodePoints=i.leadingTriviaChars&&i.leadingTriviaChars.map((function(e){return e.codePointAt(0)||0}));var r=i.range||{endPos:t.content.length,startPos:0,startLine:0,startCol:0};this._cursor=i.escapedString?new yo(t,r):new bo(t,r),this._preserveLineEndings=i.preserveLineEndings||!1,this._escapedString=i.escapedString||!1,this._i18nNormalizeLineEndingsInICUs=i.i18nNormalizeLineEndingsInICUs||!1;try{this._cursor.init()}catch(a){this.handleError(a)}}return Object(v.a)(e,[{key:"_processCarriageReturns",value:function(e){return this._preserveLineEndings?e:e.replace(oo,"\n")}},{key:"tokenize",value:function(){for(;0!==this._cursor.peek();){var e=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(e):this._attemptCharCode(45)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(Yt)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(t){this.handleError(t)}}this._beginToken(to.EOF),this._endToken([])}},{key:"_tokenizeExpansionForm",value:function(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(this._cursor.peek()!==en&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===en){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}},{key:"_beginToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._cursor.clone();this._currentTokenStart=t,this._currentTokenType=e}},{key:"_endToken",value:function(e,t){if(null===this._currentTokenStart)throw new io("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(t));if(null===this._currentTokenType)throw new io("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));var n=new no(this._currentTokenType,e,this._cursor.getSpan(this._currentTokenStart,this._leadingTriviaCodePoints));return this.tokens.push(n),this._currentTokenStart=null,this._currentTokenType=null,n}},{key:"_createError",value:function(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var n=new io(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new uo(n)}},{key:"handleError",value:function(e){if(e instanceof Co&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),!(e instanceof uo))throw e;this.errors.push(e.error)}},{key:"_attemptCharCode",value:function(e){return this._cursor.peek()===e&&(this._cursor.advance(),!0)}},{key:"_attemptCharCodeCaseInsensitive",value:function(e){return t=this._cursor.peek(),n=e,mo(t)==mo(n)&&(this._cursor.advance(),!0);var t,n}},{key:"_requireCharCode",value:function(e){var t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(t))}},{key:"_attemptStr",value:function(e){var t=e.length;if(this._cursor.charsLeft()<t)return!1;for(var n=this._cursor.clone(),i=0;i<t;i++)if(!this._attemptCharCode(e.charCodeAt(i)))return this._cursor=n,!1;return!0}},{key:"_attemptStrCaseInsensitive",value:function(e){for(var t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}},{key:"_requireStr",value:function(e){var t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(t))}},{key:"_attemptCharCodeUntilFn",value:function(e){for(;!e(this._cursor.peek());)this._cursor.advance()}},{key:"_requireCharCodeUntilFn",value:function(e,t){var n=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(n)<t)throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(n))}},{key:"_attemptUntilChar",value:function(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}},{key:"_readChar",value:function(e){if(e&&38===this._cursor.peek())return this._decodeEntity();var t=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),t}},{key:"_decodeEntity",value:function(){var e=this._cursor.clone();if(this._cursor.advance(),!this._attemptCharCode(35)){var t=this._cursor.clone();if(this._attemptCharCodeUntilFn(go),this._cursor.peek()!=qt)return this._cursor=t,"&";var n=this._cursor.getChars(t);this._cursor.advance();var i=k[n];if(!i)throw this._createError(co(n),this._cursor.getSpan(e));return i}var r=this._attemptCharCode(120)||this._attemptCharCode(88),a=this._cursor.clone();if(this._attemptCharCodeUntilFn(fo),this._cursor.peek()!=qt){this._cursor.advance();var o=r?ao.HEX:ao.DEC;throw this._createError((s=o,c=this._cursor.getChars(e),'Unable to parse entity "'.concat(c,'" - ').concat(s,' character reference entities must end with ";"')),this._cursor.getSpan())}var s,c,u=this._cursor.getChars(a);this._cursor.advance();try{var l=parseInt(u,r?16:10);return String.fromCharCode(l)}catch(p){throw this._createError(co(this._cursor.getChars(e)),this._cursor.getSpan())}}},{key:"_consumeRawText",value:function(e,t){this._beginToken(e?to.ESCAPABLE_RAW_TEXT:to.RAW_TEXT);for(var n=[];;){var i=this._cursor.clone(),r=t();if(this._cursor=i,r)break;n.push(this._readChar(e))}return this._endToken([this._processCarriageReturns(n.join(""))])}},{key:"_consumeComment",value:function(e){var t=this;this._beginToken(to.COMMENT_START,e),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,(function(){return t._attemptStr("--\x3e")})),this._beginToken(to.COMMENT_END),this._requireStr("--\x3e"),this._endToken([])}},{key:"_consumeCdata",value:function(e){var t=this;this._beginToken(to.CDATA_START,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,(function(){return t._attemptStr("]]>")})),this._beginToken(to.CDATA_END),this._requireStr("]]>"),this._endToken([])}},{key:"_consumeDocType",value:function(e){this._beginToken(to.DOC_TYPE,e);var t=this._cursor.clone();this._attemptUntilChar(Jt);var n=this._cursor.getChars(t);this._cursor.advance(),this._endToken([n])}},{key:"_consumePrefixAndName",value:function(){for(var e,t,n=this._cursor.clone(),i="";this._cursor.peek()!==Xt&&!(((e=this._cursor.peek())<Zt||Qt<e)&&(e<65||90<e)&&(e<48||e>57));)this._cursor.advance();return this._cursor.peek()===Xt?(i=this._cursor.getChars(n),this._cursor.advance(),t=this._cursor.clone()):t=n,this._requireCharCodeUntilFn(ho,""===i?0:1),[i,this._cursor.getChars(t)]}},{key:"_consumeTagOpen",value:function(e){var t,n,i,a=this.tokens.length,o=this._cursor.clone();try{if(!rn(this._cursor.peek()))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(e));for(n=(i=this._consumeTagOpenStart(e)).parts[0],t=i.parts[1],this._attemptCharCodeUntilFn(po);this._cursor.peek()!==Yt&&this._cursor.peek()!==Jt;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(po),this._attemptCharCode(Kt)&&(this._attemptCharCodeUntilFn(po),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(po);this._consumeTagOpenEnd()}catch(c){if(c instanceof uo)return this._cursor=o,i&&(this.tokens.length=a),this._beginToken(to.TEXT,e),void this._endToken(["<"]);throw c}var s=this._getTagDefinition(t).contentType;s===r.RAW_TEXT?this._consumeRawTextWithTagClose(n,t,!1):s===r.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(n,t,!0)}},{key:"_consumeRawTextWithTagClose",value:function(e,t,n){var i=this;this._consumeRawText(n,(function(){return!!i._attemptCharCode(60)&&(!!i._attemptCharCode(Yt)&&(i._attemptCharCodeUntilFn(po),!!i._attemptStrCaseInsensitive(t)&&(i._attemptCharCodeUntilFn(po),i._attemptCharCode(Jt))))}));this._beginToken(to.TAG_CLOSE),this._requireCharCodeUntilFn((function(e){return e===Jt}),3),this._cursor.advance(),this._endToken([e,t])}},{key:"_consumeTagOpenStart",value:function(e){this._beginToken(to.TAG_OPEN_START,e);var t=this._consumePrefixAndName();return this._endToken(t)}},{key:"_consumeAttributeName",value:function(){var e=this._cursor.peek();if(39===e||34===e)throw this._createError(so(e),this._cursor.getSpan());this._beginToken(to.ATTR_NAME);var t=this._consumePrefixAndName();this._endToken(t)}},{key:"_consumeAttributeValue",value:function(){var e;if(39===this._cursor.peek()||34===this._cursor.peek()){this._beginToken(to.ATTR_QUOTE);var t=this._cursor.peek();this._cursor.advance(),this._endToken([String.fromCodePoint(t)]),this._beginToken(to.ATTR_VALUE);for(var n=[];this._cursor.peek()!==t;)n.push(this._readChar(!0));e=n.join(""),this._endToken([this._processCarriageReturns(e)]),this._beginToken(to.ATTR_QUOTE),this._cursor.advance(),this._endToken([String.fromCodePoint(t)])}else{this._beginToken(to.ATTR_VALUE);var i=this._cursor.clone();this._requireCharCodeUntilFn(ho,1),e=this._cursor.getChars(i),this._endToken([this._processCarriageReturns(e)])}}},{key:"_consumeTagOpenEnd",value:function(){var e=this._attemptCharCode(Yt)?to.TAG_OPEN_END_VOID:to.TAG_OPEN_END;this._beginToken(e),this._requireCharCode(Jt),this._endToken([])}},{key:"_consumeTagClose",value:function(e){this._beginToken(to.TAG_CLOSE,e),this._attemptCharCodeUntilFn(po);var t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(po),this._requireCharCode(Jt),this._endToken(t)}},{key:"_consumeExpansionFormStart",value:function(){this._beginToken(to.EXPANSION_FORM_START),this._requireCharCode($t),this._endToken([]),this._expansionCaseStack.push(to.EXPANSION_FORM_START),this._beginToken(to.RAW_TEXT);var e=this._readUntil(Wt),t=this._processCarriageReturns(e);if(this._escapedString||this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{var n=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(n)}this._requireCharCode(Wt),this._attemptCharCodeUntilFn(po),this._beginToken(to.RAW_TEXT);var i=this._readUntil(Wt);this._endToken([i]),this._requireCharCode(Wt),this._attemptCharCodeUntilFn(po)}},{key:"_consumeExpansionCaseStart",value:function(){this._beginToken(to.EXPANSION_CASE_VALUE);var e=this._readUntil($t).trim();this._endToken([e]),this._attemptCharCodeUntilFn(po),this._beginToken(to.EXPANSION_CASE_EXP_START),this._requireCharCode($t),this._endToken([]),this._attemptCharCodeUntilFn(po),this._expansionCaseStack.push(to.EXPANSION_CASE_EXP_START)}},{key:"_consumeExpansionCaseEnd",value:function(){this._beginToken(to.EXPANSION_CASE_EXP_END),this._requireCharCode(en),this._endToken([]),this._attemptCharCodeUntilFn(po),this._expansionCaseStack.pop()}},{key:"_consumeExpansionFormEnd",value:function(){this._beginToken(to.EXPANSION_FORM_END),this._requireCharCode(en),this._endToken([]),this._expansionCaseStack.pop()}},{key:"_consumeText",value:function(){var e=this._cursor.clone();this._beginToken(to.TEXT,e);var t=[];do{this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(t.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._inInterpolation&&this._attemptStr(this._interpolationConfig.end)?(t.push(this._interpolationConfig.end),this._inInterpolation=!1):t.push(this._readChar(!0))}while(!this._isTextEnd());this._endToken([this._processCarriageReturns(t.join(""))])}},{key:"_isTextEnd",value:function(){if(60===this._cursor.peek()||0===this._cursor.peek())return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(this.isExpansionFormStart())return!0;if(this._cursor.peek()===en&&this._isInExpansionCase())return!0}return!1}},{key:"_readUntil",value:function(e){var t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}},{key:"_isInExpansionCase",value:function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===to.EXPANSION_CASE_EXP_START}},{key:"_isInExpansionForm",value:function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===to.EXPANSION_FORM_START}},{key:"isExpansionFormStart",value:function(){if(this._cursor.peek()!==$t)return!1;if(this._interpolationConfig){var e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}}]),e}();function po(e){return!tn(e)||0===e}function ho(e){return tn(e)||e===Jt||e===Yt||39===e||34===e||e===Kt}function fo(e){return e==qt||0==e||!function(e){return e>=Zt&&e<=102||e>=65&&e<=70||nn(e)}(e)}function go(e){return e==qt||0==e||!rn(e)}function mo(e){return e>=Zt&&e<=Qt?e-Zt+65:e}function vo(e){for(var t=[],n=void 0,i=0;i<e.length;i++){var r=e[i];n&&n.type==to.TEXT&&r.type==to.TEXT?(n.parts[0]+=r.parts[0],n.sourceSpan.end=r.sourceSpan.end):(n=r,t.push(n))}return t}var bo=function(){function e(t,n){if(Object(m.a)(this,e),t instanceof e){this.file=t.file,this.input=t.input,this.end=t.end;var i=t.state;this.state={peek:i.peek,offset:i.offset,line:i.line,column:i.column}}else{if(!n)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=t,this.input=t.content,this.end=n.endPos,this.state={peek:-1,offset:n.startPos,line:n.startLine,column:n.startCol}}}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this)}},{key:"peek",value:function(){return this.state.peek}},{key:"charsLeft",value:function(){return this.end-this.state.offset}},{key:"diff",value:function(e){return this.state.offset-e.state.offset}},{key:"advance",value:function(){this.advanceState(this.state)}},{key:"init",value:function(){this.updatePeek(this.state)}},{key:"getSpan",value:function(e,t){var n=e=e||this;if(t)for(;this.diff(e)>0&&-1!==t.indexOf(e.peek());)n===e&&(e=e.clone()),e.advance();var i=this.locationFromCursor(e),r=this.locationFromCursor(this),a=n!==e?this.locationFromCursor(n):i;return new ln(i,r,a)}},{key:"getChars",value:function(e){return this.input.substring(e.state.offset,this.state.offset)}},{key:"charAt",value:function(e){return this.input.charCodeAt(e)}},{key:"advanceState",value:function(e){if(e.offset>=this.end)throw this.state=e,new Co('Unexpected character "EOF"',this);var t=this.charAt(e.offset);t===Gt?(e.line++,e.column=0):an(t)||e.column++,e.offset++,this.updatePeek(e)}},{key:"updatePeek",value:function(e){e.peek=e.offset>=this.end?0:this.charAt(e.offset)}},{key:"locationFromCursor",value:function(e){return new cn(e.file,e.state.offset,e.state.line,e.state.column)}}]),e}(),yo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i){var r;return Object(m.a)(this,n),e instanceof n?(r=t.call(this,e)).internalState=Object.assign({},e.internalState):(r=t.call(this,e,i)).internalState=r.state,Object(o.a)(r)}return Object(v.a)(n,[{key:"advance",value:function(){this.state=this.internalState,Object(p.a)(Object(d.a)(n.prototype),"advance",this).call(this),this.processEscapeSequence()}},{key:"init",value:function(){Object(p.a)(Object(d.a)(n.prototype),"init",this).call(this),this.processEscapeSequence()}},{key:"clone",value:function(){return new n(this)}},{key:"getChars",value:function(e){for(var t=e.clone(),n="";t.internalState.offset<this.internalState.offset;)n+=String.fromCodePoint(t.peek()),t.advance();return n}},{key:"processEscapeSequence",value:function(){var e=this,t=function(){return e.internalState.peek};if(92===t())if(this.internalState=Object.assign({},this.state),this.advanceState(this.internalState),110===t())this.state.peek=Gt;else if(114===t())this.state.peek=13;else if(118===t())this.state.peek=11;else if(116===t())this.state.peek=9;else if(98===t())this.state.peek=8;else if(102===t())this.state.peek=12;else if(117===t())if(this.advanceState(this.internalState),t()===$t){this.advanceState(this.internalState);for(var n=this.clone(),i=0;t()!==en;)this.advanceState(this.internalState),i++;this.state.peek=this.decodeHexDigits(n,i)}else{var r=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(r,4)}else if(120===t()){this.advanceState(this.internalState);var a=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(a,2)}else if(on(t())){for(var o="",s=0,c=this.clone();on(t())&&s<3;)c=this.clone(),o+=String.fromCodePoint(t()),this.advanceState(this.internalState),s++;this.state.peek=parseInt(o,8),this.internalState=c.internalState}else an(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}},{key:"decodeHexDigits",value:function(e,t){var n=this.input.substr(e.internalState.offset,t),i=parseInt(n,16);if(isNaN(i))throw e.state=e.internalState,new Co("Invalid hexadecimal escape sequence",e);return i}}]),n}(bo),Co=function e(t,n){Object(m.a)(this,e),this.msg=t,this.cursor=n},Oo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r){var a;return Object(m.a)(this,n),(a=t.call(this,i,r)).elementName=e,a}return Object(v.a)(n,null,[{key:"create",value:function(e,t,i){return new n(e,t,i)}}]),n}(pn),xo=function e(t,n){Object(m.a)(this,e),this.rootNodes=t,this.errors=n},So=function(){function e(t){Object(m.a)(this,e),this.getTagDefinition=t}return Object(v.a)(e,[{key:"parse",value:function(e,t,n){var i=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new lo(new un(e,t),n,i);return r.tokenize(),new ro(vo(r.tokens),r.errors,r.nonNormalizedIcuExpressions)}(e,t,this.getTagDefinition,n),r=new ko(i.tokens,this.getTagDefinition);return r.build(),new xo(r.rootNodes,i.errors.concat(r.errors))}}]),e}(),ko=function(){function e(t,n){Object(m.a)(this,e),this.tokens=t,this.getTagDefinition=n,this._index=-1,this._elementStack=[],this.rootNodes=[],this.errors=[],this._advance()}return Object(v.a)(e,[{key:"build",value:function(){for(;this._peek.type!==to.EOF;)this._peek.type===to.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===to.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===to.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===to.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===to.TEXT||this._peek.type===to.RAW_TEXT||this._peek.type===to.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===to.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance()}},{key:"_advance",value:function(){var e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}},{key:"_advanceIf",value:function(e){return this._peek.type===e?this._advance():null}},{key:"_consumeCdata",value:function(e){this._consumeText(this._advance()),this._advanceIf(to.CDATA_END)}},{key:"_consumeComment",value:function(e){var t=this._advanceIf(to.RAW_TEXT);this._advanceIf(to.COMMENT_END);var n=null!=t?t.parts[0].trim():null;this._addToParent(new $a(n,e.sourceSpan))}},{key:"_consumeExpansion",value:function(e){for(var t=this._advance(),n=this._advance(),i=[];this._peek.type===to.EXPANSION_CASE_VALUE;){var r=this._parseExpansionCase();if(!r)return;i.push(r)}if(this._peek.type===to.EXPANSION_FORM_END){var a=new ln(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Ka(t.parts[0],n.parts[0],i,a,t.sourceSpan)),this._advance()}else this.errors.push(Oo.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."))}},{key:"_parseExpansionCase",value:function(){var t=this._advance();if(this._peek.type!==to.EXPANSION_CASE_EXP_START)return this.errors.push(Oo.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var n=this._advance(),i=this._collectExpansionExpTokens(n);if(!i)return null;var r=this._advance();i.push(new no(to.EOF,[],r.sourceSpan));var a=new e(i,this.getTagDefinition);if(a.build(),a.errors.length>0)return this.errors=this.errors.concat(a.errors),null;var o=new ln(t.sourceSpan.start,r.sourceSpan.end,t.sourceSpan.fullStart),s=new ln(n.sourceSpan.start,r.sourceSpan.end,n.sourceSpan.fullStart);return new Ja(t.parts[0],a.rootNodes,o,t.sourceSpan,s)}},{key:"_collectExpansionExpTokens",value:function(e){for(var t=[],n=[to.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==to.EXPANSION_FORM_START&&this._peek.type!==to.EXPANSION_CASE_EXP_START||n.push(this._peek.type),this._peek.type===to.EXPANSION_CASE_EXP_END){if(!wo(n,to.EXPANSION_CASE_EXP_START))return this.errors.push(Oo.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(n.pop(),0==n.length)return t}if(this._peek.type===to.EXPANSION_FORM_END){if(!wo(n,to.EXPANSION_FORM_START))return this.errors.push(Oo.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.pop()}if(this._peek.type===to.EOF)return this.errors.push(Oo.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}},{key:"_consumeText",value:function(e){var t=e.parts[0];if(t.length>0&&"\n"==t[0]){var n=this._getParentElement();null!=n&&0==n.children.length&&this.getTagDefinition(n.name).ignoreFirstLf&&(t=t.substring(1))}t.length>0&&this._addToParent(new qa(t,e.sourceSpan))}},{key:"_closeVoidElement",value:function(){var e=this._getParentElement();e&&this.getTagDefinition(e.name).isVoid&&this._elementStack.pop()}},{key:"_consumeStartTag",value:function(e){for(var t=e.parts[0],n=e.parts[1],i=[];this._peek.type===to.ATTR_NAME;)i.push(this._consumeAttr(this._advance()));var r=this._getElementFullName(t,n,this._getParentElement()),a=!1;if(this._peek.type===to.TAG_OPEN_END_VOID){this._advance(),a=!0;var o=this.getTagDefinition(r);o.canSelfClose||null!==x(r)||o.isVoid||this.errors.push(Oo.create(r,e.sourceSpan,'Only void and foreign elements can be self closed "'.concat(e.parts[1],'"')))}else this._peek.type===to.TAG_OPEN_END&&(this._advance(),a=!1);var s=this._peek.sourceSpan.start,c=new ln(e.sourceSpan.start,s,e.sourceSpan.fullStart),u=new ln(e.sourceSpan.start,s,e.sourceSpan.fullStart),l=new Qa(r,i,[],c,u,void 0);this._pushElement(l),a&&this._popElement(r,c)}},{key:"_pushElement",value:function(e){var t=this._getParentElement();t&&this.getTagDefinition(t.name).isClosedByChild(e.name)&&this._elementStack.pop(),this._addToParent(e),this._elementStack.push(e)}},{key:"_consumeEndTag",value:function(e){var t=this._getElementFullName(e.parts[0],e.parts[1],this._getParentElement());if(this.getTagDefinition(t).isVoid)this.errors.push(Oo.create(t,e.sourceSpan,'Void elements do not have end tags "'.concat(e.parts[1],'"')));else if(!this._popElement(t,e.sourceSpan)){var n='Unexpected closing tag "'.concat(t,'". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags');this.errors.push(Oo.create(t,e.sourceSpan,n))}}},{key:"_popElement",value:function(e,t){for(var n=this._elementStack.length-1;n>=0;n--){var i=this._elementStack[n];if(i.name==e)return i.endSourceSpan=t,this._elementStack.splice(n,this._elementStack.length-n),!0;if(!this.getTagDefinition(i.name).closedByParent)return!1}return!1}},{key:"_consumeAttr",value:function(e){var t=S(e.parts[0],e.parts[1]),n=e.sourceSpan.end,i="",r=void 0;if(this._peek.type===to.ATTR_QUOTE&&this._advance(),this._peek.type===to.ATTR_VALUE){var a=this._advance();i=a.parts[0],n=a.sourceSpan.end,r=a.sourceSpan}this._peek.type===to.ATTR_QUOTE&&(n=this._advance().sourceSpan.end);return new Za(t,i,new ln(e.sourceSpan.start,n,e.sourceSpan.fullStart),r)}},{key:"_getParentElement",value:function(){return this._elementStack.length>0?this._elementStack[this._elementStack.length-1]:null}},{key:"_addToParent",value:function(e){var t=this._getParentElement();null!=t?t.children.push(e):this.rootNodes.push(e)}},{key:"_getElementFullName",value:function(e,t,n){if(""===e&&""===(e=this.getTagDefinition(t).implicitNamespacePrefix||"")&&null!=n){var i=b(n.name)[1];this.getTagDefinition(i).preventNamespaceInheritance||(e=x(n.name))}return S(e,t)}}]),e}();function wo(e,t){return e.length>0&&e[e.length-1]===t}var Eo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.call(this,T)}return Object(v.a)(n,[{key:"parse",value:function(e,t,i){return Object(p.a)(Object(d.a)(n.prototype),"parse",this).call(this,e,t,i)}}]),n}(So),Io="ngPreserveWhitespaces",To=new Set(["pre","template","textarea","script","style"]),_o=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",jo=new RegExp("[^".concat(_o,"]")),Po=new RegExp("[".concat(_o,"]{2,}"),"g");function Ao(e){return e.replace(new RegExp("\ue500","g")," ")}var Mo=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitElement",value:function(e,t){return To.has(e.name)||e.attrs.some((function(e){return e.name===Io}))?new Qa(e.name,eo(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new Qa(e.name,e.attrs,(n=this,i=e.children,r=[],i.forEach((function(e,t){var a={prev:i[t-1],next:i[t+1]},o=e.visit(n,a);o&&r.push(o)})),r),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);var n,i,r}},{key:"visitAttribute",value:function(e,t){return e.name!==Io?e:null}},{key:"visitText",value:function(e,t){var n=e.value.match(jo),i=t&&(t.prev instanceof Ka||t.next instanceof Ka);return n||i?new qa(Ao(e.value).replace(Po," "),e.sourceSpan,e.i18n):null}},{key:"visitComment",value:function(e,t){return e}},{key:"visitExpansion",value:function(e,t){return e}},{key:"visitExpansionCase",value:function(e,t){return e}}]),e}();var Do,Ro=function(){function e(t,n,i){Object(m.a)(this,e),this.value=t,this.ngContentIndex=n,this.sourceSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),e}(),Lo=function(){function e(t,n,i){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitAttr(this,t)}}]),e}(),Fo=(i={},Object(a.a)(i,4,4),Object(a.a)(i,1,1),Object(a.a)(i,2,2),Object(a.a)(i,0,0),Object(a.a)(i,3,3),function(){function e(t,n,i,r,a,o,s,c,u,l,p,d,h){Object(m.a)(this,e),this.name=t,this.attrs=n,this.inputs=i,this.outputs=r,this.references=a,this.directives=o,this.providers=s,this.hasViewContainer=c,this.queryMatches=u,this.children=l,this.ngContentIndex=p,this.sourceSpan=d,this.endSourceSpan=h}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitElement(this,t)}}]),e}());!function(e){e[e.PublicService=0]="PublicService",e[e.PrivateService=1]="PrivateService",e[e.Component=2]="Component",e[e.Directive=3]="Directive",e[e.Builtin=4]="Builtin"}(Do||(Do={}));function No(e){if(null==e||0===e.length||"/"==e[0])return!1;var t=e.match(Bo);return null===t||"package"==t[1]||"asset"==t[1]}var Bo=/^([^:/?#]+):/,Uo=".",zo="attr",Vo="class",Go="style",Ho="animate-",Wo=function(){function e(t,n,i,r,a){if(Object(m.a)(this,e),this._exprParser=t,this._interpolationConfig=n,this._schemaRegistry=i,this.errors=a,this.pipesByName=null,this._usedPipes=new Map,r){var o=new Map;r.forEach((function(e){return o.set(e.name,e)})),this.pipesByName=o}}return Object(v.a)(e,[{key:"interpolationConfig",get:function(){return this._interpolationConfig}},{key:"getUsedPipes",value:function(){return Array.from(this._usedPipes.values())}},{key:"createBoundHostProperties",value:function(e,t){var n=this;if(e.hostProperties){var i=[];return Object.keys(e.hostProperties).forEach((function(r){var a=e.hostProperties[r];"string"==typeof a?n.parsePropertyBinding(r,a,!0,t,t.start.offset,void 0,[],i):n._reportError('Value of the host property binding "'.concat(r,'" needs to be a string representing an expression but got "').concat(a,'" (').concat(typeof a,")"),t)})),i}return null}},{key:"createDirectiveHostPropertyAsts",value:function(e,t,n){var i=this,r=this.createBoundHostProperties(e,n);return r&&r.map((function(e){return i.createBoundElementProperty(t,e)}))}},{key:"createDirectiveHostEventAsts",value:function(e,t){var n=this;if(e.hostListeners){var i=[];return Object.keys(e.hostListeners).forEach((function(r){var a=e.hostListeners[r];"string"==typeof a?n.parseEvent(r,a,t,t,[],i):n._reportError('Value of the host listener "'.concat(r,'" needs to be a string representing an expression but got "').concat(a,'" (').concat(typeof a,")"),t)})),i}return null}},{key:"parseInterpolation",value:function(e,t){var n=t.start.toString();try{var i=this._exprParser.parseInterpolation(e,n,t.start.offset,this._interpolationConfig);return i&&this._reportExpressionParserErrors(i.errors,t),this._checkPipes(i,t),i}catch(r){return this._reportError("".concat(r),t),this._exprParser.wrapLiteralPrimitive("ERROR",n,t.start.offset)}}},{key:"parseInlineTemplateBinding",value:function(e,t,n,i,r,a,o){var s,c=n.start.offset+"*".length,u=this._parseTemplateBindings(e,t,n,c,i),p=Object(l.a)(u);try{for(p.s();!(s=p.n()).done;){var d=s.value,h=Ko(n,d.sourceSpan),f=d.key.source,g=Ko(n,d.key.span);if(d instanceof zr){var m=d.value?d.value.source:"$implicit",v=d.value?Ko(n,d.value.span):void 0;o.push(new qr(f,m,h,g,v))}else if(d.value){var b=Ko(n,d.value.ast.sourceSpan);this._parsePropertyAst(f,d.value,n,b,r,a)}else r.push([f,""]),this.parseLiteralAttr(f,null,n,i,void 0,r,a)}}catch(y){p.e(y)}finally{p.f()}}},{key:"_parseTemplateBindings",value:function(e,t,n,i,r){var a=this,o=n.start.toString();try{var s=this._exprParser.parseTemplateBindings(e,t,o,i,r);return this._reportExpressionParserErrors(s.errors,n),s.templateBindings.forEach((function(e){e.value instanceof Ur&&a._checkPipes(e.value,n)})),s.warnings.forEach((function(e){a._reportError(e,n,sn.WARNING)})),s.templateBindings}catch(c){return this._reportError("".concat(c),n),[]}}},{key:"parseLiteralAttr",value:function(e,t,n,i,r,a,o){Xo(e)?(e=e.substring(1),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',n,sn.ERROR),this._parseAnimation(e,t,n,i,r,a,o)):o.push(new Yr(e,this._exprParser.wrapLiteralPrimitive(t,"",i),dr.LITERAL_ATTR,n,r))}},{key:"parsePropertyBinding",value:function(e,t,n,i,r,a,o,s){0===e.length&&this._reportError("Property name is missing in binding",i);var c=!1;e.startsWith(Ho)?(c=!0,e=e.substring(Ho.length)):Xo(e)&&(c=!0,e=e.substring(1)),c?this._parseAnimation(e,t,i,r,a,o,s):this._parsePropertyAst(e,this._parseBinding(t,n,a||i,r),i,a,o,s)}},{key:"parsePropertyInterpolation",value:function(e,t,n,i,r,a){var o=this.parseInterpolation(t,i||n);return!!o&&(this._parsePropertyAst(e,o,n,i,r,a),!0)}},{key:"_parsePropertyAst",value:function(e,t,n,i,r,a){r.push([e,t.source]),a.push(new Yr(e,t,dr.DEFAULT,n,i))}},{key:"_parseAnimation",value:function(e,t,n,i,r,a,o){0===e.length&&this._reportError("Animation trigger is missing",n);var s=this._parseBinding(t||"undefined",!1,r||n,i);a.push([e,s.source]),o.push(new Yr(e,s,dr.ANIMATION,n,r))}},{key:"_parseBinding",value:function(e,t,n,i){var r=(n&&n.start||"(unknown)").toString();try{var a=t?this._exprParser.parseSimpleBinding(e,r,i,this._interpolationConfig):this._exprParser.parseBinding(e,r,i,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,n),this._checkPipes(a,n),a}catch(o){return this._reportError("".concat(o),n),this._exprParser.wrapLiteralPrimitive("ERROR",r,i)}}},{key:"createBoundElementProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.isAnimation)return new Kr(t.name,4,L.NONE,t.expression,null,t.sourceSpan,t.valueSpan);var r=null,a=void 0,o=null,s=t.name.split(Uo),c=void 0;if(s.length>1)if(s[0]==zo){o=s.slice(1).join(Uo),n||this._validatePropertyOrAttributeName(o,t.sourceSpan,!0),c=qo(this._schemaRegistry,e,o,!0);var u=o.indexOf(":");if(u>-1){var l=o.substring(0,u),p=o.substring(u+1);o=S(l,p)}a=1}else s[0]==Vo?(o=s[1],a=2,c=[L.NONE]):s[0]==Go&&(r=s.length>2?s[2]:null,o=s[1],a=3,c=[L.STYLE]);if(null===o){var d=this._schemaRegistry.getMappedPropName(t.name);o=i?d:t.name,c=qo(this._schemaRegistry,e,d,!1),a=0,n||this._validatePropertyOrAttributeName(d,t.sourceSpan,!1)}return new Kr(o,a,c[0],t.expression,r,t.sourceSpan,t.valueSpan)}},{key:"parseEvent",value:function(e,t,n,i,r,a){0===e.length&&this._reportError("Event name is missing in binding",n),Xo(e)?(e=e.substr(1),this._parseAnimationEvent(e,t,n,i,a)):this._parseRegularEvent(e,t,n,i,r,a)}},{key:"calcPossibleSecurityContexts",value:function(e,t,n){var i=this._schemaRegistry.getMappedPropName(t);return qo(this._schemaRegistry,e,i,n)}},{key:"_parseAnimationEvent",value:function(e,t,n,i,r){var a=ut(e,".",[e,""]),o=a[0],s=a[1].toLowerCase();if(s)switch(s){case"start":case"done":var c=this._parseAction(t,i);r.push(new Xr(o,s,1,c,n,i));break;default:this._reportError('The provided animation output phase value "'.concat(s,'" for "@').concat(o,'" is not supported (use start or done)'),n)}else this._reportError("The animation trigger output event (@".concat(o,") is missing its phase value name (start or done are currently supported)"),n)}},{key:"_parseRegularEvent",value:function(e,t,n,i,r,a){var o=ct(e,[null,e]),s=Object(u.a)(o,2),c=s[0],l=s[1],p=this._parseAction(t,i);r.push([e,p.source]),a.push(new Xr(l,c,0,p,n,i))}},{key:"_parseAction",value:function(e,t){var n=(t&&t.start||"(unknown").toString(),i=t&&t.start?t.start.offset:0;try{var r=this._exprParser.parseAction(e,n,i,this._interpolationConfig);return r&&this._reportExpressionParserErrors(r.errors,t),!r||r.ast instanceof br?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",n,i)):(this._checkPipes(r,t),r)}catch(a){return this._reportError("".concat(a),t),this._exprParser.wrapLiteralPrimitive("ERROR",n,i)}}},{key:"_reportError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;this.errors.push(new pn(t,e,n))}},{key:"_reportExpressionParserErrors",value:function(e,t){var n,i=Object(l.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._reportError(r.message,t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"_checkPipes",value:function(e,t){var n=this;if(e&&this.pipesByName){var i=new Yo;e.visit(i),i.pipes.forEach((function(e,i){var r=n.pipesByName.get(i);r?n._usedPipes.set(i,r):n._reportError("The pipe '".concat(i,"' could not be found"),new ln(t.start.moveBy(e.span.start),t.start.moveBy(e.span.end)))}))}}},{key:"_validatePropertyOrAttributeName",value:function(e,t,n){var i=n?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);i.error&&this._reportError(i.msg,t,sn.ERROR)}}]),e}(),Yo=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.apply(this,arguments)).pipes=new Map,e}return Object(v.a)(n,[{key:"visitPipe",value:function(e,t){return this.pipes.set(e.name,e),e.exp.visit(this),this.visitAll(e.args,t),null}}]),n}(Gr);function Xo(e){return"@"==e[0]}function qo(e,t,n,i){var r=[];return A.parse(t).forEach((function(t){var a=t.element?[t.element]:e.allKnownElementNames(),o=new Set(t.notSelectors.filter((function(e){return e.isElementSelector()})).map((function(e){return e.element}))),s=a.filter((function(e){return!o.has(e)}));r.push.apply(r,Object(g.a)(s.map((function(t){return e.securityContext(t,n,i)}))))})),0===r.length?[L.NONE]:Array.from(new Set(r)).sort()}function Ko(e,t){var n=t.start-e.start.offset,i=t.end-e.end.offset;return new ln(e.start.moveBy(n),e.end.moveBy(i),e.fullStart.moveBy(n),e.details)}var Jo;function Zo(e){var t=null,n=null,i=null,r=!1,a="";e.attrs.forEach((function(e){var o=e.name.toLowerCase();"select"==o?t=e.value:"href"==o?n=e.value:"rel"==o?i=e.value:"ngNonBindable"==e.name?r=!0:"ngProjectAs"==e.name&&e.value.length>0&&(a=e.value)})),t=function(e){if(null===e||0===e.length)return"*";return e}(t);var o=e.name.toLowerCase(),s=Jo.OTHER;return C(o)?s=Jo.NG_CONTENT:"style"==o?s=Jo.STYLE:"script"==o?s=Jo.SCRIPT:"link"==o&&"stylesheet"==i&&(s=Jo.STYLESHEET),new Qo(s,t,n,r,a)}!function(e){e[e.NG_CONTENT=0]="NG_CONTENT",e[e.STYLE=1]="STYLE",e[e.STYLESHEET=2]="STYLESHEET",e[e.SCRIPT=3]="SCRIPT",e[e.OTHER=4]="OTHER"}(Jo||(Jo={}));var Qo=function e(t,n,i,r,a){Object(m.a)(this,e),this.type=t,this.selectAttr=n,this.hrefAttr=i,this.nonBindable=r,this.projectAs=a};var $o;function es(){return $o||($o=A.parse("*")[0]),$o}var ts=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitElement",value:function(e,t){var n=Zo(e);if(n.type===Jo.SCRIPT||n.type===Jo.STYLE||n.type===Jo.STYLESHEET)return null;var i=e.attrs.map((function(e){return[e.name,e.value]})),r=is(e.name,i),a=t.findNgContentIndex(r),o=eo(this,e.children,rs);return new Fo(e.name,eo(this,e.attrs),[],[],[],[],[],!1,[],o,a,e.sourceSpan,e.endSourceSpan)}},{key:"visitComment",value:function(e,t){return null}},{key:"visitAttribute",value:function(e,t){return new Lo(e.name,e.value,e.sourceSpan)}},{key:"visitText",value:function(e,t){var n=t.findNgContentIndex(es());return new Ro(e.value,n,e.sourceSpan)}},{key:"visitExpansion",value:function(e,t){return e}},{key:"visitExpansionCase",value:function(e,t){return e}}]),e}();var ns=function(){function e(t,n,i,r){Object(m.a)(this,e),this.isTemplateElement=t,this._ngContentIndexMatcher=n,this._wildcardNgContentIndex=i,this.providerContext=r}return Object(v.a)(e,[{key:"findNgContentIndex",value:function(e){var t=[];return this._ngContentIndexMatcher.match(e,(function(e,n){t.push(n)})),t.sort(),null!=this._wildcardNgContentIndex&&t.push(this._wildcardNgContentIndex),t.length>0?t[0]:null}}],[{key:"create",value:function(t,n,i){var r=new M,a=null,o=n.find((function(e){return e.directive.isComponent}));if(o)for(var s=o.directive.template.ngContentSelectors,c=0;c<s.length;c++){"*"===s[c]?a=c:r.addSelectables(A.parse(s[c]),c)}return new e(t,r,a,i)}}]),e}();function is(e,t){var n=new A,i=b(e)[1];n.setElement(i);for(var r=0;r<t.length;r++){var a=t[r][0],o=b(a)[1],s=t[r][1];if(n.addAttribute(o,s),"class"==a.toLowerCase())s.trim().split(/\s+/g).forEach((function(e){return n.addClassName(e)}))}return n}var rs=new ns(!0,new M,null,null);new ts;function as(e){return e instanceof Ur&&(e=e.ast),e instanceof br}function os(e){var t=e.charCodeAt(0);if(t==e.charCodeAt(e.length-1)&&(39==t||34==t)){var n=e.substring(1,e.length-1);-1==n.indexOf("'")&&-1==n.indexOf('"')&&(e=n)}return e}function ss(e){return e.replace(/[a-z][A-Z]/g,(function(e){return e.charAt(0)+"-"+e.charAt(1)})).toLowerCase()}var cs,us=function(){function e(t){Object(m.a)(this,e),this._directiveExpr=t,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}return Object(v.a)(e,[{key:"registerBoundInput",value:function(e){var t=null,n=e.name;switch(e.type){case 0:t=this.registerInputBasedOnName(n,e.value,e.sourceSpan);break;case 3:t=this.registerStyleInput(n,!1,e.value,e.sourceSpan,e.unit);break;case 2:t=this.registerClassInput(n,!1,e.value,e.sourceSpan)}return!!t}},{key:"registerInputBasedOnName",value:function(e,t,n){var i=null,r=e.substring(0,6),a="style"===e||"style."===r||"style!"===r;if(a||!a&&("class"===e||"class."===r||"class!"===r)){var o="."!==e.charAt(5),s=e.substr(o?5:6);i=a?this.registerStyleInput(s,o,t,n):this.registerClassInput(s,o,t,n)}return i}},{key:"registerStyleInput",value:function(e,t,n,i,r){if(as(n))return null;var a=ps(e=ss(e)),o=a.property,s=a.hasOverrideFlag,c=a.suffix,u={name:o,suffix:r="string"==typeof r&&0!==r.length?r:c,value:n,sourceSpan:i,hasOverrideFlag:s};return t?this._styleMapInput=u:((this._singleStyleInputs=this._singleStyleInputs||[]).push(u),ls(this._stylesIndex,o)),this._lastStylingInput=u,this._firstStylingInput=this._firstStylingInput||u,this._checkForPipes(n),this.hasBindings=!0,u}},{key:"registerClassInput",value:function(e,t,n,i){if(as(n))return null;var r=ps(e),a=r.property,o={name:a,value:n,sourceSpan:i,hasOverrideFlag:r.hasOverrideFlag,suffix:null};if(t){if(this._classMapInput)throw new Error("[class] and [className] bindings cannot be used on the same element simultaneously");this._classMapInput=o}else(this._singleClassInputs=this._singleClassInputs||[]).push(o),ls(this._classesIndex,a);return this._lastStylingInput=o,this._firstStylingInput=this._firstStylingInput||o,this._checkForPipes(n),this.hasBindings=!0,o}},{key:"_checkForPipes",value:function(e){e instanceof Ur&&e.ast instanceof Ir&&(this.hasBindingsWithPipes=!0)}},{key:"registerStyleAttr",value:function(e){this._initialStyleValues=function(e){for(var t=[],n=0,i=0,r=0,a=0,o=0,s=null,c=!1;n<e.length;)switch(e.charCodeAt(n++)){case 40:i++;break;case 41:i--;break;case 39:c=c||a>0,0===r?r=39:39===r&&92!==e.charCodeAt(n-1)&&(r=0);break;case 34:c=c||a>0,0===r?r=34:34===r&&92!==e.charCodeAt(n-1)&&(r=0);break;case 58:s||0!==i||0!==r||(s=ss(e.substring(o,n-1).trim()),a=n);break;case 59:if(s&&a>0&&0===i&&0===r){var u=e.substring(a,n-1).trim();t.push(s,c?os(u):u),o=n,a=0,s=null,c=!1}}if(s&&a){var l=e.substr(a).trim();t.push(s,c?os(l):l)}return t}(e),this._hasInitialValues=!0}},{key:"registerClassAttr",value:function(e){this._initialClassValues=e.trim().split(/\s+/g),this._hasInitialValues=!0}},{key:"populateInitialStylingAttrs",value:function(e){if(this._initialClassValues.length){e.push(rt(1));for(var t=0;t<this._initialClassValues.length;t++)e.push(rt(this._initialClassValues[t]))}if(this._initialStyleValues.length){e.push(rt(2));for(var n=0;n<this._initialStyleValues.length;n+=2)e.push(rt(this._initialStyleValues[n]),rt(this._initialStyleValues[n+1]))}}},{key:"assignHostAttrs",value:function(e,t){this._directiveExpr&&(e.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(e),t.set("hostAttrs",et(e)))}},{key:"buildClassMapInstruction",value:function(e){return this._classMapInput?this._buildMapBasedInstruction(e,!0,this._classMapInput):null}},{key:"buildStyleMapInstruction",value:function(e){return this._styleMapInput?this._buildMapBasedInstruction(e,!1,this._styleMapInput):null}},{key:"_buildMapBasedInstruction",value:function(e,t,n){var i,r=2,a=n.value.visit(e);return a instanceof Pr?(r+=a.expressions.length,i=t?function(e){switch(Ri(e)){case 1:return Lt.classMap;case 3:return Lt.classMapInterpolate1;case 5:return Lt.classMapInterpolate2;case 7:return Lt.classMapInterpolate3;case 9:return Lt.classMapInterpolate4;case 11:return Lt.classMapInterpolate5;case 13:return Lt.classMapInterpolate6;case 15:return Lt.classMapInterpolate7;case 17:return Lt.classMapInterpolate8;default:return Lt.classMapInterpolateV}}(a):function(e){switch(Ri(e)){case 1:return Lt.styleMap;case 3:return Lt.styleMapInterpolate1;case 5:return Lt.styleMapInterpolate2;case 7:return Lt.styleMapInterpolate3;case 9:return Lt.styleMapInterpolate4;case 11:return Lt.styleMapInterpolate5;case 13:return Lt.styleMapInterpolate6;case 15:return Lt.styleMapInterpolate7;case 17:return Lt.styleMapInterpolate8;default:return Lt.styleMapInterpolateV}}(a)):i=t?Lt.classMap:Lt.styleMap,{reference:i,calls:[{supportsInterpolation:!0,sourceSpan:n.sourceSpan,allocateBindingSlots:r,params:function(e){var t=e(a),n=Array.isArray(t)?t:[t];return n}}]}}},{key:"_buildSingleInputs",value:function(e,t,n,i,r){var a=[];return t.forEach((function(t){var o=a[a.length-1],s=t.value.visit(n),c=e,u=2;s instanceof Pr&&(u+=s.expressions.length,i&&(c=i(s)));var l={sourceSpan:t.sourceSpan,allocateBindingSlots:u,supportsInterpolation:!!i,params:function(e){var n=[];n.push(rt(t.name));var i=e(s);return Array.isArray(i)?n.push.apply(n,Object(g.a)(i)):n.push(i),r||null===t.suffix||n.push(rt(t.suffix)),n}};o&&o.reference===c?o.calls.push(l):a.push({reference:c,calls:[l]})})),a}},{key:"_buildClassInputs",value:function(e){return this._singleClassInputs?this._buildSingleInputs(Lt.classProp,this._singleClassInputs,e,null,!0):[]}},{key:"_buildStyleInputs",value:function(e){return this._singleStyleInputs?this._buildSingleInputs(Lt.styleProp,this._singleStyleInputs,e,ds,!1):[]}},{key:"buildUpdateLevelInstructions",value:function(e){var t=[];if(this.hasBindings){var n=this.buildStyleMapInstruction(e);n&&t.push(n);var i=this.buildClassMapInstruction(e);i&&t.push(i),t.push.apply(t,Object(g.a)(this._buildStyleInputs(e))),t.push.apply(t,Object(g.a)(this._buildClassInputs(e)))}return t}}]),e}();function ls(e,t){e.has(t)||e.set(t,e.size)}function ps(e){var t=!1,n=e.indexOf("!important");-1!==n&&(e=n>0?e.substring(0,n):"",t=!0);var i=null,r=e,a=e.lastIndexOf(".");return a>0&&(i=e.substr(a+1),r=e.substring(0,a)),{property:r,suffix:i,hasOverrideFlag:t}}function ds(e){switch(Ri(e)){case 1:return Lt.styleProp;case 3:return Lt.stylePropInterpolate1;case 5:return Lt.stylePropInterpolate2;case 7:return Lt.stylePropInterpolate3;case 9:return Lt.stylePropInterpolate4;case 11:return Lt.stylePropInterpolate5;case 13:return Lt.stylePropInterpolate6;case 15:return Lt.stylePropInterpolate7;case 17:return Lt.stylePropInterpolate8;default:return Lt.stylePropInterpolateV}}!function(e){e[e.Character=0]="Character",e[e.Identifier=1]="Identifier",e[e.Keyword=2]="Keyword",e[e.String=3]="String",e[e.Operator=4]="Operator",e[e.Number=5]="Number",e[e.Error=6]="Error"}(cs||(cs={}));var hs=["var","let","as","null","undefined","true","false","if","else","this"],fs=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"tokenize",value:function(e){for(var t=new ys(e),n=[],i=t.scanToken();null!=i;)n.push(i),i=t.scanToken();return n}}]),e}(),gs=function(){function e(t,n,i,r,a){Object(m.a)(this,e),this.index=t,this.end=n,this.type=i,this.numValue=r,this.strValue=a}return Object(v.a)(e,[{key:"isCharacter",value:function(e){return this.type==cs.Character&&this.numValue==e}},{key:"isNumber",value:function(){return this.type==cs.Number}},{key:"isString",value:function(){return this.type==cs.String}},{key:"isOperator",value:function(e){return this.type==cs.Operator&&this.strValue==e}},{key:"isIdentifier",value:function(){return this.type==cs.Identifier}},{key:"isKeyword",value:function(){return this.type==cs.Keyword}},{key:"isKeywordLet",value:function(){return this.type==cs.Keyword&&"let"==this.strValue}},{key:"isKeywordAs",value:function(){return this.type==cs.Keyword&&"as"==this.strValue}},{key:"isKeywordNull",value:function(){return this.type==cs.Keyword&&"null"==this.strValue}},{key:"isKeywordUndefined",value:function(){return this.type==cs.Keyword&&"undefined"==this.strValue}},{key:"isKeywordTrue",value:function(){return this.type==cs.Keyword&&"true"==this.strValue}},{key:"isKeywordFalse",value:function(){return this.type==cs.Keyword&&"false"==this.strValue}},{key:"isKeywordThis",value:function(){return this.type==cs.Keyword&&"this"==this.strValue}},{key:"isError",value:function(){return this.type==cs.Error}},{key:"toNumber",value:function(){return this.type==cs.Number?this.numValue:-1}},{key:"toString",value:function(){switch(this.type){case cs.Character:case cs.Identifier:case cs.Keyword:case cs.Operator:case cs.String:case cs.Error:return this.strValue;case cs.Number:return this.numValue.toString();default:return null}}}]),e}();function ms(e,t,n){return new gs(e,t,cs.Character,n,String.fromCharCode(n))}function vs(e,t,n){return new gs(e,t,cs.Operator,0,n)}var bs=new gs(-1,-1,cs.Character,0,""),ys=function(){function e(t){Object(m.a)(this,e),this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}return Object(v.a)(e,[{key:"advance",value:function(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}},{key:"scanToken",value:function(){for(var e=this.input,t=this.length,n=this.peek,i=this.index;n<=32;){if(++i>=t){n=0;break}n=e.charCodeAt(i)}if(this.peek=n,this.index=i,i>=t)return null;if(Cs(n))return this.scanIdentifier();if(nn(n))return this.scanNumber(i);var r=i;switch(n){case 46:return this.advance(),nn(this.peek)?this.scanNumber(r):ms(r,this.index,46);case 40:case Ht:case $t:case en:case 91:case 93:case Wt:case Xt:case qt:return this.scanCharacter(r,n);case 39:case 34:return this.scanString();case 35:case 43:case 45:case 42:case Yt:case 37:case 94:return this.scanOperator(r,String.fromCharCode(n));case 63:return this.scanComplexOperator(r,"?",46,".");case 60:case Jt:return this.scanComplexOperator(r,String.fromCharCode(n),Kt,"=");case 33:case Kt:return this.scanComplexOperator(r,String.fromCharCode(n),Kt,"=",Kt,"=");case 38:return this.scanComplexOperator(r,"&",38,"&");case 124:return this.scanComplexOperator(r,"|",124,"|");case 160:for(;tn(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character [".concat(String.fromCharCode(n),"]"),0)}},{key:"scanCharacter",value:function(e,t){return this.advance(),ms(e,this.index,t)}},{key:"scanOperator",value:function(e,t){return this.advance(),vs(e,this.index,t)}},{key:"scanComplexOperator",value:function(e,t,n,i,r,a){this.advance();var o=t;return this.peek==n&&(this.advance(),o+=i),null!=r&&this.peek==r&&(this.advance(),o+=a),vs(e,this.index,o)}},{key:"scanIdentifier",value:function(){var e=this.index;for(this.advance();Os(this.peek);)this.advance();var t,n,i,r=this.input.substring(e,this.index);return hs.indexOf(r)>-1?(t=e,n=this.index,i=r,new gs(t,n,cs.Keyword,0,i)):function(e,t,n){return new gs(e,t,cs.Identifier,0,n)}(e,this.index,r)}},{key:"scanNumber",value:function(e){var t,n=this.index===e;for(this.advance();;){if(nn(this.peek));else if(46==this.peek)n=!1;else{if(101!=(t=this.peek)&&69!=t)break;if(this.advance(),xs(this.peek)&&this.advance(),!nn(this.peek))return this.error("Invalid exponent",-1);n=!1}this.advance()}var i,r,a,o=this.input.substring(e,this.index),s=n?function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}(o):parseFloat(o);return i=e,r=this.index,a=s,new gs(i,r,cs.Number,a,"")}},{key:"scanString",value:function(){var e=this.index,t=this.peek;this.advance();for(var n="",i=this.index,r=this.input;this.peek!=t;)if(92==this.peek){n+=r.substring(i,this.index),this.advance();var a=void 0;if(this.peek=this.peek,117==this.peek){var o=r.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(o))return this.error("Invalid unicode escape [\\u".concat(o,"]"),0);a=parseInt(o,16);for(var s=0;s<5;s++)this.advance()}else a=Ss(this.peek),this.advance();n+=String.fromCharCode(a),i=this.index}else{if(0==this.peek)return this.error("Unterminated quote",0);this.advance()}var c,u,l,p=r.substring(i,this.index);return this.advance(),c=e,u=this.index,l=n+p,new gs(c,u,cs.String,0,l)}},{key:"error",value:function(e,t){var n=this.index+t;return function(e,t,n){return new gs(e,t,cs.Error,0,n)}(n,this.index,"Lexer Error: ".concat(e," at column ").concat(n," in expression [").concat(this.input,"]"))}}]),e}();function Cs(e){return Zt<=e&&e<=Qt||65<=e&&e<=90||95==e||36==e}function Os(e){return rn(e)||nn(e)||95==e||36==e}function xs(e){return 45==e||43==e}function Ss(e){switch(e){case 110:return Gt;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return e}}var ks=function e(t,n,i,r,a){Object(m.a)(this,e),this.strings=t,this.stringSpans=n,this.expressions=i,this.expressionsSpans=r,this.offsets=a},ws=function e(t,n,i){Object(m.a)(this,e),this.templateBindings=t,this.warnings=n,this.errors=i},Es=Is(Gi);function Is(e){var t=pt(e.start)+"([\\s\\S]*?)"+pt(e.end);return new RegExp(t,"g")}var Ts,_s=function(){function e(t){Object(m.a)(this,e),this._lexer=t,this.errors=[],this.simpleExpressionChecker=Ms}return Object(v.a)(e,[{key:"parseAction",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gi;this._checkNoInterpolation(e,t,i);var r=this._stripComments(e),a=this._lexer.tokenize(this._stripComments(e)),o=new As(e,t,n,a,r.length,!0,this.errors,e.length-r.length).parseChain();return new Ur(o,e,t,n,this.errors)}},{key:"parseBinding",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gi,r=this._parseBindingAst(e,t,n,i);return new Ur(r,e,t,n,this.errors)}},{key:"checkSimpleExpression",value:function(e){var t=new this.simpleExpressionChecker;return e.visit(t),t.errors}},{key:"parseSimpleBinding",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gi,r=this._parseBindingAst(e,t,n,i),a=this.checkSimpleExpression(r);return a.length>0&&this._reportError("Host binding expression cannot contain ".concat(a.join(" ")),e,t),new Ur(r,e,t,n,this.errors)}},{key:"_reportError",value:function(e,t,n,i){this.errors.push(new hr(e,t,n,i))}},{key:"_parseBindingAst",value:function(e,t,n,i){var r=this._parseQuote(e,t,n);if(null!=r)return r;this._checkNoInterpolation(e,t,i);var a=this._stripComments(e),o=this._lexer.tokenize(a);return new As(e,t,n,o,a.length,!1,this.errors,e.length-a.length).parseChain()}},{key:"_parseQuote",value:function(e,t,n){if(null==e)return null;var i=e.indexOf(":");if(-1==i)return null;var r=e.substring(0,i).trim();if(!function(e){if(0==e.length)return!1;var t=new ys(e);if(!Cs(t.peek))return!1;for(t.advance();0!==t.peek;){if(!Os(t.peek))return!1;t.advance()}return!0}(r))return null;var a=e.substring(i+1),o=new fr(0,e.length);return new vr(o,o.toAbsolute(n),r,a,t)}},{key:"parseTemplateBindings",value:function(e,t,n,i,r){var a=this._lexer.tokenize(t);return new As(t,n,r,a,t.length,!1,this.errors,0).parseTemplateBindings({source:e,span:new Br(i,i+e.length)})}},{key:"parseInterpolation",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gi,r=this.splitInterpolation(e,t,i);if(null==r)return null;for(var a=[],o=0;o<r.expressions.length;++o){var s=r.expressions[o],c=this._stripComments(s),u=this._lexer.tokenize(c),l=new As(e,t,n,u,c.length,!1,this.errors,r.offsets[o]+(s.length-c.length)).parseChain();a.push(l)}var p=new fr(0,null==e?0:e.length);return new Ur(new Pr(p,p.toAbsolute(n),r.strings,a),e,t,n,this.errors)}},{key:"splitInterpolation",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gi,i=[],r=[],a=[],o=[],s=[],c=0,u=!1,l=!1,p=n.start,d=n.end;c<e.length;)if(u){var h=c,f=h+p.length,g=e.indexOf(d,f);if(-1===g){u=!1,l=!0;break}var m=g+d.length,v=e.substring(f,g);v.trim().length>0?r.push(v):(this._reportError("Blank expressions are not allowed in interpolated strings",e,"at column ".concat(c," in"),t),r.push("$implicit")),a.push(f),s.push({start:h,end:m}),c=m,u=!1}else{var b=c;-1===(c=e.indexOf(p,c))&&(c=e.length);var y=e.substring(b,c);i.push(y),o.push({start:b,end:c}),u=!0}return u||(l?(i[i.length-1]+=e.substring(c),o[o.length-1].end=e.length):(i.push(e.substring(c)),o.push({start:c,end:e.length}))),0===r.length?null:new ks(i,o,r,s,a)}},{key:"wrapLiteralPrimitive",value:function(e,t,n){var i=new fr(0,null==e?0:e.length);return new Ur(new Tr(i,i.toAbsolute(n),e),e,t,n,this.errors)}},{key:"_stripComments",value:function(e){var t=this._commentStart(e);return null!=t?e.substring(0,t).trim():e}},{key:"_commentStart",value:function(e){for(var t,n=null,i=0;i<e.length-1;i++){var r=e.charCodeAt(i),a=e.charCodeAt(i+1);if(r===Yt&&a==Yt&&null==n)return i;n===r?n=null:null==n&&(39===(t=r)||34===t||96===t)&&(n=r)}return null}},{key:"_checkNoInterpolation",value:function(e,t,n){var i,r=(i=n)===Gi?Es:Is(i),a=e.split(r);a.length>1&&this._reportError("Got interpolation (".concat(n.start).concat(n.end,") where expression was expected"),e,"at column ".concat(this._findInterpolationErrorColumn(a,1,n)," in"),t)}},{key:"_findInterpolationErrorColumn",value:function(e,t,n){for(var i="",r=0;r<t;r++)i+=r%2==0?e[r]:"".concat(n.start).concat(e[r]).concat(n.end);return i.length}}]),e}(),js=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.apply(this,arguments)).simpleExpressionChecker=Ds,e}return n}(_s);!function(e){e[e.None=0]="None",e[e.Writable=1]="Writable"}(Ts||(Ts={}));var Ps,As=function(){function e(t,n,i,r,a,o,s,c){Object(m.a)(this,e),this.input=t,this.location=n,this.absoluteOffset=i,this.tokens=r,this.inputLength=a,this.parseAction=o,this.errors=s,this.offset=c,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=Ts.None,this.sourceSpanCache=new Map,this.index=0}return Object(v.a)(e,[{key:"peek",value:function(e){var t=this.index+e;return t<this.tokens.length?this.tokens[t]:bs}},{key:"next",get:function(){return this.peek(0)}},{key:"atEOF",get:function(){return this.index>=this.tokens.length}},{key:"inputIndex",get:function(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}},{key:"currentEndIndex",get:function(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.inputLength+this.offset:this.next.index+this.offset}},{key:"currentAbsoluteOffset",get:function(){return this.absoluteOffset+this.inputIndex}},{key:"span",value:function(e){return new fr(e,this.currentEndIndex)}},{key:"sourceSpan",value:function(e){var t="".concat(e,"@").concat(this.inputIndex);return this.sourceSpanCache.has(t)||this.sourceSpanCache.set(t,this.span(e).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(t)}},{key:"advance",value:function(){this.index++}},{key:"withContext",value:function(e,t){this.context|=e;var n=t();return this.context^=e,n}},{key:"consumeOptionalCharacter",value:function(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}},{key:"peekKeywordLet",value:function(){return this.next.isKeywordLet()}},{key:"peekKeywordAs",value:function(){return this.next.isKeywordAs()}},{key:"expectCharacter",value:function(e){this.consumeOptionalCharacter(e)||this.error("Missing expected ".concat(String.fromCharCode(e)))}},{key:"consumeOptionalOperator",value:function(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}},{key:"expectOperator",value:function(e){this.consumeOptionalOperator(e)||this.error("Missing expected operator ".concat(e))}},{key:"prettyPrintToken",value:function(e){return e===bs?"end of input":"token ".concat(e)}},{key:"expectIdentifierOrKeyword",value:function(){var e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(this.error("Unexpected ".concat(this.prettyPrintToken(e),", expected identifier or keyword")),"")}},{key:"expectIdentifierOrKeywordOrString",value:function(){var e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(this.error("Unexpected ".concat(this.prettyPrintToken(e),", expected identifier, keyword, or string")),"")}},{key:"parseChain",value:function(){for(var e=[],t=this.inputIndex;this.index<this.tokens.length;){var n=this.parsePipe();if(e.push(n),this.consumeOptionalCharacter(qt))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(qt););else this.index<this.tokens.length&&this.error("Unexpected token '".concat(this.next,"'"))}return 0==e.length?new br(this.span(t),this.sourceSpan(t)):1==e.length?e[0]:new Cr(this.span(t),this.sourceSpan(t),e)}},{key:"parsePipe",value:function(){var e=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var t=this.inputIndex,n=this.expectIdentifierOrKeyword(),i=this.sourceSpan(t),r=[];this.consumeOptionalCharacter(Xt);)r.push(this.parseExpression());var a=e.span.start;e=new Ir(this.span(a),this.sourceSpan(a),e,n,r,i)}while(this.consumeOptionalOperator("|"))}return e}},{key:"parseExpression",value:function(){return this.parseConditional()}},{key:"parseConditional",value:function(){var e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){var n,i=this.parsePipe();if(this.consumeOptionalCharacter(Xt))n=this.parsePipe();else{var r=this.inputIndex,a=this.input.substring(e,r);this.error("Conditional expression ".concat(a," requires all 3 expressions")),n=new br(this.span(e),this.sourceSpan(e))}return new Or(this.span(e),this.sourceSpan(e),t,i,n)}return t}},{key:"parseLogicalOr",value:function(){for(var e=this.parseLogicalAnd();this.consumeOptionalOperator("||");){var t=this.parseLogicalAnd(),n=e.span.start;e=new Ar(this.span(n),this.sourceSpan(n),"||",e,t)}return e}},{key:"parseLogicalAnd",value:function(){for(var e=this.parseEquality();this.consumeOptionalOperator("&&");){var t=this.parseEquality(),n=e.span.start;e=new Ar(this.span(n),this.sourceSpan(n),"&&",e,t)}return e}},{key:"parseEquality",value:function(){for(var e=this.parseRelational();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"==":case"===":case"!=":case"!==":this.advance();var n=this.parseRelational(),i=e.span.start;e=new Ar(this.span(i),this.sourceSpan(i),t,e,n);continue}break}return e}},{key:"parseRelational",value:function(){for(var e=this.parseAdditive();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"<":case">":case"<=":case">=":this.advance();var n=this.parseAdditive(),i=e.span.start;e=new Ar(this.span(i),this.sourceSpan(i),t,e,n);continue}break}return e}},{key:"parseAdditive",value:function(){for(var e=this.parseMultiplicative();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"+":case"-":this.advance();var n=this.parseMultiplicative(),i=e.span.start;e=new Ar(this.span(i),this.sourceSpan(i),t,e,n);continue}break}return e}},{key:"parseMultiplicative",value:function(){for(var e=this.parsePrefix();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"*":case"%":case"/":this.advance();var n=this.parsePrefix(),i=e.span.start;e=new Ar(this.span(i),this.sourceSpan(i),t,e,n);continue}break}return e}},{key:"parsePrefix",value:function(){if(this.next.type==cs.Operator){var e,t=this.inputIndex;switch(this.next.strValue){case"+":return this.advance(),e=this.parsePrefix(),Mr.createPlus(this.span(t),this.sourceSpan(t),e);case"-":return this.advance(),e=this.parsePrefix(),Mr.createMinus(this.span(t),this.sourceSpan(t),e);case"!":return this.advance(),e=this.parsePrefix(),new Dr(this.span(t),this.sourceSpan(t),e)}}return this.parseCallChain()}},{key:"parseCallChain",value:function(){for(var e=this,t=this.parsePrimary(),n=t.span.start;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMemberOrMethodCall(t,!1);else if(this.consumeOptionalOperator("?."))t=this.parseAccessMemberOrMethodCall(t,!0);else if(this.consumeOptionalCharacter(91))this.withContext(Ts.Writable,(function(){e.rbracketsExpected++;var i=e.parsePipe();if(i instanceof br&&e.error("Key access cannot be empty"),e.rbracketsExpected--,e.expectCharacter(93),e.consumeOptionalOperator("=")){var r=e.parseConditional();t=new Er(e.span(n),e.sourceSpan(n),t,i,r)}else t=new wr(e.span(n),e.sourceSpan(n),t,i)}));else if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var i=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(Ht),t=new Nr(this.span(n),this.sourceSpan(n),t,i)}else{if(!this.consumeOptionalOperator("!"))return t;t=new Rr(this.span(n),this.sourceSpan(n),t)}}},{key:"parsePrimary",value:function(){var e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(Ht),t}if(this.next.isKeywordNull())return this.advance(),new Tr(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Tr(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Tr(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Tr(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new yr(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;var n=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new _r(this.span(e),this.sourceSpan(e),n)}if(this.next.isCharacter($t))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new yr(this.span(e),this.sourceSpan(e)),!1);if(this.next.isNumber()){var i=this.next.toNumber();return this.advance(),new Tr(this.span(e),this.sourceSpan(e),i)}if(this.next.isString()){var r=this.next.toString();return this.advance(),new Tr(this.span(e),this.sourceSpan(e),r)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: ".concat(this.input)),new br(this.span(e),this.sourceSpan(e))):(this.error("Unexpected token ".concat(this.next)),new br(this.span(e),this.sourceSpan(e)))}},{key:"parseExpressionList",value:function(e){var t=[];if(!this.next.isCharacter(e))do{t.push(this.parsePipe())}while(this.consumeOptionalCharacter(Wt));return t}},{key:"parseLiteralMap",value:function(){var e=[],t=[],n=this.inputIndex;if(this.expectCharacter($t),!this.consumeOptionalCharacter(en)){this.rbracesExpected++;do{var i=this.next.isString(),r=this.expectIdentifierOrKeywordOrString();e.push({key:r,quoted:i}),this.expectCharacter(Xt),t.push(this.parsePipe())}while(this.consumeOptionalCharacter(Wt));this.rbracesExpected--,this.expectCharacter(en)}return new jr(this.span(n),this.sourceSpan(n),e,t)}},{key:"parseAccessMemberOrMethodCall",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.span.start,i=this.inputIndex,r=this.expectIdentifierOrKeyword(),a=this.sourceSpan(i);if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var o=this.parseCallArguments();this.expectCharacter(Ht),this.rparensExpected--;var s=this.span(n),c=this.sourceSpan(n);return t?new Fr(s,c,a,e,r,o):new Lr(s,c,a,e,r,o)}if(t)return this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new br(this.span(n),this.sourceSpan(n))):new kr(this.span(n),this.sourceSpan(n),a,e,r);if(this.consumeOptionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new br(this.span(n),this.sourceSpan(n));var u=this.parseConditional();return new Sr(this.span(n),this.sourceSpan(n),a,e,r,u)}return new xr(this.span(n),this.sourceSpan(n),a,e,r)}},{key:"parseCallArguments",value:function(){if(this.next.isCharacter(Ht))return[];var e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(Wt));return e}},{key:"expectTemplateBindingKey",value:function(){var e="",t=!1,n=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),(t=this.consumeOptionalOperator("-"))&&(e+="-")}while(t);return{source:e,span:new Br(n,n+e.length)}}},{key:"parseTemplateBindings",value:function(e){var t=[];for(t.push.apply(t,Object(g.a)(this.parseDirectiveKeywordBindings(e)));this.index<this.tokens.length;){var n=this.parseLetBinding();if(n)t.push(n);else{var i=this.expectTemplateBindingKey(),r=this.parseAsBinding(i);r?t.push(r):(i.source=e.source+i.source[0].toUpperCase()+i.source.substring(1),t.push.apply(t,Object(g.a)(this.parseDirectiveKeywordBindings(i))))}this.consumeStatementTerminator()}return new ws(t,[],this.errors)}},{key:"parseDirectiveKeywordBindings",value:function(e){var t=[];this.consumeOptionalCharacter(Xt);var n=this.getDirectiveBoundTarget(),i=this.currentAbsoluteOffset,r=this.parseAsBinding(e);r||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);var a=new Br(e.span.start,i);return t.push(new Vr(a,e,n)),r&&t.push(r),t}},{key:"getDirectiveBoundTarget",value:function(){if(this.next===bs||this.peekKeywordAs()||this.peekKeywordLet())return null;var e=this.parsePipe(),t=e.span,n=t.start,i=t.end,r=this.input.substring(n,i);return new Ur(e,r,this.location,this.absoluteOffset+n,this.errors)}},{key:"parseAsBinding",value:function(e){if(!this.peekKeywordAs())return null;this.advance();var t=this.expectTemplateBindingKey();this.consumeStatementTerminator();var n=new Br(e.span.start,this.currentAbsoluteOffset);return new zr(n,t,e)}},{key:"parseLetBinding",value:function(){if(!this.peekKeywordLet())return null;var e=this.currentAbsoluteOffset;this.advance();var t=this.expectTemplateBindingKey(),n=null;this.consumeOptionalOperator("=")&&(n=this.expectTemplateBindingKey()),this.consumeStatementTerminator();var i=new Br(e,this.currentAbsoluteOffset);return new zr(i,t,n)}},{key:"consumeStatementTerminator",value:function(){this.consumeOptionalCharacter(qt)||this.consumeOptionalCharacter(Wt)}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.errors.push(new hr(e,this.input,this.locationText(t),this.location)),this.skip()}},{key:"locationText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.index),e<this.tokens.length?"at column ".concat(this.tokens[e].index+1," in"):"at the end of the expression"}},{key:"skip",value:function(){for(var e=this.next;!(!(this.index<this.tokens.length)||e.isCharacter(qt)||!(this.rparensExpected<=0)&&e.isCharacter(Ht)||!(this.rbracesExpected<=0)&&e.isCharacter(en)||!(this.rbracketsExpected<=0)&&e.isCharacter(93)||this.context&Ts.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new hr(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}]),e}(),Ms=function(){function e(){Object(m.a)(this,e),this.errors=[]}return Object(v.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){}},{key:"visitInterpolation",value:function(e,t){}},{key:"visitLiteralPrimitive",value:function(e,t){}},{key:"visitPropertyRead",value:function(e,t){}},{key:"visitPropertyWrite",value:function(e,t){}},{key:"visitSafePropertyRead",value:function(e,t){}},{key:"visitMethodCall",value:function(e,t){}},{key:"visitSafeMethodCall",value:function(e,t){}},{key:"visitFunctionCall",value:function(e,t){}},{key:"visitLiteralArray",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitLiteralMap",value:function(e,t){this.visitAll(e.values,t)}},{key:"visitUnary",value:function(e,t){}},{key:"visitBinary",value:function(e,t){}},{key:"visitPrefixNot",value:function(e,t){}},{key:"visitNonNullAssert",value:function(e,t){}},{key:"visitConditional",value:function(e,t){}},{key:"visitPipe",value:function(e,t){this.errors.push("pipes")}},{key:"visitKeyedRead",value:function(e,t){}},{key:"visitKeyedWrite",value:function(e,t){}},{key:"visitAll",value:function(e,t){var n=this;return e.map((function(e){return e.visit(n,t)}))}},{key:"visitChain",value:function(e,t){}},{key:"visitQuote",value:function(e,t){}}]),e}(),Ds=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.apply(this,arguments)).errors=[],e}return Object(v.a)(n,[{key:"visitPipe",value:function(){this.errors.push("pipes")}}]),n}(Gr);function Rs(){return Ps||(Ps={},Ls(L.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Ls(L.STYLE,["*|style"]),Ls(L.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),Ls(L.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),Ps}function Ls(e,t){var n,i=Object(l.a)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;Ps[r.toLowerCase()]=e}}catch(a){i.e(a)}finally{i.f()}}var Fs=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],Ns={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Bs=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this))._schema={},Fs.forEach((function(t){var n={},i=t.split("|"),r=Object(u.a)(i,2),a=r[0],o=r[1].split(","),s=a.split("^"),c=Object(u.a)(s,2),l=c[0],p=c[1];l.split(",").forEach((function(t){return e._schema[t.toLowerCase()]=n}));var d=p&&e._schema[p.toLowerCase()];d&&Object.keys(d).forEach((function(e){n[e]=d[e]})),o.forEach((function(e){if(e.length>0)switch(e[0]){case"*":break;case"!":n[e.substring(1)]="boolean";break;case"#":n[e.substring(1)]="number";break;case"%":n[e.substring(1)]="object";break;default:n[e]="string"}}))})),e}return Object(v.a)(n,[{key:"hasProperty",value:function(e,t,n){if(n.some((function(e){return e.name===B.name})))return!0;if(e.indexOf("-")>-1){if(y(e)||C(e))return!1;if(n.some((function(e){return e.name===N.name})))return!0}return!!(this._schema[e.toLowerCase()]||this._schema.unknown)[t]}},{key:"hasElement",value:function(e,t){if(t.some((function(e){return e.name===B.name})))return!0;if(e.indexOf("-")>-1){if(y(e)||C(e))return!0;if(t.some((function(e){return e.name===N.name})))return!0}return!!this._schema[e.toLowerCase()]}},{key:"securityContext",value:function(e,t,n){n&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();var i=Rs()[e+"|"+t];return i||((i=Rs()["*|"+t])||L.NONE)}},{key:"getMappedPropName",value:function(e){return Ns[e]||e}},{key:"getDefaultComponentElementName",value:function(){return"ng-component"}},{key:"validateProperty",value:function(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:"Binding to event property '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")+"\nIf '".concat(e,"' is a directive input, make sure the directive is imported by the")+" current module."}:{error:!1}}},{key:"validateAttribute",value:function(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:"Binding to event attribute '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")}:{error:!1}}},{key:"allKnownElementNames",value:function(){return Object.keys(this._schema)}},{key:"normalizeAnimationStyleProperty",value:function(e){return e.replace(st,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}},{key:"normalizeAnimationStyleValue",value:function(e,t,n){var i="",r=n.toString().trim(),a=null;if(function(e){switch(e){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&(a="Please provide a CSS unit value for ".concat(t,":").concat(n))}return{error:a,value:r+i}}}]),n}((function e(){Object(m.a)(this,e)}));var Us=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/;function zs(e,t){var n=new Gs(t);return{nodes:eo(n,e),errors:t.errors.concat(n.errors),styleUrls:n.styleUrls,styles:n.styles,ngContentSelectors:n.ngContentSelectors}}var Vs,Gs=function(){function e(t){Object(m.a)(this,e),this.bindingParser=t,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.inI18nBlock=!1}return Object(v.a)(e,[{key:"visitElement",value:function(e){var t=this,n=ai(e.i18n);n&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);var i,r=Zo(e);if(r.type===Jo.SCRIPT)return null;if(r.type===Jo.STYLE){var a=1===(i=e).children.length&&i.children[0]instanceof qa?i.children[0].value:null;return null!==a&&this.styles.push(a),null}if(r.type===Jo.STYLESHEET&&No(r.hrefAttr))return this.styleUrls.push(r.hrefAttr),null;var o,s=O(e.name),c=[],u=[],p=[],d=[],h=[],f={},m=[],v=[],b=!1,y=Object(l.a)(e.attrs);try{for(y.s();!(o=y.n()).done;){var C=o.value,x=!1,S=Ws(C.name),k=!1;if(C.i18n&&(f[C.name]=C.i18n),S.startsWith("*")){b&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",C.sourceSpan),k=!0,b=!0;var w=C.value,E=S.substring("*".length),I=[],T=C.valueSpan?C.valueSpan.start.offset:C.sourceSpan.start.offset+C.name.length;this.bindingParser.parseInlineTemplateBinding(E,w,C.sourceSpan,T,[],m,I),v.push.apply(v,Object(g.a)(I.map((function(e){return new Cn(e.name,e.value,e.sourceSpan,e.valueSpan)}))))}else x=this.parseAttribute(s,C,[],c,u,p,d);x||k||h.push(this.visitAttribute(C))}}catch(B){y.e(B)}finally{y.f()}var _,j=eo(r.nonBindable?Hs:this,e.children);if(r.type===Jo.NG_CONTENT){e.children&&!e.children.every((function(e){return function(e){return e instanceof qa&&0==e.value.trim().length}(e)||function(e){return e instanceof $a}(e)}))&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);var P=r.selectAttr,A=e.attrs.map((function(e){return t.visitAttribute(e)}));_=new yn(P,A,e.sourceSpan,e.i18n),this.ngContentSelectors.push(P)}else if(s){var M=this.extractAttributes(e.name,c,f);_=new bn(e.name,h,M.bound,u,[],j,d,p,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{var D=this.extractAttributes(e.name,c,f);_=new vn(e.name,h,D.bound,u,j,d,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(b){var R=this.extractAttributes("ng-template",m,f),L=[];R.literal.forEach((function(e){return L.push(e)})),R.bound.forEach((function(e){return L.push(e)}));var F=_ instanceof vn?{attributes:_.attributes,inputs:_.inputs,outputs:_.outputs}:{attributes:[],inputs:[],outputs:[]},N=s&&n?void 0:e.i18n;_=new bn(_.name,F.attributes,F.inputs,F.outputs,L,[_],[],v,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,N)}return n&&(this.inI18nBlock=!1),_}},{key:"visitAttribute",value:function(e){return new fn(e.name,e.value,e.sourceSpan,e.valueSpan,e.i18n)}},{key:"visitText",value:function(e){return this._visitTextWithInterpolation(e.value,e.sourceSpan,e.i18n)}},{key:"visitExpansion",value:function(e){var t=this;if(!e.i18n)return null;if(!ai(e.i18n))throw new Error('Invalid type "'.concat(e.i18n.constructor,'" for "i18n" property of ').concat(e.sourceSpan.toString(),'. Expected a "Message"'));var n=e.i18n,i={},r={};return Object.keys(n.placeholders).forEach((function(a){var o=n.placeholders[a];if(a.startsWith("VAR_")){var s=t.bindingParser.interpolationConfig,c="".concat(s.start).concat(o).concat(s.end),u=a.trim();i[u]=t._visitTextWithInterpolation(c,e.sourceSpan)}else r[a]=t._visitTextWithInterpolation(o,e.sourceSpan)})),new xn(i,r,e.sourceSpan,n)}},{key:"visitExpansionCase",value:function(e){return null}},{key:"visitComment",value:function(e){return null}},{key:"extractAttributes",value:function(e,t,n){var i=this,r=[],a=[];return t.forEach((function(t){var o=n[t.name];if(t.isLiteral)a.push(new fn(t.name,t.expression.source||"",t.sourceSpan,void 0,o));else{var s=i.bindingParser.createBoundElementProperty(e,t,!0,!1);r.push(gn.fromBoundElementProperty(s,o))}})),{bound:r,literal:a}}},{key:"parseAttribute",value:function(e,t,n,i,r,a,o){var s=Ws(t.name),c=t.value,u=t.sourceSpan,l=t.valueSpan?t.valueSpan.start.offset:u.start.offset,p=s.match(Us),d=!1;if(p){if(d=!0,null!=p[1])this.bindingParser.parsePropertyBinding(p[7],c,!1,u,l,t.valueSpan,n,i);else if(p[2])if(e){var h=p[7];this.parseVariable(h,c,u,t.valueSpan,a)}else this.reportError('"let-" is only supported on ng-template elements.',u);else if(p[3]){var f=p[7];this.parseReference(f,c,u,t.valueSpan,o)}else if(p[4]){var g=[];this.bindingParser.parseEvent(p[7],c,u,t.valueSpan||u,n,g),Ys(g,r)}else if(p[5])this.bindingParser.parsePropertyBinding(p[7],c,!1,u,l,t.valueSpan,n,i),this.parseAssignmentEvent(p[7],c,u,t.valueSpan,n,r);else if(p[6])this.bindingParser.parseLiteralAttr(s,c,u,l,t.valueSpan,n,i);else if(p[8])this.bindingParser.parsePropertyBinding(p[8],c,!1,u,l,t.valueSpan,n,i),this.parseAssignmentEvent(p[8],c,u,t.valueSpan,n,r);else if(p[9])this.bindingParser.parsePropertyBinding(p[9],c,!1,u,l,t.valueSpan,n,i);else if(p[10]){var m=[];this.bindingParser.parseEvent(p[10],c,u,t.valueSpan||u,n,m),Ys(m,r)}}else d=this.bindingParser.parsePropertyInterpolation(s,c,u,t.valueSpan,n,i);return d}},{key:"_visitTextWithInterpolation",value:function(e,t,n){var i=Ao(e),r=this.bindingParser.parseInterpolation(i,t);return r?new hn(r,t,n):new dn(i,t)}},{key:"parseVariable",value:function(e,t,n,i,r){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',n):0===e.length&&this.reportError("Variable does not have a name",n),r.push(new Cn(e,t,n,i))}},{key:"parseReference",value:function(e,t,n,i,r){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',n):0===e.length&&this.reportError("Reference does not have a name",n),r.push(new On(e,t,n,i))}},{key:"parseAssignmentEvent",value:function(e,t,n,i,r,a){var o=[];this.bindingParser.parseEvent("".concat(e,"Change"),"".concat(t,"=$event"),n,i||n,r,o),Ys(o,a)}},{key:"reportError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;this.errors.push(new pn(t,e,n))}}]),e}(),Hs=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitElement",value:function(e){var t=Zo(e);if(t.type===Jo.SCRIPT||t.type===Jo.STYLE||t.type===Jo.STYLESHEET)return null;var n=eo(this,e.children,null);return new vn(e.name,eo(this,e.attrs),[],[],n,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}},{key:"visitComment",value:function(e){return null}},{key:"visitAttribute",value:function(e){return new fn(e.name,e.value,e.sourceSpan,void 0,e.i18n)}},{key:"visitText",value:function(e){return new dn(e.value,e.sourceSpan)}},{key:"visitExpansion",value:function(e){return null}},{key:"visitExpansionCase",value:function(e){return null}}]),e}());function Ws(e){return/^data-/i.test(e)?e.substring(5):e}function Ys(e,t){t.push.apply(t,Object(g.a)(e.map((function(e){return mn.fromParsedEvent(e)}))))}function Xs(){return{getUniqueId:li(),icus:new Map}}!function(e){e[e.ELEMENT=0]="ELEMENT",e[e.TEMPLATE=1]="TEMPLATE",e[e.PROJECTION=2]="PROJECTION"}(Vs||(Vs={}));var qs=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;Object(m.a)(this,e),this.index=t,this.ref=n,this.level=i,this.templateIndex=r,this.meta=a,this.registry=o,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=o||Xs(),this.id=this._registry.getUniqueId()}return Object(v.a)(e,[{key:"appendTag",value:function(e,t,n,i){if(!t.isVoid||!i){var r=t.isVoid||!i?t.startName:t.closeName,a={type:e,index:n,ctx:this.id,isVoid:t.isVoid,closed:i};di(this.placeholders,r,a)}}},{key:"icus",get:function(){return this._registry.icus}},{key:"isRoot",get:function(){return 0===this.level}},{key:"isResolved",get:function(){return 0===this._unresolvedCtxCount}},{key:"getSerializedPlaceholders",value:function(){var e=new Map;return this.placeholders.forEach((function(t,n){return e.set(n,t.map(Qs))})),e}},{key:"appendBinding",value:function(e){this.bindings.add(e)}},{key:"appendIcu",value:function(e,t){di(this._registry.icus,e,t)}},{key:"appendBoundText",value:function(e){var t=this;hi(e,this.bindings.size,this.id).forEach((function(e,n){return di.apply(void 0,[t.placeholders,n].concat(Object(g.a)(e)))}))}},{key:"appendTemplate",value:function(e,t){this.appendTag(Vs.TEMPLATE,e,t,!1),this.appendTag(Vs.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}},{key:"appendElement",value:function(e,t,n){this.appendTag(Vs.ELEMENT,e,t,n)}},{key:"appendProjection",value:function(e,t){this.appendTag(Vs.PROJECTION,e,t,!1),this.appendTag(Vs.PROJECTION,e,t,!0)}},{key:"forkChildContext",value:function(t,n,i){return new e(t,this.ref,this.level+1,n,i,this._registry)}},{key:"reconcileChildContext",value:function(e){var t=this;["start","close"].forEach((function(n){var i=e.meta["".concat(n,"Name")],r=(t.placeholders.get(i)||[]).find(Zs(t.id,e.templateIndex));r&&(r.ctx=e.id)})),e.placeholders.forEach((function(n,i){var r=t.placeholders.get(i);if(r){var a=r.findIndex(Zs(e.id,e.templateIndex));if(a>=0){var o=i.startsWith("CLOSE");if(i.endsWith("NG-TEMPLATE"))r.splice.apply(r,[a+(o?0:1),0].concat(Object(g.a)(n)));else n[o?n.length-1:0].tmpl=r[a],r.splice.apply(r,[a,1].concat(Object(g.a)(n)))}else r.push.apply(r,Object(g.a)(n));t.placeholders.set(i,r)}else t.placeholders.set(i,n)})),this._unresolvedCtxCount--}}]),e}();function Ks(e,t,n,i){var r=i?"/":"";return ui("".concat(r).concat(e).concat(t),n)}function Js(e,t,n){var i=t.index,r=t.ctx;return t.isVoid?Ks(e,i,r)+Ks(e,i,r,!0):Ks(e,i,r,n)}function Zs(e,t){return function(n){return"object"==typeof n&&n.type===Vs.TEMPLATE&&n.index===t&&n.ctx===e}}function Qs(e){var t,n,i=function(e,t){return Js("#",e,t)},r=function(e,t){return Js("*",e,t)};switch(e.type){case Vs.ELEMENT:return e.closed?i(e,!0)+(e.tmpl?r(e.tmpl,!0):""):e.tmpl?r(e.tmpl)+i(e)+(e.isVoid?r(e.tmpl,!0):""):i(e);case Vs.TEMPLATE:return r(e,e.closed);case Vs.PROJECTION:return t=e,n=e.closed,Js("!",t,n);default:return e}}var $s=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitText",value:function(e){return e.value}},{key:"visitContainer",value:function(e){var t=this;return e.children.map((function(e){return e.visit(t)})).join("")}},{key:"visitIcu",value:function(e){var t=this,n=Object.keys(e.cases).map((function(n){return"".concat(n," {").concat(e.cases[n].visit(t),"}")}));return"{".concat(e.expressionPlaceholder,", ").concat(e.type,", ").concat(n.join(" "),"}")}},{key:"visitTagPlaceholder",value:function(e){var t=this;return e.isVoid?this.formatPh(e.startName):"".concat(this.formatPh(e.startName)).concat(e.children.map((function(e){return e.visit(t)})).join("")).concat(this.formatPh(e.closeName))}},{key:"visitPlaceholder",value:function(e){return this.formatPh(e.name)}},{key:"visitIcuPlaceholder",value:function(e,t){return this.formatPh(e.name)}},{key:"formatPh",value:function(e){return"{".concat(gi(e,!1),"}")}}]),e}());function ec(e){return e.visit($s)}var tc={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},nc=function(){function e(){Object(m.a)(this,e),this._placeHolderNameCounts={},this._signatureToName={}}return Object(v.a)(e,[{key:"getStartTagPlaceholderName",value:function(e,t,n){var i=this._hashTag(e,t,n);if(this._signatureToName[i])return this._signatureToName[i];var r=e.toUpperCase(),a=tc[r]||"TAG_".concat(r),o=this._generateUniqueName(n?a:"START_".concat(a));return this._signatureToName[i]=o,o}},{key:"getCloseTagPlaceholderName",value:function(e){var t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];var n=e.toUpperCase(),i=tc[n]||"TAG_".concat(n),r=this._generateUniqueName("CLOSE_".concat(i));return this._signatureToName[t]=r,r}},{key:"getPlaceholderName",value:function(e,t){var n=e.toUpperCase(),i="PH: ".concat(n,"=").concat(t);if(this._signatureToName[i])return this._signatureToName[i];var r=this._generateUniqueName(n);return this._signatureToName[i]=r,r}},{key:"getUniquePlaceholder",value:function(e){return this._generateUniqueName(e.toUpperCase())}},{key:"_hashTag",value:function(e,t,n){return"<".concat(e)+Object.keys(t).sort().map((function(e){return" ".concat(e,"=").concat(t[e])})).join("")+(n?"/>":"></".concat(e,">"))}},{key:"_hashClosingTag",value:function(e){return this._hashTag("/".concat(e),{},!1)}},{key:"_generateUniqueName",value:function(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;var t=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=t+1,"".concat(e,"_").concat(t)}}]),e}(),ic=new _s(new fs);function rc(e){var t=new oc(ic,e);return function(e,n,i,r,a){return t.toI18nMessage(e,n,i,r,a)}}function ac(e,t){return t}var oc=function(){function e(t,n){Object(m.a)(this,e),this._expressionParser=t,this._interpolationConfig=n}return Object(v.a)(e,[{key:"toI18nMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0,a={isIcu:1==e.length&&e[0]instanceof Ka,icuDepth:0,placeholderRegistry:new nc,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:r||ac},o=eo(this,e,a);return new kn(o,a.placeholderToContent,a.placeholderToMessage,t,n,i)}},{key:"visitElement",value:function(e,t){var n=eo(this,e.children,t),i={};e.attrs.forEach((function(e){i[e.name]=e.value}));var r=T(e.name).isVoid,a=t.placeholderRegistry.getStartTagPlaceholderName(e.name,i,r);t.placeholderToContent[a]=e.sourceSpan.toString();var o="";r||(o=t.placeholderRegistry.getCloseTagPlaceholderName(e.name),t.placeholderToContent[o]="</".concat(e.name,">"));var s=new Tn(e.name,i,a,o,n,r,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,s)}},{key:"visitAttribute",value:function(e,t){var n=this._visitTextWithInterpolation(e.value,e.sourceSpan,t);return t.visitNodeFn(e,n)}},{key:"visitText",value:function(e,t){var n=this._visitTextWithInterpolation(e.value,e.sourceSpan,t);return t.visitNodeFn(e,n)}},{key:"visitComment",value:function(e,t){return null}},{key:"visitExpansion",value:function(e,t){var n=this;t.icuDepth++;var i={},r=new In(e.switchValue,e.type,i,e.sourceSpan);if(e.cases.forEach((function(e){i[e.value]=new En(e.expression.map((function(e){return e.visit(n,t)})),e.expSourceSpan)})),t.icuDepth--,t.isIcu||t.icuDepth>0){var a=t.placeholderRegistry.getUniquePlaceholder("VAR_".concat(e.type));return r.expressionPlaceholder=a,t.placeholderToContent[a]=e.switchValue,t.visitNodeFn(e,r)}var o=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[o]=this.toI18nMessage([e],"","","",void 0);var s=new jn(r,o,e.sourceSpan);return t.visitNodeFn(e,s)}},{key:"visitExpansionCase",value:function(e,t){throw new Error("Unreachable code")}},{key:"_visitTextWithInterpolation",value:function(e,t,n){var i=this._expressionParser.splitInterpolation(e,t.start.toString(),this._interpolationConfig);if(!i)return new wn(e,t);for(var r=[],a=new En(r,t),o=this._interpolationConfig,s=o.start,c=o.end,u=0;u<i.strings.length-1;u++){var l=i.expressions[u],p=l.split(cc)[2]||"INTERPOLATION",d=n.placeholderRegistry.getPlaceholderName(p,l);if(i.strings[u].length){var h=sc(t,i.stringSpans[u]);r.push(new wn(i.strings[u],h))}var f=sc(t,i.expressionsSpans[u]);r.push(new _n(l,d,f)),n.placeholderToContent[d]=s+l+c}var g=i.strings.length-1;if(i.strings[g].length){var m=sc(t,i.stringSpans[g]);r.push(new wn(i.strings[g],m))}return a}}]),e}();function sc(e,t){var n=t.start,i=t.end;return new ln(e.fullStart.moveBy(n),e.fullStart.moveBy(i))}var cc=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;var uc=function(e,t){return e instanceof Xa&&(t instanceof jn&&e.i18n instanceof kn&&(t.previousMessage=e.i18n),e.i18n=t),t},lc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(m.a)(this,e),this.interpolationConfig=t,this.keepI18nAttrs=n,this.enableI18nLegacyMessageIdFormat=i,this.hasI18nMeta=!1,this._createI18nMessage=rc(this.interpolationConfig)}return Object(v.a)(e,[{key:"_generateI18nMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=this._parseMetadata(t),r=i.meaning,a=i.description,o=i.customId,s=this._createI18nMessage(e,r,a,o,n);return this._setMessageId(s,t),this._setLegacyIds(s,t),s}},{key:"visitElement",value:function(e){if(function(e){return e.attrs.some((function(e){return ri(e.name)}))}(e)){this.hasI18nMeta=!0;var t,n=[],i={},r=Object(l.a)(e.attrs);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.name===ti){var o=e.i18n||a.value,s=this._generateI18nMessage(e.children,o,uc);s.nodes.length&&(e.i18n=s)}else if(a.name.startsWith(ni)){i[a.name.slice(ni.length)]=a.value}else n.push(a)}}catch(h){r.e(h)}finally{r.f()}if(Object.keys(i).length){var c,u=Object(l.a)(n);try{for(u.s();!(c=u.n()).done;){var p=c.value,d=i[p.name];void 0!==d&&p.value&&(p.i18n=this._generateI18nMessage([p],p.i18n||d))}}catch(h){u.e(h)}finally{u.f()}}this.keepI18nAttrs||(e.attrs=n)}return eo(this,e.children,e.i18n),e}},{key:"visitExpansion",value:function(e,t){var n,i=e.i18n;if(this.hasI18nMeta=!0,i instanceof jn){var r=i.name;ci(n=this._generateI18nMessage([e],i)).name=r}else n=this._generateI18nMessage([e],t||i);return e.i18n=n,e}},{key:"visitText",value:function(e){return e}},{key:"visitAttribute",value:function(e){return e}},{key:"visitComment",value:function(e){return e}},{key:"visitExpansionCase",value:function(e){return e}},{key:"_parseMetadata",value:function(e){return"string"==typeof e?function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i=i.trim()){var r,a=i.indexOf(pc),o=i.indexOf("|"),s=a>-1?[i.slice(0,a),i.slice(a+2)]:[i,""],c=Object(u.a)(s,2);r=c[0],e=c[1];var l=o>-1?[r.slice(0,o),r.slice(o+1)]:["",r],p=Object(u.a)(l,2);t=p[0],n=p[1]}return{customId:e,meaning:t,description:n}}(e):e instanceof kn?e:{}}},{key:"_setMessageId",value:function(e,t){e.id||(e.id=t instanceof kn&&t.id||An(e))}},{key:"_setLegacyIds",value:function(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[Pn(e),Mn(e)];else if("string"!=typeof t){var n=t instanceof kn?t:t instanceof jn?t.previousMessage:void 0;e.legacyIds=n?n.legacyIds:[]}}}]),e}(),pc="@@";function dc(e){var t=[];return e.description&&t.push({tagName:"desc",text:e.description}),e.meaning&&t.push({tagName:"meaning",text:e.meaning}),0==t.length?null:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Ge(e)}(t)}function hc(e,t,n,i){var r=[rt(function(e){return e.nodes.map((function(e){return e.visit(fc,null)})).join("")}(t))];Object.keys(i).length&&r.push(sr(i,!0));var a=n.set(Je("goog.getMsg").callFn(r)).toConstDecl(),o=dc(t);return null!==o&&a.addLeadingComment(o),[a,new Xe(e.set(n))]}var fc=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"formatPh",value:function(e){return"{$".concat(gi(e),"}")}},{key:"visitText",value:function(e){return e.value}},{key:"visitContainer",value:function(e){var t=this;return e.children.map((function(e){return e.visit(t)})).join("")}},{key:"visitIcu",value:function(e){return ec(e)}},{key:"visitTagPlaceholder",value:function(e){var t=this;return e.isVoid?this.formatPh(e.startName):"".concat(this.formatPh(e.startName)).concat(e.children.map((function(e){return e.visit(t)})).join("")).concat(this.formatPh(e.closeName))}},{key:"visitPlaceholder",value:function(e){return this.formatPh(e.name)}},{key:"visitIcuPlaceholder",value:function(e,t){return this.formatPh(e.name)}}]),e}());function gc(e,t,n){var i=function(e){var t=[];return e.nodes.forEach((function(e){return e.visit(mc,t)})),function(e){var t=[],n=[];e[0]instanceof ye&&t.push(vc(e[0].sourceSpan.start));for(var i=0;i<e.length;i++){var r=e[i];r instanceof be?t.push(r):(n.push(r),e[i-1]instanceof ye&&t.push(vc(e[i-1].sourceSpan.end)))}e[e.length-1]instanceof ye&&t.push(vc(e[e.length-1].sourceSpan.end));return{messageParts:t,placeHolders:n}}(t)}(t),r=i.messageParts,a=i.placeHolders,o=function(e){var t=e.nodes[0],n=e.nodes[e.nodes.length-1];return new ln(t.sourceSpan.start,n.sourceSpan.end,t.sourceSpan.fullStart,t.sourceSpan.details)}(t),s=a.map((function(e){return n[e.text]})),c=function(e,t,n,i,r){return new Ce(e,t,n,i,r)}(t,r,a,s,o),u=e.set(c);return[new Xe(u)]}var mc=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitText",value:function(e,t){t[t.length-1]instanceof be?t[t.length-1].text+=e.value:t.push(new be(e.value,e.sourceSpan))}},{key:"visitContainer",value:function(e,t){var n=this;e.children.forEach((function(e){return e.visit(n,t)}))}},{key:"visitIcu",value:function(e,t){t.push(new be(ec(e),e.sourceSpan))}},{key:"visitTagPlaceholder",value:function(e,t){var n,i,r=this;t.push(this.createPlaceholderPiece(e.startName,null!==(n=e.startSourceSpan)&&void 0!==n?n:e.sourceSpan)),e.isVoid||(e.children.forEach((function(e){return e.visit(r,t)})),t.push(this.createPlaceholderPiece(e.closeName,null!==(i=e.endSourceSpan)&&void 0!==i?i:e.sourceSpan)))}},{key:"visitPlaceholder",value:function(e,t){t.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}},{key:"visitIcuPlaceholder",value:function(e,t){t.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}},{key:"createPlaceholderPiece",value:function(e,t){return new ye(gi(e,!1),t)}}]),e}());function vc(e){return new be("",new ln(e,e))}var bc="ngProjectAs",yc=new Map([["window",Lt.resolveWindow],["document",Lt.resolveDocument],["body",Lt.resolveBody]]),Cc=[" ","\n","\r","\t"];function Oc(e,t){return it(Je(Oi).bitwiseAnd(rt(e),null,!1),t)}function xc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.type,r=e.name,a=e.target,o=e.phase,s=e.handler;if(a&&!yc.has(a))throw new Error("Unexpected global target '".concat(a,"' defined for '").concat(r,"' event.\n        Supported list of global targets: ").concat(Array.from(yc.keys()),"."));var c="$event",u=new Set,l=null===n||0===n.bindingLevel?Je(Ci):n.getOrCreateSharedContextVar(0),p=Qr(n,l,s,"b",(function(){return lt("Unexpected interpolation")}),e.handlerSpan,u),d=[];n&&(d.push.apply(d,Object(g.a)(n.restoreViewStatement())),d.push.apply(d,Object(g.a)(n.variableDeclarations()))),d.push.apply(d,Object(g.a)(p.render3Stmts));var h=1===i?zt(r,o):r,f=t&&jt(t),m=[];u.has(c)&&m.push(new Pe(c,J));var v=nt(m,d,Z,null,f),b=[rt(h),v];return a&&b.push(rt(!1),Ze(yc.get(a))),b}var Sc=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:{prepareStatements:[],constExpressions:[]};Object(m.a)(this,e),this.constantPool=t,this.level=r,this.contextName=a,this.i18nContext=o,this.templateIndex=s,this.templateName=c,this.directiveMatcher=u,this.directives=l,this.pipeTypeByName=p,this.pipes=d,this._namespace=h,this.i18nUseExternalIds=g,this._constants=v,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._nestedTemplateFns=[],this._unsupported=Si,this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=ki,this.visitVariable=ki,this.visitTextAttribute=ki,this.visitBoundAttribute=ki,this.visitBoundEvent=ki,this._bindingScope=n.nestedScope(r),this.fileBasedI18nSuffix=f.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new kc(t,(function(){return i.allocateDataSlot()}),(function(e){return i.allocatePureFunctionSlots(e)}),(function(e,t,n,r){var a=p.get(e);a&&i.pipes.add(a),i._bindingScope.set(i.level,t,r),i.creationInstruction(null,Lt.pipe,[rt(n),rt(e)])}))}return Object(v.a)(e,[{key:"buildTemplateFunction",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;this._ngContentSelectorsOffset=i,this._namespace!==Lt.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach((function(e){return n.registerContextVariables(e)}));var a=this.i18nContext||ai(r)&&!oi(r)&&!(Bc(e)&&e[0].i18n===r),o=zc(e);if(a&&this.i18nStart(null,r,o),Sn(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach((function(e){return e()})),0===this.level&&this._ngContentReservedSlots.length){var s=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){var c=this._ngContentReservedSlots.map((function(e){return"*"!==e?V(e):e}));s.push(this.constantPool.getConstLiteral(wi(c),!0))}this.creationInstruction(null,Lt.projectionDef,s,!0)}a&&this.i18nEnd(null,o);var u=this._creationCodeFns.map((function(e){return e()})),l=this._updateCodeFns.map((function(e){return e()})),p=this._bindingScope.viewSnapshotStatements(),d=this._bindingScope.variableDeclarations().concat(this._tempVariables),h=u.length>0?[Oc(1,p.concat(u))]:[],f=l.length>0?[Oc(2,d.concat(l))]:[];return nt([new Pe(Oi,$),new Pe(Ci,null)],[].concat(Object(g.a)(this._prefixCode),h,f),Z,null,this.templateName)}},{key:"getLocal",value:function(e){return this._bindingScope.get(e)}},{key:"notifyImplicitReceiverUse",value:function(){this._bindingScope.notifyImplicitReceiverUse()}},{key:"i18nTranslate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=i||this.i18nGenerateMainBlockVar(),o=this.i18nGenerateClosureVar(e.id),s=Gc(e,a,o,n,r);return(t=this._constants.prepareStatements).push.apply(t,Object(g.a)(s)),a}},{key:"registerContextVariables",value:function(e){var t=this._bindingScope.freshReferenceName(),n=this.level,i=Je(e.name+t);this._bindingScope.set(n,e.name,i,1,(function(t,r){var a;if(t.bindingLevel===n)a=Je(Ci);else{var o=t.getSharedContextName(n);a=o||Tc(r)}return[i.set(a.prop(e.value||"$implicit")).toConstDecl()]}))}},{key:"i18nAppendBindings",value:function(e){var t=this;e.length>0&&e.forEach((function(e){return t.i18n.appendBinding(e)}))}},{key:"i18nBindProps",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(i){var r=e[i];if(r instanceof dn)n[i]=rt(r.value);else{var a=r.value.visit(t._valueConverter);if(t.allocateBindingSlots(a),a instanceof Pr){var o=a.strings,s=a.expressions,c=t.i18n,u=c.id,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e.length)return"";for(var i="",r=e.length-1,a=0;a<r;a++)i+="".concat(e[a]).concat(ui(t+a,n));return i+e[r]}(o,c.bindings.size,u);t.i18nAppendBindings(s),n[i]=rt(l)}}})),n}},{key:"i18nGenerateMainBlockVar",value:function(){return Je(this.constantPool.uniqueName("i18n_"))}},{key:"i18nGenerateClosureVar",value:function(e){var t,n=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){var i=mi("EXTERNAL_"),r=this.constantPool.uniqueName(n);t="".concat(i).concat(jt(e),"$$").concat(r)}else{var a=mi(n);t=this.constantPool.uniqueName(a)}return Je(t)}},{key:"i18nUpdateRef",value:function(e){var t=e.icus,n=e.meta,i=e.isRoot,r=e.isResolved,a=e.isEmitted;if(i&&r&&!a&&!oi(n)){e.isEmitted=!0;var o,s=e.getSerializedPlaceholders(),c={},u=s.size?pi(s):{};t.size&&t.forEach((function(e,t){if(1===e.length)u[t]=e[0];else{var n=ui("".concat("I18N_EXP_").concat(t));u[t]=rt(n),c[t]=et(e)}})),(Array.from(s.values()).some((function(e){return e.length>1}))||Object.keys(c).length)&&(o=function(e){var t=[e];return Object.keys(c).length&&t.push(sr(c,!0)),Ic(null,Lt.i18nPostprocess,t)}),this.i18nTranslate(n,u,e.ref,o)}}},{key:"i18nStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(i,this.templateIndex,t):new qs(i,this.i18nGenerateMainBlockVar(),0,this.templateIndex,t);var r=this.i18n,a=r.id,o=r.ref,s=[rt(i),this.addToConsts(o)];a>0&&s.push(rt(a)),this.creationInstruction(e,n?Lt.i18n:Lt.i18nStart,s)}},{key:"i18nEnd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);var i=this.i18n,r=i.index,a=i.bindings;if(a.size){var o=[];a.forEach((function(n){o.push({sourceSpan:t,value:function(){return e.convertPropertyBinding(n)}})})),this.updateInstructionChainWithAdvance(this.getConstCount()-1,Lt.i18nExp,o),this.updateInstruction(t,Lt.i18nApply,[rt(r)])}n||this.creationInstruction(t,Lt.i18nEnd),this.i18n=null}},{key:"i18nAttributesInstruction",value:function(e,t,n){var i=this,r=!1,a=[],o=[];if(t.forEach((function(e){var t=e.i18n;if(e instanceof fn)a.push(rt(e.name),i.i18nTranslate(t));else{var s=e.value.visit(i._valueConverter);if(i.allocateBindingSlots(s),s instanceof Pr){var c=pi(hi(t));a.push(rt(e.name),i.i18nTranslate(t,c)),s.expressions.forEach((function(e){r=!0,o.push({sourceSpan:n,value:function(){return i.convertPropertyBinding(e)}})}))}}})),o.length>0&&this.updateInstructionChainWithAdvance(e,Lt.i18nExp,o),a.length>0){var s=rt(this.allocateDataSlot()),c=this.addToConsts(et(a));this.creationInstruction(n,Lt.i18nAttributes,[s,c]),r&&this.updateInstruction(n,Lt.i18nApply,[s])}}},{key:"getNamespaceInstruction",value:function(e){switch(e){case"math":return Lt.namespaceMathML;case"svg":return Lt.namespaceSVG;default:return Lt.namespaceHTML}}},{key:"addNamespaceInstruction",value:function(e,t){this._namespace=e,this.creationInstruction(t.sourceSpan,e)}},{key:"interpolatedUpdateInstruction",value:function(e,t,n,i,r,a){var o=this;this.updateInstructionWithAdvance(t,i.sourceSpan,e,(function(){return[rt(n)].concat(Object(g.a)(o.getUpdateInstructionArguments(r)),Object(g.a)(a))}))}},{key:"visitContent",value:function(e){var t=this.allocateDataSlot(),n=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,i=[rt(t)];this._ngContentReservedSlots.push(e.selector);var r=e.attributes.filter((function(e){return"select"!==e.name.toLowerCase()})),a=this.getAttributeExpressions(r,[],[]);a.length>0?i.push(rt(n),et(a)):0!==n&&i.push(rt(n)),this.creationInstruction(e.sourceSpan,Lt.projection,i),this.i18n&&this.i18n.appendProjection(e.i18n,t)}},{key:"visitElement",value:function(e){var t,n=this,i=this.allocateDataSlot(),r=new us(null),a=!1,o=ai(e.i18n)&&!oi(e.i18n),s=[],c=[],p=b(e.name),d=Object(u.a)(p,2),h=d[0],f=d[1],g=y(e.name),m=Object(l.a)(e.attributes);try{for(m.s();!(t=m.n()).done;){var v=t.value,C=v.name,O=v.value;"ngNonBindable"===C?a=!0:"style"===C?r.registerStyleAttr(O):"class"===C?r.registerClassAttr(O):(v.i18n?s:c).push(v)}}catch(U){m.e(U)}finally{m.f()}this.matchDirectives(e.name,e);var x=[rt(i)];g||x.push(rt(f));var S=[];e.inputs.forEach((function(e){r.registerBoundInput(e)||(0===e.type&&e.i18n?s.push(e):S.push(e))}));var k=this.getAttributeExpressions(c,S,e.outputs,r,[],s);x.push(this.addAttrsToConsts(k));var w=this.prepareRefsArray(e.references);x.push(this.addToConsts(w));var E=this._namespace,I=this.getNamespaceInstruction(h);I!==E&&this.addNamespaceInstruction(I,e),this.i18n&&this.i18n.appendElement(e.i18n,i);var T=!o&&this.i18n?!zc(e.children):e.children.length>0,_=!r.hasBindingsWithPipes&&0===e.outputs.length&&0===s.length&&!T,j=!_&&zc(e.children);if(_)this.creationInstruction(e.sourceSpan,g?Lt.elementContainer:Lt.element,Ii(x));else{if(this.creationInstruction(e.sourceSpan,g?Lt.elementContainerStart:Lt.elementStart,Ii(x)),a&&this.creationInstruction(e.sourceSpan,Lt.disableBindings),s.length>0&&this.i18nAttributesInstruction(i,s,e.sourceSpan),e.outputs.length>0){var P=e.outputs.map((function(t){return{sourceSpan:t.sourceSpan,params:n.prepareListenerParameter(e.name,t,i)}}));this.creationInstructionChain(Lt.listener,P)}o&&this.i18nStart(e.sourceSpan,e.i18n,j)}for(var A=r.buildUpdateLevelInstructions(this._valueConverter),M=A.length-1,D=0;D<=M;D++){var R=A[D];this._bindingSlots+=this.processStylingUpdateInstruction(i,R)}var L=rt(void 0),F=[],N=[];if(S.forEach((function(e){var t=e.type;if(4===t){var r=e.value.visit(n._valueConverter),a=!(r instanceof Tr)||!!r.value;n.allocateBindingSlots(r),F.push({name:Ut(e.name),sourceSpan:e.sourceSpan,value:function(){return a?n.convertPropertyBinding(r):L}})}else{if(e.i18n)return;var o=e.value.visit(n._valueConverter);if(void 0!==o){var s=[],c=b(e.name),l=Object(u.a)(c,2),p=l[0],d=l[1],h=1===t,f=Nc(e.securityContext,h);if(f&&s.push(f),p){var g=rt(p);f?s.push(g):s.push(rt(null),g)}if(n.allocateBindingSlots(o),0===t)o instanceof Pr?n.interpolatedUpdateInstruction(Rc(o),i,d,e,o,s):F.push({name:d,sourceSpan:e.sourceSpan,value:function(){return n.convertPropertyBinding(o)},params:s});else if(1===t)if(o instanceof Pr&&Ri(o)>1)n.interpolatedUpdateInstruction(function(e){switch(Ri(e)){case 3:return Lt.attributeInterpolate1;case 5:return Lt.attributeInterpolate2;case 7:return Lt.attributeInterpolate3;case 9:return Lt.attributeInterpolate4;case 11:return Lt.attributeInterpolate5;case 13:return Lt.attributeInterpolate6;case 15:return Lt.attributeInterpolate7;case 17:return Lt.attributeInterpolate8;default:return Lt.attributeInterpolateV}}(o),i,d,e,o,s);else{var m=o instanceof Pr?o.expressions[0]:o;N.push({name:d,sourceSpan:e.sourceSpan,value:function(){return n.convertPropertyBinding(m)},params:s})}else n.updateInstructionWithAdvance(i,e.sourceSpan,Lt.classProp,(function(){return[rt(i),rt(d),n.convertPropertyBinding(o)].concat(s)}))}}})),F.length>0&&this.updateInstructionChainWithAdvance(i,Lt.property,F),N.length>0&&this.updateInstructionChainWithAdvance(i,Lt.attribute,N),Sn(this,e.children),!o&&this.i18n&&this.i18n.appendElement(e.i18n,i,!0),!_){var B=e.endSourceSpan||e.sourceSpan;o&&this.i18nEnd(B,j),a&&this.creationInstruction(B,Lt.enableBindings),this.creationInstruction(B,g?Lt.elementContainerEnd:Lt.elementEnd)}}},{key:"visitTemplate",value:function(t){var n=this,i="ng-template",r=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(t.i18n,r);var a=jt(t.tagName||""),o="".concat(this.contextName).concat(a?"_"+a:"","_").concat(r),s="".concat(o,"_Template"),c=[rt(r),Je(s),rt(t.tagName?b(t.tagName)[1]:t.tagName)];this.matchDirectives(i,t);var l=bt(t.attributes,si),p=Object(u.a)(l,2),d=p[0],h=p[1],f=this.getAttributeExpressions(h,t.inputs,t.outputs,void 0,t.templateAttrs,d);if(c.push(this.addAttrsToConsts(f)),t.references&&t.references.length){var m=this.prepareRefsArray(t.references);c.push(this.addToConsts(m)),c.push(Ze(Lt.templateRefExtractor))}var v=new e(this.constantPool,this._bindingScope,this.level+1,o,this.i18n,r,s,this.directiveMatcher,this.directives,this.pipeTypeByName,this.pipes,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this._constants);if(this._nestedTemplateFns.push((function(){var e,i=v.buildTemplateFunction(t.children,t.variables,n._ngContentReservedSlots.length+n._ngContentSelectorsOffset,t.i18n);(n.constantPool.statements.push(i.toDeclStmt(s)),v._ngContentReservedSlots.length)&&(e=n._ngContentReservedSlots).push.apply(e,Object(g.a)(v._ngContentReservedSlots))})),this.creationInstruction(t.sourceSpan,Lt.templateCreate,(function(){return c.splice(2,0,rt(v.getConstCount()),rt(v.getVarCount())),Ii(c)})),this.templatePropertyBindings(r,t.templateAttrs),t.tagName===i){var y=bt(t.inputs,si),C=Object(u.a)(y,2),O=C[0],x=C[1],S=[].concat(Object(g.a)(d),Object(g.a)(O));if(S.length>0&&this.i18nAttributesInstruction(r,S,t.sourceSpan),x.length>0&&this.templatePropertyBindings(r,x),t.outputs.length>0){var k=t.outputs.map((function(e){return{sourceSpan:e.sourceSpan,params:n.prepareListenerParameter("ng_template",e,r)}}));this.creationInstructionChain(Lt.listener,k)}}}},{key:"visitBoundText",value:function(e){var t=this;if(this.i18n){var n=e.value.visit(this._valueConverter);return this.allocateBindingSlots(n),void(n instanceof Pr&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(n.expressions)))}var i=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,Lt.text,[rt(i)]);var r=e.value.visit(this._valueConverter);this.allocateBindingSlots(r),r instanceof Pr?this.updateInstructionWithAdvance(i,e.sourceSpan,function(e){switch(Ri(e)){case 1:return Lt.textInterpolate;case 3:return Lt.textInterpolate1;case 5:return Lt.textInterpolate2;case 7:return Lt.textInterpolate3;case 9:return Lt.textInterpolate4;case 11:return Lt.textInterpolate5;case 13:return Lt.textInterpolate6;case 15:return Lt.textInterpolate7;case 17:return Lt.textInterpolate8;default:return Lt.textInterpolateV}}(r),(function(){return t.getUpdateInstructionArguments(r)})):lt("Text nodes should be interpolated and never bound directly.")}},{key:"visitText",value:function(e){this.i18n||this.creationInstruction(e.sourceSpan,Lt.text,[rt(this.allocateDataSlot()),rt(e.value)])}},{key:"visitIcu",value:function(e){var t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));var n=this.i18n,i=this.i18nBindProps(e.vars),r=this.i18nBindProps(e.placeholders),a=e.i18n,o=function(e){var t=fi(Object.assign(Object.assign({},i),r),!1);return Ic(null,Lt.i18nPostprocess,[e,sr(t,!0)])};if(oi(n.meta))this.i18nTranslate(a,{},n.ref,o);else{var s=this.i18nTranslate(a,{},void 0,o);n.appendIcu(ci(a).name,s)}return t&&this.i18nEnd(null,!0),null}},{key:"allocateDataSlot",value:function(){return this._dataIndex++}},{key:"getConstCount",value:function(){return this._dataIndex}},{key:"getVarCount",value:function(){return this._pureFunctionSlots}},{key:"getConsts",value:function(){return this._constants}},{key:"getNgContentSelectors",value:function(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(wi(this._ngContentReservedSlots),!0):null}},{key:"bindingContext",value:function(){return"".concat(this._bindingContext++)}},{key:"templatePropertyBindings",value:function(e,t){var n=this,i=[];t.forEach((function(t){if(t instanceof gn){var r=t.value.visit(n._valueConverter);if(void 0!==r)if(n.allocateBindingSlots(r),r instanceof Pr){n.interpolatedUpdateInstruction(Rc(r),e,t.name,t,r,[])}else i.push({name:t.name,sourceSpan:t.sourceSpan,value:function(){return n.convertPropertyBinding(r)}})}})),i.length>0&&this.updateInstructionChainWithAdvance(e,Lt.property,i)}},{key:"instructionFn",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e[r?"unshift":"push"]((function(){var e=Array.isArray(i)?i:i();return Ic(t,n,e).toStmt()}))}},{key:"processStylingUpdateInstruction",value:function(e,t){var n=this,i=0;if(t){var r=[];t.calls.forEach((function(e){i+=e.allocateBindingSlots,r.push({sourceSpan:e.sourceSpan,value:function(){return e.params((function(t){return e.supportsInterpolation&&t instanceof Pr?n.getUpdateInstructionArguments(t):n.convertPropertyBinding(t)}))}})})),this.updateInstructionChainWithAdvance(e,t.reference,r)}return i}},{key:"creationInstruction",value:function(e,t,n,i){this.instructionFn(this._creationCodeFns,e,t,n||[],i)}},{key:"creationInstructionChain",value:function(e,t){var n=t.length?t[0].sourceSpan:null;this._creationCodeFns.push((function(){return Di(e,t.map((function(e){return e.params()})),n).toStmt()}))}},{key:"updateInstructionWithAdvance",value:function(e,t,n,i){this.addAdvanceInstructionIfNecessary(e,t),this.updateInstruction(t,n,i)}},{key:"updateInstruction",value:function(e,t,n){this.instructionFn(this._updateCodeFns,e,t,n||[])}},{key:"updateInstructionChain",value:function(e,t){var n=t.length?t[0].sourceSpan:null;this._updateCodeFns.push((function(){var i=t.map((function(e){var t=e.value(),n=Array.isArray(t)?t:[t];return e.params&&n.push.apply(n,Object(g.a)(e.params)),e.name&&n.unshift(rt(e.name)),n}));return Di(e,i,n).toStmt()}))}},{key:"updateInstructionChainWithAdvance",value:function(e,t,n){this.addAdvanceInstructionIfNecessary(e,n.length?n[0].sourceSpan:null),this.updateInstructionChain(t,n)}},{key:"addAdvanceInstructionIfNecessary",value:function(e,t){if(e!==this._currentIndex){var n=e-this._currentIndex;if(n<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,t,Lt.advance,[rt(n)]),this._currentIndex=e}}},{key:"allocatePureFunctionSlots",value:function(e){var t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}},{key:"allocateBindingSlots",value:function(e){this._bindingSlots+=e instanceof Pr?e.expressions.length:1}},{key:"getImplicitReceiverExpr",value:function(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?Je(Ci):this._bindingScope.getOrCreateSharedContextVar(0)}},{key:"convertPropertyBinding",value:function(e){var t,n=ia(this,this.getImplicitReceiverExpr(),e,this.bindingContext(),ea.Expression,(function(){return lt("Unexpected interpolation")})),i=n.currValExpr;return(t=this._tempVariables).push.apply(t,Object(g.a)(n.stmts)),i}},{key:"getUpdateInstructionArguments",value:function(e){var t,n=function(e,t,n,i){var r=new la(e,t,i,void 0),a=n.visit(r,ta.Expression);r.usesImplicitReceiver&&e.notifyImplicitReceiverUse();var o=ra(r,i),s=a.args.slice(1);if(n instanceof Pr){var c=n.strings;3===s.length&&""===c[0]&&""===c[1]?s=[s[1]]:s.length>=19&&(s=[et(s)])}return{stmts:o,args:s}}(this,this.getImplicitReceiverExpr(),e,this.bindingContext()),i=n.args,r=n.stmts;return(t=this._tempVariables).push.apply(t,Object(g.a)(r)),i}},{key:"matchDirectives",value:function(e,t){var n=this;if(this.directiveMatcher){var i=Mc(e,Mi(t));this.directiveMatcher.match(i,(function(e,t){n.directives.add(t)}))}}},{key:"getAttributeExpressions",value:function(e,t,n,i){var r,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=new Set,c=[];function u(e,t){"string"==typeof e?s.has(e)||(c.push.apply(c,Object(g.a)(jc(e))),void 0!==t&&c.push(t),s.add(e)):c.push(rt(e))}if(e.forEach((function(e){e.name===bc&&(r=e),c.push.apply(c,Object(g.a)(jc(e.name)).concat([wi(e.value)]))})),r&&c.push.apply(c,Object(g.a)(Dc(r))),i&&i.populateInitialStylingAttrs(c),t.length||n.length){for(var l=c.length,p=0;p<t.length;p++){var d=t[p];4!==d.type&&1!==d.type&&u(d.name)}for(var h=0;h<n.length;h++){var f=n[h];1!==f.type&&u(f.name)}c.length!==l&&c.splice(l,0,rt(3))}return a.length&&(c.push(rt(4)),a.forEach((function(e){return u(e.name)}))),o.length&&(c.push(rt(6)),o.forEach((function(e){return u(e.name)}))),c}},{key:"addToConsts",value:function(e){if(at(e))return ze;for(var t=this._constants.constExpressions,n=0;n<t.length;n++)if(t[n].isEquivalent(e))return rt(n);return rt(t.push(e)-1)}},{key:"addAttrsToConsts",value:function(e){return e.length>0?this.addToConsts(et(e)):ze}},{key:"prepareRefsArray",value:function(e){var t=this;return e&&0!==e.length?wi(Dt(e.map((function(e){var n=t.allocateDataSlot(),i=t._bindingScope.freshReferenceName(),r=t.level,a=Je(i);return t._bindingScope.set(r,e.name,a,0,(function(e,t){var i=t>0?[Tc(t).toStmt()]:[],r=a.set(Ze(Lt.reference).callFn([rt(n)]));return i.concat(r.toConstDecl())}),!0),[e.name,e.value]})))):ze}},{key:"prepareListenerParameter",value:function(e,t,n){var i=this;return function(){var r=t.name,a=1===t.type?Vt(r,t.phase):jt(r),o="".concat(i.templateName,"_").concat(e,"_").concat(a,"_").concat(n,"_listener"),s=i._bindingScope.nestedScope(i._bindingScope.bindingLevel);return xc(t,o,s)}}}]),e}(),kc=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,i,r,a){var o;return Object(m.a)(this,n),(o=t.call(this)).constantPool=e,o.allocateSlot=i,o.allocatePureFunctionSlots=r,o.definePipe=a,o._pipeBindExprs=[],o}return Object(v.a)(n,[{key:"visitPipe",value:function(e,t){var n=this.allocateSlot(),i="PIPE:".concat(n),r=this.allocatePureFunctionSlots(2+e.args.length),a=new xr(e.span,e.sourceSpan,e.nameSpan,new yr(e.span,e.sourceSpan),i),o=function(e){var t=wc[e.length];return{identifier:t||Lt.pipeBindV,isVarLength:!t}}(e.args),s=o.identifier,c=o.isVarLength;this.definePipe(e.name,i,n,Ze(s));var u=[e.exp].concat(Object(g.a)(e.args)),l=c?this.visitAll([new _r(e.span,e.sourceSpan,u)]):this.visitAll(u),p=new Nr(e.span,e.sourceSpan,a,[new Tr(e.span,e.sourceSpan,n),new Tr(e.span,e.sourceSpan,r)].concat(Object(g.a)(l)));return this._pipeBindExprs.push(p),p}},{key:"updatePipeSlotOffsets",value:function(e){this._pipeBindExprs.forEach((function(t){t.args[1].value+=e}))}},{key:"visitLiteralArray",value:function(e,t){var n=this;return new da(e.span,e.sourceSpan,this.visitAll(e.expressions),(function(e){var t=et(e);return _c(n.constantPool,t,n.allocatePureFunctionSlots)}))}},{key:"visitLiteralMap",value:function(e,t){var n=this;return new da(e.span,e.sourceSpan,this.visitAll(e.values),(function(t){var i=tt(t.map((function(t,n){return{key:e.keys[n].key,value:t,quoted:e.keys[n].quoted}})));return _c(n.constantPool,i,n.allocatePureFunctionSlots)}))}}]),n}(Wr),wc=[Lt.pipeBind1,Lt.pipeBind2,Lt.pipeBind3,Lt.pipeBind4];var Ec=[Lt.pureFunction0,Lt.pureFunction1,Lt.pureFunction2,Lt.pureFunction3,Lt.pureFunction4,Lt.pureFunction5,Lt.pureFunction6,Lt.pureFunction7,Lt.pureFunction8];function Ic(e,t,n){return Ze(t,null,e).callFn(n,e)}function Tc(e){return Ze(Lt.nextContext).callFn(e>1?[rt(e)]:[])}function _c(e,t,n){var i=e.getLiteralFactory(t),r=i.literalFactory,a=i.literalFactoryArguments,o=n(1+a.length),s=function(e){var t=Ec[e.length];return{identifier:t||Lt.pureFunctionV,isVarLength:!t}}(a),c=s.identifier,u=s.isVarLength,l=[rt(o),r];return u?l.push(et(a)):l.push.apply(l,Object(g.a)(a)),Ze(c).callFn(l)}function jc(e){var t=b(e),n=Object(u.a)(t,2),i=n[0],r=rt(n[1]);return i?[rt(0),rt(i),r]:[r]}var Pc="$$shared_ctx$$",Ac=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(m.a)(this,e),this.bindingLevel=t,this.parent=n,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null}return Object(v.a)(e,[{key:"get",value:function(e){for(var t=this;t;){var n=t.map.get(e);if(null!=n)return t!==this&&(n={retrievalLevel:n.retrievalLevel,lhs:n.lhs,declareLocalCallback:n.declareLocalCallback,declare:!1,priority:n.priority,localRef:n.localRef},this.map.set(e,n),this.maybeGenerateSharedContextVar(n),this.maybeRestoreView(n.retrievalLevel,n.localRef)),n.declareLocalCallback&&!n.declare&&(n.declare=!0),n.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(this.map.has(t)){if(a)return this;lt("The name ".concat(t," is already defined in scope to be ").concat(this.map.get(t)))}return this.map.set(t,{retrievalLevel:e,lhs:n,declare:!1,declareLocalCallback:r,priority:i,localRef:a||!1}),this}},{key:"getLocal",value:function(e){return this.get(e)}},{key:"notifyImplicitReceiverUse",value:function(){0!==this.bindingLevel&&(this.map.get("$$shared_ctx$$0").declare=!0)}},{key:"nestedScope",value:function(t){var n=new e(t,this);return t>0&&n.generateSharedContextVar(0),n}},{key:"getOrCreateSharedContextVar",value:function(e){var t=Pc+e;return this.map.has(t)||this.generateSharedContextVar(e),this.map.get(t).lhs}},{key:"getSharedContextName",value:function(e){var t=this.map.get(Pc+e);return t&&t.declare?t.lhs:null}},{key:"maybeGenerateSharedContextVar",value:function(e){if(1===e.priority&&e.retrievalLevel<this.bindingLevel){var t=this.map.get(Pc+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}},{key:"generateSharedContextVar",value:function(e){var t=Je(Ci+this.freshReferenceName());this.map.set(Pc+e,{retrievalLevel:e,lhs:t,declareLocalCallback:function(e,n){return[t.set(Tc(n)).toConstDecl()]},declare:!1,priority:2,localRef:!1})}},{key:"getComponentProperty",value:function(e){var t=this.map.get("$$shared_ctx$$0");return t.declare=!0,this.maybeRestoreView(0,!1),t.lhs.prop(e)}},{key:"maybeRestoreView",value:function(e,t){this.isListenerScope()&&(e<this.bindingLevel||t)&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=Je(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}},{key:"restoreViewStatement",value:function(){return this.restoreViewVariable?[Ic(null,Lt.restoreView,[this.restoreViewVariable]).toStmt()]:[]}},{key:"viewSnapshotStatements",value:function(){var e=Ic(null,Lt.getCurrentView,[]);return this.restoreViewVariable?[this.restoreViewVariable.set(e).toConstDecl()]:[]}},{key:"isListenerScope",value:function(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}},{key:"variableDeclarations",value:function(){var e=this,t=0;return Array.from(this.map.values()).filter((function(e){return e.declare})).sort((function(e,t){return t.retrievalLevel-e.retrievalLevel||t.priority-e.priority})).reduce((function(n,i){var r=e.bindingLevel-i.retrievalLevel,a=i.declareLocalCallback(e,r-t);return t=r,n.concat(a)}),[])}},{key:"freshReferenceName",value:function(){for(var e=this;e.parent;)e=e.parent;return"".concat("_r").concat(e.referenceNameIndex++)}}],[{key:"createRootScope",value:function(){return(new e).set(0,"$event",Je("$event"))}}]),e}();function Mc(e,t){var n=new A,i=b(e)[1];return n.setElement(i),Object.getOwnPropertyNames(t).forEach((function(e){var i=b(e)[1],r=t[e];(n.addAttribute(i,r),"class"===e.toLowerCase())&&r.trim().split(/\s+/).forEach((function(e){return n.addClassName(e)}))})),n}function Dc(e){var t=V(e.value)[0];return[rt(5),wi(t)]}function Rc(e){switch(Ri(e)){case 1:return Lt.propertyInterpolate;case 3:return Lt.propertyInterpolate1;case 5:return Lt.propertyInterpolate2;case 7:return Lt.propertyInterpolate3;case 9:return Lt.propertyInterpolate4;case 11:return Lt.propertyInterpolate5;case 13:return Lt.propertyInterpolate6;case 15:return Lt.propertyInterpolate7;case 17:return Lt.propertyInterpolate8;default:return Lt.propertyInterpolateV}}var Lc=new Bs;function Fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi;return new Wo(new js(new fs),e,Lc,null,[])}function Nc(e,t){switch(e){case L.HTML:return Ze(Lt.sanitizeHtml);case L.SCRIPT:return Ze(Lt.sanitizeScript);case L.STYLE:return t?Ze(Lt.sanitizeStyle):null;case L.URL:return Ze(Lt.sanitizeUrl);case L.RESOURCE_URL:return Ze(Lt.sanitizeResourceUrl);default:return null}}function Bc(e){return 1===e.length&&e[0]instanceof vn}function Uc(e){return e instanceof dn||e instanceof hn||e instanceof xn}function zc(e){return e.every(Uc)}var Vc="ngI18nClosureMode";function Gc(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=[vi(t),it(Hc(),hc(t,e,n,fi(i,!0)),gc(t,e,fi(i,!1)))];return r&&a.push(new Xe(t.set(r(t)))),a}function Hc(){return $e(Je(Vc)).notIdentical(rt("undefined",ee)).and(Je(Vc))}var Wc=/attr\.([^\]]+)/;function Yc(e,t,n){var i=new Ai,r=V(e.selector);return i.set("type",e.internalType),r.length>0&&i.set("selectors",wi(r)),e.queries.length>0&&i.set("contentQueries",function(e,t,n){var i,r=[],a=[],o=xi(a,yi),s=Object(l.a)(e);try{for(s.s();!(i=s.n()).done;){var c=i.value,u=c.static?Lt.staticContentQuery:Lt.contentQuery;r.push(Ze(u).callFn([Je("dirIndex")].concat(Object(g.a)(Jc(c,t)))).toStmt());var p=o(),d=Ze(Lt.loadQuery).callFn([]),h=Ze(Lt.queryRefresh).callFn([p.set(d)]),f=Je(Ci).prop(c.propertyName).set(c.first?p.prop("first"):p);a.push(h.and(f).toStmt())}}catch(v){s.e(v)}finally{s.f()}var m=n?"".concat(n,"_ContentQueries"):null;return nt([new Pe(Oi,$),new Pe(Ci,null),new Pe("dirIndex",null)],[Oc(1,r),Oc(2,a)],Z,null,m)}(e.queries,t,e.name)),e.viewQueries.length&&i.set("viewQuery",function(e,t,n){var i=[],r=[],a=xi(r,yi);e.forEach((function(e){var n=Ze(e.static?Lt.staticViewQuery:Lt.viewQuery).callFn(Jc(e,t));i.push(n.toStmt());var o=a(),s=Ze(Lt.loadQuery).callFn([]),c=Ze(Lt.queryRefresh).callFn([o.set(s)]),u=Je(Ci).prop(e.propertyName).set(e.first?o.prop("first"):o);r.push(c.and(u).toStmt())}));var o=n?"".concat(n,"_Query"):null;return nt([new Pe(Oi,$),new Pe(Ci,null)],[Oc(1,i),Oc(2,r)],Z,null,o)}(e.viewQueries,t,e.name)),i.set("hostBindings",function(e,t,n,i,r,a,o){var s=Je(Ci),c=new us(s),u=e.specialAttributes,p=u.styleAttr,d=u.classAttr;void 0!==p&&c.registerStyleAttr(p);void 0!==d&&c.registerClassAttr(d);var h=[],f=[],m=t,v=tu(e),b=n.createDirectiveHostEventAsts(v,m);if(b&&b.length){var y=function(e,t){var n=[],i=[],r=[];e.forEach((function(e){var r=e.name&&jt(e.name),a=1===e.type?Vt(r,e.targetOrPhase):r,o=t&&r?"".concat(t,"_").concat(a,"_HostBindingHandler"):null,s=xc(mn.fromParsedEvent(e),o);1==e.type?i.push(s):n.push(s)})),i.length>0&&r.push(Di(Lt.syntheticHostListener,i).toStmt());n.length>0&&r.push(Di(Lt.listener,n).toStmt());return r}(b,a);h.push.apply(h,Object(g.a)(y))}var C,O=n.createBoundHostProperties(v,m),x=[],S=0;O&&O.forEach((function(e){var t=e.name;c.registerInputBasedOnName(t,e.expression,e.sourceSpan)?S+=2:(x.push(e),S++)}));var k=function(){C||(C=new kc(i,(function(){return lt("Unexpected node")}),(function(e){var t=S;return S+=e,t}),(function(){return lt("Unexpected pipe")})));return C},w=[],E=[],I=[];x.forEach((function(e){var t=e.expression.visit(k()),i=eu(s,t),a=function(e){var t,n=e.name,i=n.match(Wc);i?(n=i[1],t=Lt.attribute):e.isAnimation?(n=Ut(n),t=Lt.syntheticHostProperty):t=Lt.hostProperty;return{bindingName:n,instruction:t,isAttribute:!!i}}(e),o=a.bindingName,c=a.instruction,u=a.isAttribute,l=n.calcPossibleSecurityContexts(r,o,u).filter((function(e){return e!==L.NONE})),p=null;l.length&&(p=2===l.length&&l.indexOf(L.URL)>-1&&l.indexOf(L.RESOURCE_URL)>-1?Ze(Lt.sanitizeUrlOrResourceUrl):Nc(l[0],u));var d=[rt(o),i.currValExpr];p&&d.push(p),f.push.apply(f,Object(g.a)(i.stmts)),c===Lt.hostProperty?w.push(d):c===Lt.attribute?E.push(d):c===Lt.syntheticHostProperty?I.push(d):f.push(Ze(c).callFn(d).toStmt())})),w.length>0&&f.push(Di(Lt.hostProperty,w).toStmt());E.length>0&&f.push(Di(Lt.attribute,E).toStmt());I.length>0&&f.push(Di(Lt.syntheticHostProperty,I).toStmt());var T=function(e){var t,n=[],i=Object(l.a)(Object.getOwnPropertyNames(e));try{for(i.s();!(t=i.n()).done;){var r=t.value,a=e[r];n.push(rt(r),a)}}catch(o){i.e(o)}finally{i.f()}return n}(e.attributes);c.assignHostAttrs(T,o),c.hasBindings&&c.buildUpdateLevelInstructions(k()).forEach((function(e){if(e.calls.length>0){var t=[];e.calls.forEach((function(e){S+=Math.max(e.allocateBindingSlots-2,0),t.push(function(e,t,n){return e.params((function(e){return n(t,e).currValExpr}))}(e,s,eu))})),f.push(Di(e.reference,t).toStmt())}}));S&&o.set("hostVars",rt(S));if(h.length>0||f.length>0){var _=a?"".concat(a,"_HostBindings"):null,j=[];return h.length>0&&j.push(Oc(1,h)),f.length>0&&j.push(Oc(2,f)),nt([new Pe(Oi,$),new Pe(Ci,null)],j,Z,null,_)}return null}(e.host,e.typeSourceSpan,n,t,e.selector||"",e.name,i)),i.set("inputs",Ei(e.inputs,!0)),i.set("outputs",Ei(e.outputs)),null!==e.exportAs&&i.set("exportAs",et(e.exportAs.map((function(e){return rt(e)})))),i}function Xc(e,t){var n=[],i=t.providers,r=t.viewProviders;if(i||r){var a=[i||new Fe([])];r&&a.push(r),n.push(Ze(Lt.ProvidersFeature).callFn(a))}t.usesInheritance&&n.push(Ze(Lt.InheritDefinitionFeature)),t.fullInheritance&&n.push(Ze(Lt.CopyDefinitionFeature)),t.lifecycle.usesOnChanges&&n.push(Ze(Lt.NgOnChangesFeature)),n.length&&e.set("features",et(n))}function qc(e,t,n){var i=Yc(e,t,n);Xc(i,e);var r=Ze(Lt.defineDirective).callFn([i.toLiteralMap()]),a=$c(e);return{expression:r,type:Qe(Ze(Lt.DirectiveDefWithMeta,a))}}function Kc(e,t,n){var i=Yc(e,t,n);Xc(i,e);var r=e.selector&&A.parse(e.selector),a=r&&r[0];if(a){var o=a.getAttrs();o.length&&i.set("attrs",t.getConstLiteral(et(o.map((function(e){return rt(null!=e?e:void 0)}))),!0))}var s=null;if(e.directives.length>0){var c,u=new M,p=Object(l.a)(e.directives);try{for(p.s();!(c=p.n()).done;){var d=c.value,h=d.selector,f=d.expression;u.addSelectables(A.parse(h),f)}}catch(N){p.e(N)}finally{p.f()}s=u}var m=e.name,v=m?"".concat(m,"_Template"):null,b=new Set,y=new Set,C=e.changeDetection,O=e.template,x=new Sc(t,Ac.createRootScope(),0,m,null,null,v,s,b,e.pipes,y,Lt.namespaceHTML,e.relativeContextFilePath,e.i18nUseExternalIds),S=x.buildTemplateFunction(O.nodes,[]),k=x.getNgContentSelectors();k&&i.set("ngContentSelectors",k),i.set("decls",rt(x.getConstCount())),i.set("vars",rt(x.getVarCount()));var w=x.getConsts(),E=w.constExpressions,I=w.prepareStatements;if(E.length>0){var T=et(E);I.length>0&&(T=nt([],[].concat(Object(g.a)(I),[new qe(T)]))),i.set("consts",T)}if(i.set("template",S),b.size){var P=et(Array.from(b));e.wrapDirectivesAndPipesInClosure&&(P=nt([],[new qe(P)])),i.set("directives",P)}if(y.size){var D=et(Array.from(y));e.wrapDirectivesAndPipesInClosure&&(D=nt([],[new qe(D)])),i.set("pipes",D)}if(null===e.encapsulation&&(e.encapsulation=_.Emulated),e.styles&&e.styles.length){var R=(e.encapsulation==_.Emulated?function(e,t,n){var i=new ha;return e.map((function(e){return i.shimCssText(e,t,n)}))}(e.styles,Ya,Wa):e.styles).map((function(e){return t.getConstLiteral(rt(e))}));i.set("styles",et(R))}else e.encapsulation===_.Emulated&&(e.encapsulation=_.None);e.encapsulation!==_.Emulated&&i.set("encapsulation",rt(e.encapsulation)),null!==e.animations&&i.set("data",tt([{key:"animation",value:e.animations,quoted:!1}])),null!=C&&C!==j.Default&&i.set("changeDetection",rt(C));var L=Ze(Lt.defineComponent).callFn([i.toLiteralMap()]),F=$c(e);return F.push(Qc(e.template.ngContentSelectors)),{expression:L,type:Qe(Ze(Lt.ComponentDefWithMeta,F))}}function Jc(e,t){var n=[Ti(e,t),rt(e.descendants)];return e.read&&n.push(e.read),n}function Zc(e){return Qe(tt(Object.keys(e).map((function(t){return{key:t,value:rt(Array.isArray(e[t])?e[t][0]:e[t]),quoted:!0}}))))}function Qc(e){return e.length>0?Qe(et(e.map((function(e){return rt(e)})))):te}function $c(e){var t,n=null!==e.selector?e.selector.replace(/\n/g,""):null;return[Nt(e.type.type,e.typeArgumentCount),null!==n?(t=n,Qe(rt(t))):te,null!==e.exportAs?Qc(e.exportAs):te,Zc(e.inputs),Zc(e.outputs),Qc(e.queries.map((function(e){return e.propertyName})))]}function eu(e,t){return ia(null,e,t,"b",ea.Expression,(function(){return lt("Unexpected interpolation")}))}function tu(e){return{hostAttributes:{},hostListeners:e.listeners,hostProperties:e.properties}}var nu=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;var iu=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"get",value:function(e){return""}}]),e}(),ru=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rr;Object(m.a)(this,e),this.jitEvaluator=t,this.R3ResolvedDependencyType=Pi,this.R3FactoryTarget=ji,this.ResourceLoader=iu,this.elementSchemaRegistry=new Bs}return Object(v.a)(e,[{key:"compilePipe",value:function(e,t,n){var i=pr({name:n.name,type:uu(n.type),internalType:new ue(n.type),typeArgumentCount:n.typeArgumentCount,deps:gu(n.deps),pipeName:n.pipeName,pure:n.pure});return this.jitExpression(i.expression,e,t,[])}},{key:"compileInjectable",value:function(e,t,n){var i=function(e){var t=null,n={name:e.name,type:e.type,internalType:e.internalType,typeArgumentCount:e.typeArgumentCount,deps:[],injectFn:Tt.inject,target:ji.Injectable};if(void 0!==e.useClass){var i=e.useClass.isEquivalent(e.internalType),r=void 0;void 0!==e.userDeps&&(r=e.userDeps),t=void 0!==r?Li(Object.assign(Object.assign({},n),{delegate:e.useClass,delegateDeps:r,delegateType:_i.Class})):i?Li(n):Bi(e.type.value,e.useClass)}else t=void 0!==e.useFactory?void 0!==e.userDeps?Li(Object.assign(Object.assign({},n),{delegate:e.useFactory,delegateDeps:e.userDeps||[],delegateType:_i.Function})):{statements:[],factory:nt([],[new qe(e.useFactory.callFn([]))])}:void 0!==e.useValue?Li(Object.assign(Object.assign({},n),{expression:e.useValue})):void 0!==e.useExisting?Li(Object.assign(Object.assign({},n),{expression:Ze(Tt.inject).callFn([e.useExisting])})):Bi(e.type.value,e.internalType);var a={token:e.internalType,factory:t.factory};return null!==e.providedIn.value&&(a.providedIn=e.providedIn),{expression:Ze(Tt.\u0275\u0275defineInjectable).callFn([Ft(a)]),type:new K(Ze(Tt.InjectableDef,[Nt(e.type.type,e.typeArgumentCount)])),statements:t.statements}}({name:n.name,type:uu(n.type),internalType:new ue(n.type),typeArgumentCount:n.typeArgumentCount,providedIn:hu(n.providedIn),useClass:du(n,au),useFactory:du(n,ou),useValue:du(n,su),useExisting:du(n,cu),userDeps:gu(n.userDeps)||void 0}),r=i.expression,a=i.statements;return this.jitExpression(r,e,t,a)}},{key:"compileInjector",value:function(e,t,n){var i=function(e){var t=Li({name:e.name,type:e.type,internalType:e.internalType,typeArgumentCount:0,deps:e.deps,injectFn:Lt.inject,target:ji.NgModule}),n={factory:t.factory};return null!==e.providers&&(n.providers=e.providers),e.imports.length>0&&(n.imports=et(e.imports)),{expression:Ze(Lt.defineInjector).callFn([Ft(n)]),type:new K(Ze(Lt.InjectorDef,[new K(e.type.type)])),statements:t.statements}}({name:n.name,type:uu(n.type),internalType:new ue(n.type),deps:gu(n.deps),providers:new ue(n.providers),imports:n.imports.map((function(e){return new ue(e)}))});return this.jitExpression(i.expression,e,t,i.statements)}},{key:"compileNgModule",value:function(e,t,n){var i=cr({type:uu(n.type),internalType:new ue(n.type),adjacentType:new ue(n.type),bootstrap:n.bootstrap.map(uu),declarations:n.declarations.map(uu),imports:n.imports.map(uu),exports:n.exports.map(uu),emitInline:!0,containsForwardDecls:!1,schemas:n.schemas?n.schemas.map(uu):null,id:n.id?new ue(n.id):null});return this.jitExpression(i.expression,e,t,[])}},{key:"compileDirective",value:function(e,t,n){var i=new xt,r=Fc(),a=qc(pu(n),i,r);return this.jitExpression(a.expression,e,t,i.statements)}},{key:"compileComponent",value:function(e,t,n){var i=new xt,r=n.interpolation?Vi.fromArray(n.interpolation):Gi,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.interpolationConfig,r=n.preserveWhitespaces,a=n.enableI18nLegacyMessageIdFormat,o=Fc(i),s=(new Eo).parse(e,t,Object.assign(Object.assign({leadingTriviaChars:Cc},n),{tokenizeExpansionForms:!0}));if(s.errors&&s.errors.length>0)return{errors:s.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};var c=s.rootNodes,u=new lc(i,!r,a);c=eo(u,c),r||(c=eo(new Mo,c),u.hasI18nMeta&&(c=eo(new lc(i,!1),c)));var l=zs(c,o),p=l.nodes,d=l.errors,h=l.styleUrls,f=l.styles,g=l.ngContentSelectors;return d&&d.length>0?{errors:d,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]}:{nodes:p,styleUrls:h,styles:f,ngContentSelectors:g}}(n.template,t,{preserveWhitespaces:n.preserveWhitespaces,interpolationConfig:r});if(void 0!==a.errors){var o=a.errors.map((function(e){return e.toString()})).join(", ");throw new Error("Errors during JIT compilation of template for ".concat(n.name,": ").concat(o))}var s=Kc(Object.assign(Object.assign(Object.assign({},n),pu(n)),{selector:n.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:a,wrapDirectivesAndPipesInClosure:!1,styles:[].concat(Object(g.a)(n.styles),Object(g.a)(a.styles)),encapsulation:n.encapsulation,interpolation:r,changeDetection:n.changeDetection,animations:null!=n.animations?new ue(n.animations):null,viewProviders:null!=n.viewProviders?new ue(n.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0}),i,Fc(r)),c="ng:///".concat(n.name,".js");return this.jitExpression(s.expression,e,c,i.statements)}},{key:"compileFactory",value:function(e,t,n){var i=Li({name:n.name,type:uu(n.type),internalType:new ue(n.type),typeArgumentCount:n.typeArgumentCount,deps:gu(n.deps),injectFn:"directiveInject"===n.injectFn?Tt.directiveInject:Tt.inject,target:n.target});return this.jitExpression(i.factory,e,t,i.statements)}},{key:"createParseSourceSpan",value:function(e,t,n){return function(e,t,n){var i="in ".concat(e," ").concat(t," in ").concat(n),r=new un("",i);return new ln(new cn(r,-1,-1,-1),new cn(r,-1,-1,-1))}(e,t,n)}},{key:"jitExpression",value:function(e,t,n,i){var r=[].concat(Object(g.a)(i),[new We("$def",e,void 0,[we.Exported])]);return this.jitEvaluator.evaluateStatements(n,r,new or(t),!0).$def}}]),e}(),au=Object.keys({useClass:null})[0],ou=Object.keys({useFactory:null})[0],su=Object.keys({useValue:null})[0],cu=Object.keys({useExisting:null})[0],uu=function(e){var t=new ue(e);return{value:t,type:t}};function lu(e){return Object.assign(Object.assign({},e),{predicate:Array.isArray(e.predicate)?e.predicate:new ue(e.predicate),read:e.read?new ue(e.read):null,static:e.static})}function pu(e){var t=vu(e.inputs||[]),n=vu(e.outputs||[]),i=e.propMetadata,r={},a={},o=function(e){i.hasOwnProperty(e)&&i[e].forEach((function(t){"Input"===t.ngMetadataName?r[e]=t.bindingPropertyName?[t.bindingPropertyName,e]:e:function(e){return"Output"===e.ngMetadataName}(t)&&(a[e]=t.bindingPropertyName||e)}))};for(var s in i)o(s);return Object.assign(Object.assign({},e),{typeSourceSpan:e.typeSourceSpan,type:uu(e.type),internalType:new ue(e.type),deps:gu(e.deps),host:mu(e.propMetadata,e.typeSourceSpan,e.host),inputs:Object.assign(Object.assign({},t),r),outputs:Object.assign(Object.assign({},n),a),queries:e.queries.map(lu),providers:null!=e.providers?new ue(e.providers):null,viewQueries:e.viewQueries.map(lu),fullInheritance:!1})}function du(e,t){return e.hasOwnProperty(t)?new ue(e[t]):void 0}function hu(e){return null==e||"string"==typeof e?new me(e):new ue(e)}function fu(e){return{token:null===e.token?new me(null):e.resolved===Pi.Attribute?new me(e.token):new ue(e.token),attribute:null,resolved:e.resolved,host:e.host,optional:e.optional,self:e.self,skipSelf:e.skipSelf}}function gu(e){return null==e?null:e.map(fu)}function mu(e,t,n){var i=function(e){for(var t={},n={},i={},r={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a],c=e[s],u=s.match(nu);if(null===u)switch(s){case"class":if("string"!=typeof c)throw new Error("Class binding must be string");r.classAttr=c;break;case"style":if("string"!=typeof c)throw new Error("Style binding must be string");r.styleAttr=c;break;default:t[s]="string"==typeof c?rt(c):c}else if(null!=u[1]){if("string"!=typeof c)throw new Error("Property binding must be string");i[u[1]]=c}else if(null!=u[2]){if("string"!=typeof c)throw new Error("Event binding must be string");n[u[2]]=c}}return{attributes:t,listeners:n,properties:i,specialAttributes:r}}(n||{}),r=function(e,t){var n=tu(e),i=Fc();return i.createDirectiveHostEventAsts(n,t),i.createBoundHostProperties(n,t),i.errors}(i,t);if(r.length)throw new Error(r.map((function(e){return e.msg})).join("\n"));var a=function(t){e.hasOwnProperty(t)&&e[t].forEach((function(e){"HostBinding"===e.ngMetadataName?i.properties[e.hostPropertyName||t]=t:function(e){return"HostListener"===e.ngMetadataName}(e)&&(i.listeners[e.eventName||t]="".concat(t,"(").concat((e.args||[]).join(","),")"))}))};for(var o in e)a(o);return i}function vu(e){return e.reduce((function(e,t){var n=t.split(",").map((function(e){return e.trim()})),i=Object(u.a)(n,2),r=i[0],a=i[1];return e[r]=a||r,e}),{})}new function e(t){Object(m.a)(this,e),this.full=t;var n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}("10.2.5");var bu;!function(e){e[e.Extract=0]="Extract",e[e.Merge=1]="Merge"}(bu||(bu={}));new(function(){function e(){Object(m.a)(this,e),this.closedByParent=!1,this.contentType=r.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}return Object(v.a)(e,[{key:"requireExtraParent",value:function(e){return!1}},{key:"isClosedByChild",value:function(e){return!1}}]),e}());var yu;!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked"}(yu||(yu={}));yu.OnInit,yu.OnDestroy,yu.DoCheck,yu.OnChanges,yu.AfterContentInit,yu.AfterContentChecked,yu.AfterViewInit,yu.AfterViewChecked;Je("_l");var Cu="_any";new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"notifyImplicitReceiverUse",value:function(){}},{key:"getLocal",value:function(e){return e===Jr.event.name?Je(Cu):null}}]),e}()),Je("_l"),Je("_v"),Je("_ck"),Je("_co"),Je("en"),Je("ad");var Ou="useValue";new Set([Ou,"useFactory","data","id","loadChildren"]);var xu=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,null,[{key:"build",value:function(){var t=new Map;return{define:function(e,n){return t.set(e,n),this},done:function(){return t.size>0?new Su(t):e.empty}}}}]),e}();xu.missing={},xu.empty={resolve:function(e){return xu.missing}};var Su=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i;return Object(m.a)(this,n),(i=t.call(this)).bindings=e,i}return Object(v.a)(n,[{key:"resolve",value:function(e){return this.bindings.has(e)?this.bindings.get(e):xu.missing}}]),n}(xu);var ku;new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(e){e[e.Scheme=1]="Scheme",e[e.UserInfo=2]="UserInfo",e[e.Domain=3]="Domain",e[e.Port=4]="Port",e[e.Path=5]="Path",e[e.QueryData=6]="QueryData",e[e.Fragment=7]="Fragment"}(ku||(ku={}));!function(e){(e.ng||(e.ng={})).\u0275compilerFacade=new ru}(mt)},"/YfA":function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ne}));var i,r=n("MMYH"),a=n("9fIP"),o=n("EM62"),s=n("ZTXN"),c=n("g6G6"),u=n("3p4X"),l=n("xVbo"),p=n("4xW2"),d=n("Ohay"),h=n("8j5Y"),f=n("2kYt"),g=["dialogPopup"],m=["hueSlider"],v=["alphaSlider"];function b(e,t){if(1&e&&o.gc(0,"div"),2&e){var n=o.xc();o.Vb("arrow arrow-",n.cpUsePosition,""),o.Xc("top",n.arrowTop,"px")}}function y(e,t){if(1&e){var n=o.mc();o.lc(0,"div",26),o.tc("newValue",(function(e){return o.Oc(n),o.xc().onColorChange(e)}))("dragStart",(function(){return o.Oc(n),o.xc().onDragStart("saturation-lightness")}))("dragEnd",(function(){return o.Oc(n),o.xc().onDragEnd("saturation-lightness")})),o.gc(1,"div",13),o.kc()}if(2&e){var i=o.xc();o.Xc("background-color",i.hueSliderColor),o.Cc("rgX",1)("rgY",1),o.Sb(1),o.Xc("top",null==i.slider?null:i.slider.v,"px")("left",null==i.slider?null:i.slider.s,"px")}}function C(e,t){if(1&e){var n=o.mc();o.lc(0,"button",27),o.tc("click",(function(e){o.Oc(n);var t=o.xc();return t.onAddPresetColor(e,t.selectedColor)})),o.cd(1),o.kc()}if(2&e){var i=o.xc();o.Ub(i.cpAddColorButtonClass),o.Cc("disabled",i.cpPresetColors&&i.cpPresetColors.length>=i.cpMaxPresetColorsLength),o.Sb(1),o.ed(" ",i.cpAddColorButtonText," ")}}function O(e,t){1&e&&o.gc(0,"div",28)}function x(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("rg",1)("value",null==i.cmykText?null:i.cmykText.a)}}function S(e,t){1&e&&(o.lc(0,"div"),o.cd(1,"A"),o.kc())}function k(e,t){if(1&e){var n=o.mc();o.lc(0,"div",29),o.lc(1,"div",30),o.lc(2,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onCyanInput(e)})),o.kc(),o.lc(3,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onMagentaInput(e)})),o.kc(),o.lc(4,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onYellowInput(e)})),o.kc(),o.lc(5,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onBlackInput(e)})),o.kc(),o.ad(6,x,1,2,"input",32),o.kc(),o.lc(7,"div",30),o.lc(8,"div"),o.cd(9,"C"),o.kc(),o.lc(10,"div"),o.cd(11,"M"),o.kc(),o.lc(12,"div"),o.cd(13,"Y"),o.kc(),o.lc(14,"div"),o.cd(15,"K"),o.kc(),o.ad(16,S,2,0,"div",33),o.kc(),o.kc()}if(2&e){var i=o.xc();o.Xc("display",3!==i.format?"none":"block"),o.Sb(2),o.Cc("rg",100)("value",null==i.cmykText?null:i.cmykText.c),o.Sb(1),o.Cc("rg",100)("value",null==i.cmykText?null:i.cmykText.m),o.Sb(1),o.Cc("rg",100)("value",null==i.cmykText?null:i.cmykText.y),o.Sb(1),o.Cc("rg",100)("value",null==i.cmykText?null:i.cmykText.k),o.Sb(1),o.Cc("ngIf","disabled"!==i.cpAlphaChannel),o.Sb(10),o.Cc("ngIf","disabled"!==i.cpAlphaChannel)}}function w(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("rg",1)("value",null==i.hslaText?null:i.hslaText.a)}}function E(e,t){1&e&&(o.lc(0,"div"),o.cd(1,"A"),o.kc())}function I(e,t){if(1&e){var n=o.mc();o.lc(0,"div",35),o.lc(1,"div",30),o.lc(2,"input",36),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onHueInput(e)})),o.kc(),o.lc(3,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onSaturationInput(e)})),o.kc(),o.lc(4,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onLightnessInput(e)})),o.kc(),o.ad(5,w,1,2,"input",32),o.kc(),o.lc(6,"div",30),o.lc(7,"div"),o.cd(8,"H"),o.kc(),o.lc(9,"div"),o.cd(10,"S"),o.kc(),o.lc(11,"div"),o.cd(12,"L"),o.kc(),o.ad(13,E,2,0,"div",33),o.kc(),o.kc()}if(2&e){var i=o.xc();o.Xc("display",2!==i.format?"none":"block"),o.Sb(2),o.Cc("rg",360)("value",null==i.hslaText?null:i.hslaText.h),o.Sb(1),o.Cc("rg",100)("value",null==i.hslaText?null:i.hslaText.s),o.Sb(1),o.Cc("rg",100)("value",null==i.hslaText?null:i.hslaText.l),o.Sb(1),o.Cc("ngIf","disabled"!==i.cpAlphaChannel),o.Sb(8),o.Cc("ngIf","disabled"!==i.cpAlphaChannel)}}function T(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("rg",1)("value",null==i.rgbaText?null:i.rgbaText.a)}}function _(e,t){1&e&&(o.lc(0,"div"),o.cd(1,"A"),o.kc())}function j(e,t){if(1&e){var n=o.mc();o.lc(0,"div",37),o.lc(1,"div",30),o.lc(2,"input",38),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onRedInput(e)})),o.kc(),o.lc(3,"input",38),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onGreenInput(e)})),o.kc(),o.lc(4,"input",38),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onBlueInput(e)})),o.kc(),o.ad(5,T,1,2,"input",32),o.kc(),o.lc(6,"div",30),o.lc(7,"div"),o.cd(8,"R"),o.kc(),o.lc(9,"div"),o.cd(10,"G"),o.kc(),o.lc(11,"div"),o.cd(12,"B"),o.kc(),o.ad(13,_,2,0,"div",33),o.kc(),o.kc()}if(2&e){var i=o.xc();o.Xc("display",1!==i.format?"none":"block"),o.Sb(2),o.Cc("rg",255)("value",null==i.rgbaText?null:i.rgbaText.r),o.Sb(1),o.Cc("rg",255)("value",null==i.rgbaText?null:i.rgbaText.g),o.Sb(1),o.Cc("rg",255)("value",null==i.rgbaText?null:i.rgbaText.b),o.Sb(1),o.Cc("ngIf","disabled"!==i.cpAlphaChannel),o.Sb(8),o.Cc("ngIf","disabled"!==i.cpAlphaChannel)}}function P(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("rg",1)("value",i.hexAlpha)}}function A(e,t){1&e&&(o.lc(0,"div"),o.cd(1,"A"),o.kc())}function M(e,t){if(1&e){var n=o.mc();o.lc(0,"div",39),o.lc(1,"div",30),o.lc(2,"input",40),o.tc("blur",(function(){return o.Oc(n),o.xc().onHexInput(null)}))("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onHexInput(e)})),o.kc(),o.ad(3,P,1,2,"input",32),o.kc(),o.lc(4,"div",30),o.lc(5,"div"),o.cd(6,"Hex"),o.kc(),o.ad(7,A,2,0,"div",33),o.kc(),o.kc()}if(2&e){var i=o.xc();o.Xc("display",0!==i.format?"none":"block"),o.Xb("hex-alpha","forced"===i.cpAlphaChannel),o.Sb(2),o.Cc("value",i.hexText),o.Sb(1),o.Cc("ngIf","forced"===i.cpAlphaChannel),o.Sb(4),o.Cc("ngIf","forced"===i.cpAlphaChannel)}}function D(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var i=o.xc(2);o.Cc("rg",1)("value",null==i.hslaText?null:i.hslaText.a)}}function R(e,t){if(1&e){var n=o.mc();o.lc(0,"div",41),o.lc(1,"div",30),o.lc(2,"input",31),o.tc("keyup.enter",(function(e){return o.Oc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Oc(n),o.xc().onValueInput(e)})),o.kc(),o.ad(3,D,1,2,"input",32),o.kc(),o.lc(4,"div",30),o.lc(5,"div"),o.cd(6,"V"),o.kc(),o.lc(7,"div"),o.cd(8,"A"),o.kc(),o.kc(),o.kc()}if(2&e){var i=o.xc();o.Sb(2),o.Cc("rg",100)("value",null==i.hslaText?null:i.hslaText.l),o.Sb(1),o.Cc("ngIf","disabled"!==i.cpAlphaChannel)}}function L(e,t){if(1&e){var n=o.mc();o.lc(0,"div",42),o.lc(1,"span",43),o.tc("click",(function(){return o.Oc(n),o.xc().onFormatToggle(-1)})),o.kc(),o.lc(2,"span",43),o.tc("click",(function(){return o.Oc(n),o.xc().onFormatToggle(1)})),o.kc(),o.kc()}}function F(e,t){if(1&e){var n=o.mc();o.lc(0,"span",50),o.tc("click",(function(e){o.Oc(n);var t=o.xc().$implicit;return o.xc(3).onRemovePresetColor(e,t)})),o.kc()}if(2&e){var i=o.xc(4);o.Ub(i.cpRemoveColorButtonClass)}}function N(e,t){if(1&e){var n=o.mc();o.lc(0,"div",48),o.tc("click",(function(){o.Oc(n);var e=t.$implicit;return o.xc(3).setColorFromString(e)})),o.ad(1,F,1,3,"span",49),o.kc()}if(2&e){var i=t.$implicit,r=o.xc(3);o.Xc("background-color",i),o.Sb(1),o.Cc("ngIf",r.cpAddColorButton)}}function B(e,t){if(1&e&&(o.lc(0,"div"),o.ad(1,N,2,3,"div",47),o.kc()),2&e){var n=o.xc(2);o.Ub(n.cpPresetColorsClass),o.Sb(1),o.Cc("ngForOf",n.cpPresetColors)}}function U(e,t){if(1&e&&(o.lc(0,"div"),o.cd(1),o.kc()),2&e){var n=o.xc(2);o.Ub(n.cpPresetEmptyMessageClass),o.Sb(1),o.dd(n.cpPresetEmptyMessage)}}function z(e,t){if(1&e&&(o.lc(0,"div",44),o.gc(1,"hr"),o.lc(2,"div",45),o.cd(3),o.kc(),o.ad(4,B,2,4,"div",46),o.ad(5,U,2,4,"div",46),o.kc()),2&e){var n=o.xc();o.Sb(3),o.dd(n.cpPresetLabel),o.Sb(1),o.Cc("ngIf",null==n.cpPresetColors?null:n.cpPresetColors.length),o.Sb(1),o.Cc("ngIf",!(null!=n.cpPresetColors&&n.cpPresetColors.length)&&n.cpAddColorButton)}}function V(e,t){if(1&e){var n=o.mc();o.lc(0,"button",53),o.tc("click",(function(e){return o.Oc(n),o.xc(2).onCancelColor(e)})),o.cd(1),o.kc()}if(2&e){var i=o.xc(2);o.Ub(i.cpCancelButtonClass),o.Sb(1),o.dd(i.cpCancelButtonText)}}function G(e,t){if(1&e){var n=o.mc();o.lc(0,"button",53),o.tc("click",(function(e){return o.Oc(n),o.xc(2).onAcceptColor(e)})),o.cd(1),o.kc()}if(2&e){var i=o.xc(2);o.Ub(i.cpOKButtonClass),o.Sb(1),o.dd(i.cpOKButtonText)}}function H(e,t){if(1&e&&(o.lc(0,"div",51),o.ad(1,V,2,4,"button",52),o.ad(2,G,2,4,"button",52),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("ngIf",n.cpCancelButton),o.Sb(1),o.Cc("ngIf",n.cpOKButton)}}!function(e){e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK"}(i||(i={}));var W=function e(t,n,i,r){Object(a.a)(this,e),this.r=t,this.g=n,this.b=i,this.a=r},Y=function e(t,n,i,r){Object(a.a)(this,e),this.h=t,this.s=n,this.v=i,this.a=r},X=function e(t,n,i,r){Object(a.a)(this,e),this.h=t,this.s=n,this.l=i,this.a=r},q=function e(t,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;Object(a.a)(this,e),this.c=t,this.m=n,this.y=i,this.k=r,this.a=o};var K=function(){function e(){Object(a.a)(this,e),this.newValue=new o.t}return Object(r.a)(e,[{key:"inputChange",value:function(e){var t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{var n=parseFloat(t);this.newValue.emit({v:n,rg:this.rg})}}}]),e}();K.\u0275fac=function(e){return new(e||K)},K.\u0275dir=o.ac({type:K,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&o.tc("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),K.propDecorators={rg:[{type:o.D}],text:[{type:o.D}],newValue:[{type:o.O}],inputChange:[{type:o.w,args:["input",["$event"]]}]};var J=function(){function e(t){var n=this;Object(a.a)(this,e),this.elRef=t,this.dragEnd=new o.t,this.dragStart=new o.t,this.newValue=new o.t,this.listenerMove=function(e){return n.move(e)},this.listenerStop=function(){return n.stop()}}return Object(r.a)(e,[{key:"mouseDown",value:function(e){this.start(e)}},{key:"touchStart",value:function(e){this.start(e)}},{key:"move",value:function(e){e.preventDefault(),this.setCursor(e)}},{key:"start",value:function(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}},{key:"stop",value:function(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}},{key:"getX",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}},{key:"getY",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}},{key:"setCursor",value:function(e){var t=this.elRef.nativeElement.offsetWidth,n=this.elRef.nativeElement.offsetHeight,i=Math.max(0,Math.min(this.getX(e),t)),r=Math.max(0,Math.min(this.getY(e),n));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:i/t,v:1-r/n,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:r/n,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:i/t,rgX:this.rgX})}}]),e}();J.\u0275fac=function(e){return new(e||J)(o.fc(o.r))},J.\u0275dir=o.ac({type:J,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&o.tc("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),J.ctorParameters=function(){return[{type:o.r}]},J.propDecorators={rgX:[{type:o.D}],rgY:[{type:o.D}],slider:[{type:o.D}],dragEnd:[{type:o.O}],dragStart:[{type:o.O}],newValue:[{type:o.O}],mouseDown:[{type:o.w,args:["mousedown",["$event"]]}],touchStart:[{type:o.w,args:["touchstart",["$event"]]}]};var Z=function e(t,n,i,r){Object(a.a)(this,e),this.h=t,this.s=n,this.v=i,this.a=r},Q=function e(t,n,i,r){Object(a.a)(this,e),this.h=t,this.s=n,this.v=i,this.a=r},$=function(){function e(){Object(a.a)(this,e),this.active=null}return Object(r.a)(e,[{key:"setActive",value:function(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}},{key:"hsva2hsla",value:function(e){var t=e.h,n=e.s,i=e.v,r=e.a;if(0===i)return new X(t,0,0,r);if(0===n&&1===i)return new X(t,1,1,r);var a=i*(2-n)/2;return new X(t,i*n/(1-Math.abs(2*a-1)),a,r)}},{key:"hsla2hsva",value:function(e){var t=Math.min(e.h,1),n=Math.min(e.s,1),i=Math.min(e.l,1),r=Math.min(e.a,1);if(0===i)return new Y(t,0,0,r);var a=i+n*(1-Math.abs(2*i-1))/2;return new Y(t,2*(a-i)/a,a,r)}},{key:"hsvaToRgba",value:function(e){var t,n,i,r=e.h,a=e.s,o=e.v,s=e.a,c=Math.floor(6*r),u=6*r-c,l=o*(1-a),p=o*(1-u*a),d=o*(1-(1-u)*a);switch(c%6){case 0:t=o,n=d,i=l;break;case 1:t=p,n=o,i=l;break;case 2:t=l,n=o,i=d;break;case 3:t=l,n=p,i=o;break;case 4:t=d,n=l,i=o;break;case 5:t=o,n=l,i=p;break;default:t=0,n=0,i=0}return new W(t,n,i,s)}},{key:"cmykToRgb",value:function(e){var t=(1-e.c)*(1-e.k),n=(1-e.m)*(1-e.k),i=(1-e.y)*(1-e.k);return new W(t,n,i,e.a)}},{key:"rgbaToCmyk",value:function(e){var t=1-Math.max(e.r,e.g,e.b);if(1===t)return new q(0,0,0,1,e.a);var n=(1-e.r-t)/(1-t),i=(1-e.g-t)/(1-t),r=(1-e.b-t)/(1-t);return new q(n,i,r,t,e.a)}},{key:"rgbaToHsva",value:function(e){var t,n,i=Math.min(e.r,1),r=Math.min(e.g,1),a=Math.min(e.b,1),o=Math.min(e.a,1),s=Math.max(i,r,a),c=Math.min(i,r,a),u=s,l=s-c;if(n=0===s?0:l/s,s===c)t=0;else{switch(s){case i:t=(r-a)/l+(r<a?6:0);break;case r:t=(a-i)/l+2;break;case a:t=(i-r)/l+4;break;default:t=0}t/=6}return new Y(t,n,u,o)}},{key:"rgbaToHex",value:function(e,t){var n="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(n+=(256|Math.round(255*e.a)).toString(16).substr(1)),n}},{key:"normalizeCMYK",value:function(e){return new q(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}},{key:"denormalizeCMYK",value:function(e){return new q(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}},{key:"denormalizeRGBA",value:function(e){return new W(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}},{key:"stringToHsva",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;e=(e||"").toLowerCase();var i=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new W(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new X(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];for(var r in t?i.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new W(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}):i.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new W(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),i.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new W(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}}),i)if(i.hasOwnProperty(r)){var a=i[r],o=a.re.exec(e),s=o&&a.parse(o);if(s)return s instanceof W?n=this.rgbaToHsva(s):s instanceof X&&(n=this.hsla2hsva(s)),n}return n}},{key:"outputFormat",value:function(e,t,n){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":var i=this.hsva2hsla(e),r=new X(Math.round(360*i.h),Math.round(100*i.s),Math.round(100*i.l),Math.round(100*i.a)/100);return e.a<1||"always"===n?"hsla("+r.h+","+r.s+"%,"+r.l+"%,"+r.a+")":"hsl("+r.h+","+r.s+"%,"+r.l+"%)";case"rgba":var a=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===n?"rgba("+a.r+","+a.g+","+a.b+","+Math.round(100*a.a)/100+")":"rgb("+a.r+","+a.g+","+a.b+")";default:var o="always"===n||"forced"===n;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),o)}}}]),e}();$.\u0275fac=function(e){return new(e||$)},$.\u0275prov=o.bc({token:$,factory:$.\u0275fac}),$.ctorParameters=function(){return[]};var ee=function(){function e(t,n,r){Object(a.a)(this,e),this.elRef=t,this.cdRef=n,this.service=r,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[i.HEX,i.RGBA,i.HSLA,i.CMYK],this.useRootViewContainer=!1,this.colorPickerHover=new s.a}return Object(r.a)(e,[{key:"handleEsc",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}},{key:"handleEnter",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}},{key:"handleMouseEnter",value:function(){this.colorPickerHover.next(!0)}},{key:"handleMouseLeave",value:function(){this.colorPickerHover.next(!1)}},{key:"ngOnInit",value:function(){var e=this;this.slider=new Z(0,0,0,0);var t=this.hueSlider.nativeElement.offsetWidth||140,n=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new Q(t,this.cpWidth,130,n),this.cpCmykEnabled?this.format=i.CMYK:"rgba"===this.cpOutputFormat?this.format=i.RGBA:"hsla"===this.cpOutputFormat?this.format=i.HSLA:this.format=i.HEX,this.listenerMouseDown=function(t){e.onMouseDown(t)},this.listenerResize=function(){e.onResize()},this.openDialog(this.initialColor,!1)}},{key:"ngOnDestroy",value:function(){this.closeDialog()}},{key:"ngAfterViewInit",value:function(){if(230!==this.cpWidth||"inline"===this.cpDialogDisplay){var e=this.hueSlider.nativeElement.offsetWidth||140,t=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new Q(e,this.cpWidth,130,t),this.updateColorPicker(!1),this.cdRef.detectChanges()}}},{key:"openDialog",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}},{key:"closeDialog",value:function(){this.closeColorPicker()}},{key:"setupDialog",value:function(e,t,n,i,r,a,o,s,c,u,l,p,d,h,f,g,m,v,b,y,C,O,x,S,k,w,E,I,T,_,j,P,A,M,D,R){this.setInitialColor(n),this.setColorMode(s),this.isIE10=10===function(){var e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());var t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=p,this.cpCmykEnabled=c,this.cpAlphaChannel=u,this.cpOutputFormat=l,this.cpDialogDisplay=a,this.cpIgnoredElements=d,this.cpSaveClickOutside=h,this.cpCloseClickOutside=f,this.useRootViewContainer=g,this.width=this.cpWidth=parseInt(i,10),this.height=this.cpHeight=parseInt(r,10),this.cpPosition=m,this.cpPositionOffset=parseInt(v,10),this.cpOKButton=w,this.cpOKButtonText=I,this.cpOKButtonClass=E,this.cpCancelButton=T,this.cpCancelButtonText=j,this.cpCancelButtonClass=_,this.fallbackColor=o||"#fff",this.setPresetConfig(y,C),this.cpPresetColorsClass=O,this.cpMaxPresetColorsLength=x,this.cpPresetEmptyMessage=S,this.cpPresetEmptyMessageClass=k,this.cpAddColorButton=P,this.cpAddColorButtonText=M,this.cpAddColorButtonClass=A,this.cpRemoveColorButtonClass=D,this.cpTriggerElement=R,b||(this.dialogArrowOffset=0),"inline"===a&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===l&&"always"!==u&&"forced"!==u&&(this.cpAlphaChannel="disabled")}},{key:"setColorMode",value:function(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}},{key:"setInitialColor",value:function(e){this.initialColor=e}},{key:"setPresetConfig",value:function(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}},{key:"setColorFromString",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];("always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel)&&((t=this.service.stringToHsva(e,!0))||this.hsva)||(t=this.service.stringToHsva(e,!1)),t||this.hsva||(t=this.service.stringToHsva(this.fallbackColor,!1)),t&&(this.hsva=t,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,i))}},{key:"onResize",value:function(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onDragEnd",value:function(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}},{key:"onDragStart",value:function(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}},{key:"onMouseDown",value:function(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter((function(t){return t===e.target})).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}},{key:"onAcceptColor",value:function(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onCancelColor",value:function(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}},{key:"onFormatToggle",value:function(e){var t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),n=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[n]}},{key:"onColorChange",value:function(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}},{key:"onHueChange",value:function(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}},{key:"onValueChange",value:function(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaChange",value:function(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}},{key:"onHexInput",value:function(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);var t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);var n=t.test(e);n&&(e.length<5&&(e="#"+e.substring(1).split("").map((function(e){return e+e})).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:n,value:e,color:this.outputColor})}}},{key:"onRedInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:n,value:t.r,color:this.outputColor})}},{key:"onBlueInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:n,value:t.b,color:this.outputColor})}},{key:"onGreenInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:n,value:t.g,color:this.outputColor})}},{key:"onHueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}},{key:"onValueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}},{key:"onLightnessInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:n,value:t.l,color:this.outputColor})}},{key:"onSaturationInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:n,value:t.s,color:this.outputColor})}},{key:"onCyanInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}},{key:"onMagentaInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}},{key:"onYellowInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}},{key:"onBlackInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}},{key:"onAddPresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors.filter((function(e){return e===t})).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}},{key:"onRemovePresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter((function(e){return e!==t})),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}},{key:"openColorPicker",value:function(){var e=this;this.show||(this.show=!0,this.hidden=!0,setTimeout((function(){e.hidden=!1,e.setDialogPosition(),e.cdRef.detectChanges()}),0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}},{key:"closeColorPicker",value:function(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}},{key:"updateColorPicker",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.sliderDimMax){var r,a,o;2===this.cpColorMode&&(this.hsva.s=0);var s=this.outputColor;if(a=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(n?(o=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(o)):(o=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(o))),o=this.service.denormalizeRGBA(o),this.sliderH=this.hsva.h):o=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),r=this.service.denormalizeRGBA(this.service.hsvaToRgba(new Y(this.sliderH||this.hsva.h,1,1,1))),t){this.hslaText=new X(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100),this.rgbaText=new W(o.r,o.g,o.b,Math.round(100*o.a)/100),this.cpCmykEnabled&&(this.cmykText=new q(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100));var c="always"===this.cpAlphaChannel;this.hexText=this.service.rgbaToHex(o,c),this.hexAlpha=this.rgbaText.a}if("auto"===this.cpOutputFormat&&this.format!==i.RGBA&&this.format!==i.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?i.RGBA:i.HEX),this.hueSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.alphaSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==i.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){var u=Math.round(100*this.cmyk.a)/100;this.cmykColor="cmyka(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,",").concat(u,")")}else this.cmykColor="cmyk(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,")");this.slider=new Z((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&s!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}},{key:"setDialogPosition",value:function(){if("inline"===this.cpDialogDisplay)this.position="relative";else{for(var e,t="static",n="",i=null,r=null,a=this.directiveElementRef.nativeElement.parentNode,o=this.dialogElement.nativeElement.offsetHeight;null!==a&&"HTML"!==a.tagName;){if("static"!==(t=(e=window.getComputedStyle(a)).getPropertyValue("position"))&&null===i&&(i=a),(n=e.getPropertyValue("transform"))&&"none"!==n&&null===r&&(r=a),"fixed"===t){i=r;break}a=a.parentNode}var s=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!i||i instanceof HTMLUnknownElement))this.top=s.top,this.left=s.left;else{null===i&&(i=a);var c=this.createDialogBox(i,"fixed"!==t);this.top=s.top-c.top,this.left=s.left-c.left}"fixed"===t&&(this.position="fixed");var u=this.cpPosition;if("auto"===this.cpPosition)u=function(e,t){var n="right",i="bottom",r=e.height,a=e.width,o=t.top,s=t.left,c=o+t.height,u=s+t.width,l=o-r<0,p=c+r>(window.innerHeight||document.documentElement.clientHeight),d=s-a<0,h=u+a>(window.innerWidth||document.documentElement.clientWidth);if(p&&(i="top"),l&&(i="bottom"),d&&(n="right"),h&&(n="left"),l&&p&&d&&h)return["left","right","top","bottom"].reduce((function(t,n){return e[t]>e[n]?t:n}));return d&&h?l?"bottom":p||o>c?"top":"bottom":l&&p?d?"right":h||s>u?"left":"right":"".concat(i,"-").concat(n)}(this.dialogElement.nativeElement.getBoundingClientRect(),this.cpTriggerElement.nativeElement.getBoundingClientRect());"top"===u?(this.arrowTop=o-1,this.top-=o+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*s.width-this.dialogArrowOffset):"bottom"===u?(this.top+=s.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*s.width-this.dialogArrowOffset):"top-left"===u||"left-top"===u?(this.top-=o-s.height+s.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===u||"right-top"===u?(this.top-=o-s.height+s.height*this.cpPositionOffset/100,this.left+=s.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===u||"bottom-left"===u||"left-bottom"===u?(this.top+=s.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=s.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=s.width+this.dialogArrowSize-2),this.cpUsePosition=u}}},{key:"isDescendant",value:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"createDialogBox",value:function(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}]),e}();ee.\u0275fac=function(e){return new(e||ee)(o.fc(o.r),o.fc(o.j),o.fc($))},ee.\u0275cmp=o.Zb({type:ee,selectors:[["color-picker"]],viewQuery:function(e,t){var n;(1&e&&(o.Vc(g,!0),o.Vc(m,!0),o.Vc(v,!0)),2&e)&&(o.Lc(n=o.uc())&&(t.dialogElement=n.first),o.Lc(n=o.uc())&&(t.hueSlider=n.first),o.Lc(n=o.uc())&&(t.alphaSlider=n.first))},hostBindings:function(e,t){1&e&&o.tc("keyup.esc",(function(e){return t.handleEsc(e)}),!1,o.Nc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,o.Nc)("mouseenter",(function(){return t.handleMouseEnter()}))("mouseleave",(function(){return t.handleMouseLeave()}))},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0,1),o.tc("click",(function(e){return e.stopPropagation()})),o.ad(2,b,1,5,"div",2),o.ad(3,y,2,8,"div",3),o.lc(4,"div",4),o.lc(5,"div",5),o.gc(6,"div",6),o.gc(7,"div",7),o.ad(8,C,2,5,"button",8),o.kc(),o.lc(9,"div",9),o.ad(10,O,1,0,"div",10),o.lc(11,"div",11,12),o.tc("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),o.gc(13,"div",13),o.kc(),o.lc(14,"div",14,15),o.tc("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),o.gc(16,"div",13),o.kc(),o.lc(17,"div",16,17),o.tc("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),o.gc(19,"div",13),o.kc(),o.kc(),o.kc(),o.ad(20,k,17,12,"div",18),o.ad(21,I,14,10,"div",19),o.ad(22,j,14,10,"div",20),o.ad(23,M,8,7,"div",21),o.ad(24,R,9,3,"div",22),o.ad(25,L,3,0,"div",23),o.ad(26,z,6,3,"div",24),o.ad(27,H,3,2,"div",25),o.kc()),2&e&&(o.Xc("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),o.Xb("open",t.show),o.Sb(2),o.Cc("ngIf","popup"==t.cpDialogDisplay),o.Sb(1),o.Cc("ngIf",1===(t.cpColorMode||1)),o.Sb(4),o.Xc("background-color",t.selectedColor),o.Sb(1),o.Cc("ngIf",t.cpAddColorButton),o.Sb(2),o.Cc("ngIf","disabled"===t.cpAlphaChannel),o.Sb(1),o.Xc("display",1===(t.cpColorMode||1)?"block":"none"),o.Cc("rgX",1),o.Sb(2),o.Xc("left",null==t.slider?null:t.slider.h,"px"),o.Sb(1),o.Xc("display",2===(t.cpColorMode||1)?"block":"none"),o.Cc("rgX",1),o.Sb(2),o.Xc("right",null==t.slider?null:t.slider.v,"px"),o.Sb(1),o.Xc("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),o.Cc("rgX",1),o.Sb(2),o.Xc("left",null==t.slider?null:t.slider.a,"px"),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),o.Sb(1),o.Cc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[f.t,J,K,f.s],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),ee.ctorParameters=function(){return[{type:o.r},{type:o.j},{type:$}]},ee.propDecorators={dialogElement:[{type:o.gb,args:["dialogPopup",{static:!0}]}],hueSlider:[{type:o.gb,args:["hueSlider",{static:!0}]}],alphaSlider:[{type:o.gb,args:["alphaSlider",{static:!0}]}],handleEsc:[{type:o.w,args:["document:keyup.esc",["$event"]]}],handleEnter:[{type:o.w,args:["document:keyup.enter",["$event"]]}],handleMouseEnter:[{type:o.w,args:["mouseenter"]}],handleMouseLeave:[{type:o.w,args:["mouseleave"]}]};var te=function(){function e(t,n,i,r,c,u){Object(a.a)(this,e),this.injector=t,this.cfr=n,this.appRef=i,this.vcRef=r,this.elRef=c,this._service=u,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.hostElementHover=new s.a,this.colorPickerHover=new s.a,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOpenOnHover=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new o.t(!0),this.cpToggleChange=new o.t(!0),this.cpSliderChange=new o.t(!0),this.cpSliderDragEnd=new o.t(!0),this.cpSliderDragStart=new o.t(!0),this.colorPickerOpen=new o.t(!0),this.colorPickerClose=new o.t(!0),this.colorPickerCancel=new o.t(!0),this.colorPickerSelect=new o.t(!0),this.colorPickerChange=new o.t(!1),this.cpCmykColorChange=new o.t(!0),this.cpPresetColorsChange=new o.t(!0),this.subs=[]}return Object(r.a)(e,[{key:"handleClick",value:function(){this.inputFocus()}},{key:"handleFocus",value:function(){this.inputFocus()}},{key:"handleInput",value:function(e){this.inputChange(e)}},{key:"handleMouseOver",value:function(){this.hostElementHover.next(!0)}},{key:"handleMouseOut",value:function(){this.hostElementHover.next(!1)}},{key:"ngOnInit",value:function(){this.subs.push(this.listenToHoverEvents().subscribe())}},{key:"ngOnDestroy",value:function(){for(;this.subs.length>0;){var e=this.subs.pop();e&&e.unsubscribe()}null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}},{key:"ngOnChanges",value:function(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}},{key:"listenToHoverEvents",value:function(){var e=this;return Object(c.a)(this.hostElementHover,this.colorPickerHover).pipe(Object(l.a)((function(){return e.cpOpenOnHover})),Object(p.a)((function(e){return e?Object(u.a)(0):Object(u.a)(250)})),Object(d.a)(),Object(h.a)((function(t){t?e.openDialog():e.closeDialog()})))}},{key:"openDialog",value:function(){var e=this;if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{var t=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){var n=this.appRef.componentTypes[0],i=this.injector.get(n,o.C.NULL);i!==o.C.NULL?(t=i.vcRef||i.viewContainerRef||this.vcRef)===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor."):this.viewAttachedToAppRef=!0}var r=this.cfr.resolveComponentFactory(ee);if(this.viewAttachedToAppRef)this.cmpRef=r.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{var a=o.T.fromResolvedProviders([],t.parentInjector);this.cmpRef=t.createComponent(r,0,a,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.elRef),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges(),this.subs.push(this.cmpRef.instance.colorPickerHover.pipe(Object(h.a)((function(t){return e.colorPickerHover.next(t)}))).subscribe())}}},{key:"closeDialog",value:function(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}},{key:"cmykChanged",value:function(e){this.cpCmykColorChange.emit(e)}},{key:"stateChanged",value:function(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}},{key:"colorChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ignoreChanges=t,this.colorPickerChange.emit(e)}},{key:"colorSelected",value:function(e){this.colorPickerSelect.emit(e)}},{key:"colorCanceled",value:function(){this.colorPickerCancel.emit()}},{key:"inputFocus",value:function(){var e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter((function(t){return t===e}));this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}},{key:"inputChange",value:function(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}},{key:"inputChanged",value:function(e){this.cpInputChange.emit(e)}},{key:"sliderChanged",value:function(e){this.cpSliderChange.emit(e)}},{key:"sliderDragEnd",value:function(e){this.cpSliderDragEnd.emit(e)}},{key:"sliderDragStart",value:function(e){this.cpSliderDragStart.emit(e)}},{key:"presetColorsChanged",value:function(e){this.cpPresetColorsChange.emit(e)}}]),e}();te.\u0275fac=function(e){return new(e||te)(o.fc(o.C),o.fc(o.m),o.fc(o.g),o.fc(o.hb),o.fc(o.r),o.fc($))},te.\u0275dir=o.ac({type:te,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&o.tc("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))("mouseenter",(function(){return t.handleMouseOver()}))("mouseleave",(function(){return t.handleMouseOut()}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOpenOnHover:"cpOpenOnHover",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[o.Qb]}),te.ctorParameters=function(){return[{type:o.C},{type:o.m},{type:o.g},{type:o.hb},{type:o.r},{type:$}]},te.propDecorators={colorPicker:[{type:o.D}],cpWidth:[{type:o.D}],cpHeight:[{type:o.D}],cpToggle:[{type:o.D}],cpDisabled:[{type:o.D}],cpIgnoredElements:[{type:o.D}],cpFallbackColor:[{type:o.D}],cpColorMode:[{type:o.D}],cpCmykEnabled:[{type:o.D}],cpOutputFormat:[{type:o.D}],cpAlphaChannel:[{type:o.D}],cpDisableInput:[{type:o.D}],cpDialogDisplay:[{type:o.D}],cpSaveClickOutside:[{type:o.D}],cpCloseClickOutside:[{type:o.D}],cpUseRootViewContainer:[{type:o.D}],cpPosition:[{type:o.D}],cpPositionOffset:[{type:o.D}],cpPositionRelativeToArrow:[{type:o.D}],cpOpenOnHover:[{type:o.D}],cpOKButton:[{type:o.D}],cpOKButtonText:[{type:o.D}],cpOKButtonClass:[{type:o.D}],cpCancelButton:[{type:o.D}],cpCancelButtonText:[{type:o.D}],cpCancelButtonClass:[{type:o.D}],cpPresetLabel:[{type:o.D}],cpPresetColors:[{type:o.D}],cpPresetColorsClass:[{type:o.D}],cpMaxPresetColorsLength:[{type:o.D}],cpPresetEmptyMessage:[{type:o.D}],cpPresetEmptyMessageClass:[{type:o.D}],cpAddColorButton:[{type:o.D}],cpAddColorButtonText:[{type:o.D}],cpAddColorButtonClass:[{type:o.D}],cpRemoveColorButtonClass:[{type:o.D}],cpInputChange:[{type:o.O}],cpToggleChange:[{type:o.O}],cpSliderChange:[{type:o.O}],cpSliderDragEnd:[{type:o.O}],cpSliderDragStart:[{type:o.O}],colorPickerOpen:[{type:o.O}],colorPickerClose:[{type:o.O}],colorPickerCancel:[{type:o.O}],colorPickerSelect:[{type:o.O}],colorPickerChange:[{type:o.O}],cpCmykColorChange:[{type:o.O}],cpPresetColorsChange:[{type:o.O}],handleClick:[{type:o.w,args:["click"]}],handleFocus:[{type:o.w,args:["focus"]}],handleInput:[{type:o.w,args:["input",["$event"]]}],handleMouseOver:[{type:o.w,args:["mouseenter"]}],handleMouseOut:[{type:o.w,args:["mouseleave"]}]};var ne=function e(){Object(a.a)(this,e)};ne.\u0275mod=o.dc({type:ne}),ne.\u0275inj=o.cc({factory:function(e){return new(e||ne)},providers:[$],imports:[[f.c]]})},"/ege":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("EM62"),r=function(){function e(e,t){this._context={ngLet:null},e.createEmbeddedView(t,this._context)}return Object.defineProperty(e.prototype,"ngLet",{set:function(e){this._context.ngLet=e},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i.fc(i.hb),i.fc(i.cb))},e.\u0275dir=i.ac({type:e,selectors:[["","ngLet",""]],inputs:{ngLet:"ngLet"}}),e}()},"/g0E":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("DL1I");var i=n("X0jn"),r=n("EM62"),a=n("2kYt");function o(e,t){if(1&e&&(r.wc(),r.gc(0,"stop")),2&e){var n=t.$implicit,i=t.index,a=r.xc(3);r.Tb("offset",a.gradient.ratios[i])("stop-color",n)}}function s(e,t){if(1&e&&(r.wc(),r.lc(0,"linearGradient",7),r.ad(1,o,1,2,"stop",8),r.kc()),2&e){var n=r.xc(2);r.Cc("id",n.linearId),r.Tb("x1",n.gradient.x0)("y1",n.gradient.y0)("x2",n.gradient.x1)("y2",n.gradient.y1),r.Sb(1),r.Cc("ngForOf",n.gradient.colors)}}function c(e,t){if(1&e&&(r.wc(),r.gc(0,"stop")),2&e){var n=t.$implicit,i=t.index,a=r.xc(3);r.Tb("offset",a.gradient.ratios[i])("stop-color",n)}}function u(e,t){if(1&e&&(r.wc(),r.lc(0,"radialGradient",7),r.ad(1,c,1,2,"stop",8),r.kc()),2&e){var n=r.xc(2);r.Cc("id",n.radialId),r.Tb("cx",n.gradient.x0)("cy",n.gradient.y0)("r",n.gradient.r0)("fx",n.gradient.x1)("fy",n.gradient.y1)("fr",n.gradient.r1),r.Sb(1),r.Cc("ngForOf",n.gradient.colors)}}function l(e,t){if(1&e&&(r.wc(),r.lc(0,"svg",3),r.ad(1,s,2,6,"linearGradient",4),r.ad(2,u,2,8,"radialGradient",4),r.gc(3,"rect",5),r.lc(4,"text",6),r.cd(5,"Aa"),r.kc(),r.kc()),2&e){var n=r.xc();r.Sb(1),r.Cc("ngIf",n.data.isLinearGradient),r.Sb(1),r.Cc("ngIf",n.data.isRadialGradient),r.Sb(1),r.Cc("ngStyle",n.tileStyles),r.Sb(1),r.Cc("ngStyle",n.fontStyles)}}function p(e,t){if(1&e&&(r.wc(),r.lc(0,"svg",9),r.gc(1,"circle",10),r.gc(2,"line",11),r.kc()),2&e){var n=r.xc();r.Sb(1),r.Cc("ngStyle",n.tileStyles),r.Sb(1),r.Tb("stroke",n.fontStyles.fill)}}var d=function(){function e(){}return Object.defineProperty(e.prototype,"tileStyles",{get:function(){var e,t;return e=this.data.fillStyle===i.i.LinearGradient?"url(#"+this.linearId+")":this.data.fillStyle===i.i.RadialGradient?"url(#"+this.radialId+")":this.data.fillColor,t="circle"===this.svgType?0===this.data.lineStyle[0]&&0===this.data.lineStyle[1]?[0,0]:[2,5]:this.data.lineStyle,{fill:e,"fill-opacity":this.data.fillAlpha,stroke:this.data.lineColor,"stroke-opacity":this.data.fillAlpha,"stroke-width":i.b,"stroke-dasharray":t,"stroke-linecap":"round","stroke-miterlimit":10,"stroke-linejoin":"round"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradient",{get:function(){return this.data.getGradient(43,43)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyles",{get:function(){return{"font-size":16,fill:this.data.textColor,"font-weight":"normal","font-style":"normal","text-decoration":"none"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linearId",{get:function(){return"linear-"+this.data.styleId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radialId",{get:function(){return"radial-"+this.data.styleId},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["styling-tile"]],inputs:{data:"data",svgType:"svgType"},decls:3,vars:4,consts:[[1,"style-tile-wrapper"],["class","style-tile","xmlns","http://www.w3.org/2000/svg","width","43","height","43","viewBox","0 0 43 43",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","-1 -1 22 22",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","43","height","43","viewBox","0 0 43 43",1,"style-tile"],["gradientUnits","userSpaceOnUse",3,"id",4,"ngIf"],["x","2.5","y","2.5","width","38","height","38","rx","4","ry","4",3,"ngStyle"],["transform","translate(12.11 26.22)",3,"ngStyle"],["gradientUnits","userSpaceOnUse",3,"id"],[4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","-1 -1 22 22"],["cx","10","cy","10","r","10",3,"ngStyle"],["x1","7","y1","12.34","x2","13","y2","12.34","stroke-miterlimit","10","stroke-width","2"]],template:function(e,t){1&e&&(r.lc(0,"div",0),r.ad(1,l,6,4,"svg",1),r.ad(2,p,3,2,"svg",2),r.kc()),2&e&&(r.Xb("circle","circle"===t.svgType),r.Sb(1),r.Cc("ngIf","circle"!==t.svgType),r.Sb(1),r.Cc("ngIf","circle"===t.svgType))},directives:[a.t,a.w,a.s],styles:[".style-tile[_ngcontent-%COMP%]{border-radius:4px}.style-tile-wrapper[_ngcontent-%COMP%]{height:43px}.style-tile-wrapper.circle[_ngcontent-%COMP%]{height:26px;padding:2px;border:1px solid #fff;border-radius:100%}"],changeDetection:0}),e}()},"/nnd":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("5xGT"),r=n("19Zn"),a=n("GoAz"),o=n("TLy2"),s=n("5uDM"),c=n("xVbo"),u=n("YtkY"),l=n("J+dc"),p=n("QoSw"),d=n("c7W3"),h=n("ZyLw"),f=(n("w5Uk"),n("EM62")),g=n("2kYt"),m=n("jw4I");function v(e,t){if(1&e){var n=f.mc();f.lc(0,"text-styling-tile",3),f.tc("mouseenter",(function(){f.Oc(n);var e=t.$implicit;return f.xc().previewTileStyles(e.format)}))("click",(function(){f.Oc(n);var e=t.$implicit;return f.xc().setTileStyles(e.format)})),f.kc()}if(2&e){var i=t.$implicit;f.Cc("styleSpan",i.textStyle)("styleID",i.id)}}var b=function(){function e(e,t,n,i){this.loader=e,this.state=t,this.ll=n,this.commandService=i,this.previewState=!1,this.styledText=this.getStyledText(),this.textFormatter=new r.F}return Object.defineProperty(e,"openForContextAware",{get:function(){return"atLeastOne"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"textstyle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"text-style"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return"Text Styles"},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){i.Lb.track("right.textstyles.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){i.Lb.track("right.textstyles.panel.click",{value1Type:"status",value1:"close"})},e.prototype.previewTileStyles=function(e){this.previewState=!0,this.commandService.preview(d.a.applyShapeStyle,{format:{"*":e}})},e.prototype.setTileStyles=function(e){i.Lb.track("right.textstyles.swatch.click"),this.commandService.dispatch(d.a.applyShapeStyle,{format:{"*":e}})},e.prototype.resetTilePreview=function(){this.previewState&&(this.commandService.dispatch(d.a.resetDiagramPreview),this.previewState=!1)},e.prototype.getShapeText=function(){var e=this.ll.forCurrent(!1);return this.state.changes("Selected").pipe(Object(o.a)((function(t){return Object(a.a)(t).pipe(Object(s.a)((function(t){return e.getShapeOnce(t).pipe(Object(c.a)((function(e){return e.hasAnyText})),Object(u.a)((function(e){return e.previewText})))})),Object(l.a)(1))})))},e.prototype.getStyledText=function(){var e=this;return this.getShapeText().pipe(Object(u.a)((function(t){return e.loader.getTextStyles().map((function(n,i){var r={indexStart:0,indexEnd:void 0,styles:n};return{id:"tstc-"+i,textStyle:e.textFormatter.apply(t,r),format:r}}))})))},e.\u0275fac=function(t){return new(t||e)(f.fc(h.a),f.fc(i.Jb),f.fc(p.a),f.fc(i.B))},e.\u0275cmp=f.Zb({type:e,selectors:[["text-styling-panel"]],decls:5,vars:3,consts:[[1,"text-style-panel","panel-container",3,"mouseleave"],[1,"panel-heading"],[3,"styleSpan","styleID","mouseenter","click",4,"ngFor","ngForOf"],[3,"styleSpan","styleID","mouseenter","click"]],template:function(e,t){1&e&&(f.lc(0,"div",0),f.tc("mouseleave",(function(){return t.resetTilePreview()})),f.lc(1,"h1",1),f.cd(2,"Text Styles"),f.kc(),f.ad(3,v,1,2,"text-styling-tile",2),f.yc(4,"async"),f.kc()),2&e&&(f.Sb(3),f.Cc("ngForOf",f.zc(4,1,t.styledText)))},directives:[g.s,m.a],pipes:[g.b],encapsulation:2,changeDetection:0}),e}()},"/xGf":function(e,t,n){e.exports=n("4e1j")},"0N1A":function(e,t){var n,i,r,a,o,s,c,u,l,p,d,h,f,g,m,v=!1;function b(){if(!v){v=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),b=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(h=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),g=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),d=!!/Win64/.exec(e),t){(n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);s=y?parseFloat(y[1])+4:n,i=t[2]?parseFloat(t[2]):NaN,r=t[3]?parseFloat(t[3]):NaN,(a=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),o=t&&t[1]?parseFloat(t[1]):NaN):o=NaN}else n=i=r=o=a=NaN;if(b){if(b[1]){var C=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!C||parseFloat(C[1].replace("_","."))}else c=!1;u=!!b[2],l=!!b[3]}else c=u=l=!1}}var y={ie:function(){return b()||n},ieCompatibilityMode:function(){return b()||s>n},ie64:function(){return y.ie()&&d},firefox:function(){return b()||i},opera:function(){return b()||r},webkit:function(){return b()||a},safari:function(){return y.webkit()},chrome:function(){return b()||o},windows:function(){return b()||u},osx:function(){return b()||c},linux:function(){return b()||l},iphone:function(){return b()||h},mobile:function(){return b()||h||f||p||m},nativeApp:function(){return b()||g},android:function(){return b()||p},ipad:function(){return b()||f}};e.exports=y},"0fSw":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("EM62"),r=function(){function e(){this.toolbars={}}return e.prototype.register=function(e){if(!e||!e.id)throw new Error("The floating toolbar instance to be registered is not valid.");this.toolbars[e.id]=e},e.prototype.unregister=function(e){delete this.toolbars[e]},e.prototype.get=function(e){return this.toolbars[e]},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.bc({token:e,factory:e.\u0275fac}),e}()},"0itG":function(e,t,n){"use strict";n.d(t,"a",(function(){return ut}));var i=n("D57K"),r=n("EM62"),a=n("5xGT"),o=n("hX56"),s=n("4y1S"),c=n("nsO7"),u=n("C05f"),l=n("g6G6"),p=n("HM3f"),d=n("6Oco"),h=n("ROBh"),f=n("YtkY"),g=n("TLy2"),m=n("xVbo"),v=n("8j5Y"),b=n("Ohay"),y=n("Lrfq"),C=n("c7W3"),O=n("QoSw"),x=n("SBw3"),S=(n("2m+3"),n("AaYA")),k=n("yhNa"),w=n("LC7v"),E=n("QCJn"),I=n("TQyE"),T=n("IGWl"),_=n("X0jn"),j=n("ZTXN"),P=n("P4Xx"),A=n("NNJu"),M=n("7SLS"),D=n("J+dc"),R=n("myrl"),L=n("y0dT"),F=function(e){function t(t,n,i,r,a,o){var s=e.call(this,t,o)||this;return s.componentFactoryResolver=t,s.featureList=n,s.commandService=i,s.state=r,s.ll=a,s.injector=o,s.items={},s.changeSubs={},s._change=new j.a,s.change.subscribe((function(e){return s.handleFeatureChange(e)})),s.resetOperations(),s}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!1,configurable:!0}),t.prototype.getItem=function(e){if(this.items&&this.items[e]){var t=this.items[e].item;if(t)return t.instance}},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},t.prototype.renderShapeSpecificFeatures=function(e){var t=this;return this.features.pipe(Object(g.a)((function(e){var n=t.state.get("Selected");if(n&&1===n.length){var i=n[0];return t.ll.forCurrentObserver(!0).pipe(Object(g.a)((function(e){return e.getShapeOnce(i)})),Object(f.a)((function(t){return e.filter((function(e){return e.shapeDefId===t.defId}))})))}return Object(h.a)([])})),Object(g.a)((function(n){return t.manageCustomShapeComponents(n,e).pipe(Object(M.a)(n))})),Object(g.a)((function(e){return t.apply(!0).pipe(Object(M.a)(e))})))},t.prototype.addItem=function(e,t,n,i,r){var a=this.makeComponent(n);Object(c.isEmpty)(r)||a.instance.setProperties(r),a.instance.id=e,a.instance.setData(i),a.instance.apply(),this.operations.add.push({item:a,container:t})},t.prototype.removeItem=function(e){this.items[e]&&this.items[e].item&&this.operations.remove.push(e)},t.prototype.updateItem=function(e,t,n){if(this.items[e]&&this.items[e].item){var i=this.items[e].item;Object(c.isEmpty)(n)||i.instance.setProperties(n),i.instance.setData(t),i.instance.apply(),this.operations.update.push(e)}},t.prototype.apply=function(e){var t=this,n=this.getPendingOperations(e);return n.length>0?P.a.apply(void 0,Object(i.j)(n)).pipe(Object(v.a)({complete:function(){t.resetOperations()}})):(this.resetOperations(),Object(h.a)({}))},t.prototype.insertFeatureItem=function(e,t,n){if(!this.items[e.instance.id]){if(this.items[e.instance.id]={item:e,container:t},this.subscribeToItemChange(e.instance),n){var i=this.getAddItemAnimation(e);return this.insert(t,e),e.changeDetectorRef.detectChanges(),i.start()}this.insert(t,e),e.changeDetectorRef.detectChanges()}return Object(h.a)({})},t.prototype.removeFeatureItem=function(e,t){var n=this;if(!this.items[e])return Object(h.a)({});var i=this.items[e].item,r=this.items[e].container;if(i){if(this.unsubscribeFromItemChange(e),t)return this.getRemoveItemAnimation(i).start().pipe(Object(v.a)({complete:function(){n.remove(r,i),delete n.items[e]}}));this.remove(r,i),delete this.items[e]}return Object(h.a)({})},t.prototype.updateFeatureItem=function(e,t){if(this.items[e]&&this.items[e].item){var n=this.items[e].item;if(t)return n.instance.applyAnimated();n.instance.apply()}return Object(h.a)({})},t.prototype.resetOperations=function(){this.operations={add:[],remove:[],update:[]}},t.prototype.subscribeToItemChange=function(e){var t=this,n=e.change.subscribe((function(n){return t._change.next({id:e.id,data:n})}));this.changeSubs[e.id]=n},t.prototype.unsubscribeFromItemChange=function(e){this.changeSubs[e]&&(this.changeSubs[e].unsubscribe(),delete this.changeSubs[e])},t.prototype.getAddItemAnimation=function(e){var t=new A.e({});return t.element=e.location.nativeElement,t},t.prototype.getRemoveItemAnimation=function(e){var t=new A.e({});return t.element=e.location.nativeElement,t},t.prototype.renderFeatureChanges=function(e,t){var n=this;return this.features.pipe(Object(f.a)((function(t){return t.filter((function(t){return e.includes(t.featureId)}))})),Object(g.a)((function(i){return n.manage(e,i,t).pipe(Object(M.a)(i))})),Object(g.a)((function(e){return n.apply(!0).pipe(Object(M.a)(e))})))},t.prototype.updateComponent=function(e){var t=this,n=this.featureList.getFeature(e.featureId),i=this.getUIControlProperties(n);return this.getItemData(n,e.data).pipe(Object(f.a)((function(n){return t.updateItem(e.featureId,n,i)})))},t.prototype.addComponent=function(e,t){var n=this,i=this.featureList.getFeature(e.featureId),r=this.getUIControlType(i.dataType),a=this.getUIControlProperties(i);return this.getItemData(i,e.data).pipe(Object(f.a)((function(i){return n.addItem(e.featureId,t,r,i,a)})))},t.prototype.getUIControlProperties=function(e){return{id:e.id,icon:e.icon,label:e.label,labelPosition:e.labelPosition,dropdownDirection:e.dropdownDirection,tooltip:e.tooltip}},t.prototype.getUIControlType=function(e){if(!e||e===_.d.BINARY)return T.a;if(e===_.d.TEXT_POSITION)return S.a;if(e===_.d.OPTION_LIST_COMBO)return E.a;if(e===_.d.COLOR)return I.a;if(e===_.d.NUMBER)return k.a;if(e===_.d.OPTION_LIST)return w.a;if(e===_.d.CUSTOM_SHAPE_STYLE)return R.a;if(e===_.d.NUMBER_OPTIONS)return L.a;throw new Error("UI control is not available for "+e)},t.prototype.getItemData=function(e,t){return e.transformer?this.injector.get(e.transformer).getFeatureData(e.id,t):t?Object(h.a)(a.s.mergeInstances({},e.data,t)):Object(h.a)(e.data)},t.prototype.handleFeatureChange=function(e){var t=this,n=this.featureList.getFeature(e.id);if(n.transformer){this.injector.get(n.transformer).getApplyData(n.id,e.data).subscribe((function(e){t.commandService.dispatch(n.commandEvent,e)}))}else{var i=a.s.mergeInstances({},this.getCommandData(e.id),e.data);this.commandService.dispatch(n.commandEvent,i)}},t.prototype.getCommandData=function(e){var t={},n=this.getItem(e);return n&&n.data&&(n.data.dataItemId&&(t.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(t.alterFunction=n.data.alterFunction)),t},t.prototype.getPendingOperations=function(e){var t=this,n=[];return this.operations.remove.length>0&&(n=n.concat(this.operations.remove.map((function(n){return t.removeFeatureItem(n,e)})))),this.operations.add.length>0&&(n=n.concat(this.operations.add.map((function(n){return t.insertFeatureItem(n.item,n.container,e)})))),this.operations.update.length>0&&(n=n.concat(this.operations.update.map((function(n){return t.updateFeatureItem(n,e)})))),n},t.prototype.manageCustomShapeComponents=function(e,t){var n=this,i=e.map((function(e){return e.featureId}));return this.itemIds.filter((function(e){return e.includes("creately")})).filter((function(e){return!i.includes(e)})).forEach((function(e){return n.removeItem(e)})),Object(P.a)(this.updateComponents(e),this.addComponents(e,t)).pipe(Object(D.a)(1))},t.prototype.manage=function(e,t,n){return Object(P.a)(this.removeComponents(e,t),this.updateComponents(t),this.addComponents(t,n)).pipe(Object(D.a)(1))},t.prototype.removeComponents=function(e,t){var n=this;return e.filter((function(e){return-1===t.map((function(e){return e.featureId})).indexOf(e)})).forEach((function(e){return n.removeItem(e)})),Object(h.a)({})},t.prototype.addComponents=function(e,t){var n=this,r=[];return e.forEach((function(e,i){-1===n.itemIds.indexOf(e.featureId)&&r.push(n.addComponent(e,t))})),Object(c.isEmpty)(r)?Object(h.a)({}):l.a.apply(void 0,Object(i.j)(r))},t.prototype.updateComponents=function(e){var t=this,n=[];return e.forEach((function(e,i){t.itemIds.includes(e.featureId)&&n.push(t.updateComponent(e))})),Object(c.isEmpty)(n)?Object(h.a)({}):l.a.apply(void 0,Object(i.j)(n))},t.\u0275fac=function(e){return new(e||t)(r.fc(r.m),r.fc(x.a),r.fc(a.B),r.fc(a.Jb),r.fc(O.a),r.fc(r.C))},t.\u0275dir=r.ac({type:t,outputs:{change:"change"},features:[r.Pb]}),t}(A.l),N=n("iV8b"),B=n("iy5+"),U=n("s2Ay"),z=n("crdX"),V=n("2kYt"),G=n("j1Bk"),H=n("Wrqg"),W=n("lQIu"),Y=n("am3J"),X=n("pYIu"),q=n("TdEb"),K=n("pVzg"),J=n("ZFuN"),Z=["diagramInfoSection"],Q=["gridSection"],$=["selectionX"],ee=["selectionY"],te=["selectionWidth"],ne=["selectionHeight"],ie=["connectorStartX"],re=["connectorStartY"],ae=["connectorEndX"],oe=["connectorEndY"],se=["selectionAngle"],ce=["sizeAndPosSection"],ue=["sizeAndPosPanelItemXY"],le=["sizeAndPosPanelItemWH"],pe=["sizeAndPosPanelItemA"],de=["sizeAndPosPanelItemConStartXY"],he=["sizeAndPosPanelItemConEndXY"],fe=["textSectionBISUModel"],ge=["textSectionBISUText"],me=["textSectionAlignModel"],ve=["textSectionAlignText"],be=["textSectionPanelItemBISUAlign"],ye=["textSectionPanelItemFontSize"],Ce=["textSectionPanelItemColor"],Oe=["textSectionPanelTextPosition"],xe=["textSectionFontModel"],Se=["textSectionFontText"],ke=["textSectionSizeModel"],we=["textSectionSizeText"],Ee=["textSectionColorModel"],Ie=["textSectionColorText"],Te=["textSectionTextPosition"],_e=["textSection"],je=["styleSectionColors"],Pe=["styleSectionLineStyle"],Ae=["styleSectionLineThickness"],Me=["styleSectionPanelItemColors"],De=["styleSectionPanelItemStyleThickness"],Re=["styleSection"],Le=["customSection"],Fe=["customControlContainer"];function Ne(e,t){if(1&e&&(r.lc(0,"div",8),r.lc(1,"label",9),r.cd(2,"LABELS.LAST_UPDATED"),r.kc(),r.lc(3,"div",10),r.lc(4,"div",73),r.cd(5),r.lc(6,"span",74),r.cd(7),r.kc(),r.kc(),r.kc(),r.kc()),2&e){var n=r.xc(2).ngIf;r.Sb(5),r.ed("",null==n?null:n.updatedBy," "),r.Sb(2),r.dd(null==n?null:n.updatedDate)}}function Be(e,t){if(1&e){var n=r.mc();r.lc(0,"div",8),r.lc(1,"text-input",75),r.tc("updateText",(function(e){return r.Oc(n),r.xc(3).updateDescription(e)})),r.yc(2,"translate"),r.yc(3,"translate"),r.kc(),r.kc()}if(2&e){var i=r.xc().ngIf,a=r.xc().ngIf;r.Sb(1),r.Dc("label",r.zc(2,4,"LABELS.DESCRIPTION")),r.Dc("placeholder",r.zc(3,6,"PLACEHOLDERS.ADD_DESCRIPTION")),r.Dc("value",null==a?null:a.description),r.Cc("readonly","view"===i)}}var Ue=function(){return[]};function ze(e,t){if(1&e){var n=r.mc();r.lc(0,"div",8),r.lc(1,"tags-input-field",76),r.tc("updateTags",(function(e){return r.Oc(n),r.xc(3).updateTags(e)})),r.yc(2,"translate"),r.yc(3,"translate"),r.kc(),r.kc()}if(2&e){var i=r.xc().ngIf,a=r.xc().ngIf;r.Sb(1),r.Dc("label",r.zc(2,4,"LABELS.TAGS")),r.Dc("placeholder",r.zc(3,6,"PLACEHOLDERS.ADD_TAGS")),r.Cc("items",null!=a&&a.tagsArray?a.tagsArray:r.Gc(8,Ue))("readonly","view"===i)}}function Ve(e,t){if(1&e){var n=r.mc();r.wc(),r.vc(),r.lc(0,"simple-dropdown-item",87),r.lc(1,"div",88),r.tc("click",(function(){r.Oc(n);var e=t.$implicit;return r.xc(4).updateDocumentStatus(e)})),r.gc(2,"span",81),r.lc(3,"span",89),r.cd(4),r.kc(),r.kc(),r.kc()}if(2&e){var i=t.$implicit;r.Cc("item",i),r.Sb(2),r.Xc("background-color",i.bgColor)("color",i.textColor),r.Sb(2),r.dd(i.label)}}var Ge=function(){return{closeOnItemClicked:!0,closeOnBlur:!0}};function He(e,t){if(1&e){var n=r.mc();r.lc(0,"abs-dropdown",77),r.lc(1,"simple-dropdown-button",78),r.tc("clicked",(function(e){return r.Oc(n),r.xc(3).onDropdownOpen(e)})),r.lc(2,"div",79),r.lc(3,"div",80),r.gc(4,"span",81),r.yc(5,"async"),r.yc(6,"async"),r.lc(7,"span",82),r.cd(8),r.yc(9,"async"),r.kc(),r.kc(),r.lc(10,"div",83),r.wc(),r.lc(11,"svg",84),r.gc(12,"use",85),r.kc(),r.kc(),r.kc(),r.kc(),r.ad(13,Ve,5,6,"simple-dropdown-item",86),r.kc()}if(2&e){var i=r.xc(3);r.Cc("settings",r.Gc(14,Ge)),r.Sb(1),r.Cc("items",i.documentStatusItems),r.Sb(3),r.Xc("background-color",r.zc(5,8,i.documentStatus).bgColor)("color",r.zc(6,10,i.documentStatus).textColor),r.Sb(4),r.dd(r.zc(9,12,i.documentStatus).label),r.Sb(5),r.Cc("ngForOf",i.documentStatusItems)}}function We(e,t){if(1&e&&(r.lc(0,"div",90),r.gc(1,"span",81),r.yc(2,"async"),r.yc(3,"async"),r.lc(4,"span",82),r.cd(5),r.yc(6,"async"),r.kc(),r.kc()),2&e){var n=r.xc(3);r.Sb(1),r.Xc("background-color",r.zc(2,5,n.documentStatus).bgColor)("color",r.zc(3,7,n.documentStatus).textColor),r.Sb(4),r.dd(r.zc(6,9,n.documentStatus).label)}}function Ye(e,t){if(1&e&&r.gc(0,"panel-icon-header",91),2&e){var n=t.ngIf;r.Dc("mainText",n.mainText),r.Dc("subText",n.subText),r.Dc("subTextIcon",n.subTextIcon)}}function Xe(e,t){1&e&&r.gc(0,"div",92)}function qe(e,t){}function Ke(e,t){}function Je(e,t){}function Ze(e,t){}function Qe(e,t){}function $e(e,t){}function et(e,t){}function tt(e,t){}function nt(e,t){}function it(e,t){}function rt(e,t){if(1&e){var n=r.mc();r.lc(0,"collapsable-panel-item",93),r.yc(1,"translate"),r.lc(2,"div",8),r.lc(3,"toggle-button",94),r.tc("change",(function(e){return r.Oc(n),r.xc(3).showGrid(e)})),r.yc(4,"translate"),r.yc(5,"async"),r.kc(),r.kc(),r.lc(6,"div",8),r.lc(7,"toggle-button",95),r.tc("change",(function(e){return r.Oc(n),r.xc(3).snapToGrid(e)})),r.yc(8,"translate"),r.kc(),r.kc(),r.kc()}if(2&e){var i=r.xc(3);r.Dc("heading",r.zc(1,4,"PANEL_HEADINGS.GRID")),r.Sb(3),r.Dc("label",r.zc(4,6,"LABELS.SHOW_GRID")),r.Cc("checked",r.zc(5,8,i.gridService.showGrid)),r.Sb(4),r.Dc("label",r.zc(8,10,"LABELS.SNAP_TO_GRID"))}}function at(e,t){if(1&e){var n=r.mc();r.lc(0,"collapsable-panel-item",96),r.yc(1,"translate"),r.lc(2,"div",8),r.lc(3,"toggle-button",97),r.tc("change",(function(e){return r.Oc(n),r.xc(3).showGuides(e)})),r.yc(4,"translate"),r.yc(5,"async"),r.kc(),r.kc(),r.lc(6,"div",8),r.lc(7,"toggle-button",98),r.tc("change",(function(e){return r.Oc(n),r.xc(3).snapToGuides(e)})),r.yc(8,"async"),r.yc(9,"translate"),r.kc(),r.kc(),r.kc()}if(2&e){var i=r.xc(3);r.Dc("heading",r.zc(1,5,"PANEL_HEADINGS.GUIDES")),r.Sb(3),r.Dc("label",r.zc(4,7,"LABELS.SHOW_GUIDES")),r.Cc("checked",r.zc(5,9,i.state.changes("ShowGuides"))),r.Sb(4),r.Dc("label",r.zc(9,13,"LABELS.SNAP_TO_GUIDES")),r.Cc("checked",r.zc(8,11,i.state.changes("SnapToGuides")))}}var ot=function(e){return{"fx-hidden":e}};function st(e,t){if(1&e&&(r.lc(0,"div"),r.lc(1,"div",4,5),r.gc(3,"panel-icon-header",6),r.yc(4,"translate"),r.ad(5,Ne,8,2,"div",7),r.lc(6,"div",8),r.lc(7,"label",9),r.cd(8,"LABELS.DIAGRAM_SIZE"),r.kc(),r.lc(9,"div",10),r.lc(10,"div",11),r.gc(11,"text-input",12),r.kc(),r.lc(12,"div",11),r.gc(13,"text-input",13),r.kc(),r.kc(),r.kc(),r.ad(14,Be,4,8,"div",7),r.yc(15,"async"),r.ad(16,ze,4,9,"div",7),r.yc(17,"async"),r.lc(18,"div",8),r.lc(19,"label",9),r.cd(20,"LABELS.DOCUMENT_STATUS.INPUT_LABEL"),r.kc(),r.ad(21,He,14,15,"abs-dropdown",14),r.yc(22,"async"),r.ad(23,We,7,11,"ng-template",null,15,r.bd),r.kc(),r.kc(),r.ad(25,Ye,1,3,"panel-icon-header",16),r.yc(26,"async"),r.yc(27,"async"),r.ad(28,Xe,1,0,"div",17),r.yc(29,"async"),r.lc(30,"collapsable-panel-item",18,19),r.yc(32,"translate"),r.lc(33,"div",8,20),r.lc(35,"div",10),r.lc(36,"div",11),r.gc(37,"div",null,21),r.kc(),r.lc(39,"div",11),r.gc(40,"div",null,22),r.kc(),r.kc(),r.kc(),r.lc(42,"div",8,23),r.lc(44,"div",10),r.lc(45,"div",11),r.gc(46,"div",null,24),r.kc(),r.lc(48,"div",11),r.gc(49,"div",null,25),r.kc(),r.kc(),r.kc(),r.lc(51,"div",8,26),r.lc(53,"div",10),r.lc(54,"div",11),r.gc(55,"div",null,27),r.kc(),r.gc(57,"div",11),r.kc(),r.kc(),r.lc(58,"div",8,28),r.lc(60,"div",10),r.lc(61,"div",11),r.gc(62,"div",null,29),r.kc(),r.lc(64,"div",11),r.gc(65,"div",null,30),r.kc(),r.kc(),r.kc(),r.lc(67,"div",8,31),r.lc(69,"div",10),r.lc(70,"div",11),r.gc(71,"div",null,32),r.kc(),r.lc(73,"div",11),r.gc(74,"div",null,33),r.kc(),r.kc(),r.kc(),r.kc(),r.lc(76,"collapsable-panel-item",34,35),r.yc(78,"translate"),r.lc(79,"div",36,37),r.lc(81,"div",38),r.lc(82,"div",39),r.yc(83,"async"),r.ad(84,qe,0,0,"ng-template",null,40,r.bd),r.kc(),r.lc(86,"div",39),r.yc(87,"async"),r.ad(88,Ke,0,0,"ng-template",null,41,r.bd),r.kc(),r.kc(),r.lc(90,"div"),r.lc(91,"div",39),r.yc(92,"async"),r.ad(93,Je,0,0,"ng-template",null,42,r.bd),r.kc(),r.lc(95,"div",39),r.yc(96,"async"),r.ad(97,Ze,0,0,"ng-template",null,43,r.bd),r.kc(),r.kc(),r.kc(),r.lc(99,"div",8,44),r.lc(101,"div",45),r.lc(102,"div",46),r.lc(103,"div",39),r.yc(104,"async"),r.ad(105,Qe,0,0,"ng-template",null,47,r.bd),r.kc(),r.lc(107,"div",39),r.yc(108,"async"),r.ad(109,$e,0,0,"ng-template",null,48,r.bd),r.kc(),r.kc(),r.lc(111,"div",49),r.lc(112,"div",39),r.yc(113,"async"),r.ad(114,et,0,0,"ng-template",null,50,r.bd),r.kc(),r.lc(116,"div",39),r.yc(117,"async"),r.ad(118,tt,0,0,"ng-template",null,51,r.bd),r.kc(),r.kc(),r.kc(),r.kc(),r.lc(120,"div",8,52),r.lc(122,"div",45),r.lc(123,"div",39),r.yc(124,"async"),r.ad(125,nt,0,0,"ng-template",null,53,r.bd),r.kc(),r.lc(127,"div",54),r.yc(128,"async"),r.ad(129,it,0,0,"ng-template",null,55,r.bd),r.kc(),r.kc(),r.kc(),r.lc(131,"div",8,56),r.gc(133,"div",null,57),r.kc(),r.kc(),r.lc(135,"collapsable-panel-item",58,59),r.yc(137,"translate"),r.lc(138,"div",60,61),r.gc(140,"div",null,62),r.kc(),r.lc(142,"div",8,63),r.lc(144,"div",64),r.lc(145,"div",49),r.gc(146,"div",null,65),r.kc(),r.lc(148,"div",46),r.gc(149,"div",null,66),r.kc(),r.kc(),r.kc(),r.kc(),r.lc(151,"collapsable-panel-item",67,68),r.lc(153,"div",8),r.gc(154,"div",null,69),r.kc(),r.kc(),r.lc(156,"div",null,70),r.ad(158,rt,9,12,"collapsable-panel-item",71),r.ad(159,at,10,15,"collapsable-panel-item",72),r.kc(),r.kc()),2&e){var n=t.ngIf,i=r.Mc(24),a=r.xc().ngIf,o=r.xc();r.Sb(3),r.Dc("mainText",null==a?null:a.typeName),r.Dc("subText",r.zc(4,27,"LABELS.DIAGRAM_TYPE")),r.Sb(2),r.Cc("ngIf","view"===n),r.Sb(6),r.Ec("value","",null==a?null:a.width," px"),r.Sb(2),r.Ec("value","",null==a?null:a.height," px"),r.Sb(1),r.Cc("ngIf",(null==a?null:a.description)||"edit"===n&&r.zc(15,29,o.enableControls)),r.Sb(2),r.Cc("ngIf",(null==a?null:a.tagsArray)||"edit"===n&&r.zc(17,31,o.enableControls)),r.Sb(5),r.Cc("ngIf","edit"===n&&r.zc(22,33,o.enableControls))("ngIfElse",i),r.Sb(4),r.Cc("ngIf",r.zc(26,35,r.zc(27,37,o._selection).length&&o._panelName)),r.Sb(3),r.Cc("ngIf",!r.zc(29,39,o.hasUnlockedShapes)),r.Sb(2),r.Dc("heading",r.zc(32,41,"PANEL_HEADINGS.SIZE_POSITION")),r.Cc("open",!1),r.Sb(46),r.Dc("heading",r.zc(78,43,"PANEL_HEADINGS.TEXT")),r.Sb(6),r.Cc("ngClass",r.Hc(67,ot,r.zc(83,45,o.isEditorOpen))),r.Sb(4),r.Cc("ngClass",r.Hc(69,ot,!r.zc(87,47,o.isEditorOpen))),r.Sb(5),r.Cc("ngClass",r.Hc(71,ot,r.zc(92,49,o.isEditorOpen))),r.Sb(4),r.Cc("ngClass",r.Hc(73,ot,!r.zc(96,51,o.isEditorOpen))),r.Sb(8),r.Cc("ngClass",r.Hc(75,ot,r.zc(104,53,o.isEditorOpen))),r.Sb(4),r.Cc("ngClass",r.Hc(77,ot,!r.zc(108,55,o.isEditorOpen))),r.Sb(5),r.Cc("ngClass",r.Hc(79,ot,r.zc(113,57,o.isEditorOpen))),r.Sb(4),r.Cc("ngClass",r.Hc(81,ot,!r.zc(117,59,o.isEditorOpen))),r.Sb(7),r.Cc("ngClass",r.Hc(83,ot,r.zc(124,61,o.isEditorOpen))),r.Sb(4),r.Cc("ngClass",r.Hc(85,ot,!r.zc(128,63,o.isEditorOpen))),r.Sb(8),r.Dc("heading",r.zc(137,65,"PANEL_HEADINGS.STYLE")),r.Sb(23),r.Cc("ngIf","edit"===n),r.Sb(1),r.Cc("ngIf","edit"===n)}}function ct(e,t){if(1&e&&(r.lc(0,"div",2),r.ad(1,st,160,87,"div",3),r.yc(2,"async"),r.kc()),2&e){var n=r.xc();r.Sb(1),r.Cc("ngIf",r.zc(2,1,n.uiState))}}var ut=function(e){function t(t,n,i,r,a,o,s,c,l,p){var d=e.call(this,a,s,r,t,n,o)||this;return d.state=t,d.ll=n,d.gridService=i,d.commandService=r,d.componentFactoryResolver=a,d.injector=o,d.featureList=s,d.dataStore=c,d.translator=l,d.documentStatusMap=p,d.selectionXFeature=["selectionPositionX"],d.selectionYFeature=["selectionPositionY"],d.selectionWidthFeature=["selectionWidth"],d.selectionHeightFeature=["selectionHeight"],d.connectorStartXFeature=["connectorStartX"],d.connectorStartYFeature=["connectorStartY"],d.connectorEndXFeature=["connectorEndX"],d.connectorEndYFeature=["connectorEndY"],d.selectionAngleFeature=["selectionAngle"],d.textFeaturesBISUModel=["boldModelText","italicModelText","underlineModelText","strikeoutModelText"],d.textFeaturesBISUText=["boldText","italicText","underlineText","strikeoutText"],d.textFeaturesAlignModel=["leftAlignModelText","centerAlignModelText","rightAlignModelText","justifyModelText"],d.textFeaturesAlignText=["leftAlignText","centerAlignText","rightAlignText","justifyText"],d.textFeatureFontModel=["fontModelText"],d.textFeatureFontText=["fontText"],d.textFeatureSizeModel=["sizeModelText"],d.textFeatureSizeText=["sizeText"],d.textFeatureColorModel=["colorModelText"],d.textFeatureColorText=["colorTextAlt"],d.textFeatureTextPosition=["textPosition"],d.styleFeatureColor=["colorFill","colorLine","customShapeStyles"],d.styleFeatureLineStyle=["styleLine"],d.styleFeatureLineThickness=["lineThickness"],d.features=new u.a([]),d.hasUnlockedShapes=new u.a(!0),d.documentStatus=new u.a(d.documentStatusMap.getDocumentStatus("none")),d.subs=[],d._panelName=d.panelName(),d._selection=d.state.changes("Selected"),d.enableControls=new u.a(!0),d}return Object(i.e)(t,e),Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"diagraminfo"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"properties"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditorOpen",{get:function(){return this.state.changes("EditingText").pipe(Object(f.a)((function(e){return!!e.open})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"documentStatusItems",{get:function(){return this.documentStatusMap.getAllStatuses()},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(Object(l.a)(this.renderFeatureChanges(this.textFeaturesBISUModel,this.textSectionBISUModel),this.renderFeatureChanges(this.textFeaturesBISUText,this.textSectionBISUText),this.renderFeatureChanges(this.textFeaturesAlignModel,this.textSectionAlignModel),this.renderFeatureChanges(this.textFeaturesAlignText,this.textSectionAlignText),this.renderFeatureChanges(this.textFeatureSizeModel,this.textSectionSizeModel),this.renderFeatureChanges(this.textFeatureSizeText,this.textSectionSizeText),this.renderFeatureChanges(this.textFeatureFontModel,this.textSectionFontModel),this.renderFeatureChanges(this.textFeatureFontText,this.textSectionFontText),this.renderFeatureChanges(this.textFeatureColorModel,this.textSectionColorModel),this.renderFeatureChanges(this.textFeatureColorText,this.textSectionColorText),this.renderFeatureChanges(this.textFeatureTextPosition,this.textSectionTextPosition)).subscribe((function(){return e.manageSectionVisiblity(e.textSection,[{group:e.textSectionPanelItemBISUAlign,items:[e.textSectionBISUModel,e.textSectionBISUText,e.textSectionAlignModel,e.textSectionAlignText]},{group:e.textSectionPanelItemFontSize,items:[e.textSectionSizeModel,e.textSectionSizeText,e.textSectionFontModel,e.textSectionFontText]},{group:e.textSectionPanelItemColor,items:[e.textSectionColorModel,e.textSectionColorText]},{group:e.textSectionPanelTextPosition,items:[e.textSectionTextPosition]}])})),Object(l.a)(this.renderFeatureChanges(this.styleFeatureColor,this.styleSectionColors),this.renderFeatureChanges(this.styleFeatureLineStyle,this.styleSectionLineStyle),this.renderFeatureChanges(this.styleFeatureLineThickness,this.styleSectionLineThickness)).subscribe((function(){return e.manageSectionVisiblity(e.styleSection,[{group:e.styleSectionPanelItemColors,items:[e.styleSectionColors]},{group:e.styleSectionPanelItemStyleThickness,items:[e.styleSectionLineStyle,e.styleSectionLineThickness]}])})),Object(l.a)(this.renderFeatureChanges(this.selectionXFeature,this.selectionX),this.renderFeatureChanges(this.selectionYFeature,this.selectionY),this.renderFeatureChanges(this.selectionWidthFeature,this.selectionWidth),this.renderFeatureChanges(this.selectionHeightFeature,this.selectionHeight),this.renderFeatureChanges(this.selectionAngleFeature,this.selectionAngle),this.renderFeatureChanges(this.connectorStartXFeature,this.connectorStartX),this.renderFeatureChanges(this.connectorStartYFeature,this.connectorStartY),this.renderFeatureChanges(this.connectorEndXFeature,this.connectorEndX),this.renderFeatureChanges(this.connectorEndYFeature,this.connectorEndY)).subscribe((function(){e.manageSectionVisiblity(e.sizeAndPosSection,[{group:e.sizeAndPosPanelItemXY,items:[e.selectionX,e.selectionY]},{group:e.sizeAndPosPanelItemWH,items:[e.selectionWidth,e.selectionHeight]},{group:e.sizeAndPosPanelItemA,items:[e.selectionAngle]},{group:e.sizeAndPosPanelItemConStartXY,items:[e.connectorStartX,e.connectorStartY]},{group:e.sizeAndPosPanelItemConEndXY,items:[e.connectorEndX,e.connectorEndY]}])})),this.renderShapeSpecificFeatures(this.customControlContainer).subscribe((function(t){e.manageSectionVisiblity(e.customSection,[{group:e.customSection,items:t.map((function(e){return e.featureId}))}])})),this.features.subscribe((function(t){e.setDiagramFeaturesVisibility(Object(c.isEmpty)(t))})),this.listenToTextEditorChanges().subscribe(),this.translator.onLangChange.subscribe((function(){e.documentStatus.next(e.documentStatusMap.getDocumentStatus(e.documentStatus.value.id))})),this.state.changes("SidebarControls").subscribe((function(t){t===B.b.ENABLED?e.enableControls.next(!0):t===B.b.DISABLED&&e.enableControls.next(!1)})))},t.prototype.panelName=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(g.a)((function(){return e.state.changes("Selected").pipe(Object(m.a)((function(t){return!Object(c.isEmpty)(t)||(e.hasUnlockedShapes.next(!0),!1)})),Object(g.a)((function(t){return e.getDocumentChanges(t).pipe(Object(f.a)((function(n){var i,r,a,o=[],s=[],c=[],u=!1;return t.forEach((function(e){var t=n.getShape(e);t.isLocked||(u=!0),t.isConnector()?t.isLine()?s.push(t):o.push(t):c.push(t)})),u?e.hasUnlockedShapes.next(!0):(e.hasUnlockedShapes.next(!1),r=e.translator.instant("LABELS.LOCKED"),a="nu-ic-lock"),s.length>0&&0===c.length&&0===o.length?i=1===s.length?"Line":s.length+" Lines Selected":o.length>0&&0===c.length&&0===s.length?1===o.length?(i="Connector",r=o[0].name):i=o.length+" Connectors Selected":i=c.length>0&&0===o.length&&0===s.length?1===c.length?c[0].name:c.length+" Shapes Selected":o.length+c.length+s.length+" Shapes Selected",{mainText:i,subText:r,subTextIcon:a}})))})))})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.ngOnInit=function(){this.diagram||(this.diagram=this.getDiagramObservable())},t.prototype.onActive=function(){this.diagram||(this.diagram=this.getDiagramObservable()),this.diagramSub=this.diagram.connect(),a.Lb.track("right.info.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){a.Lb.track("right.info.panel.click",{value1Type:"status",value1:"close"}),this.diagramSub.unsubscribe()},t.prototype.updateDescription=function(e){a.Lb.track("right.info.description.change"),this.commandService.dispatch(C.a.updateDiagramInfo,{description:e})},t.prototype.updateTags=function(e){a.Lb.track("right.info.tags.update",{value1Type:"tags",value1:e}),this.commandService.dispatch(C.a.updateDiagramInfo,{tags:e})},t.prototype.updateDocumentStatus=function(e){var t=this.documentStatusMap.getDocumentStatus(e.id);a.Lb.track("right.info.status.change",{value1Type:"selectedStatus",value1:t.id,value2Type:"previousStatus",value2:this.documentStatus.getValue().id}),this.commandService.dispatch(C.a.updateDiagramInfo,{status:t.id}).subscribe({error:function(e){a.Lb.track("notification.right.Info.statusChange.fail",{value1Type:"error",value1:e?e.message:"Unknown"})},complete:function(){a.Lb.track("notification.right.Info.statusChange.success")}})},t.prototype.onDropdownOpen=function(){a.Lb.track("right.info.status.click")},t.prototype.showGrid=function(e){var t=e?"true":"false";a.Lb.track("right.info.grid."+t),this.gridService.showGrid.value!==e&&this.gridService.showGrid.next(e)},t.prototype.snapToGrid=function(e){var t=e?"true":"false";a.Lb.track("right.info.snap."+t),this.gridService.enableSnapToGrid.value!==e&&this.gridService.enableSnapToGrid.next(e)},t.prototype.showGuides=function(e){this.state.get("ShowGuides")!==e&&this.state.set("ShowGuides",e)},t.prototype.snapToGuides=function(e){this.state.get("SnapToGuides")!==e&&this.state.set("SnapToGuides",e)},t.prototype.listenToTextEditorChanges=function(){var e=this;return Object(p.b)([this.state.changes("TextEditorState"),this.features]).pipe(Object(m.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return!!n.styles&&!Object(c.isEmpty)(n.styles)&&!!r.length})),Object(g.a)((function(t){var n,r,a=Object(i.h)(t,2),o=a[0],s=a[1],c=o.styles,u=s.find((function(e){return"sizeText"===e.featureId})),p=s.find((function(e){return"fontText"===e.featureId}));return u&&u.data&&(n=u.data.data,e.handleListData(n,c.size)),p&&p.data&&(r=p.data.data,e.handleListData(r,c.font)),Object(l.a)(e.updateComponent({featureId:"leftAlignText",data:{value:"left"===c.align}}),e.updateComponent({featureId:"rightAlignText",data:{value:"right"===c.align}}),e.updateComponent({featureId:"centerAlignText",data:{value:"center"===c.align}}),e.updateComponent({featureId:"justifyText",data:{value:"justify"===c.align}}),e.updateComponent({featureId:"boldText",data:{value:c.bold}}),e.updateComponent({featureId:"italicText",data:{value:c.italic}}),e.updateComponent({featureId:"underlineText",data:{value:c.underline}}),e.updateComponent({featureId:"strikeoutText",data:{value:c.strikeout}}),e.updateComponent({featureId:"colorTextAlt",data:{value:c.color}}),n?e.updateComponent({featureId:"sizeText",data:{data:n}}):d.a,r?e.updateComponent({featureId:"fontText",data:{data:r}}):d.a)})))},t.prototype.getDocumentChanges=function(e){var t=this.ll.forCurrent(!1);return t.getDiagramOnce().pipe(Object(g.a)((function(n){return 1!==e.length?Object(h.a)(n):Object(l.a)(Object(h.a)(n),t.getDiagramChanges().pipe(Object(f.a)((function(e){return e.model})),Object(m.a)((function(t){var n=t.shapes[e[0]];return n&&n.isConnector()}))))})))},t.prototype.manageSectionVisiblity=function(e,t){var n=e.nativeElement;n.style.display="none",t.forEach((function(e){var t=e.group.nativeElement;e.items.every((function(e){return 0===e.length}))?t.style.display="none":(t.style.display="",n.style.display="")}))},t.prototype.setDiagramFeaturesVisibility=function(e){var t=this.gridSection.nativeElement,n=this.diagramInfoSection.nativeElement;e?(t.style.display="",n.style.display=""):(t.style.display="none",n.style.display="none")},t.prototype.handleListData=function(e,t){if(e.forEach((function(e){return e.selected=!1})),void 0===t||"object"==typeof t&&Object(c.isEmpty)(t))return e;var n=e.find((function(e){return""+e.value==""+t}));if(n)n.selected=!0;else{var i=e.find((function(e){return e.custom}));i?(i.id=t,i.label=t,i.buttonLabel=t,i.value=t,i.selected=!0):e.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}},t.prototype.getDiagramObservable=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(g.a)((function(e){return e.getDiagramModel()})),Object(g.a)((function(t){var n=e.dataStore.findOne(s.v,{id:t.updatedBy}).pipe(Object(f.a)((function(e){return e&&e.firstName?e:{firstName:"Someone"}})));return Object(p.b)([Object(h.a)(t),n])})),Object(f.a)((function(t){var n=Object(i.h)(t,2),r=n[0],a=n[1],o=r.getBounds();return{description:r.description,tagsArray:r.tagsArray,status:r.status,width:Math.round(o.width),height:Math.round(o.height),typeName:r.typeName?r.typeName:"Block Diagram",updatedBy:a.firstName,updatedDate:e.translator.instant("LABELS.UPDATED_THIS")+" "+r.lastUpdatedMoment()}})),Object(v.a)((function(t){e.documentStatus.next(e.documentStatusMap.getDocumentStatus(t.status))})),Object(b.a)((function(e,t){return Object(c.isEqual)(e,t)})),Object(y.a)())},t.\u0275fac=function(e){return new(e||t)(r.fc(a.Jb),r.fc(O.a),r.fc("GridService"),r.fc(a.B),r.fc(r.m),r.fc(r.C),r.fc(x.a),r.fc(o.b),r.fc(U.e),r.fc(N.a))},t.\u0275cmp=r.Zb({type:t,selectors:[["diagram-info-panel"]],viewQuery:function(e,t){var n;(1&e&&(r.hd(Z,!0,r.r),r.hd(Q,!0,r.r),r.hd($,!0,r.hb),r.hd(ee,!0,r.hb),r.hd(te,!0,r.hb),r.hd(ne,!0,r.hb),r.hd(ie,!0,r.hb),r.hd(re,!0,r.hb),r.hd(ae,!0,r.hb),r.hd(oe,!0,r.hb),r.hd(se,!0,r.hb),r.hd(ce,!0,r.r),r.hd(ue,!0,r.r),r.hd(le,!0,r.r),r.hd(pe,!0,r.r),r.hd(de,!0,r.r),r.hd(he,!0,r.r),r.hd(fe,!0,r.hb),r.hd(ge,!0,r.hb),r.hd(me,!0,r.hb),r.hd(ve,!0,r.hb),r.hd(be,!0,r.r),r.hd(ye,!0,r.r),r.hd(Ce,!0,r.r),r.hd(Oe,!0,r.r),r.hd(xe,!0,r.hb),r.hd(Se,!0,r.hb),r.hd(ke,!0,r.hb),r.hd(we,!0,r.hb),r.hd(Ee,!0,r.hb),r.hd(Ie,!0,r.hb),r.hd(Te,!0,r.hb),r.hd(_e,!0,r.r),r.hd(je,!0,r.hb),r.hd(Pe,!0,r.hb),r.hd(Ae,!0,r.hb),r.hd(Me,!0,r.r),r.hd(De,!0,r.r),r.hd(Re,!0,r.r),r.hd(Le,!0,r.r),r.hd(Fe,!0,r.hb)),2&e)&&(r.Lc(n=r.uc())&&(t.diagramInfoSection=n.first),r.Lc(n=r.uc())&&(t.gridSection=n.first),r.Lc(n=r.uc())&&(t.selectionX=n.first),r.Lc(n=r.uc())&&(t.selectionY=n.first),r.Lc(n=r.uc())&&(t.selectionWidth=n.first),r.Lc(n=r.uc())&&(t.selectionHeight=n.first),r.Lc(n=r.uc())&&(t.connectorStartX=n.first),r.Lc(n=r.uc())&&(t.connectorStartY=n.first),r.Lc(n=r.uc())&&(t.connectorEndX=n.first),r.Lc(n=r.uc())&&(t.connectorEndY=n.first),r.Lc(n=r.uc())&&(t.selectionAngle=n.first),r.Lc(n=r.uc())&&(t.sizeAndPosSection=n.first),r.Lc(n=r.uc())&&(t.sizeAndPosPanelItemXY=n.first),r.Lc(n=r.uc())&&(t.sizeAndPosPanelItemWH=n.first),r.Lc(n=r.uc())&&(t.sizeAndPosPanelItemA=n.first),r.Lc(n=r.uc())&&(t.sizeAndPosPanelItemConStartXY=n.first),r.Lc(n=r.uc())&&(t.sizeAndPosPanelItemConEndXY=n.first),r.Lc(n=r.uc())&&(t.textSectionBISUModel=n.first),r.Lc(n=r.uc())&&(t.textSectionBISUText=n.first),r.Lc(n=r.uc())&&(t.textSectionAlignModel=n.first),r.Lc(n=r.uc())&&(t.textSectionAlignText=n.first),r.Lc(n=r.uc())&&(t.textSectionPanelItemBISUAlign=n.first),r.Lc(n=r.uc())&&(t.textSectionPanelItemFontSize=n.first),r.Lc(n=r.uc())&&(t.textSectionPanelItemColor=n.first),r.Lc(n=r.uc())&&(t.textSectionPanelTextPosition=n.first),r.Lc(n=r.uc())&&(t.textSectionFontModel=n.first),r.Lc(n=r.uc())&&(t.textSectionFontText=n.first),r.Lc(n=r.uc())&&(t.textSectionSizeModel=n.first),r.Lc(n=r.uc())&&(t.textSectionSizeText=n.first),r.Lc(n=r.uc())&&(t.textSectionColorModel=n.first),r.Lc(n=r.uc())&&(t.textSectionColorText=n.first),r.Lc(n=r.uc())&&(t.textSectionTextPosition=n.first),r.Lc(n=r.uc())&&(t.textSection=n.first),r.Lc(n=r.uc())&&(t.styleSectionColors=n.first),r.Lc(n=r.uc())&&(t.styleSectionLineStyle=n.first),r.Lc(n=r.uc())&&(t.styleSectionLineThickness=n.first),r.Lc(n=r.uc())&&(t.styleSectionPanelItemColors=n.first),r.Lc(n=r.uc())&&(t.styleSectionPanelItemStyleThickness=n.first),r.Lc(n=r.uc())&&(t.styleSection=n.first),r.Lc(n=r.uc())&&(t.customSection=n.first),r.Lc(n=r.uc())&&(t.customControlContainer=n.first))},features:[r.Pb],decls:3,vars:3,consts:[[1,"sidebar-scrollbar"],["class","panel-container",4,"ngIf"],[1,"panel-container"],[4,"ngIf"],[1,"panel-section"],["diagramInfoSection",""],["reverse","true",3,"mainText","subText","translate"],["class","panel-item",4,"ngIf"],[1,"panel-item"],["translate",""],[1,"row"],[1,"col"],["inline","true","label","W","readonly","true","transparentTextBox","true",3,"value"],["inline","true","label","H","readonly","true","transparentTextBox","true",3,"value"],["class","document-status-dropdown",3,"settings",4,"ngIf","ngIfElse"],["readonlyStatus",""],[3,"mainText","subText","subTextIcon",4,"ngIf"],["class","panel-overlay fx-cover info-panel-overlay",4,"ngIf"],["testId","shape-size-position-panel",3,"heading","open"],["sizeAndPosSection",""],["sizeAndPosPanelItemXY",""],["selectionX",""],["selectionY",""],["sizeAndPosPanelItemWH",""],["selectionWidth",""],["selectionHeight",""],["sizeAndPosPanelItemA",""],["selectionAngle",""],["sizeAndPosPanelItemConStartXY",""],["connectorStartX",""],["connectorStartY",""],["sizeAndPosPanelItemConEndXY",""],["connectorEndX",""],["connectorEndY",""],["testId","text-panel",3,"heading"],["textSection",""],[1,"panel-item","info-panel-text-formatting"],["textSectionPanelItemBISUAlign",""],[1,"info-panel-text-bius"],[3,"ngClass"],["textSectionBISUModel",""],["textSectionBISUText",""],["textSectionAlignModel",""],["textSectionAlignText",""],["textSectionPanelItemFontSize",""],[1,"panel-multi-dropdown-container"],[1,"expand"],["textSectionFontModel",""],["textSectionFontText",""],[1,"shrink"],["textSectionSizeModel",""],["textSectionSizeText",""],["textSectionPanelItemColor",""],["textSectionColorModel",""],[1,"panel-section-color-text",3,"ngClass"],["textSectionColorText",""],["textSectionPanelTextPosition",""],["textSectionTextPosition",""],["testId","style-panel",3,"heading"],["styleSection",""],[1,"panel-item","info-panel-style-color-pickers"],["styleSectionPanelItemColors",""],["styleSectionColors",""],["styleSectionPanelItemStyleThickness",""],[1,"panel-multi-dropdown-container","info-panel-line-formatting"],["styleSectionLineStyle",""],["styleSectionLineThickness",""],["testId","custom-panel","heading","Custom"],["customSection",""],["customControlContainer",""],["gridSection",""],["testId","grid-panel",3,"heading",4,"ngIf"],["testId","guides-panel",3,"heading",4,"ngIf"],[1,"col","fx-margin-top-5"],[1,"grey","info-panel-user-time-stamp"],["multiLined","true","data-testid","diagram-description",3,"label","placeholder","value","readonly","updateText"],["data-testid","add-tags",3,"label","items","placeholder","readonly","updateTags"],[1,"document-status-dropdown",3,"settings"],["ddbutton","",1,"document-status-dropdown-container",3,"items","clicked"],[1,"dropdown-idle"],[1,"document-status-dd-item"],[1,"document-status-dd-item-dot"],["translate","",1,"document-status-dd-item-text"],[1,"document-status-dropdown-icon"],[1,"nu-icon","nu-ic-close-thin","light-nv-blue"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","",3,"item"],[1,"document-status-dd-item","document-status-list-item",3,"click"],[1,"document-status-dd-item-text"],[1,"document-status-dd-item","document-status-list-item","document-status-label"],[3,"mainText","subText","subTextIcon"],[1,"panel-overlay","fx-cover","info-panel-overlay"],["testId","grid-panel",3,"heading"],["data-testid","show-grid-toggle",3,"label","checked","change"],["data-testid","snap-grid-toggle","checked","gridService.enableSnapToGrid | async",3,"label","change"],["testId","guides-panel",3,"heading"],["data-testid","show-guides-toggle",3,"label","checked","change"],["data-testid","snap-guides-toggle",3,"checked","label","change"]],template:function(e,t){1&e&&(r.lc(0,"perfect-scrollbar",0),r.ad(1,ct,3,3,"div",1),r.yc(2,"async"),r.kc()),2&e&&(r.Sb(1),r.Cc("ngIf",r.zc(2,1,t.diagram)))},directives:[z.b,V.t,G.a,U.a,H.a,W.b,V.q,Y.a,X.a,q.a,V.s,K.a,J.a],pipes:[V.b,U.d],styles:[".info-panel-text-formatting[_ngcontent-%COMP%]{display:flex}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container{display:inline-block;width:22px}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container button{padding:0;margin:0}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container .nu-icon{width:24px;height:24px}.info-panel-text-formatting[_ngcontent-%COMP%]   .info-panel-text-bius[_ngcontent-%COMP%]{flex:1}.info-panel-line-formatting[_ngcontent-%COMP%]   .shrink[_ngcontent-%COMP%]{width:calc(54% - 10px)}.info-panel-line-formatting[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{width:46%}.info-panel-style-color-pickers[_ngcontent-%COMP%]  .colorpicker-container{margin-bottom:20px}.info-panel-user-time-stamp[_ngcontent-%COMP%]{text-transform:lowercase}.info-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);z-index:1}.panel-section-color-text[_ngcontent-%COMP%]{margin-left:0}.document-status-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;background-color:#fff;border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;display:flex;align-items:center;padding:4px;box-shadow:0 2px 2px rgba(195,195,222,.25)}.document-status-dropdown-container[_ngcontent-%COMP%]:hover{border:1px solid #80c6b9}.dropdown-selected[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.dropdown-value[_ngcontent-%COMP%]{flex:1}.document-status-dd-item-list[_ngcontent-%COMP%]{position:absolute;border:1px solid #d3d3e7;border-radius:4px;width:100%;background-color:#fff;padding-right:10px;padding-left:10px;right:0;min-width:130px;z-index:1;overflow:hidden;box-shadow:0 2px 2px #c3c3de;opacity:0;transform:translateY(-5px)}.document-status-dd-item[_ngcontent-%COMP%]{display:flex;align-items:center}.document-status-list-item[_ngcontent-%COMP%]{padding:6px 0}.document-status-label[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;padding:8px;box-shadow:0 2px 2px rgba(195,195,222,.25)}.document-status-dropdown-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.document-status-dd-item-dot[_ngcontent-%COMP%]{display:inline-block;width:5px;height:5px;border-radius:50%;margin:10px}.document-status-dd-item-text[_ngcontent-%COMP%]{color:#04263d;font-weight:400;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.dropdown-idle[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-idle[_ngcontent-%COMP%]   .document-status-dd-item[_ngcontent-%COMP%]{flex-grow:1}.chevron[_ngcontent-%COMP%]{width:24px;height:24px}.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner, .document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper, .document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container, .document-status-dropdown[_ngcontent-%COMP%]  .simple-dd-btn-container{width:100%}"],changeDetection:0}),t}(F)},"13fK":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ROBh"),r=n("5xGT"),a=n("QoSw"),o=n("YtkY"),s=n("EM62"),c=function(){function e(e,t){this.ll=e,this.states=t}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this.states.get("Selected");return this.locator.getDiagramOnce().pipe(Object(o.a)((function(e){return!e.isShapeInGroup(t)})))},e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,itemIcon:{type:"svg",value:e.icon},value:e}}));return Object(i.a)({value:n})},e.prototype.getApplyData=function(e,t){var n={shapeIds:this.states.get("Selected"),isVertical:t.value.isVertical,alignment:t.value.alignment};return Object(i.a)(n)},e.\u0275fac=function(t){return new(t||e)(s.pc(a.a),s.pc(r.Jb))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},"16Fa":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("D57K"),r=n("Jzy8"),a=n("hX56"),o=n("4y1S"),s=n("nsO7"),c=n("ROBh"),u=n("P4Xx"),l=n("YtkY"),p=n("J+dc"),d=n("TLy2"),h=n("QoSw"),f=n("oyCe"),g=n("EM62"),m=function(){function e(e,t,n){this.dataStore=e,this.diagramSnapshotSvc=t,this.ll=n,this.locators={}}return e.prototype.getHistoryItems=function(e,t){void 0===t&&(t=!1);var n=this.dataStore.getModelStore(f.a).findOneHistoryMetadata({id:e}).pipe(Object(l.a)((function(e){return e&&e.snapshots||[]})));return t?n.pipe(Object(p.a)(1)):n},e.prototype.getHistoryItemsWithUsers=function(e,t){var n=this;return void 0===t&&(t=!1),this.getHistoryItems(e,t).pipe(Object(d.a)((function(e){if(0===e.length)return Object(c.a)(e);var t=Object(s.uniq)(Object(s.flatMap)(e,(function(e){return e.userIds})));return Object(u.a)(t.map((function(e){return n.dataStore.findOneLatest(o.v,{id:e})}))).pipe(Object(l.a)((function(t){var n=t.filter(Boolean).reduce((function(e,t){return e[t.id]=t,e}),{});return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{users:e.userIds.map((function(e){return n[e]})).filter(Boolean)})}))})))})))},e.prototype.getLatestHistoryItem=function(e,t){return void 0===t&&(t=!0),this.getHistoryItems(e,t).pipe(Object(l.a)((function(e){return e[e.length-1]})))},e.prototype.fetchSnapshot=function(e,t){return this.getSnapshotLocator(e,t).getDiagramOnce()},e.prototype.getSnapshotLocator=function(e,t){if(!this.locators[e]||!this.locators[e][t]){var n=this.ll.createSnapshotLocator(e,this.fetchRawSnapshot(e,t));this.locators[e]||(this.locators[e]={}),this.locators[e][t]=n}return this.locators[e][t]},e.prototype.fetchRawSnapshot=function(e,t){return this.diagramSnapshotSvc.fetchSnapshot(e,t)},e.\u0275fac=function(t){return new(t||e)(g.pc(a.b),g.pc(r.m),g.pc(h.a))},e.\u0275prov=g.bc({token:e,factory:e.\u0275fac}),e}()},"1JG0":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),r=n("gZOS"),a=n("yH5A"),o=n("EM62"),s=function(){function e(){}return e.prototype.getSakotaDiff=function(e,t){var n=r.Sakota.create(e);return this._applyChanges(n,e,t),n.__sakota__.getChanges()},e.prototype.applyChanges=function(e,t){this._applyChanges(e,e,t)},e.prototype._applyChanges=function(e,t,n){var i=this;Object(a.observableDiff)(t,n,(function(t){if("A"===t.kind){var r=t.path.slice(),o=i.getProp(e,r).slice();Object(a.applyChange)(i.getWrappedObj(r.slice().reverse(),o),n,t);var s=r.pop();i.getProp(e,r)[s]=o}else Object(a.applyChange)(e,n,t)}))},e.prototype.getProp=function(e,t){if(!t||0===t.length)return e;var n=Object(i.h)(t),r=n[0],a=n.slice(1);return this.getProp(e[r],a)},e.prototype.getWrappedObj=function(e,t){var n;if(0===e.length)return t;var r=Object(i.h)(e),a=r[0],o=r.slice(1);return this.getWrappedObj(o,((n={})[a]=t,n))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"1U5y":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("5xGT"),r=n("19Zn"),a=n("ROBh"),o=n("P4Xx"),s=n("nsO7"),c=n("6EBr"),u=n("YtkY"),l=n("0jHB"),p=n("EM62"),d=function(){function e(e,t){this.staticRenderer=e,this.defLocator=t,this.longArrowWidth=70,this.shortArrowWidth=30,this.arrowheadHeight=11.5,this.arrowThickness=2}return e.prototype.getFeatureData=function(e,t){var n=this,i="changeLeftArrowHead"===e?"left":"right",r=t.options.map((function(e){return n.getItemData(e,e,i,t.shapeId,t.end)})),a=this.getItemData("none",null,i,t.shapeId,t.end);r.unshift(a);var o=Object(s.uniqBy)(r,(function(e){return e.id}));return(o.find((function(e){return e.id===t.selected}))||a).selected=!0,this.loadSourceFiles(t.options).pipe(Object(u.a)((function(){return{value:o}})))},e.prototype.getApplyData=function(e,t){var n,i,r={changes:(n={},n[t.shapeId]=(i={},i[t.end]=t.value,i),n)};return Object(a.a)(r)},e.prototype.getDrawableIcon=function(e,t,n){var r=this;if(!e)return n===this.shortArrowWidth?"left"===t?{type:"svg",value:"arrow-default-left"}:{type:"svg",value:"arrow-default-right"}:{type:"canvas",value:function(e,t){var i=t?c.a.primarySelectionColor:c.a.defaultIconColor;r.drawTail(e,i,n)}};var a=i.fb.fromTransform({scaleX:1,scaleY:1,skewX:0,skewY:0,x:"right"===t?n-this.arrowThickness:this.arrowThickness,y:this.arrowheadHeight/2+2*this.arrowThickness,angle:"right"===t?0:180});return{type:"canvas",value:function(t,i){var o=i?c.a.primarySelectionColor:c.a.defaultIconColor;r.drawTail(t,o,n),r.staticRenderer.renderArrowHeadSync(t,e,{x:0,y:0,width:r.arrowheadHeight,height:r.arrowheadHeight},a,{lineColor:o,lineThickness:r.arrowThickness})}}},e.prototype.drawTail=function(e,t,n){e.setStrokeStyle(this.arrowThickness),e.beginStroke(t),e.moveTo(this.arrowThickness,this.arrowheadHeight/2+2*this.arrowThickness),e.lineTo(n-this.arrowThickness,this.arrowheadHeight/2+2*this.arrowThickness)},e.prototype.loadSourceFiles=function(e){var t=this,n=e.map((function(e){return t.defLocator.getClass(e)}));return Object(o.a)(n)},e.prototype.getItemData=function(e,t,n,i,r){return{id:e,label:null,itemIcon:this.getDrawableIcon(t,n,this.longArrowWidth),buttonIcon:this.getDrawableIcon(t,n,this.shortArrowWidth),value:t,shapeId:i,end:r}},e.\u0275fac=function(t){return new(t||e)(p.pc(r.C),p.pc(l.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},"1t/h":function(e,t,n){e.exports=n("EnCR")},"2ZsA":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("6EBr"),r=n("ROBh"),a=n("EM62"),o=function(){function e(){this.btnRadius=12.5,this.itemRadius=11}return e.prototype.getFeatureData=function(e,t){var n=this;return t.data.forEach((function(e){e.buttonIcon=n.getDrawableIcon(e.value,n.btnRadius,!1),e.itemIcon=n.getDrawableIcon(e.value,n.itemRadius,e.selected)})),Object(r.a)({value:t.data})},e.prototype.getApplyData=function(e,t){return Object(r.a)({styles:{color:t.value}})},e.prototype.getDrawableIcon=function(e,t,n){return{type:"canvas",value:function(r,a){r.setStrokeStyle(1),r.beginStroke("#ffffff"===e||"rgb(255, 255, 255)"===e?"#E7E6E6":e),r.beginFill(e),r.drawCircle(t,t,t-3),r.endFill(),r.endStroke(),(a||n)&&(r.setStrokeStyle(1),r.beginStroke(i.a.primarySelectionColor),r.drawCircle(t,t,t-1),r.endStroke())},width:2*t,height:2*t}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},"2aGL":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("D57K"),r=n("W9bu"),a=n("NNJu"),o=n("5xGT"),s=n("EM62"),c=n("2kYt"),u=n("lQIu");function l(e,t){if(1&e&&(s.lc(0,"div",13),s.cd(1),s.yc(2,"async"),s.kc()),2&e){var n=s.xc().$implicit;s.Sb(1),s.dd(s.zc(2,1,n.name))}}function p(e,t){if(1&e){var n=s.mc();s.lc(0,"div",10),s.ad(1,l,3,3,"div",11),s.lc(2,"a",12),s.tc("click",(function(){s.Oc(n);var e=t.$implicit;return s.xc(3).navigateToShape(e)})),s.cd(3),s.kc(),s.kc()}if(2&e){var i=t.index;s.Sb(1),s.Cc("ngIf",0===i),s.Sb(2),s.dd(i+1)}}function d(e,t){if(1&e&&(s.lc(0,"div",8),s.ad(1,p,4,2,"div",9),s.kc()),2&e){var n=t.$implicit,i=s.xc().$implicit;s.Sb(1),s.Cc("ngForOf",i.shapesMap[n.key])}}function h(e,t){if(1&e&&(s.lc(0,"div",1),s.lc(1,"div",2),s.lc(2,"div",3),s.cd(3),s.yc(4,"async"),s.kc(),s.lc(5,"collapsable-panel-item",4),s.lc(6,"div",5),s.lc(7,"div",6),s.ad(8,d,2,1,"div",7),s.yc(9,"keyvalue"),s.kc(),s.kc(),s.kc(),s.kc(),s.kc()),2&e){var n=t.$implicit,i=s.xc();s.Sb(3),s.dd(s.zc(4,4,n.name)),s.Sb(2),s.Fc("heading","",n.count," ",i.getPlural("Instance",n.count),""),s.Sb(3),s.Cc("ngForOf",s.zc(9,6,n.shapesMap))}}var f=function(e){function t(t,n,i,r){var a=e.call(this,i,r)||this;return a.linkSvc=t,a.state=n,a.componentFactoryResolver=i,a.injector=r,a.subs=[],a}return Object(i.e)(t,e),t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.apply=function(){this.itemRef.instance.apply()},t.prototype.navigateToShape=function(e){this.state.get("CurrentDiagram")!==e.docId?this.linkSvc.navigateToDiagram(e.docId,["shape",e.shapeId]).subscribe():this.linkSvc.navigateToShape(e.shapeId)},t.prototype.getPlural=function(e,t){return t>1?e+"s":e},t.\u0275fac=function(e){return new(e||t)(s.fc(r.a),s.fc(o.Jb),s.fc(s.m),s.fc(s.C))},t.\u0275cmp=s.Zb({type:t,selectors:[["shape-info-item"]],inputs:{shapes:"shapes"},features:[s.Pb],decls:1,vars:1,consts:[["class","links-renderer-item",4,"ngFor","ngForOf"],[1,"links-renderer-item"],[1,"links-renderer-shape-item-doc"],[1,"links-renderer-item-doc-name"],[3,"heading"],[1,"contianer"],[1,"row"],["class","col my-auto",4,"ngFor","ngForOf"],[1,"col","my-auto"],["class","links-renderer-item-instance",4,"ngFor","ngForOf"],[1,"links-renderer-item-instance"],["class","links-renderer-item-instance-name",4,"ngIf"],[1,"primary","links-renderer-item-circle",3,"click"],[1,"links-renderer-item-instance-name"]],template:function(e,t){1&e&&s.ad(0,h,10,8,"div",0),2&e&&s.Cc("ngForOf",t.shapes)},directives:[c.s,u.b,c.t],pipes:[c.b,c.l],styles:[".links-renderer-shape-item-doc[_ngcontent-%COMP%]{margin-bottom:5px}.links-renderer-shape-item-doc[_ngcontent-%COMP%]   .links-renderer-shape-item-doc-count[_ngcontent-%COMP%]{background-color:#04263d;padding:5px;font-size:12px;text-align:center;color:#fff;border-radius:5px;margin-left:10px}.links-renderer-item-circle[_ngcontent-%COMP%]{border:1px solid #d6d6d6;border-radius:25px;width:auto;height:25px;padding:4px 7px;display:inline-block;margin-right:7px}.links-renderer-item-instance[_ngcontent-%COMP%], .links-renderer-item-instance-name[_ngcontent-%COMP%]{display:inline-block}.links-renderer-item-instance-name[_ngcontent-%COMP%]{color:rgba(61,66,66,.6);margin-right:7px}.row[_ngcontent-%COMP%]{margin-left:0}"],changeDetection:0}),t}(a.l)},"2m+3":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),r=n("C05f"),a=(n("kWt5"),n("ADlH")),o=n("EM62"),s=function(){function e(){this.enableSnapToGrid=new r.a(!0),this.showGrid=new r.a(!0),this.gridSizeMajor=5*e.gridSize}return e.prototype.isOnGrid=function(t){return t%e.gridSize==0},e.prototype.isOnGridMajor=function(e){return e%this.gridSizeMajor==0},e.prototype.snapToGrid=function(t){return Object(a.roundN)(t,e.gridSize)},e.prototype.snapToGridNext=function(t){return Object(a.ceilN)(t,e.gridSize)},e.prototype.snapToGridPrevious=function(t){return Object(a.floorN)(t,e.gridSize)},e.prototype.getGridLines=function(t,n){var r,a;return Object(i.f)(this,(function(i){switch(i.label){case 0:if(t===n)throw Error("Start and end of the grid line location cant be same");r=t<n?e.gridSize:-e.gridSize,a=t,this.isOnGrid(t)||(a=r>0?this.snapToGridNext(t):this.snapToGridPrevious(t)),i.label=1;case 1:return r>0&&a<n||r<0&&a>n?[4,a]:[3,3];case 2:return i.sent(),a+=r,[3,1];case 3:return[2]}}))},e.prototype.point=function(e){return this.enableSnapToGrid.value&&(e.x=this.adjustToGrid(e.x),e.y=this.adjustToGrid(e.y)),e},e.prototype.shapeTransform=function(e,t){return t},e.prototype.connectorPoints=function(e,t){return t},e.prototype.adjustToGrid=function(t){return t.value=Math.round(t.value),this.isOnGrid(t.value)?(this.adjustToGridProperty("low",t),this.adjustToGridProperty("high",t),t):0===t.low?(t.value=this.snapToGridNext(t.value),this.adjustToGridProperty("high",t)):0===t.high?(t.value=this.snapToGridPrevious(t.value),this.adjustToGridProperty("low",t)):(t.low<=e.gridSize&&t.high<=e.gridSize?t.value=this.snapToGrid(t.value):t.low>e.gridSize&&t.high>e.gridSize?t.low<t.high?t.value=this.snapToGridPrevious(t.value-t.low):t.value=this.snapToGridNext(t.value+t.high):t.low>e.gridSize?t.value=this.snapToGridNext(t.value):t.high>e.gridSize&&(t.value=this.snapToGridPrevious(t.value)),this.adjustToGridProperty("low",t),this.adjustToGridProperty("high",t),t)},e.prototype.adjustToGridProperty=function(t,n){return 0===n[t]||(n[t]<=e.gridSize?n[t]=e.gridSize:n[t]=this.snapToGridNext(n[t])),n},e.gridSize=10,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"2zi3":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("5xGT"),r=n("EM62"),a=function(){function e(e,t){this.env=e,this.state=t,this.postMessageDelay=2e3,this.workers={}}return Object.defineProperty(e.prototype,"isServiceWorkerSupported",{get:function(){return"serviceWorker"in navigator},enumerable:!1,configurable:!0}),e.prototype.register=function(e,t,n,r){var a=this;this.isServiceWorkerSupported?this.state.get("ApplicationIsEmbedded")||"plugin"===i.m.get("APP_MODE")?i.db.info("Service worker is disabled for plugin and embed modes."):navigator.serviceWorker.getRegistration(t).then((function(o){o&&(o.unregister(),i.db.warning('Service worker "'+e+'" has been unregistered successfully.')),navigator.serviceWorker.register(t,{scope:a.getScopeBasedOnEnv(n)}).then((function(t){a.workers[e]=t,i.db.info('Service worker "'+e+'" has been registered successfully.'),r&&r.shouldSendMessage&&setTimeout((function(){var n=JSON.stringify(r.message);t.active.postMessage(n),i.db.info('App has sent the initial message to service worker "'+e+'" successfully.')}),a.postMessageDelay)})).catch((function(t){i.db.warning('Service worker "'+e+'" has been failed to register with error "'+t+'".')}))})):i.db.warning("This browser does not support service workers")},e.prototype.fetch=function(e){return this.workers[e]},e.prototype.getScopeBasedOnEnv=function(e){return this.env.isDesktop?window.location+e:e},e.\u0275fac=function(t){return new(t||e)(r.pc(i.F),r.pc(i.Jb))},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},"2zxM":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("ROBh"),r=n("5xGT"),a=n("w1VY"),o=n("SBw3"),s=n("xVbo"),c=n("YtkY"),u=n("wx9+"),l=n("EM62"),p=function(){function e(e,t,n,i,r){this.viewport=e,this.coordinate=t,this.state=n,this.random=i,this.featureList=r}return e.prototype.getFeatureData=function(e){var t=this.featureList.getFeature(e);return Object(i.a)(t)},e.prototype.getApplyData=function(e){var t=this;return this.viewport.getShapeOnce(this.state.get("Selected")[0]).pipe(Object(s.a)((function(e){return!!e})),Object(c.a)((function(e){var n=t.coordinate.width(100),i=e.bounds.y+e.bounds.height/2;return{id:t.random.shapeId(),points:[{id:t.random.pointId(),x:e.bounds.right,y:i,shapeId:e.id},{id:t.random.pointId(),x:e.bounds.right+n,y:i}]}})))},e.\u0275fac=function(t){return new(t||e)(l.pc(u.a),l.pc(a.a),l.pc(r.Jb),l.pc(r.sb),l.pc(o.a))},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},"3+4Q":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("D57K"),r=n("5xGT"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.prototype.isDeleted=function(){return!!this.deleted},t.prototype.isEdited=function(){return!!this.edited},t.prototype.isNew=function(e){return!(this.isResolved()||this.userId===e||this.seenBy&&this.seenBy.includes(e))},t.prototype.getTime=function(){return""+r.J.formatDistance(this.added,(new Date).getTime())},t.prototype.isResolved=function(){return!!this.resolved},t}(r.h)},"35j0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("YtkY"),r=n("QoSw"),a=n("5xGT"),o=n("ROBh"),s=n("EM62"),c=function(){function e(e,t){this.state=e,this.ll=t}return e.prototype.getFeatureData=function(e,t){var n=this;return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(i.a)((function(e){var t=n.state.get("Selected");if(t.length>1&&e.isShapeInGroup(t)){var i=e.getGroupHierarchy(t[0])[0];return{value:!!e.groups[i].links}}return 1===t.length?{value:!!e.shapes[t[0]].links}:{value:!1}})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return t.length>1?this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(i.a)((function(e){return!!e.isShapeInGroup(t)}))):Object(o.a)(!0)},e.prototype.getApplyData=function(e,t){return Object(o.a)({open:!0})},e.\u0275fac=function(t){return new(t||e)(s.pc(a.Jb),s.pc(r.a))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},"3AeD":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("D57K"),r=n("J+dc"),a=n("TLy2"),o=n("8j5Y"),s=n("5xGT"),c=n("P4Xx"),u=n("ROBh"),l=n("nsO7"),p=n("CSUU"),d=n("diDk"),h=n("X0jn"),f=n("EM62"),g=function(){function e(e,t){this.smartContainerSvc=e,this.edatall=t}return Object.defineProperty(e.prototype,"name",{get:function(){return"ContainerChildrenLayoutingBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();return Object(c.a)(this.childDetached(e,n),this.containerRegionSizeChanges(e,n),this.childTranslated(e,n,t),this.childContainerRegionIdChanges(e,n),this.updateSmartContainerChildren(e,n),this.childTransformed(e,n,t))},e.prototype.containerRegionSizeChanges=function(t,n){var r=[Object(u.a)({})];for(var a in n.$set){e.regexScaleX.lastIndex=0;var o=e.regexScaleX.exec(a)||e.regexScaleY.exec(a);if(o){var s=o[1],p=t.shapes[s];if(!Object(l.isEmpty)(p.children))for(var d in p.children)this.smartContainerSvc.updateGridChildPosition(p,t.shapes[d]),this.smartContainerSvc.updateTimeLineChildPosition(p,t.shapes[d]);var h=p.containerRegions;h&&r.push(this.layoutChildren(t,p,Object.keys(h),!1))}}return c.a.apply(void 0,Object(i.j)(r))},e.prototype.childContainerRegionIdChanges=function(t,n){var r=[Object(u.a)({})];for(var a in n.$set){e.regexContainerRegionId.lastIndex=0;var o=e.regexContainerRegionId.exec(a);if(o){var s=o[1],l=t.shapes[s];if(l.containerId){var p=t.shapes[l.containerId];this.smartContainerSvc.updateChildIdentifiers(t,p,l)}}}return c.a.apply(void 0,Object(i.j)(r))},e.prototype.updateSmartContainerChildren=function(t,n){var o=this,s=[Object(u.a)({})],l=function(u){e.regexIdentifierChanges.lastIndex=0;var l=e.regexIdentifierChanges.exec(u);if(!l)return"continue";var d,h,f=n.$set[u],g=l[1],m=l[2],v=t.shapes[g];if(t.dataDefs[v.dataSetId]&&t.dataDefs[v.dataSetId][m]&&(d=t.dataDefs[v.dataSetId][m].smartContainerIdentifier,h=t.dataDefs[v.dataSetId][m].smartContainerType),!d||!h)return"continue";if(v.eDataId&&v.entityId){var b=p.edatall.getEntityOnce(v.eDataId,v.entityId).pipe(Object(r.a)(1),Object(a.a)((function(e){var n=[];return Object.keys(e.shapes[t.id]).forEach((function(e){o.updateSmartContainerChildData(t,e,f,d,h,n)})),c.a.apply(void 0,Object(i.j)(n))})));s.push(b)}else v.containerId&&p.updateSmartContainerChildData(t,v.id,f,d,h,s)},p=this;for(var d in n.$set)l(d);return c.a.apply(void 0,Object(i.j)(s))},e.prototype.updateSmartContainerChildData=function(e,t,n,r,a,o){var s=e.shapes[t];if(s.containerId){var c=e.shapes[s.containerId];if(c.containerContexts&&c.containerContexts[0]){var u=c.containerContexts[0];if(a===h.v.Region){if(c.data.identifier&&c.data.identifier.value===r&&u===h.v.Region){var l=Object.values(c.texts).filter((function(e){return Object.keys(c.containerRegions).includes(e.id)})).filter((function(e){return e.plainText===n}));if(l.length>0){var p=l[0].id;c.containerRegions[s.containerRegionId].shapeIds=c.containerRegions[s.containerRegionId].shapeIds.filter((function(e){return e!==t}));var d=c.containerRegions[p];d.shapeIds&&!d.shapeIds.includes(t)?d.shapeIds=Object(i.j)(d.shapeIds,[t]):d.shapeIds||(d.shapeIds=[t]),o.push(this.layoutChildren(e,c,[p,s.containerRegionId]))}}}else a===h.v.XWithWidth?c.data.identifier&&c.data.identifier.value===r&&u===h.v.XWithWidth&&(this.smartContainerSvc.updateTimeLineChildPosition(c,s),this.updateRelativeTranslate(c,s)):a===h.v.XY&&c.data.identifier&&c.data.identifier.value===r&&u===h.v.XY&&(this.smartContainerSvc.updateGridChildPosition(c,s),this.updateRelativeTranslate(c,s))}}},e.prototype.childDetached=function(t,n){var r=[Object(u.a)({})];for(var a in n.$unset){e.regexChildren.lastIndex=0;var o=e.regexChildren.exec(a);if(o){var s=o[1],l=o[2],p=t.shapes[s],d=[],h=p.containerRegions;for(var f in h){(h[f].shapeIds||[]).includes(l)&&d.push(f)}this.manageChildrenInRegions(t,p.id,l),r.push(this.layoutChildren(t,p,d))}}return c.a.apply(void 0,Object(i.j)(r))},e.prototype.childTranslated=function(t,n,r){var a=[Object(u.a)({})],o=new Set;for(var l in n.$set){e.regexChildrenRelativeX.lastIndex=0,e.regexChildrenRelativeY.lastIndex=0,e.regexChildrenRelativeAngle.lastIndex=0,e.regexChildren.lastIndex=0;var p=e.regexChildrenRelativeX.exec(l)||e.regexChildrenRelativeY.exec(l)||e.regexChildrenRelativeAngle.exec(l)||e.regexChildren.exec(l);if(p&&p[1]){var d=p[1],h=p[2],f=t.shapes[h];if(!o.has(h)){var g=t.shapes[d];if("Execute"===r){var m=f.containerRegionId;if(this.manageChildrenInRegions(t,g.id,h),Object.keys(g.children).includes(h)){var v={x:g.x,y:g.y,width:g.width,height:g.height},b={x:f.x,y:f.y,width:f.width,height:f.height},y=m===f.containerRegionId?[m]:[m,f.containerRegionId];s.vb.from(v).contains(s.vb.from(b))&&(this.smartContainerSvc.updateGridChildDataItems(t,g,f),this.smartContainerSvc.updateGridChildActiveText(t,g,f)),a.push(this.layoutChildren(t,g,y,!1))}}o.add(h)}}}return c.a.apply(void 0,Object(i.j)(a))},e.prototype.childTransformed=function(t,n,r){var a=[Object(u.a)({})];if("Execute"===r&&!Object(l.isEmpty)(n.$set)){var o=Object.keys(n.$set).some((function(t){return e.regexUserSetWidth.test(t)}));for(var p in n.$set){e.regexUserSetWidth.lastIndex=0;var d=e.regexUserSetWidth.exec(p);e.regexX.lastIndex=0;var f=e.regexX.exec(p);if(d&&d[1]||f&&f[1]&&!o){var g=d?d[1]:f[1],m=t.shapes[g],v=m.containerId,b=m.shapeContext;if(v&&b&&b===h.v.XWithWidth){this.manageChildrenInRegions(t,v,g);var y=t.shapes[v];if(Object.keys(y.children).includes(g)){var C={x:y.x,y:y.y,width:y.width,height:y.height},O={x:m.x,y:m.y,width:m.width,height:m.height};s.vb.from(C).contains(s.vb.from(O))&&this.smartContainerSvc.updateTimeLineDateChange(t,y,m)}}}}}return c.a.apply(void 0,Object(i.j)(a))},e.prototype.layoutChildren=function(e,t,n,r){var a=this;void 0===r&&(r=!0);var l=[Object(u.a)({})];return n.forEach((function(n){var i=t.containerRegions[n];if(i&&i.shapeIds&&i.shapeIds.length){var r=i.shapeIds.map((function(t){return e.shapes[t]})).filter((function(e){return e})),a={x:i.x+t.x,y:i.y+t.y,width:i.width,height:i.height};l.push(s.Z.apply(r,a,i.layoutingData))}})),c.a.apply(void 0,Object(i.j)(l)).pipe(Object(o.a)({complete:function(){if(t.children)for(var n in t.children)a.updateRelativeTranslate(t,e.shapes[n]);r&&(t.resizeContainerAfterLayouting?t.resizeContainerAfterLayouting(e,t):a.resizeContainerAfterLayouting(e,t))}}))},e.prototype.updateRelativeTranslate=function(e,t){var n=e.defaultBounds.getTransformedPoints(e.transform),i=t,r=i.defaultBounds.getTransformedPoints(i.transform),a=i.angle-e.angle,o=s.ab.from(n.topLeft.x,n.topLeft.y,n.bottomLeft.x,n.bottomLeft.y).perpendicularTo(r.topLeft),c=s.ab.from(o.x,o.y,r.topLeft.x,r.topLeft.y).length(),u=s.ab.from(n.topLeft.x,n.topLeft.y,n.topRight.x,n.topRight.y).perpendicularTo(r.topLeft),l=s.ab.from(u.x,u.y,r.topLeft.x,r.topLeft.y).length();e.children[t.id]&&(e.children[t.id].relativeX=c,e.children[t.id].relativeY=l,e.children[t.id].relativeAngle=a)},e.prototype.manageChildrenInRegions=function(e,t,n){var r=e.shapes[t],a=e.shapes[n],o=r.containerRegions;if(a){this.updateRelativeTranslate(r,a);var s=Object.keys(o).find((function(e){var t=Object(l.cloneDeep)(o[e]),n=r.children[a.id];if(n){var i=n.relativeX,s=n.relativeY,c=i+a.bounds.width/2,u=s+a.bounds.height/2,p=c<=t.x+t.width&&c>t.x,d=u<=t.y+t.height&&u>t.y;return p&&d}}));if(s!==a.containerRegionId&&a.containerRegionId){var c=o[a.containerRegionId];c&&c.shapeIds&&(c.shapeIds=c.shapeIds.filter((function(e){return e!==a.id})))}if(s){var u=o[s];u&&(a.containerRegionId=s,u.shapeIds&&!u.shapeIds.includes(a.id)?u.shapeIds=Object(i.j)(u.shapeIds,[a.id]):u.shapeIds||(u.shapeIds=[a.id]))}else a.containerRegionId=void 0}else for(var p in o){var d=o[p];if((d.shapeIds||[]).includes(n))return void(d.shapeIds=d.shapeIds.filter((function(e){return e!==n})))}},e.prototype.resizeContainerAfterLayouting=function(t,n){var r=n.bounds;if(n.children&&Object.keys(n.children).length){var a=t.getBounds(Object(i.j)(Object.keys(n.children)));a.absorb(r);var o=a.width-r.width,s=a.height-r.height;if(o>0){var c=n.width+o+e.containerResizePadding;n.scaleX=c/n.defaultBounds.width}if(s>0){var u=n.height+s+e.containerResizePadding;n.scaleY=u/n.defaultBounds.height}}},e.containerResizePadding=10,e.regexX=/shapes\.([^\.]+)\.x/g,e.regexY=/shapes\.([^\.]+)\.y/g,e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexUserSetWidth=/shapes\.([^\.]+)\.userSetWidth/g,e.regexScaleY=/shapes\.([^\.]+)\.scaleY/g,e.regexContainerRegionId=/shapes\.([^\.]+)\.containerRegionId/g,e.regexIdentifierChanges=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.regexChildren=/shapes\.([^\.]+)\.children\.([^\.]+)/g,e.regexAngle=/shapes\.([^\.]+)\.angle/g,e.regexChildrenRelativeX=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeX/g,e.regexChildrenRelativeY=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeY/g,e.regexChildrenRelativeAngle=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeAngle/g,e.\u0275fac=function(t){return new(t||e)(f.pc(p.a),f.pc(d.a))},e.\u0275prov=f.bc({token:e,factory:e.\u0275fac}),e}()},"3QsU":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return g}));var i,r,a=n("5xGT"),o=(n("NNJu"),n("X0jn")),s=n("C05f"),c=n("KTx3"),u=n("xVbo"),l=n("8j5Y"),p=n("EM62"),d=n("s2Ay"),h=["searchInputField"];function f(e,t){1&e&&p.gc(0,"document-search")}!function(e){e.OPEN="open",e.CLOSE="close"}(i||(i={})),function(e){e.DOCUMENT="document",e.GLOBAL="global",e.COMMAND="command"}(r||(r={}));var g=function(){function e(e,t){this.translateService=e,this.state=t,this.showDocumentSearchResults=new s.a(!1),this.subs=[],this.onSearchQueryChange=new s.a("")}return e.prototype.ngOnInit=function(){var e=this;this.handlePlaceHolderText(),this.subs.push(Object(c.a)(window,"keydown").pipe(Object(u.a)((function(e){return e.keyCode===o.k.Escape})),Object(l.a)((function(){e.searchInputField.inputText?e.searchInputField.clear():e.state.set("GlobalSearch",{state:i.CLOSE}),e.showSearchResultsComponent(!1)}))).subscribe(),this.onSearchQueryChange.pipe(Object(l.a)((function(t){t.length>2&&(e.state.set("GlobalSearchText",{searchText:t}),e.showSearchResultsComponent(!0))}))).subscribe())},e.prototype.ngAfterViewInit=function(){this.subs.push(this.listenForOutSideClick().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.listenForOutSideClick=function(){var e=this;return Object(c.a)(document,"click").pipe(Object(l.a)((function(t){e.validateOutSideContainerClick(t)})))},e.prototype.validateOutSideContainerClick=function(e){"globalSearchContainer"===e.target.id&&this.closeGlobalSearchWindow()},e.prototype.closeGlobalSearchWindow=function(){this.searchInputField.clear(),this.state.set("GlobalSearch",{state:i.CLOSE})},e.prototype.handlePlaceHolderText=function(){this.state.get("GlobalSearch").scope===r.DOCUMENT&&(this.searchPlaceholder=this.translateService.instant("PLACEHOLDERS.DOCUMENT_SEARCH"))},e.prototype.showSearchResultsComponent=function(e){this.state.get("GlobalSearch").scope===r.DOCUMENT&&this.showDocumentSearchResults.next(e)},e.\u0275fac=function(t){return new(t||e)(p.fc(d.e),p.fc(a.Jb))},e.\u0275cmp=p.Zb({type:e,selectors:[["global-search"]],viewQuery:function(e,t){var n;(1&e&&p.hd(h,!0),2&e)&&(p.Lc(n=p.uc())&&(t.searchInputField=n.first))},decls:6,vars:9,consts:[["id","globalSearchContainer",1,"global-search-container","fx-cover","fx-pointer-events-auto"],[1,"global-search-input-field"],["icon","search-thin",3,"showClearButton","emitForInputChange","placeholder","debounce","autoFocus","transparentTextBox","updateText"],["searchInputField",""],[4,"ngIf"]],template:function(e,t){1&e&&(p.lc(0,"div",0),p.lc(1,"div",1),p.lc(2,"text-input",2,3),p.tc("updateText",(function(e){return t.onSearchQueryChange.next(e)})),p.kc(),p.ad(4,f,1,0,"document-search",4),p.yc(5,"async"),p.kc(),p.kc()),2&e&&(p.Sb(2),p.Dc("placeholder",t.searchPlaceholder),p.Cc("showClearButton",!0)("emitForInputChange",!0)("debounce",100)("autoFocus",!0)("transparentTextBox",!0),p.Sb(2),p.Cc("ngIf",p.zc(5,7,t.showDocumentSearchResults)))},styles:[".global-search-container[_ngcontent-%COMP%]{z-index:2;display:flex;flex-direction:column;align-items:center}.global-search-input-field[_ngcontent-%COMP%]{width:100%;max-width:585px;min-width:585px;background-color:#fff;border-radius:4px;padding:5px 15px 0;margin-top:25px;box-shadow:0 2px 2px #c3c3de;border:1px solid #d3d3e7}text-input[_ngcontent-%COMP%] {margin-bottom:15px;display:block}text-input[_ngcontent-%COMP%]  .text-input{width:100%}"],changeDetection:0}),e}()},"3Uyd":function(e,t,n){"use strict";n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return W})),n.d(t,"d",(function(){return Y})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return q})),n.d(t,"g",(function(){return X})),n.d(t,"h",(function(){return K}));var i=n("MMYH"),r=n("PRnZ"),a=n("sRHE"),o=n("8K1b"),s=n("AqVP"),c=n("9fIP"),u=n("EM62"),l=n("cqs0"),p=n("5XID"),d=n("ZTXN"),h=n("bwdy"),f=0,g=new u.B("CdkAccordion"),m=function(){function e(){Object(c.a)(this,e),this._stateChanges=new d.a,this._openCloseAllActions=new d.a,this.id="cdk-accordion-".concat(f++),this._multi=!1}return Object(i.a)(e,[{key:"multi",get:function(){return this._multi},set:function(e){this._multi=Object(p.b)(e)}},{key:"openAll",value:function(){this._openCloseAll(!0)}},{key:"closeAll",value:function(){this._openCloseAll(!1)}},{key:"ngOnChanges",value:function(e){this._stateChanges.next(e)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_openCloseAll",value:function(e){this.multi&&this._openCloseAllActions.next(e)}}]),e}();m.\u0275fac=function(e){return new(e||m)},m.\u0275dir=u.ac({type:m,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[u.Rb([{provide:g,useExisting:m}]),u.Qb]}),m.propDecorators={multi:[{type:u.D}]};var v=0,b=void 0,y=function(){function e(t,n,i){var r=this;Object(c.a)(this,e),this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=i,this._openCloseAllSubscription=h.a.EMPTY,this.closed=new u.t,this.opened=new u.t,this.destroyed=new u.t,this.expandedChange=new u.t,this.id="cdk-accordion-child-".concat(v++),this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=i.listen((function(e,t){r.accordion&&!r.accordion.multi&&r.accordion.id===t&&r.id!==e&&(r.expanded=!1)})),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}return Object(i.a)(e,[{key:"expanded",get:function(){return this._expanded},set:function(e){if(e=Object(p.b)(e),this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();var t=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,t)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(p.b)(e)}},{key:"ngOnDestroy",value:function(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}},{key:"toggle",value:function(){this.disabled||(this.expanded=!this.expanded)}},{key:"close",value:function(){this.disabled||(this.expanded=!1)}},{key:"open",value:function(){this.disabled||(this.expanded=!0)}},{key:"_subscribeToOpenCloseAllActions",value:function(){var e=this;return this.accordion._openCloseAllActions.subscribe((function(t){e.disabled||(e.expanded=t)}))}}]),e}();y.\u0275fac=function(e){return new(e||y)(u.fc(g,12),u.fc(u.j),u.fc(l.c))},y.\u0275dir=u.ac({type:y,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[u.Rb([{provide:g,useValue:b}])]}),y.ctorParameters=function(){return[{type:m,decorators:[{type:u.N},{type:u.y,args:[g]},{type:u.ab}]},{type:u.j},{type:l.c}]},y.propDecorators={closed:[{type:u.O}],opened:[{type:u.O}],destroyed:[{type:u.O}],expandedChange:[{type:u.O}],expanded:[{type:u.D}],disabled:[{type:u.D}]};var C=function e(){Object(c.a)(this,e)};C.\u0275mod=u.dc({type:C}),C.\u0275inj=u.cc({factory:function(e){return new(e||C)}});var O=n("Sv/w"),x=n("2kYt"),S=n("sg/T"),k=n("Ohay"),w=n("jIqt"),E=n("xVbo"),I=n("J+dc"),T=n("fAiE"),_=n("5lCh"),j=n("6Oco"),P=n("g6G6"),A=n("f7+R"),M=["body"];function D(e,t){}var R=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]];function L(e,t){if(1&e&&u.gc(0,"span",2),2&e){var n=u.xc();u.Cc("@indicatorRotate",n._getExpandedState())}}var F=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],N=new u.B("MAT_ACCORDION"),B="225ms cubic-bezier(0.4,0.0,0.2,1)",U={indicatorRotate:Object(A.j)("indicatorRotate",[Object(A.g)("collapsed, void",Object(A.h)({transform:"rotate(0deg)"})),Object(A.g)("expanded",Object(A.h)({transform:"rotate(180deg)"})),Object(A.i)("expanded <=> collapsed, void => collapsed",Object(A.e)(B))]),bodyExpansion:Object(A.j)("bodyExpansion",[Object(A.g)("collapsed, void",Object(A.h)({height:"0px",visibility:"hidden"})),Object(A.g)("expanded",Object(A.h)({height:"*",visibility:"visible"})),Object(A.i)("expanded <=> collapsed, void => collapsed",Object(A.e)(B))])},z=function e(t){Object(c.a)(this,e),this._template=t};z.\u0275fac=function(e){return new(e||z)(u.fc(u.cb))},z.\u0275dir=u.ac({type:z,selectors:[["ng-template","matExpansionPanelContent",""]]}),z.ctorParameters=function(){return[{type:u.cb}]};var V=0,G=new u.B("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),H=void 0,W=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,r,a,o,s,l){var p;return Object(c.a)(this,n),(p=t.call(this,e,i,r))._viewContainerRef=a,p._animationMode=s,p._hideToggle=!1,p.afterExpand=new u.t,p.afterCollapse=new u.t,p._inputChanges=new d.a,p._headerId="mat-expansion-panel-header-".concat(V++),p._bodyAnimationDone=new d.a,p.accordion=e,p._document=o,p._bodyAnimationDone.pipe(Object(k.a)((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){"void"!==e.fromState&&("expanded"===e.toState?p.afterExpand.emit():"collapsed"===e.toState&&p.afterCollapse.emit())})),l&&(p.hideToggle=l.hideToggle),p}return Object(i.a)(n,[{key:"hideToggle",get:function(){return this._hideToggle||this.accordion&&this.accordion.hideToggle},set:function(e){this._hideToggle=Object(p.b)(e)}},{key:"togglePosition",get:function(){return this._togglePosition||this.accordion&&this.accordion.togglePosition},set:function(e){this._togglePosition=e}},{key:"_hasSpacing",value:function(){return!!this.accordion&&(this.expanded&&"default"===this.accordion.displayMode)}},{key:"_getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"close",value:function(){this.expanded=!1}},{key:"open",value:function(){this.expanded=!0}},{key:"ngAfterContentInit",value:function(){var e=this;this._lazyContent&&this.opened.pipe(Object(w.a)(null),Object(E.a)((function(){return e.expanded&&!e._portal})),Object(I.a)(1)).subscribe((function(){e._portal=new O.f(e._lazyContent._template,e._viewContainerRef)}))}},{key:"ngOnChanges",value:function(e){this._inputChanges.next(e)}},{key:"ngOnDestroy",value:function(){Object(r.a)(Object(a.a)(n.prototype),"ngOnDestroy",this).call(this),this._bodyAnimationDone.complete(),this._inputChanges.complete()}},{key:"_containsFocus",value:function(){if(this._body){var e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}]),n}(y);W.\u0275fac=function(e){return new(e||W)(u.fc(N,12),u.fc(u.j),u.fc(l.c),u.fc(u.hb),u.fc(x.e),u.fc(_.a,8),u.fc(G,8))},W.\u0275cmp=u.Zb({type:W,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,n){var i;(1&e&&u.Yb(n,z,!0),2&e)&&(u.Lc(i=u.uc())&&(t._lazyContent=i.first))},viewQuery:function(e,t){var n;(1&e&&u.hd(M,!0),2&e)&&(u.Lc(n=u.uc())&&(t._body=n.first))},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&u.Xb("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[u.Rb([{provide:N,useValue:H}]),u.Pb,u.Qb],ngContentSelectors:["mat-expansion-panel-header","*","mat-action-row"],decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(u.Bc(R),u.Ac(0),u.lc(1,"div",0,1),u.tc("@bodyExpansion.done",(function(e){return t._bodyAnimationDone.next(e)})),u.lc(3,"div",2),u.Ac(4,1),u.ad(5,D,0,0,"ng-template",3),u.kc(),u.Ac(6,2),u.kc()),2&e&&(u.Sb(1),u.Cc("@bodyExpansion",t._getExpandedState())("id",t.id),u.Tb("aria-labelledby",t._headerId),u.Sb(4),u.Cc("cdkPortalOutlet",t._portal))},directives:[O.b],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[U.bodyExpansion]},changeDetection:0}),W.ctorParameters=function(){return[{type:void 0,decorators:[{type:u.N},{type:u.ab},{type:u.y,args:[N]}]},{type:u.j},{type:l.c},{type:u.hb},{type:void 0,decorators:[{type:u.y,args:[x.e]}]},{type:String,decorators:[{type:u.N},{type:u.y,args:[_.a]}]},{type:void 0,decorators:[{type:u.y,args:[G]},{type:u.N}]}]},W.propDecorators={hideToggle:[{type:u.D}],togglePosition:[{type:u.D}],afterExpand:[{type:u.O}],afterCollapse:[{type:u.O}],_lazyContent:[{type:u.n,args:[z]}],_body:[{type:u.gb,args:["body"]}]};var Y=function e(){Object(c.a)(this,e)};Y.\u0275fac=function(e){return new(e||Y)},Y.\u0275dir=u.ac({type:Y,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]});var X=function(){function e(t,n,i,r,a,o){var s=this;Object(c.a)(this,e),this.panel=t,this._element=n,this._focusMonitor=i,this._changeDetectorRef=r,this._animationMode=o,this._parentChangeSubscription=h.a.EMPTY;var u=t.accordion?t.accordion._stateChanges.pipe(Object(E.a)((function(e){return!(!e.hideToggle&&!e.togglePosition)}))):j.a;this._parentChangeSubscription=Object(P.a)(t.opened,t.closed,u,t._inputChanges.pipe(Object(E.a)((function(e){return!!(e.hideToggle||e.disabled||e.togglePosition)})))).subscribe((function(){return s._changeDetectorRef.markForCheck()})),t.closed.pipe(Object(E.a)((function(){return t._containsFocus()}))).subscribe((function(){return i.focusVia(n,"program")})),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}return Object(i.a)(e,[{key:"disabled",get:function(){return this.panel.disabled}},{key:"_toggle",value:function(){this.disabled||this.panel.toggle()}},{key:"_isExpanded",value:function(){return this.panel.expanded}},{key:"_getExpandedState",value:function(){return this.panel._getExpandedState()}},{key:"_getPanelId",value:function(){return this.panel.id}},{key:"_getTogglePosition",value:function(){return this.panel.togglePosition}},{key:"_showToggle",value:function(){return!this.panel.hideToggle&&!this.panel.disabled}},{key:"_getHeaderHeight",value:function(){var e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}},{key:"_keydown",value:function(e){switch(e.keyCode){case T.o:case T.g:Object(T.t)(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._element,e,t)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._element).subscribe((function(t){t&&e.panel.accordion&&e.panel.accordion._handleHeaderFocus(e)}))}},{key:"ngOnDestroy",value:function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}]),e}();X.\u0275fac=function(e){return new(e||X)(u.fc(W,1),u.fc(u.r),u.fc(S.g),u.fc(u.j),u.fc(G,8),u.fc(_.a,8))},X.\u0275cmp=u.Zb({type:X,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&u.tc("click",(function(){return t._toggle()}))("keydown",(function(e){return t._keydown(e)})),2&e&&(u.Tb("id",t.panel._headerId)("tabindex",t.disabled?-1:0)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),u.Xc("height",t._getHeaderHeight()),u.Xb("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:["mat-panel-title","mat-panel-description","*"],decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(u.Bc(F),u.lc(0,"span",0),u.Ac(1),u.Ac(2,1),u.Ac(3,2),u.kc(),u.ad(4,L,1,1,"span",1)),2&e&&(u.Sb(4),u.Cc("ngIf",t._showToggle()))},directives:[x.t],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[U.indicatorRotate]},changeDetection:0}),X.ctorParameters=function(){return[{type:W,decorators:[{type:u.u}]},{type:u.r},{type:S.g},{type:u.j},{type:void 0,decorators:[{type:u.y,args:[G]},{type:u.N}]},{type:String,decorators:[{type:u.N},{type:u.y,args:[_.a]}]}]},X.propDecorators={expandedHeight:[{type:u.D}],collapsedHeight:[{type:u.D}]};var q=function e(){Object(c.a)(this,e)};q.\u0275fac=function(e){return new(e||q)},q.\u0275dir=u.ac({type:q,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]});var K=function e(){Object(c.a)(this,e)};K.\u0275fac=function(e){return new(e||K)},K.\u0275dir=u.ac({type:K,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]});var J=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments))._ownHeaders=new u.S,e._hideToggle=!1,e.displayMode="default",e.togglePosition="after",e}return Object(i.a)(n,[{key:"hideToggle",get:function(){return this._hideToggle},set:function(e){this._hideToggle=Object(p.b)(e)}},{key:"ngAfterContentInit",value:function(){var e=this;this._headers.changes.pipe(Object(w.a)(this._headers)).subscribe((function(t){e._ownHeaders.reset(t.filter((function(t){return t.panel.accordion===e}))),e._ownHeaders.notifyOnChanges()})),this._keyManager=new S.f(this._ownHeaders).withWrap().withHomeAndEnd()}},{key:"_handleHeaderKeydown",value:function(e){this._keyManager.onKeydown(e)}},{key:"_handleHeaderFocus",value:function(e){this._keyManager.updateActiveItem(e)}}]),n}(m);J.\u0275fac=function(e){return Z(e||J)},J.\u0275dir=u.ac({type:J,selectors:[["mat-accordion"]],contentQueries:function(e,t,n){var i;(1&e&&u.Yb(n,X,!0),2&e)&&(u.Lc(i=u.uc())&&(t._headers=i))},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,t){2&e&&u.Xb("mat-accordion-multi",t.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[u.Rb([{provide:N,useExisting:J}]),u.Pb]}),J.propDecorators={_headers:[{type:u.o,args:[X,{descendants:!0}]}],hideToggle:[{type:u.D}],displayMode:[{type:u.D}],togglePosition:[{type:u.D}]};var Z=u.nc(J),Q=function e(){Object(c.a)(this,e)};Q.\u0275mod=u.dc({type:Q}),Q.\u0275inj=u.cc({factory:function(e){return new(e||Q)},imports:[[x.c,C,O.e]]})},"4e1j":function(e,t,n){"use strict";var i=n("0N1A"),r=n("4kdB");function a(e){var t=0,n=0,i=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=10*t,r=10*n,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||r)&&e.deltaMode&&(1==e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:i,pixelY:r}}a.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},e.exports=a},"4j/0":function(e,t,n){"use strict";var i=n("hKez").Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=p,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=o(t[i]))>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=o(t[i]))>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"4kdB":function(e,t,n){"use strict";var i,r=n("c3EF");r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,a=n in document;if(!a){var o=document.createElement("div");o.setAttribute(n,"return;"),a="function"==typeof o[n]}return!a&&i&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}},"4t+C":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("q+iX"),r=n("TLy2"),a=n("J+dc"),o=n("YtkY"),s=n("i+Vu"),c=n("QoSw"),u=n("D57K"),l=n("1t/h"),p=function(){function e(){}return e.prototype.hasParent=function(e){return!1},e}(),d=[function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.e)(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.createObject=function(e){return l.EClass.create({name:e.name})},t.prototype.resolve=function(e,t,n){var i=this.getDynamicTypes(e,t,n.entities);this.resolveAttributes(e,t[n.id],i),this.resolveOperations(e,t[n.id],i),this.resolveLinks(e,t)},t.prototype.hasParent=function(e){return"__global__"!==this.getPackageId(e)},t.prototype.resolveAttributes=function(e,t,n){var i=this,r=t[e.id];Object.values(e.data.attributes).forEach((function(e){r.get("eStructuralFeatures").add(i.getAttribute(e,n))}))},t.prototype.resolveOperations=function(e,t,n){var i=this,r=t[e.id];Object.values(e.data.operations).forEach((function(e){r.get("eOperations").add(i.getOperation(e,n))}))},t.prototype.resolveLinks=function(e,t){},t.prototype.getDynamicTypes=function(e,t,n){var i={};if(e.links){var r=this.getPackageId(e.links);for(var a in e.links){var o=e.links[a];if("connectorBi"===o.type){var s=t[o.eDataId][o.entityId];i.hasOwnProperty(s.get("name"))&&this.getPackageId(n[o.entityId].links)!==r||(i[s.get("name")]=s)}}}return i},t.prototype.getPackageId=function(e){if(e)for(var t in e){var n=e[t];if("parent"===n.type&&"uml.package"===n.handshake)return n.entityId}return"__global__"},t.prototype.getAttribute=function(e,n){if(e.value.type.value){if(t.eCoreClassMap.hasOwnProperty(e.value.type.value))return l.EAttribute.create({name:e.value.name.value,eType:t.eCoreClassMap[e.value.type.value]});if(n.hasOwnProperty(e.value.type.value))return l.EReference.create({name:e.value.name.value,eType:n[e.value.type.value]})}return l.EAttribute.create({name:e.value.name.value})},t.prototype.getOperation=function(e,n){var i=this,r=l.EOperation.create({name:e.value.name.value});return e.value.returnType.value.name.value&&(t.eCoreClassMap.hasOwnProperty(e.value.returnType.value.name.value)?r.set("eType",t.eCoreClassMap[e.value.returnType.value.name.value]):n.hasOwnProperty(e.value.returnType.value.name.value)&&r.set("eType",n[e.value.returnType.value.name.value])),e.value.parameters.value&&Object.values(e.value.parameters.value).forEach((function(e){r.get("eParameters").add(i.getParameter(e,n))})),r},t.prototype.getParameter=function(e,n){if(e.value.type.value){if(t.eCoreClassMap.hasOwnProperty(e.value.type.value))return l.EParameter.create({name:e.value.name.value,eType:t.eCoreClassMap[e.value.type.value]});if(n.hasOwnProperty(e.value.type.value))return l.EParameter.create({name:e.value.name.value,eType:n[e.value.type.value]})}return l.EParameter.create({name:e.value.name.value})},t.eDefId="creately.entity.uml.class",t.eCoreClassMap={string:l.EString,boolean:l.EBoolean,int:l.EInt},t._instance=new t,t}(p),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.e)(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.createObject=function(e){return l.EPackage.create({name:e.name})},t.prototype.resolve=function(e,t,n){this.resolveLinks(e,t,n.id)},t.prototype.resolveLinks=function(e,t,n){if(e.links)for(var i in e.links){var r=e.links[i];"child"===r.type&&"uml.package"===r.handshake&&t[n][e.id].get("eClassifiers").add(t[r.eDataId][r.entityId])}},t.eDefId="creately.entity.uml.package",t._instance=new t,t}(p)],h=n("EM62"),f=function(){function e(e,t){var n=this;this.eDataService=e,this.ll=t,this._models={},d.forEach((function(e){n._models[e.eDefId]=e}))}return e.prototype.exportEcoreModel=function(e){var t=this;return void 0===e&&(e=!1),this.getEcoreModel().pipe(Object(r.a)((function(n){return t.ll.forCurrentObserver(!1).pipe(Object(a.a)(1),Object(r.a)((function(e){return e.getDiagramOnce()})),Object(o.a)((function(t){return{name:t.name,data:e?i.XMI.to(n,!0):n.to()}})))})))},e.prototype.getEcoreModel=function(){var e=this;return this.eDataService.getEdataForCurrentDiagram().pipe(Object(o.a)((function(e){return e.filter((function(e){return"creately.edata.uml"===e.defId}))})),Object(o.a)((function(t){var n={};t.forEach((function(t){n[t.id]={},Object.values(t.entities).filter((function(e){return!!e.data})).forEach((function(i){var r=e.getEcoreModelExporter(i.eDefId);r&&(n[t.id][i.id]=r.createObject(i.data))}))}));var r=i.ResourceSet.create().create({uri:"resources"});return t.forEach((function(t){Object.values(t.entities).filter((function(e){return!!e.data})).forEach((function(i){var a=e.getEcoreModelExporter(i.eDefId);a&&(a.resolve(i,n,t),a.hasParent(i.links)||r.get("contents").add(n[t.id][i.id]))}))})),r})))},e.prototype.getEcoreModelExporter=function(e){return this._models[e]?this._models[e].instance:null},e.\u0275fac=function(t){return new(t||e)(h.pc(s.a),h.pc(c.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},"53e4":function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var i=n("D57K"),r=n("5xGT"),a=n("hX56"),o=n("nsO7"),s=n("C05f"),c=n("P4Xx"),u=n("qZtG"),l=n("6Oco"),p=n("3p4X"),d=n("GoAz"),h=n("wTjk"),f=n("ROBh"),g=n("HM3f"),m=n("wqq/"),v=n("YtkY"),b=n("8j5Y"),y=n("TLy2"),C=n("xVbo"),O=n("Ohay"),x=n("xtkq"),S=n("cJ9h"),k=n("0B/R"),w=n("xATe"),E=n("qMyy"),I=n("1JG0"),T=n("16Fa"),_=n("QoSw"),j=n("oyCe"),P=n("Bbfy"),A=n("EM62"),M=n("s2Ay"),D=n("sEIs"),R=n("2kYt"),L=n("rPyh"),F=n("YucH"),N=n("sIsI");function B(e,t){if(1&e){var n=A.mc();A.lc(0,"history-item",5),A.tc("preview",(function(){return A.Oc(n),A.xc().previewCurrent()}))("renamed",(function(e){A.Oc(n);var i=t.ngIf;return A.xc().createNamedHistoryItem(i.lastChangeId,e.name,e.complete)}))("createCopy",(function(){return A.Oc(n),A.xc().createCopy("CURRENT")})),A.kc()}if(2&e){var i=t.ngIf,r=A.xc();A.Cc("historyItem",i)("active","__CURRENT__"===r.currentSnapshotId)("currentVersion",!0)("restoreEnabled",!1)}}function U(e,t){if(1&e){var n=A.mc();A.lc(0,"history-item",8),A.tc("preview",(function(){A.Oc(n);var e=t.$implicit;return A.xc(2).previewSnapshot(e.lastChangeId)}))("renamed",(function(e){A.Oc(n);var i=t.$implicit;return A.xc(2).createNamedHistoryItem(i.lastChangeId,e.name,e.complete)}))("restore",(function(){A.Oc(n);var e=t.$implicit;return A.xc(2).showRestoreConfimationDialog(e.lastChangeId)}))("createCopy",(function(){A.Oc(n);var e=t.$implicit;return A.xc(2).createCopy(e.lastChangeId)})),A.kc()}if(2&e){var i=t.$implicit,r=A.xc(2);A.Cc("historyItem",i)("active",r.currentSnapshotId===i.lastChangeId)("restoreEnabled",!0)}}function z(e,t){if(1&e){var n=A.mc();A.lc(0,"app-collapsible-menu-item",6),A.tc("activeChange",(function(e){A.Oc(n);var i=t.$implicit;return A.xc().toggleMenuItem(i.title,e)})),A.ad(1,U,1,3,"history-item",7),A.kc()}if(2&e){var i=t.$implicit;A.Cc("title",i.title)("active",i.active),A.Sb(1),A.Cc("ngForOf",i.items)}}var V=function(){function e(e,t,n,i,r,a,o,c,u,l){this.commands=e,this.state=t,this.translateService=n,this.router=i,this.ll=r,this.diffSvc=a,this.historySvc=o,this.dialogBoxController=c,this.notifierController=u,this.dataStore=l,this.id="historyPanel",this.icon="history",this.tooltip=this.translateService.instant("TOOLTIPS.DIAGRAM_HISTORY"),this.currentSnapshotId="__CURRENT__",this.subs=[],this.currentProject="home",this.activeMenus={$first:!0},this.features=new s.a([]),this.notificationMessages=new P.a(this.translateService),this.initRestoreObservable(),this.subs.push(this.getCreateSnapshotHandler().subscribe())}return e.prototype.ngOnInit=function(){var e=this.getDiagramAndHistoryItems().pipe(Object(m.a)(1));this.initHistoryItems(e),this.initCurrentVersion(e),this.subs.push(this.getExitHandler().subscribe())},e.prototype.showRestoreConfimationDialog=function(e){var t=this;r.Lb.track("right.history.timestampActions.restore.click",{value1Type:"newVersion",value1:e,value2Type:"oldVersion",value2:this.currentVersion});var n={id:"right-sb-restore-diagram-confirmation",heading:"DIALOG_BOX.RESTORE_DIAGRAM.HEADING",description:"DIALOG_BOX.RESTORE_DIAGRAM.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RESTORE",clickHandler:function(){return t.restore(e,t.currentVersion)}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){r.Lb.track("dialog.infoHistory.restore.click",{value1Type:"button",value1:"cancel",value2Type:"snapshotId",value2:e})}}]};this.dialogBoxController.showDialog(n)},e.prototype.createCopy=function(e){return r.Lb.track("center.history.copy.click",{value1Type:"diagramId",value1:this.diagramId,value2Type:"snapshotId",value2:e}),this.router.navigate(["start/new/project/"+this.currentProject],{queryParams:{diagramId:this.diagramId,snapshotId:e}})},e.prototype.createNamedHistoryItem=function(e,t,n){this.commands.dispatch(E.a.createDiagramSnapshot,{diagramId:this.diagramId,lastChangeId:e,name:t}).subscribe({complete:function(){n(),r.Lb.track("notification.infoHistory.rename.success",{value1Type:"snapshotId",value1:e})},error:function(){n(),r.Lb.track("notification.infoHistory.rename.fail",{value1Type:"snapshotId",value1:e})}})},e.prototype.restore=function(e,t){var n=this,r=function(e){return Object(o.omit)(e,w.a.ignoreFields)};Object(c.a)([this.historySvc.fetchRawSnapshot(this.diagramId,e).pipe(Object(v.a)(r)),this.ll.forDiagram(this.diagramId,!1).getRawDiagramDataOnce().pipe(Object(v.a)(r))]).pipe(Object(b.a)((function(r){var a=Object(i.h)(r,2),s=a[0],c=a[1];Object(o.isEqual)(s,c)?n.showRestoreFailedWarning():n.restoreDiagram(e,t)}))).subscribe()},e.prototype.previewCurrent=function(){"__CURRENT__"!==this.currentSnapshotId&&(r.Lb.track("center.history.preview.current.click",{value1Type:"diagramId",value1:this.diagramId}),this.resetPreview(),this.currentSnapshotId="__CURRENT__",this.state.set("CurrentSnapshot","__CURRENT__"))},e.prototype.previewSnapshot=function(e){var t=this;return this.currentSnapshotId===e?Promise.resolve(null):(r.Lb.track("right.history.timestamp.click",{value1Type:"snapshotId",value1:e}),this.switchToViewMode().then((function(n){if(n){var i=Object(c.a)({current:t.ll.forDiagram(t.diagramId,!1).getDiagramOnce(),snapshot:t.historySvc.fetchSnapshot(t.diagramId,e)}).pipe(Object(v.a)((function(e){var n=e.current,i=e.snapshot;return t.diffSvc.getSakotaDiff(n,i)})),Object(b.a)((function(e){return t.state.set("PreviewChanges",e)})));"__CURRENT__"!==t.currentSnapshotId&&(i=Object(u.a)(t.resetPreview(),i)),i.subscribe({complete:function(){r.Lb.track("notification.history.previewLoad.success",{value1Type:"snapshotId",value1:e})},error:function(){r.Lb.track("notification.history.previewLoad.fail",{value1Type:"snapshotId",value1:e})}}),t.currentSnapshotId=e,t.state.set("CurrentSnapshot",e),t.state.set("HistoryPreviewMode",!0)}})))},e.prototype.toggleMenuItem=function(e,t){this.activeMenus[e]=t},e.prototype.onActive=function(){r.Lb.track("right.history.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){r.Lb.track("right.history.click",{value1Type:"status",value1:"close"})},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.restoreDiagram=function(e,t){var n=this;r.Lb.track("dialog.infoHistory.restore.click",{value1Type:"button",value1:"restore",value2Type:"snapshotId",value2:e}),"__CURRENT__"!==this.currentSnapshotId&&this.resetPreview(),this.commands.dispatch(E.a.restoreSnapshot,this.diagramId,{diagramId:this.diagramId,lastChangeId:e}).subscribe({complete:function(){r.Lb.track("notification.infoHistory.restore.success",{value1Type:"newVersion",value1:e,value2Type:"oldVersion",value2:t||n.currentVersion}),n.currentSnapshotId="__CURRENT__",n.state.set("CurrentSnapshot","__CURRENT__")},error:function(){r.Lb.track("notification.infoHistory.restore.fail",{value1Type:"newVersion",value1:e,value2Type:"oldVersion",value2:t||n.currentVersion})}})},e.prototype.getCreateSnapshotHandler=function(){var e=this;return this.getCreateSnapshotInterval().pipe(Object(v.a)((function(){return e.state.get("CurrentDiagram")})),Object(y.a)((function(t){return e.historySvc.getLatestHistoryItem(t).pipe(Object(y.a)((function(n){return n?Date.now()-n.ts>3e5?e.dataStore.findOneLatest(j.a,{id:t}).pipe(Object(b.a)((function(i){i.lastChangeId!==n.lastChangeId&&e.createHistoryItem(t)}))):l.a:e.ll.forDiagram(t,!1).getDiagramOnce().pipe(Object(b.a)((function(n){Object.keys(n.shapes).length>0&&e.createHistoryItem(t)})))})))})))},e.prototype.getExitHandler=function(){var e=this;return this.state.changes("HistoryPreviewMode").pipe(Object(C.a)((function(e){return!e})),Object(b.a)((function(){return e.previewCurrent()})))},e.prototype.getCreateSnapshotInterval=function(){return this.restoreEnabled.pipe(Object(y.a)((function(e){return e?Object(p.a)(6e4):l.a})))},e.prototype.createHistoryItem=function(e){return this.commands.dispatch(E.a.createDiagramSnapshot,{diagramId:e})},e.prototype.resetPreview=function(){return this.commands.dispatch(E.a.resetSnapshotPreview)},e.prototype.switchToViewMode=function(){return"view"===this.state.get("InterfaceControlState")?Promise.resolve(!0):this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},e.prototype.showRestoreFailedWarning=function(){var e=this.notificationMessages.getNotificationMessage(P.b.RESTORE_FAILED);this.notifierController.show(P.b.RESTORE_FAILED,e.component,e.type,e.options,e.collapsed)},e.prototype.initHistoryItems=function(e){var t=this;this.historyItems=e.pipe(Object(v.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return n.filter((function(e){return e.lastChangeId!==r.lastChangeId})).reverse()})),Object(O.a)(o.isEqual),Object(y.a)((function(e){return e.length>0?Object(d.a)(e).pipe(Object(x.b)((function(e){return new Date(e.ts).toDateString()})),Object(S.a)((function(e){return Object(h.b)(Object(f.a)(e.key),e.pipe(Object(k.a)()))})),Object(v.a)((function(e){var n=Object(i.h)(e,2),r=n[0];return{title:r,items:n[1],active:!!t.activeMenus[r]}})),Object(k.a)(),Object(b.a)((function(e){t.activeMenus.$first&&(t.activeMenus.$first=!1,t.activeMenus[e[0].title]=!0,e[0].active=!0)}))):Object(f.a)([])})))},e.prototype.initCurrentVersion=function(e){this.currentDocVersion=e.pipe(Object(v.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1],a=n.find((function(e){return e.lastChangeId===r.lastChangeId}));return a||(a={lastChangeId:r.lastChangeId,ts:r.lastUpdated,userIds:[]}),a})))},e.prototype.getDiagramAndHistoryItems=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(b.a)((function(t){e.diagramId=t,e.activeMenus={$first:!0}})),Object(y.a)((function(t){return Object(g.b)([e.historySvc.getHistoryItemsWithUsers(t),e.dataStore.findOne(j.a,{id:t}).pipe(Object(b.a)((function(t){return e.currentVersion=t.lastChangeId})),Object(b.a)((function(t){return e.currentProject=t.project.id})))])})))},e.prototype.initRestoreObservable=function(){this.restoreEnabled=this.features.pipe(Object(v.a)((function(e){var t=e.find((function(e){return"RESTORE"===e.featureId}));return!!t&&t.data.enabled})))},e.\u0275fac=function(t){return new(t||e)(A.fc(r.B),A.fc(r.Jb),A.fc(M.e),A.fc(D.d),A.fc(_.a),A.fc(I.a),A.fc(T.a),A.fc(r.M),A.fc(r.kb),A.fc(a.b))},e.\u0275cmp=A.Zb({type:e,selectors:[["history-panel"]],decls:9,vars:6,consts:[[1,"history-panel"],["translate","",1,"nu2-heading-6"],[1,"history-item-container"],[3,"historyItem","active","currentVersion","restoreEnabled","preview","renamed","createCopy",4,"ngIf"],[3,"title","active","activeChange",4,"ngFor","ngForOf"],[3,"historyItem","active","currentVersion","restoreEnabled","preview","renamed","createCopy"],[3,"title","active","activeChange"],[3,"historyItem","active","restoreEnabled","preview","renamed","restore","createCopy",4,"ngFor","ngForOf"],[3,"historyItem","active","restoreEnabled","preview","renamed","restore","createCopy"]],template:function(e,t){1&e&&(A.lc(0,"div",0),A.lc(1,"h6",1),A.cd(2,"HISTORY_PANEL.HEADER"),A.kc(),A.lc(3,"div",2),A.ad(4,B,1,4,"history-item",3),A.yc(5,"async"),A.lc(6,"app-collapsible-menu"),A.ad(7,z,2,3,"app-collapsible-menu-item",4),A.yc(8,"async"),A.kc(),A.kc(),A.kc()),2&e&&(A.Sb(4),A.Cc("ngIf",A.zc(5,2,t.currentDocVersion)),A.Sb(3),A.Cc("ngForOf",A.zc(8,4,t.historyItems)))},directives:[M.a,R.t,L.a,R.s,F.a,N.a],pipes:[R.b],styles:[".history-panel[_ngcontent-%COMP%]{padding:10px;height:100%}.history-panel[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#04263d}.history-item-container[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:40px;max-height:100%;overflow-y:scroll}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-container.expanded{margin-bottom:0}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-content{overflow:visible}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item:last-child .col-menu-item-container{margin-bottom:25px}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item:last-child .col-menu-item-container.expanded{margin-bottom:65px}"],changeDetection:0}),e}()},"61p6":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("5xGT"),r=n("RrMq"),a=n("EM62"),o=n("s2Ay"),s=function(){function e(e){this.translator=e,this.id="shapeData",this.icon="data",this.width=800,this.disableAutoOpen=!0}return Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.SHAPE_DATA")},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){i.Lb.track("right.data.panel.click",{value1Type:"status",value1:"open"}),this.shapeDataEditor&&this.shapeDataEditor.init()},e.prototype.onInactive=function(){i.Lb.track("right.data.panel.click",{value1Type:"status",value1:"close"}),this.shapeDataEditor&&this.shapeDataEditor.unsubscribe()},e.prototype.ngAfterViewInit=function(){this.shapeDataEditor.init()},e.\u0275fac=function(t){return new(t||e)(a.fc(o.e))},e.\u0275cmp=a.Zb({type:e,selectors:[["shape-data-panel"]],viewQuery:function(e,t){var n;(1&e&&a.hd(r.a,!0),2&e)&&(a.Lc(n=a.uc())&&(t.shapeDataEditor=n.first))},decls:2,vars:0,consts:[["shapeDataEditor",""]],template:function(e,t){1&e&&a.gc(0,"shape-data-editor",null,0)},directives:[r.a],styles:[".shape-data-editor-tabs[_ngcontent-%COMP%]{height:calc(100% - 55px);overflow:hidden}abs-tab[_ngcontent-%COMP%]{display:block;height:100%}.shape-data-editor-overlay[_ngcontent-%COMP%]{z-index:100;background-color:hsla(0,0%,40.8%,.8)}.shape-data-editor-container[_ngcontent-%COMP%]{width:60%;height:calc(100% - 20px);background:#fff;position:relative}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:focus, .shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:hover{background-color:#fff}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label{margin-right:12px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-view{position:relative!important;top:0;left:0;z-index:1000;transform:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-container{position:relative;z-index:2;background:unset;border:unset;box-shadow:unset;border-radius:unset;width:100%;transform:unset}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input-user{display:none}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input{border-top:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area{padding:5px;max-height:650px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu{display:block}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area comment-thread-item:first-child{display:none!important}.shape-data-editor-header[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-top:20px;font-size:18px}.shape-data-editor-header[_ngcontent-%COMP%]  .editable-label{font-size:18px}.shape-data-editor-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.shape-data-editor-icon-container[_ngcontent-%COMP%]{width:100px;margin-right:15px;border-radius:4px 0 0 4px}.shape-data-editor-icon-container.neutral[_ngcontent-%COMP%]{background-color:#40b29e}.shape-data-editor-icon-container.warning[_ngcontent-%COMP%]{background-color:#ffc648}.shape-data-editor-icon-container.success[_ngcontent-%COMP%]{background-color:#61a15e}.shape-data-editor-icon-container.error[_ngcontent-%COMP%]{background-color:#f36c67}.shape-data-editor-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.shape-data-editor-content-text[_ngcontent-%COMP%]{flex:1}.shape-data-editor-button-container[_ngcontent-%COMP%]{text-align:right}.shape-data-editor-close-btn[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute}.shape-data-editor-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}.shape-data-editor-comments-section[_ngcontent-%COMP%]{float:right;width:33%;height:100%;background:#f6f6f9}.shape-data-editor-tabs-section[_ngcontent-%COMP%]{float:left;width:67%;height:100%}.shape-data-editor-comments-header[_ngcontent-%COMP%]{font-size:16px;margin:20px 10px 10px}"],changeDetection:0}),e}()},"6EBr":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.primarySelectionColor="#F39C12",t.primarySelectionLineColor="#FEB986",t.selectionHandleRadius=6,t.selectionHandleLineThickness=1,t.primarySelectionHandleColor="#BABABA",t.secondarySelectionHandleColor="#30BA9B",t.selectionBoundDashStyle=[2,2],t}(n("19Zn").c)},"6T0K":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("5xGT"),r=n("nsO7"),a=n("6Oco"),o=n("19Zn"),s=n("EM62"),c=function(){function e(){this.textFormatter=new o.F}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextDataItemBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["data","texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t===i.A.PREVIEW)return a.a;var n=e.__sakota__.getChanges();return n.$set?(this.applyDataToText(e,n),this.applyTextToData(e,n),a.a):a.a},e.prototype.applyDataToText=function(t,n){var i=this,a=function(a){e.regexData.lastIndex=0;var o,s=e.regexData.exec(a),c=[];if(s)o=s[1],c=[s[2]];else{var u=a.split(".");if(!(2===u.length&&"shapes"===u[0]&&n.$set[a]&&n.$set[a].data))return"continue";o=u[1],c=Object.keys(n.$set[a].data)}var l=t.shapes[o];c.forEach((function(e){var a=l.texts[e];if(!a&&l.eData){var s=t.getShapeDataItems(o)[e];if(s&&s.primaryTextBound&&(a=i.getPrimaryTextModel(l)),a&&!n.$set["shapes."+o+".texts."+e+".content"]){var c=n.$set["shapes."+o+".data."+e+".value"]||(n.$set["shapes."+o+".data."+e]||{}).value||Object(r.get)(n.$set["shapes."+o],"data."+e+".value");c&&a.content&&a.content[0]&&(a.content[0].text=c,a.content=[a.content[0]])}}}))};for(var o in n.$set)a(o)},e.prototype.getPrimaryTextModel=function(e){if(e.texts)return Object(r.toArray)(e.texts).find((function(e){return e&&!0===e.primary}))},e.prototype.applyTextToData=function(t,n){for(var i in n.$set){e.regexText.lastIndex=0;var a=e.regexText.exec(i);if(a){var o=a[1],s=t.shapes[o],c=a[2],u=s.texts[c].editableDataItem?s.texts[c].editableDataItem:c;if(s.texts[c].editable&&s.data){var l=s.data[u];if(!l){var p=t.getShapeDataItems(o),d=Object(r.values)(p).find((function(e){return e.primaryTextBound}));if(d&&(l=s.data[d.id]),!l)continue}"string.html"!==l.type&&"childShapeData"!==l.type&&(l.value=this.textFormatter.plainText(n.$set[i]))}}}},e.regexData=/shapes\.([^\.]+)\.data\.([^\.]+)/g,e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},"6WTZ":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Vn})),n.d(t,"VERSION",(function(){return r})),n.d(t,"restArguments",(function(){return k})),n.d(t,"isObject",(function(){return w})),n.d(t,"isNull",(function(){return E})),n.d(t,"isUndefined",(function(){return I})),n.d(t,"isBoolean",(function(){return T})),n.d(t,"isElement",(function(){return _})),n.d(t,"isString",(function(){return P})),n.d(t,"isNumber",(function(){return A})),n.d(t,"isDate",(function(){return M})),n.d(t,"isRegExp",(function(){return D})),n.d(t,"isError",(function(){return R})),n.d(t,"isSymbol",(function(){return L})),n.d(t,"isArrayBuffer",(function(){return F})),n.d(t,"isDataView",(function(){return W})),n.d(t,"isArray",(function(){return Y})),n.d(t,"isFunction",(function(){return U})),n.d(t,"isArguments",(function(){return K})),n.d(t,"isFinite",(function(){return J})),n.d(t,"isNaN",(function(){return Z})),n.d(t,"isTypedArray",(function(){return re})),n.d(t,"isEmpty",(function(){return ce})),n.d(t,"isMatch",(function(){return ue})),n.d(t,"isEqual",(function(){return fe})),n.d(t,"isMap",(function(){return Se})),n.d(t,"isWeakMap",(function(){return ke})),n.d(t,"isSet",(function(){return we})),n.d(t,"isWeakSet",(function(){return Ee})),n.d(t,"keys",(function(){return se})),n.d(t,"allKeys",(function(){return ge})),n.d(t,"values",(function(){return Ie})),n.d(t,"pairs",(function(){return Te})),n.d(t,"invert",(function(){return _e})),n.d(t,"functions",(function(){return je})),n.d(t,"methods",(function(){return je})),n.d(t,"extend",(function(){return Ae})),n.d(t,"extendOwn",(function(){return Me})),n.d(t,"assign",(function(){return Me})),n.d(t,"defaults",(function(){return De})),n.d(t,"create",(function(){return Le})),n.d(t,"clone",(function(){return Fe})),n.d(t,"tap",(function(){return Ne})),n.d(t,"get",(function(){return Ve})),n.d(t,"has",(function(){return Ge})),n.d(t,"mapObject",(function(){return Ze})),n.d(t,"identity",(function(){return He})),n.d(t,"constant",(function(){return Q})),n.d(t,"noop",(function(){return Qe})),n.d(t,"toPath",(function(){return Be})),n.d(t,"property",(function(){return Ye})),n.d(t,"propertyOf",(function(){return $e})),n.d(t,"matcher",(function(){return We})),n.d(t,"matches",(function(){return We})),n.d(t,"times",(function(){return et})),n.d(t,"random",(function(){return tt})),n.d(t,"now",(function(){return nt})),n.d(t,"escape",(function(){return at})),n.d(t,"unescape",(function(){return ot})),n.d(t,"templateSettings",(function(){return st})),n.d(t,"template",(function(){return ht})),n.d(t,"result",(function(){return ft})),n.d(t,"uniqueId",(function(){return mt})),n.d(t,"chain",(function(){return vt})),n.d(t,"iteratee",(function(){return Ke})),n.d(t,"partial",(function(){return Ct})),n.d(t,"bind",(function(){return Ot})),n.d(t,"bindAll",(function(){return kt})),n.d(t,"memoize",(function(){return wt})),n.d(t,"delay",(function(){return Et})),n.d(t,"defer",(function(){return It})),n.d(t,"throttle",(function(){return Tt})),n.d(t,"debounce",(function(){return _t})),n.d(t,"wrap",(function(){return jt})),n.d(t,"negate",(function(){return Pt})),n.d(t,"compose",(function(){return At})),n.d(t,"after",(function(){return Mt})),n.d(t,"before",(function(){return Dt})),n.d(t,"once",(function(){return Rt})),n.d(t,"findKey",(function(){return Lt})),n.d(t,"findIndex",(function(){return Nt})),n.d(t,"findLastIndex",(function(){return Bt})),n.d(t,"sortedIndex",(function(){return Ut})),n.d(t,"indexOf",(function(){return Vt})),n.d(t,"lastIndexOf",(function(){return Gt})),n.d(t,"find",(function(){return Ht})),n.d(t,"detect",(function(){return Ht})),n.d(t,"findWhere",(function(){return Wt})),n.d(t,"each",(function(){return Yt})),n.d(t,"forEach",(function(){return Yt})),n.d(t,"map",(function(){return Xt})),n.d(t,"collect",(function(){return Xt})),n.d(t,"reduce",(function(){return Kt})),n.d(t,"foldl",(function(){return Kt})),n.d(t,"inject",(function(){return Kt})),n.d(t,"reduceRight",(function(){return Jt})),n.d(t,"foldr",(function(){return Jt})),n.d(t,"filter",(function(){return Zt})),n.d(t,"select",(function(){return Zt})),n.d(t,"reject",(function(){return Qt})),n.d(t,"every",(function(){return $t})),n.d(t,"all",(function(){return $t})),n.d(t,"some",(function(){return en})),n.d(t,"any",(function(){return en})),n.d(t,"contains",(function(){return tn})),n.d(t,"includes",(function(){return tn})),n.d(t,"include",(function(){return tn})),n.d(t,"invoke",(function(){return nn})),n.d(t,"pluck",(function(){return rn})),n.d(t,"where",(function(){return an})),n.d(t,"max",(function(){return on})),n.d(t,"min",(function(){return sn})),n.d(t,"shuffle",(function(){return un})),n.d(t,"sample",(function(){return cn})),n.d(t,"sortBy",(function(){return ln})),n.d(t,"groupBy",(function(){return dn})),n.d(t,"indexBy",(function(){return hn})),n.d(t,"countBy",(function(){return fn})),n.d(t,"partition",(function(){return gn})),n.d(t,"toArray",(function(){return vn})),n.d(t,"size",(function(){return bn})),n.d(t,"pick",(function(){return Cn})),n.d(t,"omit",(function(){return On})),n.d(t,"first",(function(){return Sn})),n.d(t,"head",(function(){return Sn})),n.d(t,"take",(function(){return Sn})),n.d(t,"initial",(function(){return xn})),n.d(t,"last",(function(){return wn})),n.d(t,"rest",(function(){return kn})),n.d(t,"tail",(function(){return kn})),n.d(t,"drop",(function(){return kn})),n.d(t,"compact",(function(){return En})),n.d(t,"flatten",(function(){return In})),n.d(t,"without",(function(){return _n})),n.d(t,"uniq",(function(){return jn})),n.d(t,"unique",(function(){return jn})),n.d(t,"union",(function(){return Pn})),n.d(t,"intersection",(function(){return An})),n.d(t,"difference",(function(){return Tn})),n.d(t,"unzip",(function(){return Mn})),n.d(t,"transpose",(function(){return Mn})),n.d(t,"zip",(function(){return Dn})),n.d(t,"object",(function(){return Rn})),n.d(t,"range",(function(){return Ln})),n.d(t,"chunk",(function(){return Fn})),n.d(t,"mixin",(function(){return Bn}));var i={};n.r(i),n.d(i,"VERSION",(function(){return r})),n.d(i,"restArguments",(function(){return k})),n.d(i,"isObject",(function(){return w})),n.d(i,"isNull",(function(){return E})),n.d(i,"isUndefined",(function(){return I})),n.d(i,"isBoolean",(function(){return T})),n.d(i,"isElement",(function(){return _})),n.d(i,"isString",(function(){return P})),n.d(i,"isNumber",(function(){return A})),n.d(i,"isDate",(function(){return M})),n.d(i,"isRegExp",(function(){return D})),n.d(i,"isError",(function(){return R})),n.d(i,"isSymbol",(function(){return L})),n.d(i,"isArrayBuffer",(function(){return F})),n.d(i,"isDataView",(function(){return W})),n.d(i,"isArray",(function(){return Y})),n.d(i,"isFunction",(function(){return U})),n.d(i,"isArguments",(function(){return K})),n.d(i,"isFinite",(function(){return J})),n.d(i,"isNaN",(function(){return Z})),n.d(i,"isTypedArray",(function(){return re})),n.d(i,"isEmpty",(function(){return ce})),n.d(i,"isMatch",(function(){return ue})),n.d(i,"isEqual",(function(){return fe})),n.d(i,"isMap",(function(){return Se})),n.d(i,"isWeakMap",(function(){return ke})),n.d(i,"isSet",(function(){return we})),n.d(i,"isWeakSet",(function(){return Ee})),n.d(i,"keys",(function(){return se})),n.d(i,"allKeys",(function(){return ge})),n.d(i,"values",(function(){return Ie})),n.d(i,"pairs",(function(){return Te})),n.d(i,"invert",(function(){return _e})),n.d(i,"functions",(function(){return je})),n.d(i,"methods",(function(){return je})),n.d(i,"extend",(function(){return Ae})),n.d(i,"extendOwn",(function(){return Me})),n.d(i,"assign",(function(){return Me})),n.d(i,"defaults",(function(){return De})),n.d(i,"create",(function(){return Le})),n.d(i,"clone",(function(){return Fe})),n.d(i,"tap",(function(){return Ne})),n.d(i,"get",(function(){return Ve})),n.d(i,"has",(function(){return Ge})),n.d(i,"mapObject",(function(){return Ze})),n.d(i,"identity",(function(){return He})),n.d(i,"constant",(function(){return Q})),n.d(i,"noop",(function(){return Qe})),n.d(i,"toPath",(function(){return Be})),n.d(i,"property",(function(){return Ye})),n.d(i,"propertyOf",(function(){return $e})),n.d(i,"matcher",(function(){return We})),n.d(i,"matches",(function(){return We})),n.d(i,"times",(function(){return et})),n.d(i,"random",(function(){return tt})),n.d(i,"now",(function(){return nt})),n.d(i,"escape",(function(){return at})),n.d(i,"unescape",(function(){return ot})),n.d(i,"templateSettings",(function(){return st})),n.d(i,"template",(function(){return ht})),n.d(i,"result",(function(){return ft})),n.d(i,"uniqueId",(function(){return mt})),n.d(i,"chain",(function(){return vt})),n.d(i,"iteratee",(function(){return Ke})),n.d(i,"partial",(function(){return Ct})),n.d(i,"bind",(function(){return Ot})),n.d(i,"bindAll",(function(){return kt})),n.d(i,"memoize",(function(){return wt})),n.d(i,"delay",(function(){return Et})),n.d(i,"defer",(function(){return It})),n.d(i,"throttle",(function(){return Tt})),n.d(i,"debounce",(function(){return _t})),n.d(i,"wrap",(function(){return jt})),n.d(i,"negate",(function(){return Pt})),n.d(i,"compose",(function(){return At})),n.d(i,"after",(function(){return Mt})),n.d(i,"before",(function(){return Dt})),n.d(i,"once",(function(){return Rt})),n.d(i,"findKey",(function(){return Lt})),n.d(i,"findIndex",(function(){return Nt})),n.d(i,"findLastIndex",(function(){return Bt})),n.d(i,"sortedIndex",(function(){return Ut})),n.d(i,"indexOf",(function(){return Vt})),n.d(i,"lastIndexOf",(function(){return Gt})),n.d(i,"find",(function(){return Ht})),n.d(i,"detect",(function(){return Ht})),n.d(i,"findWhere",(function(){return Wt})),n.d(i,"each",(function(){return Yt})),n.d(i,"forEach",(function(){return Yt})),n.d(i,"map",(function(){return Xt})),n.d(i,"collect",(function(){return Xt})),n.d(i,"reduce",(function(){return Kt})),n.d(i,"foldl",(function(){return Kt})),n.d(i,"inject",(function(){return Kt})),n.d(i,"reduceRight",(function(){return Jt})),n.d(i,"foldr",(function(){return Jt})),n.d(i,"filter",(function(){return Zt})),n.d(i,"select",(function(){return Zt})),n.d(i,"reject",(function(){return Qt})),n.d(i,"every",(function(){return $t})),n.d(i,"all",(function(){return $t})),n.d(i,"some",(function(){return en})),n.d(i,"any",(function(){return en})),n.d(i,"contains",(function(){return tn})),n.d(i,"includes",(function(){return tn})),n.d(i,"include",(function(){return tn})),n.d(i,"invoke",(function(){return nn})),n.d(i,"pluck",(function(){return rn})),n.d(i,"where",(function(){return an})),n.d(i,"max",(function(){return on})),n.d(i,"min",(function(){return sn})),n.d(i,"shuffle",(function(){return un})),n.d(i,"sample",(function(){return cn})),n.d(i,"sortBy",(function(){return ln})),n.d(i,"groupBy",(function(){return dn})),n.d(i,"indexBy",(function(){return hn})),n.d(i,"countBy",(function(){return fn})),n.d(i,"partition",(function(){return gn})),n.d(i,"toArray",(function(){return vn})),n.d(i,"size",(function(){return bn})),n.d(i,"pick",(function(){return Cn})),n.d(i,"omit",(function(){return On})),n.d(i,"first",(function(){return Sn})),n.d(i,"head",(function(){return Sn})),n.d(i,"take",(function(){return Sn})),n.d(i,"initial",(function(){return xn})),n.d(i,"last",(function(){return wn})),n.d(i,"rest",(function(){return kn})),n.d(i,"tail",(function(){return kn})),n.d(i,"drop",(function(){return kn})),n.d(i,"compact",(function(){return En})),n.d(i,"flatten",(function(){return In})),n.d(i,"without",(function(){return _n})),n.d(i,"uniq",(function(){return jn})),n.d(i,"unique",(function(){return jn})),n.d(i,"union",(function(){return Pn})),n.d(i,"intersection",(function(){return An})),n.d(i,"difference",(function(){return Tn})),n.d(i,"unzip",(function(){return Mn})),n.d(i,"transpose",(function(){return Mn})),n.d(i,"zip",(function(){return Dn})),n.d(i,"object",(function(){return Rn})),n.d(i,"range",(function(){return Ln})),n.d(i,"chunk",(function(){return Fn})),n.d(i,"mixin",(function(){return Bn})),n.d(i,"default",(function(){return Un}));var r="1.13.1",a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},o=Array.prototype,s=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,u=o.push,l=o.slice,p=s.toString,d=s.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,b=h&&ArrayBuffer.isView,y=isNaN,C=isFinite,O=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function k(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var a=Array(t+1);for(r=0;r<t;r++)a[r]=arguments[r];return a[t]=i,e.apply(this,a)}}function w(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function E(e){return null===e}function I(e){return void 0===e}function T(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)}function _(e){return!(!e||1!==e.nodeType)}function j(e){var t="[object "+e+"]";return function(e){return p.call(e)===t}}var P=j("String"),A=j("Number"),M=j("Date"),D=j("RegExp"),R=j("Error"),L=j("Symbol"),F=j("ArrayBuffer"),N=j("Function"),B=a.document&&a.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof B&&(N=function(e){return"function"==typeof e||!1});var U=N,z=j("Object"),V=f&&z(new DataView(new ArrayBuffer(8))),G="undefined"!=typeof Map&&z(new Map),H=j("DataView");var W=V?function(e){return null!=e&&U(e.getInt8)&&F(e.buffer)}:H,Y=g||j("Array");function X(e,t){return null!=e&&d.call(e,t)}var q=j("Arguments");!function(){q(arguments)||(q=function(e){return X(e,"callee")})}();var K=q;function J(e){return!L(e)&&C(e)&&!isNaN(parseFloat(e))}function Z(e){return A(e)&&y(e)}function Q(e){return function(){return e}}function $(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=S}}function ee(e){return function(t){return null==t?void 0:t[e]}}var te=ee("byteLength"),ne=$(te),ie=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var re=h?function(e){return b?b(e)&&!W(e):ne(e)&&ie.test(p.call(e))}:Q(!1),ae=ee("length");function oe(e,t){t=function(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=x.length,i=e.constructor,r=U(i)&&i.prototype||s,a="constructor";for(X(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=x[n])in e&&e[a]!==r[a]&&!t.contains(a)&&t.push(a)}function se(e){if(!w(e))return[];if(m)return m(e);var t=[];for(var n in e)X(e,n)&&t.push(n);return O&&oe(e,t),t}function ce(e){if(null==e)return!0;var t=ae(e);return"number"==typeof t&&(Y(e)||P(e)||K(e))?0===t:0===ae(se(e))}function ue(e,t){var n=se(t),i=n.length;if(null==e)return!i;for(var r=Object(e),a=0;a<i;a++){var o=n[a];if(t[o]!==r[o]||!(o in r))return!1}return!0}function le(e){return e instanceof le?e:this instanceof le?void(this._wrapped=e):new le(e)}function pe(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,te(e))}le.VERSION=r,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};var de="[object DataView]";function he(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&function e(t,n,i,r){t instanceof le&&(t=t._wrapped);n instanceof le&&(n=n._wrapped);var a=p.call(t);if(a!==p.call(n))return!1;if(V&&"[object Object]"==a&&W(t)){if(!W(n))return!1;a=de}switch(a){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(n);case"[object ArrayBuffer]":case de:return e(pe(t),pe(n),i,r)}var o="[object Array]"===a;if(!o&&re(t)){if(te(t)!==te(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var s=t.constructor,u=n.constructor;if(s!==u&&!(U(s)&&s instanceof s&&U(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];var l=(i=i||[]).length;for(;l--;)if(i[l]===t)return r[l]===n;if(i.push(t),r.push(n),o){if((l=t.length)!==n.length)return!1;for(;l--;)if(!he(t[l],n[l],i,r))return!1}else{var d,h=se(t);if(l=h.length,se(n).length!==l)return!1;for(;l--;)if(!X(n,d=h[l])||!he(t[d],n[d],i,r))return!1}return i.pop(),r.pop(),!0}(e,t,n,i)}function fe(e,t){return he(e,t)}function ge(e){if(!w(e))return[];var t=[];for(var n in e)t.push(n);return O&&oe(e,t),t}function me(e){var t=ae(e);return function(n){if(null==n)return!1;var i=ge(n);if(ae(i))return!1;for(var r=0;r<t;r++)if(!U(n[e[r]]))return!1;return e!==Oe||!U(n[ve])}}var ve="forEach",be=["clear","delete"],ye=["get","has","set"],Ce=be.concat(ve,ye),Oe=be.concat(ye),xe=["add"].concat(be,ve,"has"),Se=G?me(Ce):j("Map"),ke=G?me(Oe):j("WeakMap"),we=G?me(xe):j("Set"),Ee=j("WeakSet");function Ie(e){for(var t=se(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i}function Te(e){for(var t=se(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i}function _e(e){for(var t={},n=se(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t}function je(e){var t=[];for(var n in e)U(e[n])&&t.push(n);return t.sort()}function Pe(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var a=arguments[r],o=e(a),s=o.length,c=0;c<s;c++){var u=o[c];t&&void 0!==n[u]||(n[u]=a[u])}return n}}var Ae=Pe(ge),Me=Pe(se),De=Pe(ge,!0);function Re(e){if(!w(e))return{};if(v)return v(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Le(e,t){var n=Re(e);return t&&Me(n,t),n}function Fe(e){return w(e)?Y(e)?e.slice():Ae({},e):e}function Ne(e,t){return t(e),e}function Be(e){return Y(e)?e:[e]}function Ue(e){return le.toPath(e)}function ze(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function Ve(e,t,n){var i=ze(e,Ue(t));return I(i)?n:i}function Ge(e,t){for(var n=(t=Ue(t)).length,i=0;i<n;i++){var r=t[i];if(!X(e,r))return!1;e=e[r]}return!!n}function He(e){return e}function We(e){return e=Me({},e),function(t){return ue(t,e)}}function Ye(e){return e=Ue(e),function(t){return ze(t,e)}}function Xe(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)}}return function(){return e.apply(t,arguments)}}function qe(e,t,n){return null==e?He:U(e)?Xe(e,t,n):w(e)&&!Y(e)?We(e):Ye(e)}function Ke(e,t){return qe(e,t,1/0)}function Je(e,t,n){return le.iteratee!==Ke?le.iteratee(e,t):qe(e,t,n)}function Ze(e,t,n){t=Je(t,n);for(var i=se(e),r=i.length,a={},o=0;o<r;o++){var s=i[o];a[s]=t(e[s],s,e)}return a}function Qe(){}function $e(e){return null==e?Qe:function(t){return Ve(e,t)}}function et(e,t,n){var i=Array(Math.max(0,e));t=Xe(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i}function tt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}le.toPath=Be,le.iteratee=Ke;var nt=Date.now||function(){return(new Date).getTime()};function it(e){var t=function(t){return e[t]},n="(?:"+se(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}}var rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},at=it(rt),ot=it(_e(rt)),st=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ct=/(.)^/,ut={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},lt=/\\|'|\r|\n|\u2028|\u2029/g;function pt(e){return"\\"+ut[e]}var dt=/^\s*(\w|\$)+\s*$/;function ht(e,t,n){!t&&n&&(t=n),t=De({},t,le.templateSettings);var i=RegExp([(t.escape||ct).source,(t.interpolate||ct).source,(t.evaluate||ct).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,o,s){return a+=e.slice(r,s).replace(lt,pt),r=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t})),a+="';\n";var o,s=t.variable;if(s){if(!dt.test(s))throw new Error("variable is not a bare identifier: "+s)}else a="with(obj||{}){\n"+a+"}\n",s="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{o=new Function(s,"_",a)}catch(u){throw u.source=a,u}var c=function(e){return o.call(this,e,le)};return c.source="function("+s+"){\n"+a+"}",c}function ft(e,t,n){var i=(t=Ue(t)).length;if(!i)return U(n)?n.call(e):n;for(var r=0;r<i;r++){var a=null==e?void 0:e[t[r]];void 0===a&&(a=n,r=i),e=U(a)?a.call(e):a}return e}var gt=0;function mt(e){var t=++gt+"";return e?e+t:t}function vt(e){var t=le(e);return t._chain=!0,t}function bt(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=Re(e.prototype),o=e.apply(a,r);return w(o)?o:a}var yt=k((function(e,t){var n=yt.placeholder;return function i(){for(var r=0,a=t.length,o=Array(a),s=0;s<a;s++)o[s]=t[s]===n?arguments[r++]:t[s];for(;r<arguments.length;)o.push(arguments[r++]);return bt(e,i,this,this,o)}}));yt.placeholder=le;var Ct=yt,Ot=k((function(e,t,n){if(!U(e))throw new TypeError("Bind must be called on a function");var i=k((function(r){return bt(e,i,t,this,n.concat(r))}));return i})),xt=$(ae);function St(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var r=i.length,a=0,o=ae(e);a<o;a++){var s=e[a];if(xt(s)&&(Y(s)||K(s)))if(t>1)St(s,t-1,n,i),r=i.length;else for(var c=0,u=s.length;c<u;)i[r++]=s[c++];else n||(i[r++]=s)}return i}var kt=k((function(e,t){var n=(t=St(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=Ot(e[i],e)}return e}));function wt(e,t){var n=function n(i){var r=n.cache,a=""+(t?t.apply(this,arguments):i);return X(r,a)||(r[a]=e.apply(this,arguments)),r[a]};return n.cache={},n}var Et=k((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),It=Ct(Et,le,1);function Tt(e,t,n){var i,r,a,o,s=0;n||(n={});var c=function(){s=!1===n.leading?0:nt(),i=null,o=e.apply(r,a),i||(r=a=null)},u=function(){var u=nt();s||!1!==n.leading||(s=u);var l=t-(u-s);return r=this,a=arguments,l<=0||l>t?(i&&(clearTimeout(i),i=null),s=u,o=e.apply(r,a),i||(r=a=null)):i||!1===n.trailing||(i=setTimeout(c,l)),o};return u.cancel=function(){clearTimeout(i),s=0,i=r=a=null},u}function _t(e,t,n){var i,r,a,o,s,c=function c(){var u=nt()-r;t>u?i=setTimeout(c,t-u):(i=null,n||(o=e.apply(s,a)),i||(a=s=null))},u=k((function(u){return s=this,a=u,r=nt(),i||(i=setTimeout(c,t),n&&(o=e.apply(s,a))),o}));return u.cancel=function(){clearTimeout(i),i=a=s=null},u}function jt(e,t){return Ct(t,e)}function Pt(e){return function(){return!e.apply(this,arguments)}}function At(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function Mt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Dt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Rt=Ct(Dt,2);function Lt(e,t,n){t=Je(t,n);for(var i,r=se(e),a=0,o=r.length;a<o;a++)if(t(e[i=r[a]],i,e))return i}function Ft(e){return function(t,n,i){n=Je(n,i);for(var r=ae(t),a=e>0?0:r-1;a>=0&&a<r;a+=e)if(n(t[a],a,t))return a;return-1}}var Nt=Ft(1),Bt=Ft(-1);function Ut(e,t,n,i){for(var r=(n=Je(n,i,1))(t),a=0,o=ae(e);a<o;){var s=Math.floor((a+o)/2);n(e[s])<r?a=s+1:o=s}return a}function zt(e,t,n){return function(i,r,a){var o=0,s=ae(i);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return i[a=n(i,r)]===r?a:-1;if(r!=r)return(a=t(l.call(i,o,s),Z))>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&a<s;a+=e)if(i[a]===r)return a;return-1}}var Vt=zt(1,Nt,Ut),Gt=zt(-1,Bt);function Ht(e,t,n){var i=(xt(e)?Nt:Lt)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function Wt(e,t){return Ht(e,We(t))}function Yt(e,t,n){var i,r;if(t=Xe(t,n),xt(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var a=se(e);for(i=0,r=a.length;i<r;i++)t(e[a[i]],a[i],e)}return e}function Xt(e,t,n){t=Je(t,n);for(var i=!xt(e)&&se(e),r=(i||e).length,a=Array(r),o=0;o<r;o++){var s=i?i[o]:o;a[o]=t(e[s],s,e)}return a}function qt(e){var t=function(t,n,i,r){var a=!xt(t)&&se(t),o=(a||t).length,s=e>0?0:o-1;for(r||(i=t[a?a[s]:s],s+=e);s>=0&&s<o;s+=e){var c=a?a[s]:s;i=n(i,t[c],c,t)}return i};return function(e,n,i,r){var a=arguments.length>=3;return t(e,Xe(n,r,4),i,a)}}var Kt=qt(1),Jt=qt(-1);function Zt(e,t,n){var i=[];return t=Je(t,n),Yt(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function Qt(e,t,n){return Zt(e,Pt(Je(t)),n)}function $t(e,t,n){t=Je(t,n);for(var i=!xt(e)&&se(e),r=(i||e).length,a=0;a<r;a++){var o=i?i[a]:a;if(!t(e[o],o,e))return!1}return!0}function en(e,t,n){t=Je(t,n);for(var i=!xt(e)&&se(e),r=(i||e).length,a=0;a<r;a++){var o=i?i[a]:a;if(t(e[o],o,e))return!0}return!1}function tn(e,t,n,i){return xt(e)||(e=Ie(e)),("number"!=typeof n||i)&&(n=0),Vt(e,t,n)>=0}var nn=k((function(e,t,n){var i,r;return U(t)?r=t:(t=Ue(t),i=t.slice(0,-1),t=t[t.length-1]),Xt(e,(function(e){var a=r;if(!a){if(i&&i.length&&(e=ze(e,i)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)}))}));function rn(e,t){return Xt(e,Ye(t))}function an(e,t){return Zt(e,We(t))}function on(e,t,n){var i,r,a=-1/0,o=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=xt(e)?e:Ie(e)).length;s<c;s++)null!=(i=e[s])&&i>a&&(a=i);else t=Je(t,n),Yt(e,(function(e,n,i){((r=t(e,n,i))>o||r===-1/0&&a===-1/0)&&(a=e,o=r)}));return a}function sn(e,t,n){var i,r,a=1/0,o=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=xt(e)?e:Ie(e)).length;s<c;s++)null!=(i=e[s])&&i<a&&(a=i);else t=Je(t,n),Yt(e,(function(e,n,i){((r=t(e,n,i))<o||r===1/0&&a===1/0)&&(a=e,o=r)}));return a}function cn(e,t,n){if(null==t||n)return xt(e)||(e=Ie(e)),e[tt(e.length-1)];var i=xt(e)?Fe(e):Ie(e),r=ae(i);t=Math.max(Math.min(t,r),0);for(var a=r-1,o=0;o<t;o++){var s=tt(o,a),c=i[o];i[o]=i[s],i[s]=c}return i.slice(0,t)}function un(e){return cn(e,1/0)}function ln(e,t,n){var i=0;return t=Je(t,n),rn(Xt(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")}function pn(e,t){return function(n,i,r){var a=t?[[],[]]:{};return i=Je(i,r),Yt(n,(function(t,r){var o=i(t,r,n);e(a,t,o)})),a}}var dn=pn((function(e,t,n){X(e,n)?e[n].push(t):e[n]=[t]})),hn=pn((function(e,t,n){e[n]=t})),fn=pn((function(e,t,n){X(e,n)?e[n]++:e[n]=1})),gn=pn((function(e,t,n){e[n?0:1].push(t)}),!0),mn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function vn(e){return e?Y(e)?l.call(e):P(e)?e.match(mn):xt(e)?Xt(e,He):Ie(e):[]}function bn(e){return null==e?0:xt(e)?e.length:se(e).length}function yn(e,t,n){return t in n}var Cn=k((function(e,t){var n={},i=t[0];if(null==e)return n;U(i)?(t.length>1&&(i=Xe(i,t[1])),t=ge(e)):(i=yn,t=St(t,!1,!1),e=Object(e));for(var r=0,a=t.length;r<a;r++){var o=t[r],s=e[o];i(s,o,e)&&(n[o]=s)}return n})),On=k((function(e,t){var n,i=t[0];return U(i)?(i=Pt(i),t.length>1&&(n=t[1])):(t=Xt(St(t,!1,!1),String),i=function(e,n){return!tn(t,n)}),Cn(e,i,n)}));function xn(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Sn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:xn(e,e.length-t)}function kn(e,t,n){return l.call(e,null==t||n?1:t)}function wn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:kn(e,Math.max(0,e.length-t))}function En(e){return Zt(e,Boolean)}function In(e,t){return St(e,t,!1)}var Tn=k((function(e,t){return t=St(t,!0,!0),Zt(e,(function(e){return!tn(t,e)}))})),_n=k((function(e,t){return Tn(e,t)}));function jn(e,t,n,i){T(t)||(i=n,n=t,t=!1),null!=n&&(n=Je(n,i));for(var r=[],a=[],o=0,s=ae(e);o<s;o++){var c=e[o],u=n?n(c,o,e):c;t&&!n?(o&&a===u||r.push(c),a=u):n?tn(a,u)||(a.push(u),r.push(c)):tn(r,c)||r.push(c)}return r}var Pn=k((function(e){return jn(St(e,!0,!0))}));function An(e){for(var t=[],n=arguments.length,i=0,r=ae(e);i<r;i++){var a=e[i];if(!tn(t,a)){var o;for(o=1;o<n&&tn(arguments[o],a);o++);o===n&&t.push(a)}}return t}function Mn(e){for(var t=e&&on(e,ae).length||0,n=Array(t),i=0;i<t;i++)n[i]=rn(e,i);return n}var Dn=k(Mn);function Rn(e,t){for(var n={},i=0,r=ae(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function Ln(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),a=0;a<i;a++,e+=n)r[a]=e;return r}function Fn(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(l.call(e,i,i+=t));return n}function Nn(e,t){return e._chain?le(t).chain():t}function Bn(e){return Yt(je(e),(function(t){var n=le[t]=e[t];le.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Nn(this,n.apply(le,e))}})),le}Yt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o[e];le.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Nn(this,n)}})),Yt(["concat","join","slice"],(function(e){var t=o[e];le.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Nn(this,e)}}));var Un=le,zn=Bn(i);zn._=zn;var Vn=zn},"6qzS":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),r=n("am9W"),a=n("nsO7"),o=n("EM62"),s=function(){function e(){this.allShapeLibraries=Object(i.j)([{id:"arrows",label:"Arrows",groups:["General"]},{id:"archimate-application",label:"Archimate Application",groups:["Archimate"]},{id:"archimate-business",label:"Archimate Business",groups:["Archimate"]},{id:"archimate-composite",label:"Archimate Composite",groups:["Archimate"]},{id:"archimate-implementation",label:"Archimate Implementation",groups:["Archimate"]},{id:"archimate-motivation",label:"Archimate Motivation",groups:["Archimate"]},{id:"archimate-physical",label:"Archimate Physical",groups:["Archimate"]},{id:"archimate-strategy",label:"Archimate Strategy",groups:["Archimate"]},{id:"archimate-technology",label:"Archimate Technology",groups:["Archimate"]},{id:"aws-analytics",label:"AWS Analytics",groups:["AWS"]},{id:"aws-app-integration",label:"AWS App Integration",groups:["AWS"]},{id:"aws-ar-vr",label:"AWS AR & VR",groups:["AWS"]},{id:"aws-blockchain",label:"AWS Blockchain",groups:["AWS"]},{id:"aws-business-applications",label:"AWS Business Applications",groups:["AWS"]},{id:"aws-cdn",label:"AWS CDN",groups:["AWS"]},{id:"aws-compute",label:"AWS Compute",groups:["AWS"]},{id:"aws-cost-management",label:"AWS Cost Management",groups:["AWS"]},{id:"aws-customer-engagement",label:"AWS Customer Engagement",groups:["AWS"]},{id:"aws-database",label:"AWS Database",groups:["AWS"]},{id:"aws-general",label:"AWS General",groups:["AWS"]},{id:"aws-governance",label:"AWS Governance",groups:["AWS"]},{id:"aws-group-icons",label:"AWS Group Icons",groups:["AWS"]},{id:"aws-iot",label:"AWS IOT",groups:["AWS"]},{id:"aws-media",label:"AWS Media",groups:["AWS"]},{id:"aws-ml",label:"AWS ML",groups:["AWS"]},{id:"aws-mobile",label:"AWS Mobile",groups:["AWS"]},{id:"aws-other",label:"AWS Other",groups:["AWS"]},{id:"aws-security",label:"AWS Security",groups:["AWS"]},{id:"aws-storage",label:"AWS Storage",groups:["AWS"]},{id:"block",label:"Block Shapes",groups:["General"]},{id:"bpmn",label:"BPMN Shapes",groups:["Business"]},{id:"chemistry-lab-equipment",label:"Chemistry Lab",groups:["Other"]},{id:"concept-map",label:"Concept Maps",groups:["Brainstorming","Business"]},{id:"database",label:"Database Diagram",groups:["Software"]},{id:"dfd-gs",label:"Data Flow Diagrams - GS",groups:["Software"]},{id:"dfd-yc",label:"Data Flow Diagrams - YC",groups:["Software"]},{id:"entity-relationship-cf",label:"Entity Relationship - Crows Foot",groups:["Software"]},{id:"entity-relationship-chens",label:"Entity Relationship - Chens",groups:["Software"]},{id:"flowchart",label:"Flowchart",groups:["Business","Software","Brainstorming"]},{id:"frames",label:"Frames",groups:["Business","Software","Brainstorming"]},{id:"gantt",label:"Gantt Chart",groups:["Business"]},{id:"general",label:"Basic Shapes",groups:["General"]},{id:"venn",label:"Venn Diagram",groups:["Business","Brainstorming"]},{id:"timeline",label:"Timeline Diagram",groups:["Business","Brainstorming"]},{id:"infographics",label:"Infographics",groups:["Business"]},{id:"vsm",label:"Value Stream Map",groups:["Business"]},{id:"mindmap",label:"Mindmaps",groups:["Brainstorming"]},{id:"network-rack",label:"Network Rack Shapes",groups:["IT & Networking"]},{id:"org-chart",label:"Organizational Charts",groups:["Business"]},{id:"simple-network",label:"Network Shapes",groups:["IT & Networking"]},{id:"site-map",label:"Site Maps and UX Flows",groups:["Software"]},{id:"stars-and-balloons",label:"Stars and Balloons",groups:["General"]},{id:"swot",label:"SWOT Diagrams",groups:["Brainstorming","Business"]},{id:"tqm",label:"Total Quality Management (TQM)",groups:["Business"]},{id:"ui-mockup",label:"UI Mockup",groups:["Software"]},{id:"uml-activity",label:"UML Activity",groups:["Software"]},{id:"uml-class",label:"UML Class",groups:["Software"]},{id:"uml-communication",label:"UML Collaboration",groups:["Software"]},{id:"uml-sequence",label:"UML Sequence",groups:["Software"]},{id:"uml-state-machine",label:"UML State Machine",groups:["Software"]},{id:"use-case",label:"UML Use Case",groups:["Software"]},{id:"cisco-products",label:"Cisco Products",groups:["Cisco"]},{id:"cisco-miscellaneous",label:"Cisco Miscellaneous",groups:["Cisco"]},{id:"gcp-ai-and-machine-learning",label:"Google Cloud AI & Machine Learning",groups:["Google Cloud"]},{id:"gcp-api-management",label:"Google Cloud API Management",groups:["Google Cloud"]},{id:"gcp-compute",label:"Google Cloud Compute",groups:["Google Cloud"]},{id:"gcp-data-analytics",label:"Google Cloud Data Analytics",groups:["Google Cloud"]},{id:"gcp-databases",label:"Google Cloud Databases",groups:["Google Cloud"]},{id:"gcp-developer-tools",label:"Google Cloud Developer Tools",groups:["Google Cloud"]},{id:"gcp-hybrid-and-multi-cloud",label:"Google Cloud Hybrid & Multi Cloud",groups:["Google Cloud"]},{id:"gcp-internet-of-things",label:"Google Cloud IoT",groups:["Google Cloud"]},{id:"gcp-management-tools",label:"Google Cloud Management Tools",groups:["Google Cloud"]},{id:"gcp-migration",label:"Google Cloud Migration",groups:["Google Cloud"]},{id:"gcp-networking",label:"Google Cloud Networking",groups:["Google Cloud"]},{id:"gcp-security",label:"Google Cloud Security",groups:["Google Cloud"]},{id:"gcp-storage",label:"Google Cloud Storage",groups:["Google Cloud"]},{id:"azure-ai-and-ml",label:"Azure AI and ML",groups:["Microsoft Azure"]},{id:"azure-deprecated",label:"Azure Deprecated",groups:["Microsoft Azure"]},{id:"azure-iot",label:"Azure IoT",groups:["Microsoft Azure"]},{id:"azure-other",label:"Azure Other",groups:["Microsoft Azure"]},{id:"azure-analytics",label:"Azure Analytics",groups:["Microsoft Azure"]},{id:"azure-dev-ops",label:"Azure DevOps",groups:["Microsoft Azure"]},{id:"azure-management-governance",label:"Azure Management and Governance",groups:["Microsoft Azure"]},{id:"azure-security",label:"Azure Security",groups:["Microsoft Azure"]},{id:"azure-companies",label:"Azure Companies",groups:["Microsoft Azure"]},{id:"azure-general",label:"Azure General",groups:["Microsoft Azure"]},{id:"azure-migrate",label:"Azure Migrate",groups:["Microsoft Azure"]},{id:"azure-storage",label:"Azure Storage",groups:["Microsoft Azure"]},{id:"azure-compute",label:"Azure Compute",groups:["Microsoft Azure"]},{id:"azure-identity",label:"Azure Identity",groups:["Microsoft Azure"]},{id:"azure-mixed-reality",label:"Azure Mixed Reality",groups:["Microsoft Azure"]},{id:"azure-web",label:"Azure Web",groups:["Microsoft Azure"]},{id:"azure-container",label:"Azure Container",groups:["Microsoft Azure"]},{id:"azure-integration",label:"Azure Integration",groups:["Microsoft Azure"]},{id:"azure-mobile",label:"Azure Mobile",groups:["Microsoft Azure"]},{id:"azure-databases",label:"Azure Databases",groups:["Microsoft Azure"]},{id:"azure-intune",label:"Azure InTune",groups:["Microsoft Azure"]},{id:"azure-networking",label:"Azure Networking",groups:["Microsoft Azure"]},{id:"kubernetes-cluster-config",label:"Kubernetes Cluster Config",groups:["Kubernetes"]},{id:"kubernetes-compute",label:"Kubernetes Compute",groups:["Kubernetes"]},{id:"kubernetes-control-plane-comp",label:"Kubernetes Control Plane Components",groups:["Kubernetes"]},{id:"kubernetes-group-link",label:"Kubernetes Groups and Links",groups:["Kubernetes"]},{id:"kubernetes-infrastructure",label:"Kubernetes Infrastructure",groups:["Kubernetes"]},{id:"kubernetes-network",label:"Kubernetes Network",groups:["Kubernetes"]},{id:"kubernetes-others",label:"Kubernetes Others",groups:["Kubernetes"]},{id:"kubernetes-pods-config",label:"Kubernetes Pods Configuration",groups:["Kubernetes"]},{id:"kubernetes-rbac-model",label:"Kubernetes RBAC Model",groups:["Kubernetes"]},{id:"kubernetes-storage",label:"Kubernetes Storage",groups:["Kubernetes"]}],"stage"!==r.a.NAME&&"dev"!==r.a.NAME?[]:[{id:"experiments",label:"Experiments",groups:["Experiments"]}]),this.allIconsLibraries=[{id:"icons-education",label:"Icons - Education",groups:["Icons"]},{id:"icons-people-outlines",label:"Icons - People Outlines",groups:["Icons"]},{id:"icons-people",label:"Icons - People",groups:["Icons"]},{id:"material-design-image-icons",label:"Icons - Material Design - Image",groups:["Icons"]},{id:"material-design-file-icons",label:"Icons - Material Design - File",groups:["Icons"]},{id:"material-design-alert-icons",label:"Icons - Material Design - Alert",groups:["Icons"]},{id:"material-design-action-icons",label:"Icons - Material Design - Action",groups:["Icons"]},{id:"material-design-notification-icons",label:"Icons - Material Design - Notification",groups:["Icons"]},{id:"material-design-content-icons",label:"Icons - Material Design - Content",groups:["Icons"]},{id:"material-design-maps-icons",label:"Icons - Material Design - Maps",groups:["Icons"]},{id:"material-design-social-icons",label:"Icons - Material Design - Social",groups:["Icons"]},{id:"material-design-navigation-icons",label:"Icons - Material Design - Navigation",groups:["Icons"]},{id:"material-design-hardware-icons",label:"Icons - Material Design - Hardware",groups:["Icons"]},{id:"material-design-places-icons",label:"Icons - Material Design - Places",groups:["Icons"]},{id:"material-design-toggle-icons",label:"Icons - Material Design - Toggle",groups:["Icons"]},{id:"material-design-communication-icons",label:"Icons - Material Design - Communication",groups:["Icons"]},{id:"material-design-av-icons",label:"Icons - Material Design - AV",groups:["Icons"]},{id:"material-design-editor-icons",label:"Icons - Material Design - Editor",groups:["Icons"]},{id:"material-design-device-icons",label:"Icons - Material Design - Device",groups:["Icons"]}],this.premiumGroups=["AWS","Business","Software","Google Cloud","Microsoft Azure","Kubernetes","IT & Networking"]}return e.prototype.getPremiumGroups=function(){return this.premiumGroups},e.prototype.belongsToPremiumGroup=function(e){var t=this;return 0!==this.allShapeLibraries.find((function(t){return t.id===e})).groups.filter((function(e){return t.premiumGroups.includes(e)})).length},e.prototype.getAllGroups=function(){var e=this.getAllShapeLibraries();return e=e.concat(this.getAllIconsGroups()),Object(a.uniq)(e)},e.prototype.getAllShapeLibraries=function(){var e=[];return this.allShapeLibraries.map((function(t){t.groups.map((function(t){e.push(t)}))})),Object(a.uniq)(e)},e.prototype.getAllIconsGroups=function(){var e=[];return this.allIconsLibraries.map((function(t){t.groups.map((function(t){e.push(t)}))})),Object(a.uniq)(e)},e.prototype.getAllIconLibraries=function(){return this.allIconsLibraries},e.prototype.getLibrariesInGroup=function(e){return this.allShapeLibraries.filter((function(t){return t.groups.includes(e)}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"8a+/":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("nsO7"),r=n("wx9+"),a=n("5xGT"),o=n("TLy2"),s=n("J+dc"),c=n("8j5Y"),u=n("mWib"),l=n("QoSw"),p=n("g6G6"),d=n("EM62"),h=function(){function e(e,t,n){this.state=e,this.viewport=t,this.ll=n,this.debounce=100,this.rtree=new a.rb}return e.prototype.initialize=function(){var e=this;return Object(p.a)(this.getPanZoomChanges(this.debounce).pipe(Object(o.a)((function(){return e.viewport.getShapeModels().pipe(Object(s.a)(1),Object(c.a)((function(t){return e.loadTree(t)})))}))),this.ll.forCurrent(!1).getDiagramChanges().pipe(Object(o.a)((function(){return e.viewport.getShapeModels().pipe(Object(s.a)(1),Object(c.a)((function(t){return e.loadTree(t)})))}))))},e.prototype.search=function(e,t,n,i,r,o,s){void 0===r&&(r=[]),void 0===o&&(o=!1),void 0===s&&(s=.5);try{var c=new a.vb(e,n,t-e,i-n);return this.rtree.search(e-s,t+s,n-s,i+s).filter((function(e){var t=!r.includes(e.id);if(o){var n=c.contains(new a.vb(e.x,e.y,e.width,e.height));return t&&n}return t}))}catch(u){return[]}},e.prototype.loadTree=function(e){this.rtree.clear(),this.rtree.load(Object(i.values)(e).filter((function(e){return!e.isConnector()})).map((function(e){var t=e.bounds;return{id:e.id,zIndex:e.zIndex,x:t.x,y:t.y,width:t.width,height:t.height}})))},e.prototype.getPanZoomChanges=function(e){return Object(p.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(u.a)(e))},e.\u0275fac=function(t){return new(t||e)(d.pc(a.Jb),d.pc(r.a),d.pc(l.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},AM7v:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("D57K"),r=n("5xGT"),a=n("g6G6"),o=n("KTx3"),s=n("xVbo"),c=n("8j5Y"),u=n("YtkY"),l=n("Wg7D"),p=n("Wpmq"),d=n("LLEj"),h=n("c7W3"),f=n("EM62"),g=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.commandService=t,r.vToDcoordinate=n,r.state=i,r.svgPathId="freehand-svg-path",r.svgPoints=[],r.isDrawing=!1,r.throttleTime=20,r.isStraightLine=!1,r}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:this.state.get("MouseControlState"),tail:null,type:"svg",viewingArea:"canvas"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,i){var r=this;this.resetValues();var o=e.prototype.initialize.call(this,t,n,i),u=this.getFreeHandMouseEvents().pipe(Object(s.a)((function(e){return r.isDrawing&&r.isStopDraw(e)})),Object(c.a)((function(){r.updateDiagramShape(!1),r.resetValues()})));return Object(a.a)(o,u,this.startFreeHand())},t.prototype.resetValues=function(){this.isDrawing=!1,this.isStraightLine=!1,this.throttleTime=20,this.shiftAngle=void 0,this.svgPoints=[];var e=document.getElementById(this.svgPathId);e&&e.setAttributeNS(null,"d",""),this.state.set("CurrentFreeHandShape",!1)},t.prototype.isStopDraw=function(e){var t=this.getViewportBounds(),n=t.left,i=t.top,r=n+t.width,a=i+t.height;return!!(e.type.includes("up")||e.clientX<=n||e.clientX>=r||e.clientY<=i||e.clientY>=a)},t.prototype.getFreeHandMouseEvents=function(){var e=this,t=document.getElementById("free-hand-container");return Object(a.a)(Object(o.a)(t,"mousedown",{capture:!0}),Object(o.a)(t,"mousemove",{capture:!0}),Object(o.a)(t,"pressmove",{capture:!0}),Object(o.a)(t,"pressup",{capture:!0}),Object(o.a)(t,"mouseup",{capture:!0})).pipe(Object(u.a)((function(e){return e})),Object(c.a)((function(t){"mousedown"!==t.type||e.isDrawing||(e.isDrawing=!0,e.startPosition={x:t.clientX,y:t.clientY},e.addPointToPath(t,!1)),!e.isStraightLine&&t.shiftKey?e.throttleTime=1e3:t.shiftKey||(e.throttleTime=20,e.shiftAngle=void 0),e.isStraightLine=t.shiftKey})))},t.prototype.startFreeHand=function(){var e=this;return this.getFreeHandMouseEvents().pipe(Object(s.a)((function(t){return e.isDrawing&&!e.isStopDraw(t)})),Object(l.a)(this.throttleTime),Object(u.a)((function(t){return e.addPointToPath(t,!0)})))},t.prototype.addPointToPath=function(e,t){var n=document.getElementById("freehand-svg"),i=document.getElementById(this.svgPathId),r=n.createSVGPoint(),a=this.getMousePoint(e);r.x=a.x,r.y=a.y;var o=r.matrixTransform(n.getScreenCTM().inverse());this.svgPoints.push(o),i.setAttributeNS(null,"d",this.convertPointsToSvg(this.svgPoints)),this.updateDiagramShape(t)},t.prototype.getMousePoint=function(e){var t=e.clientX,n=e.clientY,i=this.getViewportBounds();this.isStopDraw(e)&&!e.type.includes("up")&&(t=t<=i.left+10?i.left:i.left+i.width,n=n<=i.top+10?i.top:i.top+i.height);var r={x:t,y:n};if(!this.isStraightLine)return r;var a=t-this.startPosition.x,o=n-this.startPosition.y;if(this.shiftAngle||t===this.startPosition.x||(this.shiftAngle=Math.atan(o/a)*(180/Math.PI)),Math.abs(this.shiftAngle)<30)r.y=this.startPosition.y;else if(Math.abs(this.shiftAngle)<60){var s=Math.sign(this.shiftAngle),c=Math.PI/180*45;r.y=this.startPosition.y+s*a*Math.tan(c)}else r.x=this.startPosition.x;return r},t.prototype.convertPointsToSvg=function(e,t){t=t||[0,0];for(var n="",i=0;i<e.length;i++){var r=0===i?"M":"L";e[i].x+=t[0],e[i].y+=t[1],n+=r+e[i].x+" "+e[i].y+" "}return n},t.prototype.getViewportBounds=function(){return document.querySelector(".diagram-viewport").getBoundingClientRect()},t.prototype.updateDiagramShape=function(e){var t=this,n=this.svgPoints.map((function(e){return t.vToDcoordinate.x(e.x)})),r=this.svgPoints.map((function(e){return t.vToDcoordinate.y(e.y)})),a=Math.abs(Math.max.apply(Math,Object(i.j)(n))-Math.min.apply(Math,Object(i.j)(n))),o=Math.abs(Math.max.apply(Math,Object(i.j)(r))-Math.min.apply(Math,Object(i.j)(r))),s=Math.min.apply(Math,Object(i.j)(n)),c=Math.min.apply(Math,Object(i.j)(r)),u=this.translate(-s,-c),l=e?"preview":"dispatch";this.commandService[l](h.a.addFreehandShape,{svg:u,shapeStart:{x:s,y:c},bounds:{width:a,height:o},shapeId:this.state.get("CurrentFreeHandShape")})},t.prototype.translate=function(e,t){var n=this,i=document.getElementById("free-hand-container").innerHTML,r=this.svgPoints.map((function(e){return{x:n.vToDcoordinate.x(e.x),y:n.vToDcoordinate.y(e.y)}})),a=this.convertPointsToSvg(r,[e,t]),o=i.indexOf(" d")+3,s=o+i.slice(o).indexOf(">")-1;return i.slice(0,o+1)+a+i.slice(s)},t.\u0275fac=function(e){return new(e||t)(f.pc(r.B),f.pc(p.a),f.pc(r.Jb))},t.\u0275prov=f.bc({token:t,factory:t.\u0275fac}),t}(d.a)},AaYA:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("19Zn"),r=n("ZTXN"),a=n("C05f"),o=n("6Oco"),s=n("EM62"),c=n("s2Ay"),u=n("2kYt"),l=["container"];function p(e,t){if(1&e){var n=s.mc();s.lc(0,"div",6),s.lc(1,"div",7),s.lc(2,"div",8),s.lc(3,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-top-left")})),s.kc(),s.lc(4,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-top-center")})),s.kc(),s.lc(5,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-top-right")})),s.kc(),s.kc(),s.kc(),s.lc(6,"div",12),s.lc(7,"div",8),s.lc(8,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-left-top")})),s.kc(),s.lc(9,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-left-center")})),s.kc(),s.lc(10,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-left-bottom")})),s.kc(),s.kc(),s.lc(11,"div",13),s.lc(12,"div",14),s.lc(13,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-top-left")})),s.kc(),s.lc(14,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-center-left")})),s.kc(),s.lc(15,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-bottom-left")})),s.kc(),s.kc(),s.lc(16,"div",15),s.lc(17,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-top-center")})),s.kc(),s.lc(18,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-center-center")})),s.kc(),s.lc(19,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-bottom-center")})),s.kc(),s.kc(),s.lc(20,"div",16),s.lc(21,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-top-right")})),s.kc(),s.lc(22,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-center-right")})),s.kc(),s.lc(23,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("in-bottom-right")})),s.kc(),s.kc(),s.kc(),s.lc(24,"div",17),s.lc(25,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-right-top")})),s.kc(),s.lc(26,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-right-center")})),s.kc(),s.lc(27,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-right-bottom")})),s.kc(),s.kc(),s.kc(),s.lc(28,"div",18),s.lc(29,"div",8),s.lc(30,"div",9),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-bottom-left")})),s.kc(),s.lc(31,"div",10),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-bottom-center")})),s.kc(),s.lc(32,"div",11),s.tc("click",(function(){return s.Oc(n),s.xc().handleClick("ex-bottom-right")})),s.kc(),s.kc(),s.kc(),s.kc()}if(2&e){var i=t.ngIf;s.Sb(3),s.Xb("selected","ex-top-left"===i),s.Sb(1),s.Xb("selected","ex-top-center"===i),s.Sb(1),s.Xb("selected","ex-top-right"===i),s.Sb(3),s.Xb("selected","ex-left-top"===i),s.Sb(1),s.Xb("selected","ex-left-center"===i),s.Sb(1),s.Xb("selected","ex-left-bottom"===i),s.Sb(3),s.Xb("selected","in-top-left"===i),s.Sb(1),s.Xb("selected","in-center-left"===i),s.Sb(1),s.Xb("selected","in-bottom-left"===i),s.Sb(2),s.Xb("selected","in-top-center"===i),s.Sb(1),s.Xb("selected","in-center-center"===i),s.Sb(1),s.Xb("selected","in-bottom-center"===i),s.Sb(2),s.Xb("selected","in-top-right"===i),s.Sb(1),s.Xb("selected","in-center-right"===i),s.Sb(1),s.Xb("selected","in-bottom-right"===i),s.Sb(2),s.Xb("selected","ex-right-top"===i),s.Sb(1),s.Xb("selected","ex-right-center"===i),s.Sb(1),s.Xb("selected","ex-right-bottom"===i),s.Sb(3),s.Xb("selected","ex-bottom-left"===i),s.Sb(1),s.Xb("selected","ex-bottom-center"===i),s.Sb(1),s.Xb("selected","ex-bottom-right"===i)}}var d=function(){function e(){this._change=new r.a,this.selectedElement=new a.a("none")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.container?this.container.nativeElement:void 0},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.selectedElement.next(i.G.getTextPositionString(e)),this._data=e,e.transform&&this.setRotation(e.transform)},e.prototype.setProperties=function(e){},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(o.b)()},e.prototype.handleClick=function(e){this._change.next(this.getDataPositionData(e))},e.prototype.setRotation=function(e){var t=e.angle;this.containerElement&&(e.scaleX>0&&e.scaleY<0&&0===t&&(t=180),t>=0&&t<45?this.containerElement.style.transform="rotate(0)":t>=45&&t<90||t>=90&&t<135?this.containerElement.style.transform="rotate(90deg)":t>=135&&t<=180?this.containerElement.style.transform="rotate(180deg)":t<=0&&t>-45?this.containerElement.style.transform="rotate(0)":t<=-45&&t>-90||t<=-90&&t>-135?this.containerElement.style.transform="rotate(-90deg)":t<=-135&&t>=-180&&(this.containerElement.style.transform="rotate(-180deg)"))},e.prototype.getDataPositionData=function(e){return"ex-top-left"===e?{xType:"fixed-start",x:0,yType:"fixed-start",y:-1,alignX:-1,alignY:1,wordWrap:!1}:"ex-top-center"===e?{xType:"relative",x:.5,yType:"fixed-start",y:-1,alignX:0,alignY:1,wordWrap:!1}:"ex-top-right"===e?{xType:"fixed-end",x:0,yType:"fixed-start",y:-1,alignX:1,alignY:1,wordWrap:!1}:"in-top-left"===e?{xType:"fixed-start",x:1,yType:"fixed-start",y:1,alignX:-1,alignY:-1,wordWrap:!0}:"in-top-center"===e?{xType:"relative",x:.5,yType:"fixed-start",y:1,alignX:0,alignY:-1,wordWrap:!0}:"in-top-right"===e?{xType:"fixed-end",x:1,yType:"fixed-start",y:1,alignX:1,alignY:-1,wordWrap:!0}:"in-center-left"===e?{xType:"fixed-start",x:1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!0}:"in-center-center"===e?{xType:"relative",x:.5,yType:"relative",y:.5,alignX:0,alignY:0,wordWrap:!0}:"in-center-right"===e?{xType:"fixed-end",x:1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!0}:"in-bottom-left"===e?{xType:"fixed-start",x:1,yType:"fixed-end",y:1,alignX:-1,alignY:1,wordWrap:!0}:"in-bottom-center"===e?{xType:"relative",x:.5,yType:"fixed-end",y:1,alignX:0,alignY:1,wordWrap:!0}:"in-bottom-right"===e?{xType:"fixed-end",x:1,yType:"fixed-end",y:1,alignX:1,alignY:1,wordWrap:!0}:"ex-bottom-left"===e?{xType:"fixed-start",x:0,yType:"fixed-end",y:-1,alignX:-1,alignY:-1,wordWrap:!1}:"ex-bottom-center"===e?{xType:"relative",x:.5,yType:"fixed-end",y:-1,alignX:0,alignY:-1,wordWrap:!1}:"ex-bottom-right"===e?{xType:"fixed-end",x:0,yType:"fixed-end",y:-1,alignX:1,alignY:-1,wordWrap:!1}:"ex-left-top"===e?{xType:"fixed-start",x:-1,yType:"fixed-start",y:0,alignX:1,alignY:-1,wordWrap:!1}:"ex-right-top"===e?{xType:"fixed-end",x:-1,yType:"fixed-start",y:0,alignX:-1,alignY:-1,wordWrap:!1}:"ex-left-center"===e?{xType:"fixed-start",x:-1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!1}:"ex-right-center"===e?{xType:"fixed-end",x:-1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!1}:"ex-left-bottom"===e?{xType:"fixed-start",x:-1,yType:"fixed-end",y:0,alignX:1,alignY:1,wordWrap:!1}:"ex-right-bottom"===e?{xType:"fixed-end",x:-1,yType:"fixed-end",y:0,alignX:-1,alignY:1,wordWrap:!1}:void 0},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Zb({type:e,selectors:[["text-position-control"]],viewQuery:function(e,t){var n;(1&e&&s.hd(l,!0),2&e)&&(s.Lc(n=s.uc())&&(t.container=n.first))},decls:8,vars:3,consts:[[1,"txt-position-lbl","fx-margin-bottom-5"],["translate",""],[1,"text-position-control-container"],["container",""],["src","./assets/images/text-position-control.svg",1,"text-position-control-grid"],["class","text-position-control",4,"ngIf"],[1,"text-position-control"],[1,"row-1"],[1,"column-1"],[1,"tile1",3,"click"],[1,"tile2",3,"click"],[1,"tile3",3,"click"],[1,"row-2"],[1,"column-2"],[1,"column-2-1"],[1,"column-2-2"],[1,"column-2-3"],[1,"column-3"],[1,"row-3"]],template:function(e,t){1&e&&(s.lc(0,"div",0),s.lc(1,"label",1),s.cd(2,"LABELS.TEXT_POSITION"),s.kc(),s.kc(),s.lc(3,"div",2,3),s.gc(5,"img",4),s.ad(6,p,33,42,"div",5),s.yc(7,"async"),s.kc()),2&e&&(s.Sb(6),s.Cc("ngIf",s.zc(7,1,t.selectedElement)))},directives:[c.a,u.t],pipes:[u.b],styles:[".text-position-control-container[_ngcontent-%COMP%]{width:100px;height:100px;position:relative}.text-position-control[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;z-index:1;left:0;top:0}.text-position-control[_ngcontent-%COMP%]   [class*=tile][_ngcontent-%COMP%]{width:15.5px;height:15.5px;cursor:pointer}.text-position-control[_ngcontent-%COMP%]   [class*=tile].selected[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   [class*=tile][_ngcontent-%COMP%]:hover{background-color:#fff6e1}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]{padding-left:18px;padding-right:18px}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%]{margin-right:0}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]{display:flex}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%]{margin-bottom:8px}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{padding:3px 6px}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-3[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-3[_ngcontent-%COMP%]{margin-right:0}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%]{margin-bottom:5px}"],changeDetection:0}),e}()},"Aq/p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeEvents=t.ShapeCommands=void 0,function(e){e.shapeTouchSubscribe="shape:touch:subscribe",e.shapeSelectSubscribe="shape:select:subscribe"}(t.ShapeCommands||(t.ShapeCommands={})),function(e){e.shapeTouch="shape:touch",e.shapeSelect="shape:select"}(t.ShapeEvents||(t.ShapeEvents={}))},"Ax/4":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("5xGT"),a=n("6Oco"),o=n("X0jn"),s=n("nsO7"),c=n("aYRE"),u=n("nWGD"),l=n("J+dc"),p=n("8j5Y"),d=n("EM62"),h=function(){function e(e,t,n,i){this.state=e,this.commandService=t,this.taskManager=n,this.taskLocator=i}return Object.defineProperty(e.prototype,"name",{get:function(){return"TaskBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["data","texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){this.changeModel=e;var n=e.__sakota__.getChanges();return Object(s.isEmpty)(n)||"Execute"!==t||(this.processTitleChanges(e,n,!0),this.processDataItemRemove(e,n),this.processDataChanges(e,n,!0),this.processDataChanges(e,n,!1),this.processLabelChanges(e,n,!0)),a.a},e.prototype.setRoleBoundsTaskId=function(e,t){var n=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType!==o.y.Role&&e.label===t.label}));if(n.length>0)n.forEach((function(e){return e.taskId=t.taskId}));else{var i=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType===o.y.Role&&e.id!==t.id})),r=void 0;if(i.length>0){var a=Object(s.map)(i,(function(e){return e.label}));r=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType!==o.y.Role&&-1===a.indexOf(e.label)}))}else r=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType!==o.y.Role}));r&&r.length>0&&r.forEach((function(e){e.roleId=t.id}))}},e.prototype.processTitleChanges=function(t,n,i){var r=this,a=i?n.$set:n.$unset,o=function(n){e.regexText.lastIndex=0;var i=e.regexText.exec(n);if(!i)return"continue";var a=i[1],o=i[2],s=t.shapes[a];if(!s)return"continue";if(s.tasks&&s.tasks.length>0){var c=s.texts[o];c&&c.primary&&c.plainText.length&&s.tasks.forEach((function(e){return r.taskManager.updateTaskTitle(e,c.plainText)}))}};for(var s in a)o(s)},e.prototype.processDataItemRemove=function(t,n){var i;if(n.$unset)for(var r in n.$unset){e.regexDataItem.lastIndex=0;var a=e.regexDataItem.exec(r);if(a){var o=a[1],s=a[2],c=t.shapes[o];if(c){var u=c.dataSetId,l=null===(i=t.__sakota__.getTarget())||void 0===i?void 0:i.dataDefs[u];if(l){var p=l[s];if(p&&p.roleBound){var d=p.taskId;if(d)this.removeTask(d,c);else if(p.roleId){var h=l[p.roleId];h&&h.taskId&&this.taskManager.updateTask(h.taskId,void 0,p.systemType)}}}}}}},e.prototype.processLabelChanges=function(t,n,i){var r=i?n.$set:n.$unset,a=function(n){e.regexDataDefLabel.lastIndex=0;var i=e.regexDataDefLabel.exec(n);if(!i)return"continue";var r=i[1],a=i[2],c=t.dataDefs[r];if(!c)return"continue";var u=c[a];if(!u)return"continue";if(!u.roleBound)return"continue";var l=Object(s.filter)(c,(function(e){return e.systemType===o.y.Role&&e.id!==a&&e.label===u.label}));l&&l.length>0?u.roleId=l[0].id:delete u.roleId};for(var c in r)a(c)},e.prototype.processShapeAdded=function(t,n){var i=this,a=n.$set,c=function(n){e.regexShapeAdded.lastIndex=0;var c=e.regexShapeAdded.exec(n);if(!c)return"continue";var u=a[n];if(!u.data)return"continue";var l=c[1],p=t.shapes[l];if(u.eData)return"continue";if(p.dataSetId){var d=t.dataDefs[p.dataSetId];p.tasks=[],Object.keys(p.data).forEach((function(e){var n=d[e];if(n&&n.roleBound){var a=n,c=p.data[a.id].value;if(a.systemType===o.y.Role&&i.hasRoleUsers(c)){var u=r.sb.taskId();i.addTask(u,a.id,t,p,Object(s.map)(c.people,(function(e){return{userId:e.id}})),d),u&&(a.taskId=u,i.setRoleBoundsTaskId(d,a))}}}))}};for(var u in a)c(u)},e.prototype.processDataChanges=function(t,n,i){var r=i?n.$set:n.$unset,a=function(r){e.regexDataItemVal.lastIndex=0;var a=e.regexDataItemVal.exec(r);if(!a)return c.processShapeAdded(t,n),"continue";var u=a[1],l=a[2],p=t.shapes[u];if(p.isConnector())return"continue";if(p.dataSetId){var d=t.dataDefs[p.dataSetId],h=d[l];if(h&&h.roleBound){var f=h;if(f.systemType===o.y.Role)c.doTaskChanges(t,p,d,f,n,i);else if(f.roleId&&d[f.roleId]&&c.hasRoleUsers(p.data[f.roleId].value))c.doTaskChanges(t,p,d,f,n,i);else{var g=c.getRoleFields(d,p),m=void 0;if(g&&g.length)if(1===g.length)m=g[0].id;else{var v=Object(s.find)(g,(function(e){return e.label===f.label}));if(v)m=v.id;else{var b=Object(s.filter)(d,(function(e){return e.roleBound&&e.systemType===f.systemType}));b&&1===b.length&&(m=g[0].id)}}m&&(h.roleId=m,c.doTaskChanges(t,p,d,f,n,i))}}}},c=this;for(var u in r)a(u)},e.prototype.getRoleFields=function(e,t){for(var n=Object(s.filter)(e,(function(e){return e.systemType===o.y.Role})),i=[],r=0;r<n.length;r++){var a=t.data[n[r].id];this.hasRoleUsers(a.value)&&i.push(n[r])}return i},e.prototype.doTaskChanges=function(e,t,n,i,a,c){var u=this,d=t.data[i.id].value;if(i.taskId)if(c&&this.hasRoleUsers(d))this.taskLocator.getTask(i.taskId).pipe(Object(l.a)(1),Object(p.a)((function(r){r?u.taskManager.updateTask(i.taskId,d,i.systemType):(u.addTask(i.taskId,i.id,e,t,Object(s.map)(d.people,(function(e){return{userId:e.id}})),n),i.taskId=i.taskId,u.setRoleBoundsTaskId(n,i))}))).subscribe();else{var h=i.taskId;this.removeTask(h,t),delete i.taskId}else if(i.roleId){var f=n[i.roleId];f&&f.taskId?this.taskManager.updateTask(f.taskId,d,i.systemType):delete i.roleId}else if(i.systemType===o.y.Role&&this.hasRoleUsers(d)&&c){h=r.sb.taskId();this.addTask(h,i.id,e,t,Object(s.map)(d.people,(function(e){return{userId:e.id}})),n),h&&(i.taskId=h,this.setRoleBoundsTaskId(n,i))}},e.prototype.addTask=function(e,t,n,r,a,o){var s=this.taskManager.addTask(e,t,n,r,a,o);return r.tasks||(r.tasks=[]),r.tasks=Object(i.j)(r.tasks,[e]),s.id},e.prototype.removeTask=function(e,t){t.tasks&&(t.tasks=Object(s.without)(t.tasks,e),0===t.tasks.length&&delete t.tasks),this.taskManager.removeTask(e)},e.prototype.hasRoleUsers=function(e){return!!(e&&e.people&&e.people.length>0)},e.regexDataItemVal=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.regexDataDefLabel=/dataDefs\.([^\.]+)\.([^\.]+)\.label/g,e.regexDataItem=/shapes\.([^\.]+)\.data\.([^\.]+)$/g,e.regexShapeAdded=/shapes\.([^\.]+)$/g,e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)(d.pc(r.Jb),d.pc(r.B),d.pc(c.a),d.pc(u.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},B82N:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("0jHB"),r=n("XWWj"),a=n("J+dc"),o=n("xVbo"),s=n("TLy2"),c=n("YtkY"),u=(n("yZNT"),n("C05f")),l=n("GoAz"),p=n("nsO7"),d=n("EM62"),h=function(){function e(e){this.definitionLocator=e,this.allDefs=new u.a(null),this.type="shape",this.loadAllDefs()}return e.prototype.search=function(e,t){return this.allDefs.pipe(Object(a.a)(1),Object(o.a)((function(e){return!!e})),Object(s.a)((function(n){return Object(l.a)(Object(r.goAsync)(e,n,t))})),Object(c.a)((function(e){var t=[];return e.forEach((function(e){t.push({id:e.obj.defId,version:e.obj.version,type:"shape",score:e.score})})),t})))},e.prototype.loadAllDefs=function(){var e=this;this.definitionLocator.getDefs().pipe(Object(a.a)(1),Object(c.a)((function(e){return e.defs.filter((function(e){return("connector"!==e.type||"edata"!==e.type)&&(!e.hasOwnProperty("isSearchable")||e.isSearchable)})).map((function(e){var t=Object(p.clone)(e);return t.tags="string"==typeof e.tags?e.tags:(e.tags||[]).join(" "),t.description=e.description||"",t}))}))).subscribe((function(t){e.allDefs.next(t)}))},e.\u0275fac=function(t){return new(t||e)(d.pc(i.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},BQCR:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("5xGT"),r=n("SBw3"),a=n("ROBh"),o=n("QoSw"),s=n("YtkY"),c=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return t.data.forEach((function(e){e.itemIcon=e.buttonIcon})),Object(a.a)({value:t.data,validation:n.data.validation})},e.prototype.isEnabled=function(e){var t=this.state.get("EditingText");return t.textId?this.ll.forCurrent(!0).getShapeOnce(t.shapeId).pipe(Object(s.a)((function(e){var n=e.texts[t.textId];return!(!n||!n.isAlignable())}))):Object(a.a)(!1)},e.prototype.getApplyData=function(e,t){return Object(a.a)({styles:{align:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(c.pc(o.a),c.pc(i.Jb),c.pc(r.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},BQpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("D57K"),r=n("nsO7"),a=n("ROBh"),o=n("P4Xx"),s=n("fB16"),c=n("5xGT"),u=n("EM62"),l=n("SBw3"),p=n("QoSw"),d=n("TLy2"),h=n("xVbo"),f=n("J+dc"),g=n("YtkY"),m=function(e){function t(t,n,i,r,a){var o=e.call(this,n,i,a)||this;return o.state=t,o.ll=r,o}return Object(i.e)(t,e),t.prototype.getContextMenuItemsId=function(e){var t=this;return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(d.a)((function(n){if("canvasRightClick"===e.type)return Object(a.a)(n.getContextMenuItems());var i=e.relatedShape.name;return t.state.changes("Selected").pipe(Object(h.a)((function(e){return e.length>1||e[0]===i})),Object(f.a)(1),Object(d.a)((function(e){return t.getShapeMenuItems(e)})))})))},t.prototype.getShapeMenuItems=function(e){var t,n=this;return 1===e.length?t=this.getMenuItemsForSingleShape(e[0]):e.length>1&&(t=this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(d.a)((function(t){return t.sameType(e)?n.getMenuItemsForMultiShapeSameType(e):n.getMenuItemsForMultiShape(e)})))),t.pipe(Object(d.a)((function(e){var t;return t=e.map((function(e){return n.isFeatureEnabled(e)})),o.a.apply(void 0,Object(i.j)(t)).pipe(Object(g.a)((function(t){return e.filter((function(e,n){return t[n]}))})))})))},t.prototype.isFeatureEnabled=function(e){var t=this.featureList.getFeature(e);if(t.transformer){var n=this.injector.get(t.transformer);if(n.isEnabled)return n.isEnabled(t.id)}return Object(a.a)(!0)},t.prototype.getMenuItemsForSingleShape=function(e){return this.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(g.a)((function(e){return e.getContextMenuItems()})))},t.prototype.getMenuItemsForMultiShapeSameType=function(e){var t=this;return o.a.apply(void 0,Object(i.j)(e.map((function(e){return t.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(g.a)((function(e){return e.getContextMenuForSameType()})))})))).pipe(Object(g.a)((function(e){return e.reduce((function(e,t){return Object(r.intersection)(e,t)}))})))},t.prototype.getMenuItemsForMultiShape=function(e){var t=this;return o.a.apply(void 0,Object(i.j)(e.map((function(e){return t.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(g.a)((function(e){return e.getContextMenuForMultipleTypes()})))})))).pipe(Object(g.a)((function(e){return e.reduce((function(e,t){return Object(r.intersection)(e,t)}))})))},t.\u0275fac=function(e){return new(e||t)(u.pc(c.Jb),u.pc(u.C),u.pc(c.B),u.pc(p.a),u.pc(l.a))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t}(s.a)},C3qL:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),r=n("ROBh"),a=n("nsO7"),o=n("5xGT"),s=n("EM62"),c=function(){function e(e){this.state=e,this.fillColorLabel="Fill Color ",this.lineColorLabel="Line Color "}return e.prototype.getFeatureData=function(e,t){var n=this.getDataKeys(t),a=[];return n.forEach((function(e){var n=t[e];n.locked||a.push(Object(i.a)(Object(i.a)({},n),{id:e}))})),a.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:0})),Object(r.a)(this.setLabels(a))},e.prototype.getApplyData=function(e,t){var n={},i=Object(a.cloneDeep)(t.item),o=i.id;return delete i.id,i.style.fillColor&&(i.style.fillColor=t.change.value),i.style.lineColor&&(i.style.lineColor=t.change.value),n[o]=i,Object(r.a)({styleDefinition:n})},e.prototype.getDataKeys=function(e){var t=Object.keys(e),n=this.state.get("InnerShapeSelection"),i=Object(a.flatten)(Object.keys(n).map((function(e){return n[e]})));if(i.length>0){if((t=Object(a.intersection)(t,i)).length!==i.length&&t.push("commonStyles"),t.length>1){var r=t.every((function(t,n,i){return 0===n||e[t].style.fillColor===e[i[n-1]].style.fillColor})),o=t.every((function(t,n,i){return 0===n||e[t].style.lineColor===e[i[n-1]].style.lineColor}));r&&o?t=[t[0]]:r?(e[t[0]].label="diffLine",t=[t[0]]):o?(e[t[0]].label="diffFill",t=[t[0]]):(e[t[0]].label="diffBoth",t=[t[0]])}}else{if(Object.keys(e).find((function(e){return e.includes("commonStyles")})))return Object.keys(e).filter((function(e){return e.includes("commonStyles")}));t=Object.keys(e)}return t},e.prototype.setLabels=function(e){var t=this,n=1,r=1,a=[];return e.forEach((function(o){if(o.label)if(o.label.includes("diff")){var s=o.label.includes("diffLine")||o.label.includes("diffBoth"),c=o.label.includes("diffFill")||o.label.includes("diffBoth");a.push(Object(i.a)(Object(i.a)({},o),{id:o.id+(c?"difffill":"fill"),style:{fillColor:o.style.fillColor},label:t.fillColorLabel}),Object(i.a)(Object(i.a)({},o),{id:o.id+(s?"diffline":"line"),style:{lineColor:o.style.lineColor},label:t.lineColorLabel})),e=e.filter((function(e){return e!==o}))}else o.label.startsWith(t.fillColorLabel+n)&&(n+=1),o.label.startsWith(t.lineColorLabel+r)&&(r+=1);else if(o.style.fillColor&&o.style.lineColor){var u=1===e.length&&0===a.length;a.push(Object(i.a)(Object(i.a)({},o),{id:o.id+"fill",style:{fillColor:o.style.fillColor},label:t.fillColorLabel+(u?"":n)}),Object(i.a)(Object(i.a)({},o),{id:o.id+"line",style:{lineColor:o.style.lineColor},label:t.lineColorLabel+(u?"":r)})),n+=1,r+=1,e=e.filter((function(e){return e!==o}))}else o.style.fillColor?(o.label=t.fillColorLabel+n,n+=1):o.style.lineColor&&(o.label=t.lineColorLabel+r,r+=1)})),e.push.apply(e,Object(i.j)(a)),e},e.\u0275fac=function(t){return new(t||e)(s.pc(o.Jb))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},Cupj:function(e,t,n){},Di8k:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),r=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),u=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(n){var r,a,o=t.state.get("Selected"),s=!1;try{for(var c=Object(i.k)(o),u=c.next();!u.done;u=c.next()){var l=u.value;if(!n.shapes[l].showBumps){s=!1;break}s=!0}}catch(p){r={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return"showConnectorBumps"===e?!s:"hideConnectorBumps"===e&&s})))},e.prototype.getFeatureData=function(e,t){void 0===t&&(t={});var n=void 0===t.selection||t.selection;return"showConnectorBumps"===e?Object(o.a)({showLineBumps:!0,selection:n}):Object(o.a)({showLineBumps:!1,selection:n})},e.prototype.getApplyData=function(e,t){return Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(u.pc(s.a),u.pc(a.Jb),u.pc(r.a))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},Dnwm:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),r=n("X0jn"),a=function(e){function t(t,n){var i=e.call(this,t,n)||this;if(n!==r.u.Connector)throw new Error("ConnectorDisplayView cannot be created with "+n+" shape type.");return i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"isShapeView",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnectorView",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t}(n("deqJ").a),o=n("5xGT"),s=n("19Zn"),c=function(e){function t(t){return e.call(this,t)||this}return Object(i.e)(t,e),t.prototype.update=function(t,n,i){if(e.prototype.update.call(this,t,n),i){var r=void 0;r=void 0!==t.width?new o.vb(0,0,t.width,t.height):this.getTextBounds(t.value),this.position(i,r),this.updateHitArea(t,r)}this.updateViewCache(t,n)},t.prototype.position=function(e,t){this.x=e.x-t.width/2,this.y=e.y-t.height/2},t}(n("wOpJ").a),u=n("h1tj"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textMaskPadding=3,t.minLineThickness=10,t}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeView",{get:function(){return this.shape},set:function(e){this.shape=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitArea",{get:function(){if(this._hitArea)return this._hitArea.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.shape.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskPadding",{get:function(){return 250},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){this.container=new a(this.id,this.model.type),this.shape=new u.Shape,this.container.convertToCursorDrawable(this.shape),this.shape.name=this.id,this._textMask=new u.Shape,this.shape.mask=this._textMask,this.container.addChild(this.shape)},t.prototype.beginDraw=function(){this.beginDrawHitArea(),this.updateTextsMask(),e.prototype.beginDraw.call(this)},t.prototype.beginDrawHitArea=function(){if(this.model.style.lineThickness>=this.minLineThickness)return this._hitArea=void 0,void(this.shape.hitArea=void 0);this._hitArea||(this._hitArea=new u.Shape,this.shape.hitArea=this._hitArea),this.hitArea.clear(),this.hitArea.setStrokeStyle(this.minLineThickness,"round").beginStroke("#F00")},t.prototype.endDraw=function(){e.prototype.endDraw.call(this),this.hitArea&&this.hitArea.endStroke()},t.prototype.addText=function(e){var t=new c(e);this.container.addChild(t),this._texts.push(t)},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.updateTextsMask=function(){var e=this;if(this._texts){this._textMask.graphics.clear(),this._textMask.graphics.beginFill("#F00"),this._texts.forEach((function(t){var n=e.model.texts[t.name],i=new o.vb(0,0,n.width,n.height);if(0!==i.width&&0!==i.height&&n.plainText){var r=s.G.getRectangleOnConnector(e.model,n,new o.vb(i.x,i.y,i.width,i.height)).pad(e.textMaskPadding);e.drawRect(e._textMask.graphics,r.x,r.y,r.width,r.height)}}));var t=this.model.bounds.pad(this.maskPadding);this.drawRect(this._textMask.graphics,t.x+t.width,t.y,-t.width,t.height),this._textMask.graphics.endFill()}},t.prototype.drawRect=function(e,t,n,i,r){e.moveTo(t,n),e.lineTo(t+i,n),e.lineTo(t+i,n+r),e.lineTo(t,n+r),e.lineTo(t,n)},t}(s.e)},EmgI:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("nsO7"),r=n("YtkY"),a=n("J+dc"),o=n("TLy2"),s=n("QoSw"),c=n("X0jn"),u=function(){function e(){}return e.getEscaped=function(e){var t=[",","\n"].some((function(t){return e.includes(t)}));return e.includes('"')&&(e=e.replace(/"/g,'""')),t?'"'+e+'"':e},e.getFormatter=function(e){return e===c.d.STRING_HTML?function(e){return e.value.ops.map((function(e){return e.insert})).join(" ")}:function(e){return e.value.toString()}},e}(),l=n("EM62"),p=function(){function e(e){this.ll=e}return e.prototype.exportCSV=function(){var e=this;return this.getCsvData().pipe(Object(r.a)((function(t){return{name:t.name,data:t.csvData.map(e.getCSVRow).join("\n")}})))},e.prototype.getCsvData=function(){return this.ll.forCurrentObserver(!1).pipe(Object(a.a)(1),Object(o.a)((function(e){return e.getDiagramOnce()})),Object(r.a)((function(e){var t=e.shapes,n=[],r="_|_";for(var a in t){var o=t[a],s=Object.values(o.dataItems).filter((function(e){return e.optional})).reduce((function(e,t){var n=u.getFormatter(t.type);return e[t.label+r+t.type]=n(t),e}),{});s.id=o.id,s.type=o.defId,s.name=o.data.name?o.data.name.value:"",n.push(s)}var c=n.map((function(e){return Object.keys(e)})).reduce((function(e,t){return e.concat(t)}),[]),l=Object(i.difference)(Object(i.uniq)(c),["id","name","type"]),p=(l=["id","name","type"].concat(l)).map((function(e){return e.includes(r)?e.split(r)[0]:e})),d=n.map((function(e){return l.map((function(t){return e.hasOwnProperty(t)?e[t]:""}))}));return{name:e.name,csvData:[p].concat(d)}})))},e.prototype.getCSVRow=function(e){return e.map(u.getEscaped).join(",")},e.\u0275fac=function(t){return new(t||e)(l.pc(s.a))},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},EnCR:function(e,t,n){(function(){"use strict";var i=this._;i||(i=n("6WTZ"));var r={create:function(e,t){var n;if(t?(n=t).eClass=t.eClass||e:e instanceof o?(n={}).eClass=e:n=e,!n.eClass||n.eClass.get("abstract"))throw new Error("Cannot create EObject from undefined or abstract EClass");return new o(n)}};e.exports&&(t=e.exports=r),t.Ecore=r;var a={on:function(e,t,n){var i,r;if(!t)return this;for(e=e.split(/\s+/),i=this._callbacks||(this._callbacks={});r=e.shift();)(i[r]||(i[r]=[])).push(t,n);return this},off:function(e,t,n){var r,a,o,s;if(!(a=this._callbacks))return this;if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(/\s+/):i.keys(a);r=e.shift();)if((o=a[r])&&(t||n))for(s=o.length-2;s>=0;s-=2)t&&o[s]!==t||n&&o[s+1]!==n||o.splice(s,2);else delete a[r];return this},trigger:function(e){var t,n,i,r,a,o,s,c;if(!(n=this._callbacks))return this;for(c=[],e=e.split(/\s+/),r=1,a=arguments.length;r<a;r++)c[r-1]=arguments[r];for(;t=e.shift();){if((s=n.all)&&(s=s.slice()),(i=n[t])&&(i=i.slice()),i)for(r=0,a=i.length;r<a;r+=2)i[r].apply(i[r+1]||this,c);if(s)for(o=[t].concat(c),r=0,a=s.length;r<a;r+=2)s[r].apply(s[r+1]||this,o)}return this}},o=function(e){return e||(e={}),this.eClass=e.eClass,this.values={},e._&&(this._=e._),s(this),l(this,e),p(this),this};function s(e){var t=e.eClass;if(t){var n=t.get("eAllStructuralFeatures");i.each(n,(function(t){c(e,t)}))}}function c(e,t){if(e&&t){var n=t.get("name"),i=t.values.defaultValue,a=t.get("upperBound"),o=!0===t.values.derived,s=(t.values.containment,e.values[n]);null==s&&(o?e.values[n]=t.values._:1!==a&&a?s instanceof r.EList?s._setFeature(t):t.isTypeOf("EAttribute")?e.values[n]=[]:e.values[n]=new r.EList(e,t):e.values[n]=null==i?null:0===i?0:!1!==i&&i)}}function u(e,t){return i.find(e.get("eAllStructuralFeatures"),(function(e){return e.values.name===t}))}function l(e,t){if(e.eClass){var n=function(e,t){return"function"==typeof t||t instanceof o?t:r.create(e,t)};i.each(t,(function(t,a){var o=u(this.eClass,a);o&&void 0!==t&&(1===o.get("upperBound")?function(t,i,r,a){r?e.set(t,n(a,i)):e.set(t,i)}(a,t,o.eClass===r.EReference,o.get("eType")):function(t,r,a,o){var s=i.isArray(r)?r:[r];i.each(s,(function(i){a?e.get(t).add(n(o,i)):e.get(t).push(i)}))}(a,t,o.eClass===Z,o.get("eType")))}),e)}}function p(e){if(e&&e.eClass){var t=function e(t){var n=t.get("eOperations").array(),r=t.get("eAllSuperTypes");return i.flatten(i.union(n||[],i.map(r||[],(function(t){return e(t)}))))}(e.eClass);t&&i.each(t,(function(t){e[t.get("name")]=t._}))}}r.EObjectPrototype={setEClass:function(e){return this.eClass=e,s(this),l(this,this.values),p(this),this},create:function(e){if("EClass"===this.eClass.get("name"))return r.create(this,e)},has:function(e){return this.values.hasOwnProperty(e)||u(this.eClass,e)},isSet:function(e){if(!this.has(e))return!1;if(!this.eClass)return!1;var t=this.get(e);return t instanceof d?t.size()>0:null!=t},set:function(e,t){var n,r,a,o;if(null===e)return this;e.eClass&&(e=e.get("name")),i.isObject(e)||(r=e,(e={})[r]=t);var s=this.eResource();for(n in e)if(void 0!==(a=e[n])&&this.has(n)){this.isSet(n)&&this.unset(n);var c=u(this.eClass,n),l=c.get("containment");"containment"===n&&"string"==typeof a&&"EReference"===this.eClass.values.name&&(a="true"===a.toLowerCase()),this.values[n]=a,l&&(a.eContainingFeature=c,a.eContainer=this),o="change:"+n,this.trigger("change "+o,n),s&&s.trigger("change",this)}return this},unset:function(e,t){var n,r,a;if(null===e)return this;e.eClass&&(e=e.get("name")),i.isObject(e)||(r=e,(e={})[r]=void 0);var o=this.eResource();for(n in e)if(this.has(n)&&this.isSet(n)){var s=u(this.eClass,n),c=!0===Boolean(s.get("containment")),l=this.values[n];c&&(l.eContainingFeature=void 0,l.eContainer=void 0),this.values[n]=void 0,a="unset:"+n,this.trigger("unset "+a,n),o&&o.trigger("change",this)}return this},get:function(e){if(!e)return null;var t=e.eClass?e.get("name"):e;!i.has(this.values,t)&&this.has(t)&&c(this,u(this.eClass,t));var n=this.values[t];return"function"==typeof n?n.apply(this):n},isTypeOf:function(e){if(!e||!this.eClass)return!1;var t=e.eClass?e.get("name"):e;return this.eClass.get("name")===t},isKindOf:function(e){if(!e||!this.eClass)return!1;if(this.isTypeOf(e))return!0;var t=e.eClass?e.get("name"):e,n=this.eClass.get("eAllSuperTypes");return i.any(n,(function(e){return e.get("name")===t}))},eResource:function(){return this.isKindOf("Resource")?this:this.eContainer?this.eContainer.isKindOf("Resource")?this.eContainer:this.eContainer.eResource():null},eContents:function(){if(!this.eClass)return[];if(i.isUndefined(this.__updateContents)){this.__updateContents=!0;var e=this.eResource();if(e){var t=this;e.on("add remove",(function(){t.__updateContents=!0}))}}if(this.__updateContents){var n=this.eClass.get("eAllStructuralFeatures"),r=i.filter(n,(function(e){return e.isTypeOf("EReference")&&e.get("containment")&&this.isSet(e.get("name"))}),this),a=null;this.__eContents=i.flatten(i.map(r,(function(e){return(a=this.get(e.get("name")))?a.array?a.array():a:[]}),this)),this.__updateContents=!1}return this.__eContents},eURI:function(){var e=this.eResource();return(e?e.get("uri"):"")+"#"+this.fragment()},fragment:function(){var e,t,n,i=this.eContainer,r=this.eClass.get("eIDAttribute");return i?r?this.get(r.get("name")):this._id?this._id:this.isKindOf("EModelElement")?i?i.isKindOf("Resource")?(t=i.get("contents")).size()>1?"/"+t.indexOf(this):"/":i.fragment()+"/"+this.get("name"):"/":(i.isKindOf("Resource")?n=(t=i.get("contents")).size()>1?"/"+t.indexOf(this):"/":(e=this.eContainingFeature)&&(n=i.fragment()+"/@"+e.get("name"),1!==e.get("upperBound")&&(n+="."+i.get(e.get("name")).indexOf(this))),n):null}},i.extend(o.prototype,r.EObjectPrototype,a);var d=r.EList=function(e,t){return this._internal=[],this._owner=e,this._size=0,this._setFeature(t),this};d.prototype={_setFeature:function(e){e&&(this._feature=e,this._isContainment=this._feature.get("containment"),i.each(this._internal,(function(e){this._isContainment&&(e.eContainer=this._owner,e.eContainingFeature=this._feature)}),this))},add:function(e){if(!e||!e instanceof o)return this;this._isContainment&&(e.eContainingFeature=this._feature,e.eContainer=this._owner),this._size++,this._internal.push(e);var t=this._owner.eResource(),n="add";return this._feature&&(n+=":"+this._feature.get("name")),this._owner.trigger(n,e),t&&t.trigger("add",this),this},addAll:function(){return i.each(i.flatten(arguments||[]),(function(e){this.add(e)}),this),this},remove:function(e){var t="remove",n=this._owner.eResource();return this._internal=i.without(this._internal,e),this._size=this._size-1,this._feature&&(t+=":"+this._feature.get("name")),this._owner.trigger(t,e),n&&n.trigger("remove",this),this},clear:function(){for(var e=this.array(),t=0;t<e.length;t++)this.remove(e[t]);return this},size:function(){return this._size},at:function(e){if(this._size<e)throw new Error("Index Out Of Range");return this._internal[e]},array:function(){return this._internal},first:function(){return i.first(this._internal)},last:function(){return i.last(this._internal)},rest:function(e){return i.rest(this._internal,e)},each:function(e,t){return i.each(this._internal,e,t)},filter:function(e,t){return i.filter(this._internal,e,t)},find:function(e,t){return i.find(this._internal,e,t)},map:function(e,t){return i.map(this._internal,e,t)},reject:function(e,t){return i.reject(this._internal,e,t)},contains:function(e){return i.contains(this._internal,e)},indexOf:function(e){return i.indexOf(this._internal,e)}};var h=new o,f=new o,g=new o,m=new o,v=new o,b=new o,y=new o,C=new o,O=new o,x=new o,S=new o,k=new o,w=new o,E=new o,I=new o,T=new o,_=new o;h.eClass=h,h.values={name:"EClass",abstract:!1,interface:!1,eStructuralFeatures:new r.EList(h),eOperations:new r.EList(h),eSuperTypes:new r.EList(h),eAllSuperTypes:function(){if(!this._eAllSuperTypes){var e=function(e){var t=e.get("eSuperTypes").array(),n=i.flatten(i.map(t,(function(e){return e.get("eAllSuperTypes")})));return i.union(n,t)};this.on("add:eSuperTypes remove:eSuperTypes",(function(){this._eAllSuperTypes=e(this)}),this),this._eAllSuperTypes=e(this)}return this._eAllSuperTypes},eAllSubTypes:function(){var e,t,n;return e=(n=this.eResource().get("resourceSet"))?n.elements("EClass"):r.EPackage.Registry.elements("EClass"),t=i.filter(e,(function(e){return i.contains(e.get("eAllSuperTypes"),this)}),this),i.isArray(t)?t:[]},eReferences:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EReference")})),e},eAttributes:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EAttribute")})),e},eIDAttribute:function(){var e,t;return e=this.get("eAllAttributes"),t=i.filter(e,(function(e){return!0===e.get("iD")})),i.isArray(t)?t[0]:null},eAllStructuralFeatures:function(){var e,t,n,r;return r=(e=this).get("eAllSuperTypes"),n=e.values.eStructuralFeatures.array(),t=i.flatten(i.map(r||[],(function(e){return e.values.eStructuralFeatures.array()}))),i.union(t||[],n||[])},eAllAttributes:function(){var e=this.get("eAllStructuralFeatures"),t=i.filter(e||[],(function(e){return e.eClass===r.EAttribute}));return t},eAllContainments:function(){var e=this.get("eAllStructuralFeatures"),t=i.filter(e,(function(e){return e.eClass===r.EReference&&e.get("containment")}));return t},eAllReferences:function(){var e=this.get("eAllStructuralFeatures"),t=i.filter(e,(function(e){return e.eClass===r.EReference&&!e.get("containment")}));return t}},w.values={name:"abstract",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},E.values={name:"interface",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},I.values={name:"eStructuralFeatures",lowerBound:0,upperBound:-1,containment:!0},_.values={name:"eSuperTypes",lowerBound:0,upperBound:-1,containment:!1},T.values={name:"eOperations",lowerBound:0,upperBound:-1,containment:!0},h.get("eStructuralFeatures").add(w).add(E).add(_).add(I).add(T);var j=new o;j.values={name:"eAllStructuralFeatures",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllStructuralFeatures};var P=new o;P.values={name:"eAllSuperTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllSuperTypes};var A=new o;A.values={name:"eAllSubTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllSubTypes};var M=new o;M.values={name:"eAllAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllAttributes};var D=new o;D.values={name:"eAllContainments",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllContainments};var R=new o;R.values={name:"eAllReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllReferences};var L=new o;L.values={name:"eReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eReferences};var F=new o;F.values={name:"eAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAttributes};var N=new o;N.values={name:"eIDAttribute",lowerBound:0,upperBound:1,derived:!0,containment:!1,_:h.values.eIDAttribute},h.get("eStructuralFeatures").add(j).add(P).add(A).add(M).add(R).add(D).add(F).add(L).add(N),h.getEStructuralFeature=function(e){var t;return t=e.eClass?e.get("name"):e,i.find(this.get("eAllStructuralFeatures"),(function(e){return e.get("name")===t}))};var B=new o;B.values={name:"getEStructuralFeature",lowerBound:0,upperBound:1,eParameters:new r.EList(this)},B._=h.getEStructuralFeature,h.get("eOperations").add(B),h.values.eStructuralFeatures._setFeature(I),h.values.eSuperTypes._setFeature(_),h.values.eOperations._setFeature(T);var U=h.create(),z=h.create(),V=h.create(),G=h.create(),H=h.create(),W=h.create(),Y=h.create(),X=h.create(),q=h.create(),K=h.create(),J=h.create(),Z=h.create(),Q=h.create(),$=h.create(),ee=h.create(),te=h.create(),ne=h.create();w.eClass=J,E.eClass=J,I.eClass=Z,I.values.eType=K,_.eClass=Z,_.values.eType=h,T.eClass=Z,T.values.eType=Q,j.eClass=Z,j.values.eType=K,P.eClass=Z,P.values.eType=h,A.eClass=Z,A.values.eType=h,M.eClass=Z,M.values.eType=J,R.eClass=Z,R.values.eType=Z,D.eClass=Z,D.values.eType=Z,F.eClass=Z,F.values.eType=J,L.eClass=Z,L.values.eType=Z,N.eClass=Z,N.values.eType=J,B.eClass=Q,B.values.eType=K,z.get("eSuperTypes").add(U),V.get("eSuperTypes").add(z),G.get("eSuperTypes").add(z),H.get("eSuperTypes").add(G),W.get("eSuperTypes").add(G),h.get("eSuperTypes").add(W),Y.get("eSuperTypes").add(W),X.get("eSuperTypes").add(Y),ee.get("eSuperTypes").add(G),q.get("eSuperTypes").add(G),K.get("eSuperTypes").add(q),J.get("eSuperTypes").add(K),Z.get("eSuperTypes").add(K),Q.get("eSuperTypes").add(q),$.get("eSuperTypes").add(q),ne.get("eSuperTypes").add(G),te.get("eSuperTypes").add(U);var ie=new o,re=new o,ae=new o,oe=new o,se=new o,ce=new o,ue=new o;ie.eClass=Z,ie.values={name:"eType",lowerBound:0,upperBound:1,containment:!1,eType:W},re.eClass=J,re.values={name:"ordered",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},ae.eClass=J,ae.values={name:"unique",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},oe.eClass=J,oe.values={name:"lowerBound",lowerBound:0,upperBound:1,defaultValueLiteral:"0",defaultValue:0,eType:g},se.eClass=J,se.values={name:"upperBound",lowerBound:0,upperBound:1,defaultValueLiteral:"1",defaultValue:1,eType:g},ce.eClass=J,ce.values={name:"many",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1!==this.get("upperBound")}},ue.eClass=J,ue.values={name:"required",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1===this.get("lowerBound")}},q.get("eStructuralFeatures").add(ie).add(re).add(ae).add(oe).add(se).add(ce).add(ue);var le=new o;le.eClass=Z,le.values={name:"eAnnotations",eType:V,lowerBound:0,upperBound:-1,containment:!0},z.get("eStructuralFeatures").add(le);var pe=new o;pe.eClass=J,pe.values={name:"name",lowerBound:0,upperBound:1,eType:f},G.get("eStructuralFeatures").add(pe);var de=J.create({name:"changeable",eType:m}),he=J.create({name:"volatile",eType:m}),fe=J.create({name:"transient",eType:m}),ge=J.create({name:"defaultValueLiteral",eType:f}),me=J.create({name:"defaultValue",eType:k,derived:!0}),ve=J.create({name:"unsettable",eType:m}),be=J.create({name:"derived",eType:m});K.get("eStructuralFeatures").add(de).add(he).add(fe).add(ge).add(me).add(ve).add(be),me.set({derived:!0});var ye=J.create({name:"containment",eType:m}),Ce=J.create({name:"container",eType:m}),Oe=J.create({name:"resolveProxies",eType:m}),xe=Z.create({name:"eOpposite",eType:Z});Z.get("eStructuralFeatures").add(ye).add(Ce).add(Oe).add(xe);var Se=J.create({name:"iD",eType:m});J.get("eStructuralFeatures").add(Se),U.set({name:"EObject"}),z.set({name:"EModelElement",abstract:!0}),V.set({name:"EAnnotation"}),G.set({name:"ENamedElement",abstract:!0}),H.set({name:"EPackage"}),W.set({name:"EClassifier",abstract:!0}),Y.set({name:"EDataType"}),X.set({name:"EEnum"}),q.set({name:"ETypedElement",abstract:!0}),K.set({name:"EStructuralFeature",abstract:!0}),J.set({name:"EAttribute"}),Z.set({name:"EReference"}),Q.set({name:"EOperation"}),$.set({name:"EParameter"}),ee.set({name:"EEnumLiteral"}),ne.set({name:"ETypeParameter"}),te.set({name:"EGenericType"});var ke=Z.create({name:"eParameters",eType:$,containment:!0,lowerBound:0,upperBound:-1});Q.get("eStructuralFeatures").add(ke);var we=Z.create({name:"eLiterals",eType:ee,containment:!0,lowerBound:0,upperBound:-1});X.get("eStructuralFeatures").add(we),ee.get("eStructuralFeatures").add(J.create({name:"literal",eType:f})).add(J.create({name:"value",eType:g}));var Ee=h.create({name:"EStringToStringMapEntry"}),Ie=J.create({name:"key",lowerBound:0,upperBound:1,eType:f}),Te=J.create({name:"value",lowerBound:0,upperBound:1,eType:f});Ee.get("eStructuralFeatures").add(Ie).add(Te);var _e=J.create({name:"source",upperBound:1,lowerBound:0,eType:f}),je=Z.create({name:"details",upperBound:-1,lowerBound:0,containment:!0,eType:Ee});V.get("eStructuralFeatures").add(_e).add(je);var Pe=Z.create({name:"eTypeParameter",eType:ne,containment:!1,lowerBound:0,upperBound:1}),Ae=Z.create({name:"eUpperBound",containment:!0,eType:te}),Me=Z.create({name:"eLowerBound",containment:!0,eType:te}),De=Z.create({name:"eTypeArguments",containment:!0,upperBound:-1,eType:te}),Re=Z.create({name:"eClassifier",eType:W});te.get("eStructuralFeatures").add(Pe).add(Ae).add(Me).add(De).add(Re);var Le=Z.create({name:"eGenericType",upperBound:1,containment:!0,eType:te});q.get("eStructuralFeatures").add(Le);var Fe=Z.create({name:"eGenericSuperTypes",upperBound:-1,containment:!0,eType:te});h.get("eStructuralFeatures").add(Fe);var Ne=Z.create({name:"eGenericExceptions",upperBound:-1,containment:!0,eType:te});Q.get("eStructuralFeatures").add(Ne);var Be=Z.create({name:"eBounds",containment:!0,upperBound:-1,eType:te}),Ue=Z.create({name:"eGenericTypes",containment:!1,upperBound:-1,eType:te});ne.get("eStructuralFeatures").add(Be).add(Ue);var ze=Z.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});W.get("eStructuralFeatures").add(ze);var Ve=Z.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});Q.get("eStructuralFeatures").add(Ve),f.eClass=Y,f.set({name:"EString"}),g.eClass=Y,g.set({name:"EInt"}),m.eClass=Y,m.set({name:"EBoolean"}),b.eClass=Y,b.set({name:"EDate"}),v.eClass=Y,v.set({name:"EDouble"}),y.eClass=Y,y.set({name:"EIntegerObject"}),C.eClass=Y,C.set({name:"EFloatObject"}),O.eClass=Y,O.set({name:"ELongObject"}),x.eClass=Y,x.set({name:"EMap"}),S.eClass=Y,S.set({name:"EDiagnosticChain"}),k.eClass=Y,k.set({name:"JSObject"}),r.ELong=Y.create({name:"ELong"}),r.EFloat=Y.create({name:"EFloat"}),r.EShort=Y.create({name:"EShort"}),r.EDoubleObject=Y.create({name:"EDoubleObject"});var Ge=Z.create({name:"eClassifiers",lowerBound:0,upperBound:-1,containment:!0,eType:W}),He=Z.create({name:"eSubPackages",lowerBound:0,upperBound:-1,containment:!0,eType:H});H.get("eStructuralFeatures").add(J.create({name:"nsURI",eType:f})).add(J.create({name:"nsPrefix",eType:f})).add(Ge).add(He),r.EcorePackage=H.create({name:"ecore",nsPrefix:"ecore",nsURI:"http://www.eclipse.org/emf/2002/Ecore"}),r.EcorePackage.get("eClassifiers").add(U).add(z).add(V).add(G).add(H).add(W).add(h).add(Y).add(q).add(K).add(J).add(Z).add(Q).add($).add(X).add(ee).add(ne).add(te).add(Ee).add(f).add(m).add(g).add(v).add(y).add(C).add(O).add(x).add(S).add(b).add(r.EShort).add(r.EFloat).add(r.ELong).add(r.EDoubleObject).add(k),r.EObject=U,r.EModelElement=z,r.EClass=h,r.EClassifier=W,r.EAnnotation=V,r.EStringToStringMapEntry=Ee,r.EPackage=H,r.ETypedElement=q,r.ENamedElement=G,r.EStructuralFeature=K,r.EAttribute=J,r.EReference=Z,r.EEnum=X,r.EEnumLiteral=ee,r.EDataType=Y,r.EOperation=Q,r.EParameter=$,r.ETypeParameter=ne,r.EGenericType=te,r.EString=f,r.EBoolean=m,r.EInt=g,r.EDouble=v,r.EIntegerObject=y,r.EFloatObject=C,r.ELongObject=O,r.EMap=x,r.EDiagnosticChain=S,r.EDate=b,r.JSObject=k,r.EPackage.Registry={_ePackages:{},getEPackage:function(e){return this._ePackages[e]},register:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(!e.isSet("nsURI"))throw new Error("Cannot register EPackage without nsURI");e.get("eSubPackages").each((function(e){register(e)})),this._ePackages[e.get("nsURI")]=e})),ePackages:function(){return i.values(this._ePackages)},elements:function(e){var t=this.ePackages(),n=[t,i.map(t,(function(e){return function e(t){return i.map(t.eContents(),(function(t){return[t,e(t)]}))}(e)}))];return n=i.flatten(n),n=i.filter(n,(function(t){return!e||(e.eClass?t.eClass===e:t.eClass.get("name")===e)}))}},r.EPackage.Registry.register(r.EcorePackage),r.JSON={dataType:"json",contentType:"application/json",parse:function(e,t){i.isString(t)&&(t=JSON.parse(t));var n=[],a=e.get("resourceSet")||r.ResourceSet.create();function o(e,t){var s;if(e&&(t||e.eClass)){e.eClass&&(t=a.getEObject(e.eClass));try{s=r.create(t)}catch(c){throw new Error("Cannot parse or cannot find EClass for object"+JSON.stringify(e))}s&&(e._id&&(s._id=e._id),t===r.EAnnotation?function(e,t){if(e.source&&t.set("source",e.source),e.details)if(i.isArray(e.details));else{var n=t.get("details");i.each(e.details,(function(e,t){n.add(r.EStringToStringMapEntry.create({key:t,value:e}))}))}}(e,s):i.each(t.get("eAllStructuralFeatures"),function(e,t){return e&&t?function(r){if(r&&!r.get("derived")){var a=r.get("name"),s=e[a];if(void 0!==s)if(r.isTypeOf("EAttribute"))t.set(a,s);else if(r.get("containment")){var c=r.get("eType");1===r.get("upperBound")?t.set(a,o(s,c)):i.each(s||[],(function(e){t.get(a).add(o(e,c))}))}else n.push({parent:t,feature:r,value:s})}}:function(){}}(e,s)))}return s}i.isArray(t)?i.each(t,(function(t){e.add(o(t))})):e.add(o(t)),function(){var t=Ke(e);function r(e,n,i,r){var o=i.$ref,s=t[o];s||(s=a.getEObject(o)),s&&(r?e.get(n.get("name")).add(s):e.set(n.get("name"),s))}i.each(n,(function(e){var t=e.parent,n=e.feature,a=e.value;1===n.get("upperBound")?r(t,n,a,!1):i.each(i.isArray(a)?a:[a],(function(e){r(t,n,e,!0)}))}))}()},to:function(e){var t,n=e.get("contents").array(),a={};function o(e,t){var n=t.eResource(),i=e.eResource(),r=n!==i;if(n&&i){a[n.get("uri")]||(a[n.get("uri")]=Ke(n));var o=a[n.get("uri")];for(var s in o)if(o[s]===t)return r?n.get("uri")+"#"+s:s;return null}}function s(e,t,n){return!0===n?c(t):{$ref:o(e,t),eClass:t.eClass.eURI()}}function c(e){var t=e.eClass,n=e.values,a={eClass:t.eURI()};return e._id&&(a._id=e._id),t===r.EAnnotation?function(e,t){e.values.source&&(t.source=e.values.source),e.values.details&&e.values.details.size()>0&&(t.details={},e.values.details.each((function(e){var n=e.get("key"),i=e.get("value");n&&(t.details[n]=i)})))}(e,a):i.each(n,function(e,t){return e&&t?function(n,i){if("_"!==i[0]){var r=e.eClass.getEStructuralFeature(i),a=e.isSet(i);if(r&&a&&!r.get("derived")){var o=n,c=r.get("name"),u=1!==r.get("upperBound"),l=r.get("containment");r.isTypeOf("EAttribute")?t[c]=o:u?(t[c]=[],o.each((function(n){t[c].push(s(e,n,l))}))):t[c]=s(e,o,l)}}}:function(){}}(e,a)),a}if(a[e.get("uri")]=Ke(e),1===n.length){t=c(n[0])}else{t=[];for(var u=0;u<n.length;u++)t.push(c(n[u]))}return t}};var We=r.Resource=r.EClass.create({name:"Resource",eSuperTypes:[r.EObject],eStructuralFeatures:[{eClass:r.EAttribute,name:"uri",lowerBound:1,upperBound:1,eType:r.EString},{eClass:r.EReference,name:"contents",upperBound:-1,containment:!0,eType:r.EObject},{eClass:r.EReference,name:"resourceSet",upperBound:1,lowerBound:0,eType:r.ResourceSet}],eOperations:[{eClass:r.EOperation,name:"add",_:function(e){return e||e.eClass?(e.eContainer=this,this.get("contents").add(e),this):this}},{eClass:r.EOperation,name:"clear",_:function(){return this.get("contents").clear(),this}},{eClass:r.EOperation,name:"addAll",_:function(e){return i.isArray(e)&&i.each(e,(function(e){this.add(e)}),this),this}},{eClass:r.EOperation,name:"getEObject",eType:r.EObject,_:function(e){return e?this._index()[e]?this._index()[e]:void 0:null}},{eClass:r.EOperation,name:"each",_:function(e,t){return this.get("contents").each(e,t)}},{eClass:r.EOperation,name:"to",_:function(e,t){return e&&"function"==typeof e.to?e.to(this,t):r.JSON.to(this)}},{eClass:r.EOperation,name:"parse",_:function(e,t){return t&&"function"==typeof t.parse?t.parse(this,e):r.JSON.parse(this,e),this}},{eClass:r.EOperation,name:"save",_:function(e,t){t||(t={});var n,i=t.format?t.format:r.JSON;try{n=this.to(i)}catch(a){e(null,a)}e(n,null)}},{eClass:r.EOperation,name:"load",_:function(e,t,n){n||(n={});var i=n.format||r.JSON;this.get("resourceSet");try{this.parse(e,i)}catch(a){t(null,a)}this.trigger("change"),"function"==typeof t&&t(this,null)}},{eClass:r.EOperation,name:"remove",_:function(){var e=this.get("resourceSet");e&&e.get("resources").remove(this),this.clear()}},{eClass:r.EOperation,name:"_index",eType:k,_:function(){if(i.isUndefined(this.__updateIndex)){var e=this;e.__updateIndex=!0,e.on("add remove",(function(){e.__updateIndex=!0}))}return this.__updateIndex&&(this.__index=Ke(this),this.__updateIndex=!1),this.__index}}]}),Ye=function(){this.uriMap={}};Ye.prototype={map:function(e,t){this.uriMap[e]=t},normalize:function(e){var t=e.split("#")[0],n=this.uriMap[t];if(n)return n;var i,r,a=t.lastIndexOf("/")+1;return(i=t.slice(0,a))===t?e:(r=t.slice(a,t.length),this.normalize(i)+r)}};var Xe=r.ResourceSet=r.EClass.create({name:"ResourceSet",eSuperTypes:[r.EObject],eStructuralFeatures:[{eClass:r.EAttribute,name:"uri",upperBound:1,lowerBound:0,eType:r.EString},{eClass:r.EReference,name:"resources",upperBound:-1,containment:!0,eType:We}],eOperations:[{eClass:r.EOperation,eType:r.Resource,upperBound:1,name:"create",_:function(e){var t=i.isObject(e)?e:{uri:e};if(!t.uri)throw new Error("Cannot create Resource, missing URI parameter");var n=this.get("resources").find((function(e){return e.get("uri")===t.uri}));return n||((n=r.Resource.create(t)).set("resourceSet",this),this.get("resources").add(n),this.trigger("add",n),n)}},{eClass:r.EOperation,eType:r.EObject,upperBound:1,name:"getEObject",_:function(e){var t,n=e.split("#"),i=n[0],a=n[1];if(!a)return null;var o=r.EPackage.Registry.getEPackage(i);return o&&((t=o.eResource())||((t=this.create({uri:i})).add(o),this.get("resources").add(t),t.set("resourceSet",this))),t||(t=this.get("resources").find((function(e){return e.get("uri")===i})))?t.getEObject(a):null}},{eClass:r.EOperation,eType:r.EObject,upperBound:-1,name:"elements",_:function(e){var t=function(t){return!e||t.isKindOf(e)},n=this.get("resources").map((function(e){return i.filter(i.values(e._index()),t)}));return i.flatten(n)}},{eClass:r.EOperation,eType:r.JSObject,upperBound:1,name:"uriConverter",_:function(){return this._converter||(this._converter=new Ye),this._converter}},{eClass:r.EOperation,eType:r.JSObject,upperBound:1,name:"toJSON",_:function(){var e={total:this.get("resources").size(),resources:[]};return this.get("resources").each((function(t){e.resources.push({uri:t.get("uri"),length:t.get("contents").size(),contents:t.get("contents").map((function(e){return{eURI:e.eURI(),eClass:e.eClass.eURI()}}))})})),e}},{eClass:r.EOperation,name:"parse",_:function(e){e&&e.resources&&i.each(e.resources,(function(e){e.uri&&resourceSet.create({uri:e.uri})}),this)}}]});We.getEStructuralFeature("resourceSet").set("eType",Xe);var qe=r.EPackage.create({name:"resources",nsPrefix:"resources",nsURI:"http://www.eclipselabs.org/ecore/2012/resources",eClassifiers:[Xe,We]});function Ke(e){var t={},n=e.get("contents").array();if(n.length){var r,a,o=function e(n,r){var a=n.eContents();t[r]=n,i.each(a,(function(t){e(t,t.fragment())}))};if(1===n.length)(r=n[0])._id?o(r,r._id):(a=r.eClass.get("eIDAttribute")||null,o(r,a?r.get(a.get("name")):"/"));else for(var s=0;s<n.length;s++)(r=n[s])._id?o(r,r._id):(a=r.eClass.get("eIDAttribute")||null,o(r,a?r.get(a.get("name")):"/"+s))}return t}function Je(e){return!e.get("abstract")}function Ze(e,t){if(!e)return[];var n=e.eClass.get("eAllContainments");return i.flatten(i.map(n,(function(n){var r=function(e){if(!e||!e.eClass)return[];var t=e.get("eAllSubTypes");return i.filter(i.union([e],t),Je)}(n.get("eType"));return t&&"function"==typeof t?t(e,n,r):r})))}function Qe(e,t){return e?Ze(e.eContainer,t):[]}function $e(e,t,n){return i.map(n,(function(n){return{label:"New "+n.get("name"),owner:e,feature:t,type:n}}))}function et(e){return e.get("name")||""}function tt(e){var t=e.get("eType"),n=e.eClass===r.EOperation,i=t?t.get("name"):null;return e.get("name")+(n?"()":"")+(i?" : "+i:"")}r.Resource.create({uri:r.EcorePackage.get("nsURI")}).add(r.EcorePackage),r.Resource.create({uri:qe.get("nsURI")}).add(qe),r.EPackage.Registry.register(qe),r.Edit={childTypes:Ze,siblingTypes:Qe,childDescriptors:function(e){return Ze(e,$e)},siblingDescriptors:function(e){return Qe(e,$e)},choiceOfValues:function(e,t){if(null==e||null==e.eResource()||null==e.eResource().get("resourceSet"))throw new Error("Bad argument");var n=t.get("eType"),r=e.eResource().get("resourceSet").elements();return i.filter(r,(function(e){return e.isKindOf(n)}))},_get:function(e,t){if(!t||!t.eClass)return null;var n=t.eClass.get("name");return this[n]?"function"==typeof this[n][e]?this[n][e](t):this[n][e]:t.eClass.get("name")},text:function(e){return this._get("text",e)},icon:function(e){return this._get("icon",e)},label:function(e){return this._get("label",e)},EClass:{text:et,label:et,icon:"icon-EClass"},EDataType:{text:et,label:et,icon:"icon-EDataType"},EEnum:{text:et,label:et,icon:"icon-EEnum"},EEnumLiteral:{text:function(e){return e.get("name")+" = "+e.get("value")},label:et,icon:"icon-EEnumLiteral"},EAttribute:{text:tt,label:et,icon:"icon-EAttribute"},EReference:{text:tt,label:et,icon:"icon-EReference"},EOperation:{text:tt,label:et,icon:"icon-EOperation"},EPackage:{text:et,label:et,icon:"icon-EPackage"},EAnnotation:{text:function(e){return e.get("source")},label:function(e){return e.get("source")},icon:"icon-EAnnotation"},EStringToStringMapEntry:{text:function(e){return e.get("key")+" -> "+e.get("value")},label:function(e){return e.get("key")},icon:"icon-EStringToStringMapEntry"},ResourceSet:{text:"resourceSet",label:"",icon:"icon-EObject"},Resource:{text:function(e){return e.get("uri")},label:function(e){return e.get("uri")},icon:"icon-EObject"}}}).call(this)},Gjo4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),r=n("XLk1"),a=n("NNJu"),o=n("EM62"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return c(e||t)},t.\u0275cmp=o.Zb({type:t,selectors:[["toolbar-dropdown-input"]],features:[o.Rb([{provide:a.j,useExisting:Object(o.lb)((function(){return t}))}]),o.Pb],decls:3,vars:1,consts:[[1,"toolbar-dd-input-container"],[1,"toolbar-dd-input-button",3,"value","focusout","input"],["inputElement",""]],template:function(e,t){1&e&&(o.lc(0,"a",0),o.lc(1,"input",1,2),o.tc("focusout",(function(e){return t.handleChange(e.target.value,!0)}))("input",(function(e){return t.handleChange(e.target.value,!1)})),o.kc(),o.kc()),2&e&&(o.Sb(1),o.Cc("value",t.inputValue))},styles:[".toolbar-dd-input-container[_ngcontent-%COMP%]{display:flex;height:45px;align-items:center;margin-left:10px}.toolbar-dd-input-button[_ngcontent-%COMP%]{font-size:18px;padding:0 8px 5px 0;background:url(/assets/images/decoratives/dropdown-arrow.svg) no-repeat 100%;background-size:8px;width:40px}"],changeDetection:0}),t}(r.a),c=o.nc(s)},GmLw:function(e,t,n){"use strict";var i=n("dEMF"),r=n("1TxV"),a=n("Rl48");function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,n)}function u(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,n),r=(e=s(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(i)return z(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return _(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){var a,o=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var l=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var p=!0,d=0;d<c;d++)if(u(e,a+d)!==u(t,d)){p=!1;break}if(p)return a}return-1}function y(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function C(e,t,n,i){return G(z(t,e.length-n),e,n,i)}function O(e,t,n,i){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return O(e,t,n,i)}function S(e,t,n,i){return G(V(t),e,n,i)}function k(e,t,n,i){return G(function(e,t){for(var n,i,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(n=e.charCodeAt(o))>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function w(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,c,u=e[r],l=null,p=u>239?4:u>223?3:u>191?2:1;if(r+p<=n)switch(p){case 1:u<128&&(l=u);break;case 2:128==(192&(a=e[r+1]))&&(c=(31&u)<<6|63&a)>127&&(l=c);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(c=(15&u)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,p=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),r+=p}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=I));return n}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,i){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,r){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(i,r),l=e.slice(t,n),p=0;p<s;++p)if(u[p]!==l[p]){a=u[p],o=l[p];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function T(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function _(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function j(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=U(e[a]);return r}function P(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,i,r,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function D(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function R(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function L(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,i,a){return a||L(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function N(e,t,n,i,a){return a||L(e,0,n,8),r.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var r=t-e;n=new c(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},c.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=c.isBuffer(e)?e:z(new c(e,i).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}},IGWl:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("ZTXN"),r=n("C05f"),a=n("6Oco"),o=(n("Cupj"),n("EM62")),s=n("jHi0"),c=n("2kYt"),u=function(){function e(){this._change=new i.a,this.iconSource=new r.a(""),this.activeClass=new r.a(!1)}return Object.defineProperty(e.prototype,"tooltipValue",{get:function(){return this._props?this._props.tooltip:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this._props.icon&&this.iconSource.next("./assets/icons/symbol-defs.svg#"+this._props.icon),this._data&&(this._data.value?this.activeClass.next(!0):this.activeClass.next(!1))},e.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["icon-button"]],decls:8,vars:9,consts:[["tooltip","","placement","top",1,"icon-button-container",3,"deactivated"],[1,"nu-btn-med","nu-btn-icon",3,"click"],[1,"nu-icon","nu-ic-text"],[1,"tooltip-content"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.lc(1,"button",1),o.tc("click",(function(){return t._change.next(t._data)})),o.yc(2,"async"),o.wc(),o.lc(3,"svg",2),o.gc(4,"use"),o.yc(5,"async"),o.kc(),o.kc(),o.vc(),o.lc(6,"span",3),o.cd(7),o.kc(),o.kc()),2&e&&(o.Cc("deactivated",!t.tooltipValue),o.Sb(1),o.Xb("active",o.zc(2,5,t.activeClass)),o.Sb(3),o.Tb("href",o.zc(5,7,t.iconSource),null,"xlink"),o.Sb(3),o.dd(t.tooltipValue))},directives:[s.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e}()},J8oI:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("SBw3"),r=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(r.a)({value:t.value,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(r.a)({styles:{color:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.pc(i.a))},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},K5wl:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("uo+j"),r=n("+1jB"),a=n("PC6z"),o=n("QoSw"),s=n("5xGT"),c=n("nsO7"),u=n("EM62"),l=function(){function e(e,t,n){this.modelChangeUtils=e,this.state=t,this.ll=n}return e.prototype.syncEdataChanges=function(e,t){var n=this;t.forEach((function(t){e.filter((function(e){return t.eData.find((function(t){return t===e.id}))})).forEach((function(e){var i=e.__sakota__.getChanges(),r=Object(a.b)(i);r.edata&&n.edataModelDataDefChanged(t,e,r.edata),r.entities&&Object.keys(r.entities).forEach((function(i){var a=e.entities[i];if(a){var o=Object.keys(a.shapes[t.id]||{}),s=r.entities[i];if(o.length>0){if(s.$set){var c=[];if(s.$set.data)c=Object.keys(s.$set.data);else if(Object.keys(s.$set).filter((function(e){return/data/.test(e)})).length)c=Object.keys(s.$set).filter((function(e){return/data/.test(e)}));else if(Object.keys(s.$set).filter((function(e){return/shapes./.test(e)})).length){var u=Object.keys(s.$set).filter((function(e){return/shapes./.test(e)})),l=u.map((function(e){if(3===e.split(".").length)return e.substr(e.lastIndexOf(".")+1)}));return l[0]||(l=Object.keys(s.$set[u[0]])),void n.copyAllEntityValuesToShapes(t,l,a,e)}var p=[];c.forEach((function(t){var i;if(s.$set.data&&void 0!==s.$set.data[t]&&null!==s.$set.data[t]){i=t;var r=n.getEntityDataDef(e,a.id,i);p.push({path:i,value:s.$set.data[t],def:r})}else if(void 0!==s.$set[t]&&null!==s.$set[t]){i=t.replace("data.","");r=n.getEntityDataDef(e,a.id,i);p.push({path:i,value:s.$set[t],def:r})}}));var d=a.getDef?a.getDef():void 0;d&&n.modelChangeUtils.syncEDataChanges(t,{shapeIds:o,set:p,entityDef:d})}if(s.$unset){c=[];if(s.$unset.data)c=Object.keys(s.$unset.data);else if(Object.keys(s.$unset).filter((function(e){return/data/.test(e)})).length)c=Object.keys(s.$unset).filter((function(e){return/data/.test(e)}));else if(Object.keys(s.$unset).filter((function(e){return/shapes./.test(e)})).length)return;var h=c.map((function(e){return{path:e.replace("data.",""),value:void 0}}));n.modelChangeUtils.syncEDataChanges(t,{shapeIds:o,set:h,entityDef:a.getDef()})}}n.updateLinkedEntities(e,a,s)}}))}))}))},e.prototype.copyAllEntityValuesToShapes=function(e,t,n,i){var r=[];for(var a in n.data){var o=this.getEntityDataDef(i,n.id,a);r.push({path:a,value:n.data[a],def:o})}this.modelChangeUtils.syncEDataChanges(e,{shapeIds:t,set:r,entityDef:n.getDef()})},e.prototype.getEntityDataDef=function(e,t,n){if(e&&e.dataDefs&&e.dataDefs[t]){return Object(c.cloneDeep)(e.dataDefs[t],{})[n]}},e.prototype.edataModelDataDefChanged=function(e,t,n){var i=function(n){var i=/dataDefs\.([^\.]+)\.([^\.]+)\./g;i.lastIndex=0;var a=i.exec(n);if(a){var o=t.entities[a[1]];if(o.shapes&&o.shapes[e.id]){var s=Object.keys(o.shapes[e.id]),c={};s.forEach((function(e){c[e]||(c[e]={}),c[e][a[2]]=t.dataDefs[o.id][a[2]]})),r.modelChangeUtils.updateShapeDataDefs(e,c)}}},r=this;for(var a in n.$set)i(a);var o=function(i){var r=/customEntityDefs\.([^\.]+)\.editable$/g;r.lastIndex=0;var a=r.exec(i);if(a){var o=n.$set[i],u=t.getEntitiesByDefId(a[1]),l={};u.forEach((function(e){Object.keys(e.shapes).forEach((function(n){Object.keys(e.shapes[n]).forEach((function(i){Object.keys(t.dataDefs[e.id]).forEach((function(e){Object(c.set)(l,n+"."+i+"."+e+".optional",!0),Object(c.set)(l,n+"."+i+"."+e+".labelEditable",o),Object(c.set)(l,n+"."+i+"."+e+".removeable",o)}))}))}))})),l[e.id]&&s.modelChangeUtils.updateShapeDataDefs(e,l[e.id])}},s=this;for(var a in n.$set)o(a);var u=function(i){var r=/customEntityDefs\.([^\.]+)\.dataItems\.([^\.]+)\.label$/g;r.lastIndex=0;var a=r.exec(i);if(a){var o=n.$set[i],s=t.getEntitiesByDefId(a[1]),u={};s.forEach((function(e){Object.keys(e.shapes).forEach((function(t){Object.keys(e.shapes[t]).forEach((function(e){Object(c.set)(u,t+"."+e+"."+a[2]+".optional",!0),Object(c.set)(u,t+"."+e+"."+a[2]+".label",o)}))}))}));var p=u[e.id];l.modelChangeUtils.updateShapeDataDefs(e,p)}},l=this;for(var a in n.$set)u(a);var p=function(i){var r=/customEntityDefs\.([^\.]+)\.dataItems$/g;r.lastIndex=0;var a=r.exec(i);if(a){var o=t.getEntitiesByDefId(a[1]),s={};o.forEach((function(t){Object.keys(t.shapes).forEach((function(i){i===e.id&&Object.keys(t.shapes[i]).forEach((function(t){Object.keys(n.$set[a[0]]).forEach((function(r){e.shapes[t].data[r]||(Object(c.set)(s,i+"."+t+"."+r,n.$set[a[0]][r]),e.shapes[t].data[r]={value:n.$set[a[0]][r].default})}))}))}))}));var u=s[e.id];d.modelChangeUtils.updateShapeDataDefs(e,u)}},d=this;for(var a in n.$set)p(a)},e.prototype.updateLinkedEntities=function(e,t,n){var r=this;if(t.links&&n.$set){var a=Object.keys(n.$set).filter((function(e){return/data/.test(e)})),o=Object.keys(n.$set).filter((function(e){return/links/.test(e)}));if(a.length){var s=t.getDef(),c={};a.forEach((function(i){var a=i.replace("data.","");c[a]=n.$set[i],a===s.linkIdDataItem&&r.updateLinkIdentifier(e,t)}));var u=new Map;for(var l in s.dataItems)s.dataItems[l].sendTo&&u.set(l,s.dataItems[l]);u.size>0&&this.sendDataItemUpdates(e,t,c,u)}else if(o.length){this.sendLinkIdentifier(e,t,n);var p=t.getDef(),d=[];for(var l in p.dataItems)p.dataItems[l].sendTo&&d.push({id:l,def:p.dataItems[l].sendTo});d.length>0&&d.forEach((function(n){var a=t.getMatchingLinks(n.def[0].type,n.def[0].handshake);if(a.length>0){var o=t.data[n.id];if(!o){var s=p.dataItems[n.id].default;o=i.a.replaceHandlebars(s,t.data)}a.forEach((function(t){r.modelChangeUtils.syncLinkedEData(e,{entityId:t.entityId,dataItemId:n.def[0].target,dataItem:o})}))}}))}}},e.prototype.updateLinkIdentifier=function(e,t){var n=t.getLinkIdDataValue();if(n)for(var i in t.links){var r=t.links[i];this.modelChangeUtils.updateEntityLinkValue(e,{entityId:r.entityId,sourceEDataId:e.id,sourceEntityId:t.id,type:r.type,handshake:r.handshake,identifier:n})}},e.prototype.sendDataItemUpdates=function(e,t,n,i){var r=this,a=[];for(var o in n)i.has(o)&&a.push({id:o,def:i.get(o).sendTo});a.length>0&&a.forEach((function(i){t.getMatchingLinks(i.def[0].type,i.def[0].handshake).forEach((function(t){r.modelChangeUtils.syncLinkedEData(e,{entityId:t.entityId,dataItemId:i.def[0].target,dataItem:n[i.id]})}))}))},e.prototype.sendLinkIdentifier=function(e,t,n){var i=t.getLinkIdDataValue();if(i){var r,a=Object.keys(n.$set).filter((function(e){return/links/.test(e)}));if(a.length>0)for(var o in a)if(r=n.$set[a[o]]){var s=Object.keys(r),c=void 0;r.eDataId&&r.entityId?c=r:s.length>0&&r[s[0]].eDataId&&r[s[0]].entityId&&(c=r[s[0]]),c&&this.modelChangeUtils.updateEntityLinkValue(e,{entityId:r.entityId,sourceEDataId:e.id,sourceEntityId:t.id,type:r.type,handshake:r.handshake,identifier:i})}}},e.\u0275fac=function(t){return new(t||e)(u.pc(r.a),u.pc(s.Jb),u.pc(o.a))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},Kz6v:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("6Oco"),r=n("5xGT"),a=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextParserBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set&&t===r.A.EXECUTE)return this.applyTextToData(e,n),Object(i.b)()},e.prototype.getTextWithRowId=function(e){for(var t,n=[],i=0,r=!0,a=0;a<e.length;a++){var o=e[a];r?(n[i]={rowId:t&&t===o.rowId?"__N":o.rowId||"__N",text:o.text},o.text.endsWith("\n")?(t=n[i].rowId,i++):r=!1):(n[i].text+=o.text,o.text.endsWith("\n")&&(t=n[i].rowId,r=!0,i++))}return n},e.prototype.applyTextToData=function(t,n){var i=function(i){e.regexText.lastIndex=0;var a=e.regexText.exec(i);if(!a)return"continue";var o=a[1],s=a[2],c=t.shapes[o];c.data||(c.data={});var u=c.getTextParser(s);if(!u)return{value:void 0};var l=r.getTextWithRowId(n.$set[i]).map((function(e){return"creately.uml.class"===c.defId?{rowId:e.rowId,parseResult:u.parse(e.text)}:u.parse(e.text)}));c.updateDataItem&&c.updateDataItem(c,s,l)},r=this;for(var a in n.$set){var o=i(a);if("object"==typeof o)return o.value}},e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e}()},"LA+B":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),r=n("NNJu"),a=n("EM62"),o=n("jHi0"),s=n("2kYt"),c=n("g5Ym");function u(e,t){if(1&e&&a.gc(0,"static-image",3),2&e){var n=a.xc();a.Cc("enableHover",!0)("type",n.item.itemIcon.type)("value",n.item.itemIcon.value)("width",n.item.itemIcon.width||20)("height",n.item.itemIcon.height||20)}}var l=function(e){function t(t){return e.call(this,t)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.fc(a.r))},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-grid-dropdown-item"]],features:[a.Rb([{provide:r.k,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:4,vars:3,consts:[["tooltip","","placement","top",3,"deactivated"],[1,"tooltip-content"],[3,"enableHover","type","value","width","height",4,"ngIf"],[3,"enableHover","type","value","width","height"]],template:function(e,t){1&e&&(a.lc(0,"a",0),a.lc(1,"span",1),a.cd(2),a.kc(),a.ad(3,u,1,5,"static-image",2),a.kc()),2&e&&(a.Cc("deactivated",!t.item.tooltip),a.Sb(2),a.dd(t.item.tooltip),a.Sb(1),a.Cc("ngIf",t.item.itemIcon))},directives:[o.a,s.t,c.a],encapsulation:2,changeDetection:0}),t}(r.k)},LC7v:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("hSRu"),a=n("EM62"),o=n("2kYt"),s=n("pYIu"),c=n("XwbL"),u=n("uXwy");function l(e,t){if(1&e&&(a.lc(0,"label"),a.cd(1),a.kc()),2&e){var n=a.xc();a.Sb(1),a.ed(" ",null==n.props?null:n.props.label," ")}}function p(e,t){if(1&e&&a.gc(0,"sidebar-list-dropdown-item",5),2&e){var n=t.$implicit;a.Cc("item",n)}}var d=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["sidebar-list-dropdown"]],features:[a.Pb],decls:8,vars:14,consts:[[4,"ngIf"],[1,"dropdown-item",3,"settings","direction","autoPosition"],["dd",""],["ddbutton","",3,"items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.lc(0,"div"),a.ad(1,l,2,1,"label",0),a.lc(2,"abs-dropdown",1,2),a.gc(4,"sidebar-dropdown-button",3),a.yc(5,"async"),a.ad(6,p,1,1,"sidebar-list-dropdown-item",4),a.yc(7,"async"),a.kc(),a.kc()),2&e){var n,i;a.Ub(t.dropdownType),a.Sb(1),a.Cc("ngIf",null==t.props?null:t.props.label),a.Sb(1),a.Dc("direction",null==t.props?null:t.props.dropdownDirection),a.Cc("settings",a.Gc(13,d))("autoPosition",!1),a.Sb(2),a.Cc("items",null==(n=a.zc(5,9,t._data))?null:n.value),a.Sb(2),a.Cc("ngForOf",null==(i=a.zc(7,11,t._data))?null:i.value)}},directives:[o.t,s.a,c.a,o.s,u.a],pipes:[o.b],styles:["sidebar-list-dropdown-item[_ngcontent-%COMP%]{display:block}sidebar-list-dropdown-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),t}(r.a),f=a.nc(h)},LLEj:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("D57K"),r=n("Wpmq"),a=n("8j5Y"),o=n("cJ9h"),s=n("kuMc"),c=n("xVbo"),u=n("YtkY"),l=n("TLy2"),p=n("0Woy"),d=function(e){function t(t,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0);var a=e.call(this,t,n,i,r)||this;return a.offsetX=n.nativeEvent.offsetX,a.offsetY=n.nativeEvent.offsetY,a.clientX=n.nativeEvent.clientX,a.clientY=n.nativeEvent.clientY,a}return Object(i.e)(t,e),t}(n("MvFr").a),h=function(e){function t(t,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0);var a=e.call(this,t,n,i,r)||this;return a.setRelatedShape(n),a}return Object(i.e)(t,e),t}(d),f=n("ljsB"),g=n("5xGT"),m=n("g6G6"),v=n("ROBh"),b=n("KTx3"),y=n("qZtG"),C=n("pgG0"),O=n("/xGf"),x=n("EM62"),S=function(){function e(e,t){this.commandService=e,this.vToDcoordinate=t,this.zoomSensitivity=1/800,this.panSensitivity=1/4,this.subs=[]}return e.prototype.initialize=function(e,t,n){var i=this;this.diagramCanvas=e,this.interactionCanvas=t,this.gridCanvas=n;var r=this.getStageWheelOnNoKeysDown().pipe(Object(a.a)((function(e){i.updatePan(-e.pixelX*i.panSensitivity,-e.pixelY*i.panSensitivity)}))),o=this.getStageWheelOnCtrlKeyDown().pipe(Object(a.a)((function(e){return i.updateZoom(1-e.pixelY*i.zoomSensitivity,e.offsetX,e.offsetY)}))),s=this.getAllCanvasMouseCapture().pipe(Object(a.a)((function(){return i.interactionCanvas.canvas.focus()})));return Object(m.a)(r,o,s)},e.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.diagramCanvas=void 0,this.interactionCanvas=void 0,this.gridCanvas=void 0},e.prototype.getCursor=function(){return Object(v.a)(this.defaultCursor)},e.prototype.getShapeTouch=function(){var e=this;return this.getShapes().pipe(Object(o.a)((function(t){return Object(b.a)(t,"mousedown").pipe(Object(s.a)(Object(b.a)(e.diagramCanvas,"childRemoved").pipe(Object(c.a)((function(e){return e.child===t})))))})),Object(u.a)((function(e){return e})))},e.prototype.getShapes=function(){var e=this;return Object(y.a)(Object(C.a)(0,this.diagramCanvas.numChildren).pipe(Object(u.a)((function(t){return e.diagramCanvas.getChildAt(t)}))),Object(b.a)(this.diagramCanvas,"childAdded").pipe(Object(u.a)((function(e){return e.child}))))},e.prototype.getShapeRightClick=function(){return this.getShapeTouch().pipe(Object(c.a)((function(e){return 2===e.nativeEvent.button})),Object(u.a)((function(e){return new h("shapeRightClick",e)})))},e.prototype.getAllCanvas=function(){return Object(v.a)(this.diagramCanvas,this.interactionCanvas,this.gridCanvas)},e.prototype.getAllCanvasMouseCapture=function(){return this.getAllCanvas().pipe(Object(o.a)((function(e){return Object(m.a)(Object(b.a)(e,"mousedown",{capture:!0}),Object(b.a)(e,"pressmove",{capture:!0}),Object(b.a)(e,"pressup",{capture:!0}))})),Object(u.a)((function(e){return e})))},e.prototype.getStageDrag=function(e){return Object(b.a)(e,"stagemousedown").pipe(Object(l.a)((function(){return Object(b.a)(e,"stagemousemove").pipe(Object(p.a)(),Object(a.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];if(n&&(void 0===r.nativeEvent.movementX||void 0===r.nativeEvent.movementY)){var a=r.localX-n.localX,o=r.localY-n.localY;r.nativeEvent.movementX=a,r.nativeEvent.movementY=o}})),Object(s.a)(Object(b.a)(e,"stagemouseup")))})),Object(u.a)((function(e){var t=Object(i.h)(e,2);t[0];return t[1]})),Object(c.a)((function(e){return!!e})))},e.prototype.getStageMouseDown=function(e){return Object(b.a)(e,"mousedown").pipe(Object(u.a)((function(e){return e})))},e.prototype.getStagePressUp=function(e){return Object(b.a)(e,"pressup").pipe(Object(u.a)((function(e){return e})))},e.prototype.getStageWheel=function(){return Object(m.a)(Object(b.a)(this.interactionCanvas.canvas,"gesturestart"),Object(b.a)(this.interactionCanvas.canvas,"gesturechange"),Object(b.a)(this.interactionCanvas.canvas,"gestureend"),Object(b.a)(this.interactionCanvas.canvas,"wheel")).pipe(Object(u.a)((function(e){if("gesturestart"===e.type||"gesturechange"===e.type||"gestureend"===e.type){var t=e.scale>1?-1*e.scale:e.scale+1.5;e.pixelY=t,e.offsetX=e.clientX,e.offsetY=e.clientY,e.gesture=!0}else{var n=O(e);e.pixelX=n.pixelX,e.pixelY=n.pixelY,e.gesture=!1}return e})),Object(a.a)((function(e){return e.preventDefault()})))},e.prototype.getStageWheelOnCtrlKeyDown=function(){return this.getStageWheel().pipe(Object(c.a)((function(e){return e.ctrlKey||e.metaKey||e.gesture})),Object(u.a)((function(e){return e})))},e.prototype.getStageWheelOnNoKeysDown=function(){return this.getStageWheel().pipe(Object(c.a)((function(e){return!e.metaKey&&!e.ctrlKey&&!e.gesture})),Object(u.a)((function(e){return e})))},e.prototype.getStageRightClick=function(e){return this.getStageMouseDown(e).pipe(Object(c.a)((function(e){return 2===e.nativeEvent.button})),Object(u.a)((function(e){return new d("canvasRightClick",e)})))},e.prototype.getInteractionRightClick=function(e){return this.getStageMouseDown(e).pipe(Object(c.a)((function(e){return 2===e.nativeEvent.button})),Object(u.a)((function(e){return new h("shapeRightClick",e)})))},e.prototype.updatePan=function(e,t){this.commandService.dispatch(f.a.panDiagram,{dx:e,dy:t,animate:!1})},e.prototype.updateZoom=function(e,t,n){this.commandService.dispatch(f.a.zoomDiagram,{delta:e,toX:t,toY:n,animate:!1})},e.prototype.getObjectsUnderPoint=function(e){return Object(i.j)(this.interactionCanvas.getObjectsUnderPoint(e.x,e.y,0),this.diagramCanvas.getObjectsUnderPoint(this.vToDcoordinate.x(e.x),this.vToDcoordinate.y(e.y),0)).filter((function(e){return!!e.getCursor}))},e.prototype.getCursorByContext=function(e,t){var n=e.find((function(e){var n=e.getCursor(t);return n&&(!!n.cursor||!!n.tail)}));return n?n.getCursor(t):this.defaultCursor},e.prototype.pointerMove=function(){return Object(b.a)(this.interactionCanvas,"stagemousemove").pipe(Object(u.a)((function(e){return{x:e.stageX,y:e.stageY}})))},e.\u0275fac=function(t){return new(t||e)(x.pc(g.B),x.pc(r.a))},e.\u0275prov=x.bc({token:e,factory:e.\u0275fac}),e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.e)(t,e)}(g.Jb)},"Lk+x":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("D57K"),r=n("uWBd"),a=n("5vYS"),o=n("5xGT"),s=n("W0Mc"),c=n("nsO7"),u=n("6Oco"),l=n("X0jn"),p=n("EM62"),d=function(){function e(e,t,n){this.state=e,this.pathingSvc=t,this.reconnectSvc=n}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectorReconnectBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX","scaleY","x","y","angle","gluepoints"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set)return this.shapeChange(e,n,t),Object(u.b)()},e.prototype.reconnect=function(e,t,n,i){var r=this;t.connectors.forEach((function(t){var a=[t.connector.path[t.connector.fromEndpoint.id],t.connector.path[t.connector.toEndpoint.id]];r.reconnectShape(t.connector.id,a,e,n,i).forEach((function(e){return r.replaceOrPush(a,e)})),r.editConnectorPoint(e,t.connector.id,a),r.updateConnectorBumps(e,t.connector.id,n),r.updateConnectorBumpsForAboveConnectors(e,t.connector,n)}))},e.prototype.editConnectorPoint=function(e,t,n){var i=e.shapes[t],r=this.pathingSvc.repath(i.id,e,n,!1),o=a.a.createPathFromPoints(r);Object(c.isEqual)(i.path,o)||(i.path=o)},e.prototype.updateConnectorBumps=function(e,t,n){if(n===o.A.EXECUTE){var i=e.shapes[t];if(i.showBumps){var r=this.pathingSvc.setBumps(i.id,e,null,null),s=a.a.createPathFromPoints(r);Object(c.isEqual)(i.path,s)||(i.path=s)}}},e.prototype.shapeChange=function(t,n,i){var r=new Set;for(var a in n.$set){e.regexShape.lastIndex=0;var o=e.regexShape.exec(a);if(o){var s=o[1],c=t.shapes[s];if(!c.isConnector()){if(!r.has(s)){var u=this.getChangedConnectorId(n);this.reconnect(t,c,i,u)}r.add(s)}}}},e.prototype.getChangedConnectorId=function(t){for(var n in t.$set){e.regexConnectorPath.lastIndex=0;var i=e.regexConnectorPath.exec(n);if(i)return i[1]}return null},e.prototype.updateConnectorBumpsForAboveConnectors=function(e,t,n){var r,a;if(n===o.A.EXECUTE){var s=Object.keys(e.shapes).map((function(t){return e.shapes[t]})).filter((function(e){return e.type===l.u.Connector&&t.zIndex<e.zIndex}));try{for(var c=Object(i.k)(s),u=c.next();!u.done;u=c.next()){var p=u.value;this.updateConnectorBumps(e,p.id,n)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}}},e.prototype.reconnectShape=function(e,t,n,i,r){var a=this,s=this.getEndpoints(e,t,n),c=this.state.get("CustomGluePoint");return i===o.A.EXECUTE&&c&&c.shapeId&&s.forEach((function(t){(1===s.length||r&&e===r&&t.shapeId===c.shapeId)&&(t.shapeId=c.shapeId,t.gluepointId=c.gluepoint.id,t.gluepointLocked=!0,a.state.set("CustomGluePoint",{}))})),this.reconnectSvc.reconnect(e,n,s)},e.prototype.getEndpoints=function(e,t,n){var i=n.shapes[e].getPoints(),r=[i[0].id,Object(c.last)(i).id];return t.filter((function(e){return r.indexOf(e.id)>=0}))},e.prototype.replaceOrPush=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n?e.splice(n,1,t):e.push(t)},e.regexShape=/shapes\.([^\.]+)(?!\.text)(?!\.defaultTextFormat)(?!\.style)\./g,e.regexConnectorPath=/shapes\.([^\.]+)(\.path)/g,e.\u0275fac=function(t){return new(t||e)(p.pc(o.Jb),p.pc(r.a),p.pc(s.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},Mb5J:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("NNJu"),a=n("EM62"),o=n("2kYt"),s=n("g5Ym");function c(e,t){1&e&&(a.wc(),a.lc(0,"svg",5),a.gc(1,"use",6),a.kc())}function u(e,t){if(1&e&&a.gc(0,"static-image",7),2&e){var n=a.xc();a.Cc("enableHover",!0)("type",n.item.itemIcon.type)("value",n.item.itemIcon.value)("width",70)("height",20)}}function l(e,t){if(1&e&&(a.lc(0,"span",9),a.cd(1),a.kc()),2&e){var n=a.xc(2);a.Sb(1),a.dd(n.item.subLabel)}}function p(e,t){if(1&e&&(a.lc(0,"a",8),a.cd(1),a.ad(2,l,2,1,"span",4),a.kc()),2&e){var n=a.xc();a.Sb(1),a.ed(" ",n.item.label," "),a.Sb(1),a.Cc("ngIf",n.item.subLabel)}}function d(e,t){if(1&e&&(a.lc(0,"span",9),a.cd(1),a.kc()),2&e){var n=a.xc();a.Sb(1),a.dd(n.item.subLabel)}}var h=function(e){function t(t){return e.call(this,t)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.fc(a.r))},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-list-dropdown-item"]],features:[a.Rb([{provide:r.k,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:5,vars:8,consts:[["tabindex","-1",1,"toolbar-dd-item-container","abs-dropdown-item","fx-center-all"],["class","nu-icon dropdown-item-select-tick",4,"ngIf"],[3,"enableHover","type","value","width","height",4,"ngIf"],["class","toolbar-dd-item-label",4,"ngIf"],["class","toolbar-dd-item-sublabel",4,"ngIf"],[1,"nu-icon","dropdown-item-select-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[3,"enableHover","type","value","width","height"],[1,"toolbar-dd-item-label"],[1,"toolbar-dd-item-sublabel"]],template:function(e,t){1&e&&(a.lc(0,"li",0),a.ad(1,c,2,0,"svg",1),a.ad(2,u,1,5,"static-image",2),a.ad(3,p,3,2,"a",3),a.ad(4,d,2,1,"span",4),a.kc()),2&e&&(a.Xb("selected",t.selected)("has-icons",t.item.itemIcon&&t.item.label),a.Sb(1),a.Cc("ngIf",!(t.item.itemIcon&&t.item.label)),a.Sb(1),a.Cc("ngIf",t.item.itemIcon),a.Sb(1),a.Cc("ngIf",t.item.label),a.Sb(1),a.Cc("ngIf",t.item.subLabel))},directives:[o.t,s.a],styles:[".toolbar-dd-item-container.has-icons[_ngcontent-%COMP%]  .static-image-container{height:30px;margin-right:5px}.toolbar-dd-item-label[_ngcontent-%COMP%]{flex:1;line-height:normal}.toolbar-dd-item-sublabel[_ngcontent-%COMP%]{color:rgba(61,66,66,.6);float:right;padding-left:15px}"],changeDetection:0}),t}(r.k)},MvFr:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("D57K"),r=n("deqJ"),a=n("h1tj"),o=function(e){function t(t,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0);var a=e.call(this,t,i,r)||this;return a.relatedMouseEvent=n,a.relatedShape=n.target,a}return Object(i.e)(t,e),t.prototype.setRelatedShape=function(e){if(e.target instanceof r.a)this.relatedShape=e.target;else if(e.currentTarget instanceof r.a)this.relatedShape=e.currentTarget;else for(var t=e.target;t&&t.parent;){if(t.parent instanceof r.a){this.relatedShape=t.parent;break}t=t.parent}},t}(a.Event)},Neki:function(e,t,n){"use strict";n.r(t),n.d(t,"RouteMatcher",(function(){return od})),n.d(t,"baseRoutes",(function(){return sd})),n.d(t,"BaseModule",(function(){return cd}));var i=n("pTJA"),r=n("+ETr"),a=n("+1jB"),o=n("K5wl"),s=n("x77O"),c=n("XrO3"),u=n("61p6"),l=n("tLVu"),p=n("Q9lH"),d=n("kMe2"),h=n("Yr08"),f=n("m4FO"),g=n("Xh2D"),m=n("F1CX"),v=n("jQTg"),b=n("JfMT"),y=n("S17y"),C=n("bFHC"),O=n("29Wa"),x=n("3Uyd"),S=n("34tD"),k=n("wvAw"),w=n("D57K"),E=n("NNJu"),I=n("X0jn"),T=n("nsO7"),_=n("5xGT"),j=n("w1VY"),P=n("TLy2"),A=n("8j5Y"),M=n("QoSw"),D=n("EM62"),R=n("C05f"),L=n("ROBh"),F=n("2kYt"),N=["richTextAreaView"],B=["viewerContainer"],U=function(e){return{"fx-hidden":e}},z=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.dtov=i,o.ll=r,o.state=a,o.subs=[],o.showComponent=new R.a(!1),o}return Object(w.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.createTextArea(),this.subs.push(this.state.changes("ShapeDataViewer").pipe(Object(P.a)((function(t){return t.open?(e.showComponent.next(!0),t.shapeId?e.initComponent(t.shapeId):Object(L.a)({})):(e.showComponent.next(!1),Object(L.a)({}))}))).subscribe())},t.prototype.handlerMouseEnter=function(){var e=this.state.get("ShapeDataViewer").shapeId;this.state.set("ShapeDataViewer",{open:!0,shapeId:e,src:"viewer"})},t.prototype.handlerMouseLeave=function(){this.state.set("ShapeDataViewer",{open:!1,src:"viewer"})},t.prototype.initComponent=function(e){var t=this;return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(A.a)((function(n){var i=n.shapes[e];i.dataItems&&i.dataItems.dataitemsttings&&t.updateTextArea(i)})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.createTextArea=function(){var e=this.makeComponent(p.a);this.richTextEditorUIC=e.instance,this.richTextEditorUIC.enableUploadOptions=!1,this.richTextEditorUIC.disableResizeOptions(),this.insert(this.richTextAreaView,e),e.changeDetectorRef.detectChanges()},t.prototype.updateTextArea=function(e){this.richTextEditorUIC.quill.setContents([]),this.richTextEditorUIC.quill.enable(!0);var t=Object(T.cloneDeep)(e.dataItems.dataitemsttings);this.replaceValues(t,e),this.richTextEditorUIC.quill.setContents(t.value),this.richTextEditorUIC.quill.enable(!1);var n=e.bounds,i=this.viewerContainer.nativeElement;i.style.left=this.dtov.x(n.x+n.width)+"px",i.style.top=this.dtov.y(n.bottom-10)+"px"},t.prototype.replaceValues=function(e,t){var n,i;Object(T.values)(e.value.ops||[]).filter((function(e){return e.insert})).forEach((function(e){if("string"==typeof e.insert){var n=e.insert.replace(/({)?{{[^{}]*}}(?!})/g,(function(e,n,r){var a=e.replace(/{{/g,"").replace(/}}/g,""),o=Object(T.values)(t.dataItems).find((function(e){return e.label===a}))||{};if(o.type===I.d.BINARY)return o.value?"True":"False";if(o.type===I.d.OPTION_LIST)return o.value;if(o.type===I.d.STRING||o.type===I.d.NUMBER)return o.value;if("users"===o.type)return((o.value||{}).people||[]).map((function(e){return e.fullName||e.email})).join(", ");if("tags"===o.type)return(o.value||[]).map((function(e){return e.name})).join(", ");if("date"===o.type&&o.value){var s=new Date(o.value);return s.getMonth()+1+"/"+s.getDate()+"/"+s.getFullYear()}return o.type===I.d.STRING_HTML&&(i=o.value),""}));e.insert=n}})),e.value&&e.value.ops&&i&&(n=e.value.ops).push.apply(n,Object(w.j)(i.ops))},t.\u0275fac=function(e){return new(e||t)(D.fc(D.m),D.fc(D.C),D.fc(j.a),D.fc(M.a),D.fc(_.Jb))},t.\u0275cmp=D.Zb({type:t,selectors:[["shape-data-viewer"]],viewQuery:function(e,t){var n;(1&e&&(D.hd(N,!0,D.hb),D.hd(B,!0,D.r)),2&e)&&(D.Lc(n=D.uc())&&(t.richTextAreaView=n.first),D.Lc(n=D.uc())&&(t.viewerContainer=n.first))},features:[D.Pb],decls:8,vars:5,consts:[[1,"shape-data-viewer-container"],["viewerContainer",""],[3,"ngClass"],[3,"mouseenter","mouseleave"],["richTextAreaView",""]],template:function(e,t){1&e&&(D.lc(0,"div",0,1),D.lc(2,"div",2),D.yc(3,"async"),D.lc(4,"div",3),D.tc("mouseenter",(function(){return t.handlerMouseEnter()}))("mouseleave",(function(){return t.handlerMouseLeave()})),D.gc(5,"div",null,4),D.kc(),D.kc(),D.gc(7,"div"),D.kc()),2&e&&(D.Sb(2),D.Cc("ngClass",D.Hc(3,U,!D.zc(3,1,t.showComponent))))},directives:[F.q],pipes:[F.b],styles:[".shape-data-viewer-container[_ngcontent-%COMP%]{z-index:1000;position:relative;display:inline-block}.shape-data-viewer-container[_ngcontent-%COMP%]  .ql-container{position:absolute;display:inline-block;background-color:#fff;min-width:200px;max-width:500px;border-radius:4px;box-shadow:0 0 2px #8e8e8e;padding:12px}.shape-data-viewer-container[_ngcontent-%COMP%]  .ql-editor{max-height:400px;min-height:unset!important;padding-right:10px}.shape-data-viewer-container[_ngcontent-%COMP%]  span.file-embed-option[data-id=remove]{display:none!important}"],changeDetection:0}),t}(E.l),V=n("EePP"),G=n("r0H0"),H=n("2DR2"),W=n("izw+"),Y=n("3AeD"),X=n("8a+/"),q=n("STWM"),K=n("J+dc"),J=n("C5+t"),Z=n("e4iD"),Q=n("s2Ay");function $(e,t){1&e&&(D.lc(0,"div",12),D.lc(1,"div",13),D.lc(2,"div",14),D.lc(3,"p",15),D.cd(4,"OFFLINE.PANEL.HEADING"),D.kc(),D.lc(5,"p",16),D.cd(6,"OFFLINE.PANEL.WEB_LINK_VIEWER"),D.kc(),D.kc(),D.kc(),D.kc())}function ee(e,t){if(1&e){var n=D.mc();D.lc(0,"div",12),D.lc(1,"div",17),D.lc(2,"h2",18),D.cd(3,"WEBLINK.TITLE"),D.kc(),D.gc(4,"p",19),D.yc(5,"async"),D.lc(6,"div",20),D.lc(7,"button",21),D.tc("click",(function(){return D.Oc(n),D.xc(3).openLinkInNewWindow()})),D.lc(8,"label",22),D.cd(9,"WEBLINK.OPEN_LINK_BUTTON"),D.kc(),D.kc(),D.kc(),D.lc(10,"p",23),D.cd(11,"WEBLINK.WHITELIST_MSG"),D.kc(),D.lc(12,"p",23),D.cd(13,"WEBLINK.WHITELIST_EMAIL"),D.kc(),D.kc(),D.kc()}if(2&e){var i=D.xc(3);D.Sb(4),D.Cc("innerHTML",D.zc(5,1,i.getLinkMessage()),D.Pc)}}function te(e,t){if(1&e&&D.gc(0,"iframe",24),2&e){var n=D.xc().ngIf;D.Cc("src",n.safeUrl,D.Qc)}}function ne(e,t){if(1&e&&(D.lc(0,"div",25),D.lc(1,"div",26),D.lc(2,"a",27),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc().ngIf;D.Sb(2),D.Dc("href",n.url,D.Rc),D.Sb(1),D.dd(n.url)}}function ie(e,t){if(1&e){var n=D.mc();D.lc(0,"div",3),D.lc(1,"div",4),D.lc(2,"div",5),D.ad(3,$,7,0,"div",6),D.yc(4,"async"),D.ad(5,ee,14,3,"div",6),D.yc(6,"async"),D.yc(7,"async"),D.ad(8,te,1,1,"iframe",7),D.yc(9,"async"),D.yc(10,"async"),D.ad(11,ne,4,2,"div",8),D.yc(12,"async"),D.kc(),D.lc(13,"a",9),D.tc("click",(function(){return D.Oc(n),D.xc(2).hideComponentBox()})),D.wc(),D.lc(14,"svg",10),D.gc(15,"use",11),D.kc(),D.kc(),D.kc(),D.kc()}if(2&e){var i=D.xc(2);D.Sb(3),D.Cc("ngIf",0===D.zc(4,4,i.appConnectionStatus)),D.Sb(2),D.Cc("ngIf",0!==D.zc(6,6,i.appConnectionStatus)&&!D.zc(7,8,i.isLinkVerified)),D.Sb(3),D.Cc("ngIf",D.zc(9,10,i.isLinkVerified)&&0!==D.zc(10,12,i.appConnectionStatus)),D.Sb(3),D.Cc("ngIf",D.zc(12,14,i.isLinkVerified))}}function re(e,t){if(1&e&&(D.lc(0,"div",1),D.ad(1,ie,16,16,"div",2),D.yc(2,"async"),D.kc()),2&e){var n=D.xc();D.Sb(1),D.Cc("ngIf",D.zc(2,1,n.viewerData))}}var ae=function(){function e(e,t,n){this.state=e,this.sanitizer=t,this.translateService=n,this.subs=[],this.showComponent=new R.a(!1),this.viewerData=new R.a({safeUrl:void 0,url:"",placeHolder:""}),this.isLinkVerified=new R.a(!1)}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(J.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("WebLinkViewer").pipe(Object(A.a)((function(t){t.open?(e.showComponent.next(!0),t.link=decodeURI(t.link),e.viewerData.next({safeUrl:e.sanitizer.bypassSecurityTrustResourceUrl(t.link),url:t.link})):e.showComponent.next(!1)})),Object(A.a)((function(){return e.checkLinkIsVerified()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getLinkMessage=function(){return this.translate("WEBLINK.LINK_DESC",{link:this.viewerData.value.url})},e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(K.a)(1))},e.prototype.openLinkInNewWindow=function(){window.open(this.viewerData.value.url,"_blank")},e.prototype.hideComponentBox=function(){this.state.set("WebLinkViewer",{open:!1})},e.prototype.checkLinkIsVerified=function(){var e=this,t=this.viewerData.value.url;t&&fetch("./assets/security/whitelist.txt").then((function(n){return n.text().then((function(n){if(n){var i=e.extractDomain(t);i&&n.includes(i)?e.isLinkVerified.next(!0):e.isLinkVerified.next(!1)}}))}))},e.prototype.extractDomain=function(e){var t,n;return(n=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(n=(t=n[1]).match(/^[^\.]+\.(.+\..+)$/))&&(t=n[1]),t},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(Z.b),D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["weblinks-viewer"]],decls:2,vars:3,consts:[["class","weblinks-viewer-overlay fx-cover fx-center-all",4,"ngIf"],[1,"weblinks-viewer-overlay","fx-cover","fx-center-all"],["class","weblinks-viewer-container",4,"ngIf"],[1,"weblinks-viewer-container"],[1,"weblinks-viewer-container-inner"],[1,"weblinks-viewer-content"],["class","weblinks-viewer-external-link-msg",4,"ngIf"],[3,"src",4,"ngIf"],["class","wlv-footer",4,"ngIf"],[1,"weblinks-viewer-close-btn","nu-btn-small","nu-btn-icon",3,"click"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"weblinks-viewer-external-link-msg"],[1,"fx-margin-top-30","fx-center-column"],[1,"weblink-viewer-offline-message","fx-margin-bottom-10"],["translate","",1,"navy-blue","nu-text-small","fx-margin-bottom-5","fx-center-all"],["translate","",1,"grey","nu-text-small"],[1,"weblinks-viewer-external-link-msg-inner"],["translate","",1,"fx-margin-bottom-5"],[1,"fx-margin-bottom-5",3,"innerHTML"],[1,"fx-margin-bottom-25","fx-span-width"],[1,"nu-btn-small","nu-btn-icon-text","primary","fx-center",3,"click"],["translate",""],["translate","",1,"nu-text-xsmall"],[3,"src"],[1,"wlv-footer"],[1,"wlv-footer-left"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(D.ad(0,re,3,3,"div",0),D.yc(1,"async")),2&e&&D.Cc("ngIf",D.zc(1,1,t.showComponent))},directives:[F.t,Q.a],pipes:[F.b],styles:[".weblinks-viewer-overlay[_ngcontent-%COMP%]{z-index:1001;background-color:hsla(0,0%,40.8%,.8)}.weblinks-viewer-container[_ngcontent-%COMP%]{width:80%;height:calc(100% - 60px)}.weblinks-viewer-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  iframe{width:100%;min-height:640px}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer{height:94px;background:#fff}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer-left{float:left;top:58px;left:24px;position:relative}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-nav{display:inline}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer-right{float:right;position:relative;top:60px;right:50px}.weblinks-viewer-icon-container[_ngcontent-%COMP%]{width:100px;margin-right:15px;border-radius:4px 0 0 4px}.weblinks-viewer-icon-container.neutral[_ngcontent-%COMP%]{background-color:#40b29e}.weblinks-viewer-icon-container.warning[_ngcontent-%COMP%]{background-color:#ffc648}.weblinks-viewer-icon-container.success[_ngcontent-%COMP%]{background-color:#61a15e}.weblinks-viewer-icon-container.error[_ngcontent-%COMP%]{background-color:#f36c67}.weblinks-viewer-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.weblinks-viewer-content-text[_ngcontent-%COMP%]{flex:1}.weblinks-viewer-button-container[_ngcontent-%COMP%]{text-align:right}.weblinks-viewer-close-btn[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute}.weblinks-viewer-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}"],changeDetection:0}),e}(),oe=n("W9bu"),se=n("35j0"),ce=(n("kWt5"),function(){function e(e){this.state=e}return e.prototype.point=function(t){var n=this.state.get("SnapData");return void 0!==n.tx&&Math.abs(t.x.value-n.tx)<e.delta&&(t.x.value=n.tx),void 0!==n.ty&&Math.abs(t.y.value-n.ty)<e.delta&&(t.y.value=n.ty),t},e.delta=5,e.\u0275fac=function(t){return new(t||e)(D.pc(_.Jb))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}()),ue=function(){function e(e){this.state=e}return e.prototype.point=function(t){var n=this.state.get("SnapData");return void 0!==n.left&&Math.abs(t.x.value-n.left)<e.delta&&(t.x.value=n.left),void 0!==n.right&&Math.abs(t.x.value-n.right)<e.delta&&(t.x.value=n.right),void 0!==n.top&&Math.abs(t.y.value-n.top)<e.delta&&(t.y.value=n.top),void 0!==n.bottom&&Math.abs(t.y.value-n.bottom)<e.delta&&(t.y.value=n.bottom),t},e.delta=5,e.\u0275fac=function(t){return new(t||e)(D.pc(_.Jb))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),le=n("tqrN"),pe=n("XfZi"),de=n("BQCR"),he=n("iRGy"),fe=n("Lk+x"),ge=n("eIBf"),me=n("pt/I"),ve=n("Jzy8"),be=n("B82N"),ye=n("fRR/"),Ce=n("/6pf"),Oe=n("sEIs"),xe=n("/YfA"),Se=n("kjSZ"),ke=function(){function e(){}return e.\u0275mod=D.dc({type:e}),e.\u0275inj=D.cc({factory:function(t){return new(t||e)},imports:[[F.c,E.o]]}),e}(),we=n("+COk"),Ee=n("KTx3"),Ie=n("D1Hy"),Te=n("jHi0"),_e=["helpButton"];function je(e,t){if(1&e&&(D.lc(0,"div",9),D.lc(1,"div",10),D.lc(2,"div",11),D.gc(3,"img",12),D.kc(),D.lc(4,"div",13),D.cd(5),D.kc(),D.kc(),D.lc(6,"div",14),D.Ac(7),D.kc(),D.kc()),2&e){var n=D.xc();D.Sb(5),D.dd(n.heading)}}var Pe=["*"],Ae=function(){function e(e,t,n){this.elRef=e,this.change=t,this.translate=n,this.showing=new R.a(!1)}return e.prototype.ngAfterViewInit=function(){var e=this;Object(Ee.a)(this.helpButtonElem.nativeElement,"click").pipe(Object(P.a)((function(){return e.showing.value?e.closeWidget():e.showWidget()}))).subscribe()},e.prototype.closeWidget=function(){var e=this;return this.hideAnimation(this.elRef.nativeElement.firstElementChild.children[0]).start().pipe(Object(A.a)({complete:function(){return e.showing.next(!1)}}))},e.prototype.closeOpenIconClick=function(){this.showing.value?Ie.a.track("helpWidget.icon.click",{value1:"close"}):Ie.a.track("helpWidget.icon.click",{value1:"open"})},e.prototype.showWidget=function(){return this.showing.next(!0),this.change.detectChanges(),this.showAnimation(this.elRef.nativeElement.firstElementChild.children[0]).start()},e.prototype.showAnimation=function(e){var t=new we.a({from:{transform:"translateY(30px)",opacity:"0"},to:{transform:"translateY(0)",opacity:"1"},transitionProperty:"transform, opacity",duration:100,easing:"linear"});return t.element=e,t},e.prototype.hideAnimation=function(e){var t=new we.a({from:{transform:"translateY(0)",opacity:"1"},to:{transform:"translateY(30px)",opacity:"0"},transitionProperty:"transform, opacity",duration:100,easing:"linear"});return t.element=e,t},e.\u0275fac=function(t){return new(t||e)(D.fc(D.r),D.fc(D.j),D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-widget"]],viewQuery:function(e,t){var n;(1&e&&D.hd(_e,!0),2&e)&&(D.Lc(n=D.uc())&&(t.helpButtonElem=n.first))},inputs:{heading:"heading"},ngContentSelectors:Pe,decls:14,vars:14,consts:[[1,"help-widget-container","fx-floating","fx-pointer-events-auto"],["class","help-widget-cards-container",4,"ngIf"],["tooltip","","placement","top",1,"help-widget-button","fx-button","fx-round",3,"click"],["helpButton",""],[1,"nu-icon","nu-icon-help","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-help"],[1,"nu-icon","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"tooltip-content"],[1,"help-widget-cards-container"],[1,"help-widget-header"],[1,"animated","fadeIn"],["src","./assets/images/logo-on-white-200X80.svg","alt","Creately","width","130"],[1,"help-widget-header-msg","animated","fadeInUp"],[1,"help-widget-cards"]],template:function(e,t){1&e&&(D.Bc(),D.lc(0,"div",0),D.ad(1,je,8,1,"div",1),D.yc(2,"async"),D.lc(3,"button",2,3),D.tc("click",(function(){return t.closeOpenIconClick()})),D.wc(),D.lc(5,"svg",4),D.yc(6,"async"),D.gc(7,"use",5),D.kc(),D.lc(8,"svg",6),D.yc(9,"async"),D.gc(10,"use",7),D.kc(),D.vc(),D.lc(11,"div",8),D.cd(12),D.yc(13,"async"),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",D.zc(2,6,t.showing)),D.Sb(4),D.Xb("show",!D.zc(6,8,t.showing)),D.Sb(3),D.Xb("show",D.zc(9,10,t.showing)),D.Sb(4),D.ed(" ",D.zc(13,12,t.translate.get("TOOLTIPS.HELP"))," "))},directives:[F.t,Te.a],pipes:[F.b],styles:[".help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card{border:1px solid #d3d3e7;border-radius:4px;box-shadow:0 2px 2px #c3c3de;padding:20px;margin-bottom:20px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card h2{font-size:16px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card-btn{font-size:14px;height:40px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card-text{line-height:20px}.help-widget-button[_ngcontent-%COMP%]{position:relative;background:#40b29e;box-shadow:0 12px 32px rgba(0,0,0,.05),0 8px 10px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{height:0;width:0;transition:transform .3s linear;transform:scale(0)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon.show[_ngcontent-%COMP%], .help-widget-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:25px;height:25px;transform:scale(2)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon-help.show[_ngcontent-%COMP%], .help-widget-button[_ngcontent-%COMP%]   .nu-icon-help[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1);stroke-width:1.5}.help-widget-container[_ngcontent-%COMP%]{z-index:2;right:10px;bottom:40px;display:flex;align-items:flex-end;flex-direction:column}.help-widget-cards-container[_ngcontent-%COMP%]{transition-property:transform,opacity;margin-right:50px;margin-bottom:-25px;width:360px;background:#fff;box-shadow:0 8px 24px rgba(0,0,0,.05),0 4px 8px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05);border-radius:8px;overflow:auto;padding:24px;opacity:0;transform:translateY(30px)}.help-widget-header[_ngcontent-%COMP%]{color:#fff}.help-widget-header-msg[_ngcontent-%COMP%]{font-size:18px;color:#04263d;padding-top:4%}"],changeDetection:0}),e}(),Me=n("lNpM"),De=function(){function e(e){this.translate=e,this.openChatWidget=new D.t,this.contactUsUrl=Me.a.get("ZENDESK_CONTACT_US_URL")}return e.prototype.openChat=function(){Ie.a.track("helpwidget.buttons.contact.click"),this.openChatWidget.next(!0)},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-card-contact-us"]],outputs:{openChatWidget:"openChatWidget"},decls:11,vars:9,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"contact-us-container","fx-margin-bottom-20","fx-margin-top-20"],[1,"help-widget-card-text","grey"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin",3,"click"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"h2",1),D.cd(2),D.yc(3,"async"),D.kc(),D.lc(4,"div",2),D.lc(5,"p",3),D.cd(6),D.yc(7,"async"),D.kc(),D.kc(),D.lc(8,"button",4),D.tc("click",(function(){return t.openChat()})),D.cd(9),D.yc(10,"async"),D.kc(),D.kc()),2&e&&(D.Sb(2),D.dd(D.zc(3,3,t.translate.get("HELP.START_CONVERSATION"))),D.Sb(4),D.ed(" ",D.zc(7,5,t.translate.get("HELP.WE_GET_BACK"))," "),D.Sb(3),D.dd(D.zc(10,7,t.translate.get("HELP.NEW_CONVERSATION"))))},pipes:[F.b],encapsulation:2,changeDetection:0}),e}(),Re=["*"],Le=function(){function e(e){this.translate=e}return e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-card-faq"]],ngContentSelectors:Re,decls:10,vars:6,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"links-container","fx-margin-bottom-20","fx-margin-top-20"],["href","https://support.creately.com/hc/en-us/sections/360000105656-FAQ","target","_blank"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin"]],template:function(e,t){1&e&&(D.Bc(),D.lc(0,"div",0),D.lc(1,"h2",1),D.cd(2),D.yc(3,"async"),D.kc(),D.lc(4,"div",2),D.Ac(5),D.kc(),D.lc(6,"a",3),D.lc(7,"button",4),D.cd(8),D.yc(9,"async"),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(2),D.dd(D.zc(3,2,t.translate.get("HELP.HAVE_QUESTION"))),D.Sb(6),D.dd(D.zc(9,4,t.translate.get("HELP.SEE_FAQ"))))},pipes:[F.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}"],changeDetection:0}),e}(),Fe=["*"],Ne=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["help-card-feature-request"]],ngContentSelectors:Fe,decls:8,vars:0,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"links-container","fx-margin-bottom-20","fx-margin-top-20"],["href","https://support.creately.com/hc/en-us/community/topics/360000014675-Feature-Requests-Creately-Next-","target","_blank"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin"]],template:function(e,t){1&e&&(D.Bc(),D.lc(0,"div",0),D.lc(1,"h2",1),D.cd(2,"Need a feature?"),D.kc(),D.lc(3,"div",2),D.Ac(4),D.kc(),D.lc(5,"a",3),D.lc(6,"button",4),D.cd(7,"Request a Feature"),D.kc(),D.kc(),D.kc())},styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}"],changeDetection:0}),e}(),Be=n("g6G6"),Ue=["welcomeMsgcontainer"],ze=["welcomeMsgPanel"],Ve=function(){function e(){this.closeMessage=new D.t,this.animSub=[]}return e.prototype.ngOnInit=function(){var e=Object(Be.a)(this.fadeContainer("0","1").start(),this.slidePanel("translate3d(100%, 0, 0)","translate3d(0, 0, 0)").start()).subscribe();this.animSub.push(e)},e.prototype.closeWelcomeMsg=function(){var e=this,t=Object(Be.a)(this.fadeContainer("1","0").start(),this.slidePanel("translate3d(0, 0, 0)","translate3d(100%, 0, 0)").start()).subscribe({complete:function(){return e.closeMessage.next(!0)}});this.animSub.push(t)},e.prototype.ngOnDestroy=function(){for(;this.animSub.length>0;)this.animSub.pop().unsubscribe()},e.prototype.fadeContainer=function(e,t){var n=new we.a({from:{opacity:e},to:{opacity:t},transitionProperty:"opacity",duration:200,easing:"ease-in-out"});return n.element=this.container.nativeElement,n},e.prototype.slidePanel=function(e,t){var n=new we.a({from:{transform:e},to:{transform:t},transitionProperty:"transform",duration:200,easing:"ease-out"});return n.element=this.panel.nativeElement,n},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["welcome-message"]],viewQuery:function(e,t){var n;(1&e&&(D.hd(Ue,!0),D.hd(ze,!0)),2&e)&&(D.Lc(n=D.uc())&&(t.container=n.first),D.Lc(n=D.uc())&&(t.panel=n.first))},outputs:{closeMessage:"closeMessage"},decls:25,vars:0,consts:[[1,"welcome-container","modal-window-container","fx-cover"],["welcomeMsgcontainer",""],[1,"welcome-inner","modal-window-right"],["welcomeMsgPanel",""],[1,"modal-window-close"],[1,"fx-button","fx-icon",3,"click"],[1,"nu-icon","nu-ic-close","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"welcome-message"],[1,"fx-margin-bottom-20","fx-center","white"],[1,"welcome-paras","fx-margin-bottom-20"],["href","https://support.creately.com/hc/en-us/sections/360000105656-FAQ","target","_blank",1,"white"],["href","https://creately1538999318.zendesk.com/hc/en-us/requests/new?app=proton&product=creately_next","target","_blank",1,"white"],[1,"welcome-image","fx-margin-bottom-20"]],template:function(e,t){1&e&&(D.lc(0,"div",0,1),D.lc(2,"div",2,3),D.lc(4,"div",4),D.lc(5,"button",5),D.tc("click",(function(){return t.closeWelcomeMsg()})),D.wc(),D.lc(6,"svg",6),D.gc(7,"use",7),D.kc(),D.kc(),D.kc(),D.vc(),D.lc(8,"div",8),D.lc(9,"h1",9),D.cd(10,"Thanks for Trying the Beta!"),D.kc(),D.lc(11,"div",10),D.lc(12,"p"),D.cd(13," We are very excited to let you in on our brand new, next generation Creately app. We built everything from scratch to bring you the best experience in diagramming. "),D.kc(),D.lc(14,"p"),D.cd(15," While you might find the new app much better in many ways, it is important to note that this is still in it\u2019s infant stage. We are working hard to bring you more features and diagram types, and we will keep updating as we have more. "),D.kc(),D.lc(16,"p"),D.cd(17," If you have questions check out the "),D.lc(18,"a",11),D.cd(19,"FAQ"),D.kc(),D.cd(20," or "),D.lc(21,"a",12),D.cd(22,"talk to us"),D.kc(),D.cd(23,". "),D.kc(),D.kc(),D.gc(24,"div",13),D.kc(),D.kc(),D.kc())},styles:[".welcome-container[_ngcontent-%COMP%]{top:0;right:0}.welcome-container[_ngcontent-%COMP%]   .fx-button.fx-icon[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.welcome-inner[_ngcontent-%COMP%]{width:650px;background-color:#f6aa00}.welcome-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.welcome-message[_ngcontent-%COMP%]{color:#fff;line-height:25px;padding:0 50px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100% - 48px)}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px}.welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff}.welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.welcome-image[_ngcontent-%COMP%]{max-height:370px;min-height:200px;background:url(/diagram/welcome-artwork.df09f261cd38e49449a3.svg) 50% no-repeat;background-size:contain;flex:1;width:100%}"],changeDetection:0}),e}();function Ge(e,t){if(1&e){var n=D.mc();D.wc(),D.vc(),D.lc(0,"div",5),D.lc(1,"h3",6),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc().openFeatureLink(e.title,e.link)})),D.cd(2),D.kc(),D.lc(3,"label",7),D.cd(4),D.kc(),D.lc(5,"p"),D.cd(6),D.kc(),D.lc(7,"a",8),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc().openFeatureLink(e.id,e.link)})),D.cd(8),D.yc(9,"async"),D.kc(),D.kc()}if(2&e){var i=t.$implicit,r=D.xc();D.Sb(2),D.dd(i.title),D.Sb(2),D.dd(i.date),D.Sb(2),D.dd(i.previewText),D.Sb(2),D.dd(D.zc(9,4,r.translate.get("HELP.LEARN_MORE")))}}var He=function(){function e(e){this.translate=e,this.data=[]}return Object.defineProperty(e.prototype,"translatedData",{get:function(){var e=this;return this.data.map((function(t){return t.title=e.translate.instant(t.title),t.date=e.translate.instant(t.date),t.previewText=e.translate.instant(t.previewText),t}))},enumerable:!1,configurable:!0}),e.prototype.openFeatureLink=function(e,t){window.open(t,"_blank"),Ie.a.track("helpwidget.feature.article.click",{value1Type:"articleName",value1:e})},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["feature-update-card"]],inputs:{data:"data"},decls:7,vars:4,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10","fx-center-vertical"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-present"],["class","feature-update-item-container",4,"ngFor","ngForOf"],[1,"feature-update-item-container"],[1,"nu-text-primary","nu-text-bold",3,"click"],[1,"nu-text-small","grey"],[1,"primary",3,"click"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"h2",1),D.wc(),D.lc(2,"svg",2),D.gc(3,"use",3),D.kc(),D.cd(4),D.yc(5,"async"),D.kc(),D.ad(6,Ge,10,6,"div",4),D.kc()),2&e&&(D.Sb(4),D.ed(" ",D.zc(5,2,t.translate.get("HELP.WHATS_NEW"))," "),D.Sb(2),D.Cc("ngForOf",t.translatedData))},directives:[F.s],pipes:[F.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}.feature-update-item-container[_ngcontent-%COMP%]{line-height:20px;margin-bottom:20px}.feature-update-item-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{cursor:pointer}.feature-update-item-container[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),e}();function We(e,t){if(1&e){var n=D.mc();D.lc(0,"div",8),D.lc(1,"button",9),D.tc("click",(function(){return D.Oc(n),D.xc().emitButtonClicked("contact")})),D.lc(2,"span",4),D.wc(),D.lc(3,"svg",10),D.gc(4,"use",11),D.kc(),D.kc(),D.cd(5),D.yc(6,"async"),D.kc(),D.kc()}if(2&e){var i=D.xc();D.Sb(5),D.ed(" ",D.zc(6,1,i.translate.get("HELP.SUPPORT"))," ")}}var Ye=function(){function e(e){this.translate=e,this.buttonClicked=new D.t,this.showSupportButton=!1}return e.prototype.emitButtonClicked=function(e){this.buttonClicked.next(e)},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-buttons-card"]],inputs:{showSupportButton:"showSupportButton"},outputs:{buttonClicked:"buttonClicked"},decls:15,vars:7,consts:[[1,"help-buttons-container"],["class","help-buttons-top",4,"ngIf"],[1,"help-buttons-bottom"],[1,"help-button-small","nu-btn-small","nu-text-small",3,"click"],[1,"help-button-icon"],[1,"nu-icon","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tour"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-help-center"],[1,"help-buttons-top"],[1,"help-button-contact","nu-btn-med","nu-btn-icon-text","primary",3,"click"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,We,7,3,"div",1),D.lc(2,"div",2),D.lc(3,"button",3),D.tc("click",(function(){return t.emitButtonClicked("tour")})),D.lc(4,"span",4),D.wc(),D.lc(5,"svg",5),D.gc(6,"use",6),D.kc(),D.kc(),D.cd(7),D.yc(8,"async"),D.kc(),D.vc(),D.lc(9,"button",3),D.tc("click",(function(){return t.emitButtonClicked("search")})),D.lc(10,"span",4),D.wc(),D.lc(11,"svg",5),D.gc(12,"use",7),D.kc(),D.kc(),D.cd(13),D.yc(14,"async"),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",t.showSupportButton),D.Sb(6),D.ed(" ",D.zc(8,3,t.translate.get("HELP.START_TOUR"))," "),D.Sb(6),D.ed(" ",D.zc(14,5,t.translate.get("HELP.HELP_CENTER"))," "))},directives:[F.t],pipes:[F.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}.help-buttons-container[_ngcontent-%COMP%]{justify-content:space-between;margin-top:24px}.help-button-contact[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:12px 24px;width:312px;height:44px;margin:0;background:rgba(81,192,170,.2)}.help-buttons-top[_ngcontent-%COMP%]{padding-bottom:24px}.help-buttons-bottom[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.help-button-small[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:8px 0;width:168px;height:40px;color:rgba(61,66,66,.6)}.help-button-small[_ngcontent-%COMP%]:hover{background:rgba(81,192,170,.2);color:#29947f}.help-button-small[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#51c0aa}.help-button-icon[_ngcontent-%COMP%]{padding-right:8px}"],changeDetection:0}),e}(),Xe=function(){function e(e){this.translate=e,this.buttonClicked=new D.t}return Object.defineProperty(e.prototype,"iconURL",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translatedLabel",{get:function(){return this.translate.instant(this.label)},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-link-button"]],inputs:{label:"label",value:"value",icon:"icon"},outputs:{buttonClicked:"buttonClicked"},decls:7,vars:2,consts:[[1,"help-link-button-container","help-widget-card","white",3,"click"],[1,"nu-icon","nu-icon-med"],[1,"help-link-button-arrow","nu-icon","grey","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.tc("click",(function(){return t.buttonClicked.next(!0)})),D.wc(),D.lc(1,"svg",1),D.gc(2,"use"),D.kc(),D.vc(),D.lc(3,"a"),D.cd(4),D.kc(),D.wc(),D.lc(5,"svg",2),D.gc(6,"use",3),D.kc(),D.kc()),2&e&&(D.Sb(2),D.Tb("href",t.iconURL,null,"xlink"),D.Sb(2),D.dd(t.translatedLabel))},styles:[".help-link-button-container[_ngcontent-%COMP%]{padding-right:50px;cursor:pointer;display:flex;align-items:center;position:relative}.help-link-button-container[_ngcontent-%COMP%]:hover, .help-link-button-container[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#ffc648}.help-link-button-container[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:10px}.help-link-button-arrow[_ngcontent-%COMP%]{position:absolute;right:10px}"],changeDetection:0}),e}(),qe=n("NTR5"),Ke=n("Wrqg"),Je=function(){return["Enter"]},Ze=function(){function e(e){this.translate=e,this.submitSearchText=new D.t,this.changeHelpSearch=new D.t}return e.prototype.submitHelpSearch=function(e){_.Lb.track("helpWidget.search.term.submit",{value1:e}),this.submitSearchText.next(e)},e.prototype.updateHelpSearch=function(e){this.changeHelpSearch.next(e)},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-article-search"]],outputs:{submitSearchText:"submitSearchText",changeHelpSearch:"changeHelpSearch"},decls:7,vars:7,consts:[[1,"help-search-header-msg","animated","fadeInUp"],[1,"help-search-container"],["icon","search-large","placeholder","Search help documents",1,"help-search",3,"showClearButton","submitOnCode","emitForInputChange","updateText","submit"],["textInput",""]],template:function(e,t){1&e&&(D.lc(0,"div"),D.lc(1,"div",0),D.cd(2),D.yc(3,"async"),D.kc(),D.lc(4,"div",1),D.lc(5,"text-input",2,3),D.tc("updateText",(function(e){return t.updateHelpSearch(e)}))("submit",(function(e){return t.submitHelpSearch(e)})),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(2),D.dd(D.zc(3,4,t.translate.get("HELP.GOT_A_QUESTION"))),D.Sb(3),D.Cc("showClearButton",!0)("submitOnCode",D.Gc(6,Je))("emitForInputChange",!0))},directives:[Ke.a],pipes:[F.b],styles:[".help-search-header-msg[_ngcontent-%COMP%]{font-size:18px;color:#04263d;padding-top:10%}.help-search-container[_ngcontent-%COMP%]{flex-grow:1}.help-search[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 0}.help-search[_ngcontent-%COMP%]  input{height:44px!important}.help-search[_ngcontent-%COMP%]  .text-input-icon{top:12px!important}.help-search[_ngcontent-%COMP%]  .text-input-clear-btn{top:18px!important}"],changeDetection:0}),e}();function Qe(e,t){if(1&e&&(D.lc(0,"div",5),D.lc(1,"div",6),D.cd(2),D.yc(3,"async"),D.kc(),D.lc(4,"span",7),D.cd(5),D.yc(6,"async"),D.kc(),D.kc()),2&e){var n=D.xc();D.Sb(2),D.fd("",D.zc(3,3,n.translate.get("HELP.HELP_RESULT_DEFAULT_ERROR_MAIN"))," \u201c",n.helpSearchText,"\u201d"),D.Sb(3),D.dd(D.zc(6,5,n.translate.get("HELP.HELP_RESULT_DEFAULT_ERROR_SUB")))}}function $e(e,t){1&e&&D.gc(0,"hr",8)}function et(e,t){if(1&e){var n=D.mc();D.lc(0,"li"),D.lc(1,"a",9),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc().onArticleClick(e.title)})),D.lc(2,"span",10),D.wc(),D.lc(3,"svg",11),D.gc(4,"use",12),D.kc(),D.kc(),D.cd(5),D.kc(),D.vc(),D.gc(6,"hr",13),D.kc()}if(2&e){var i=t.$implicit;D.Sb(1),D.Dc("href",i.url,D.Rc),D.Sb(4),D.ed(" ",i.title," ")}}var tt=function(){function e(e){this.translate=e,this.searchResult=[]}return e.prototype.onArticleClick=function(e){_.Lb.track("helpWidget.feature.article.click",{value1:e})},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-search-result"]],inputs:{searchResult:"searchResult",helpSearchText:"helpSearchText",isDefaultSearchResult:"isDefaultSearchResult"},decls:5,vars:3,consts:[[1,"help-search-result-main"],["class","help-search-result-default-msg",4,"ngIf"],["class","help-search-result-line-default",4,"ngIf"],[1,"help-search-result-list"],[4,"ngFor","ngForOf"],[1,"help-search-result-default-msg"],[1,"help-search-result-default-msg-main"],[1,"help-search-result-default-msg-sub"],[1,"help-search-result-line-default"],["target","_blank",1,"help-serach-result-link",3,"href","click"],[1,"help-search-resul-icon"],[1,"nu-icon","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notepad"],[1,"help-search-result-line"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Qe,7,7,"div",1),D.ad(2,$e,1,0,"hr",2),D.lc(3,"ul",3),D.ad(4,et,7,2,"li",4),D.kc(),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",t.isDefaultSearchResult),D.Sb(1),D.Cc("ngIf",0===t.searchResult.length),D.Sb(2),D.Cc("ngForOf",t.searchResult))},directives:[F.t,F.s],pipes:[F.b],styles:[".help-search-result-main[_ngcontent-%COMP%]{padding-top:16px}.help-search-result-list[_ngcontent-%COMP%]{list-style-type:none}.help-search-result-line[_ngcontent-%COMP%]{left:0;right:0;border:1px solid rgba(202,204,206,.5);margin:16px 0}.help-serach-result-link[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:16px;color:rgba(20,40,46,.8)}.help-serach-result-link[_ngcontent-%COMP%]:hover, .help-serach-result-link[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#29947f}.help-search-resul-icon[_ngcontent-%COMP%]{padding-right:8px}.help-search-result-default-msg[_ngcontent-%COMP%]{text-align:center;padding-bottom:24px}.help-search-result-default-msg-main[_ngcontent-%COMP%]{font-size:16px;padding-bottom:3px}.help-search-result-default-msg-sub[_ngcontent-%COMP%]{font-size:13px;color:rgba(98,104,106,.5)}.help-search-result-line-default[_ngcontent-%COMP%]{left:0;right:0;border:1px solid rgba(202,204,206,.5)}"],changeDetection:0}),e}(),nt=n("19Zn"),it=n("lP4r"),rt=n("6T0K"),at=n("Kz6v"),ot=n("kUiX"),st=n("c7W3"),ct=n("7SLS"),ut=n("4e/d"),lt=n("Bbfy"),pt=function(){function e(e,t,n){this.commandService=e,this.notifierController=t,this.translate=n,this.maxFileSize=2e6,this.notificationMessages=new lt.a(this.translate)}return e.getAllowedTypes=function(){return["image/png","image/jpeg","image/jpg","image/gif","image/bmp","image/x-icon","image/svg+xml"]},e.prototype.detect=function(t){if(t){var n=e.getAllowedTypes();for(var i in n)if(t.type===n[i])return this.validate(t)}return Object(L.a)(!1)},e.prototype.trigger=function(e,t){if(e){var n=[],i=t?t.position:null;return n.push(e),t&&t.upload?this.commandService.dispatch(st.a.importImageAndUpload,void 0,{files:n,position:i}).pipe(Object(ct.a)(!0),Object(ut.a)((function(){return Object(L.a)(!1)}))):this.commandService.dispatch(st.a.importImage,void 0,{files:n,position:i}).pipe(Object(ct.a)(!0),Object(ut.a)((function(){return Object(L.a)(!1)})))}return Object(L.a)(!1)},e.prototype.validate=function(e){if(e){if(e.size<=this.maxFileSize)return Object(L.a)(!0);var t=this.notificationMessages.getNotificationMessage(lt.b.IMAGE_IMPORT_SIZE_EXCEEDED);this.notifierController.show(lt.b.IMAGE_IMPORT_SIZE_EXCEEDED,t.component,t.type,t.options,t.collapsed)}return Object(L.a)(!1)},e.\u0275fac=function(t){return new(t||e)(D.pc(_.B),D.pc(_.kb),D.pc(Q.e))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),dt=n("mQR/"),ht=n("1PcF"),ft=n("BpNY"),gt=n("uWBd"),mt=n("W0Mc"),vt=n("9KTM"),bt=n("2zxM"),yt=n("13fK"),Ct=n("zFpY"),Ot=n("C3qL"),xt=n("aSB4"),St=n("euU2"),kt=n("ZyLw"),wt=n("BQpn"),Et=function(){function e(){}return e.prototype.shapeTransform=function(e,t){var n=e.minBounds;if(e.isContainer&&!n&&(n={width:20,height:20}),!n||!n.width&&!n.height)return t;var i=e.isFlippable("H"),r=e.isFlippable("V");return t.scaleX=this.limitScale(i,e.defaultBounds.width,n.width,e.scaleX,t.scaleX),t.scaleY=this.limitScale(r,e.defaultBounds.height,n.height,e.scaleY,t.scaleY),t},e.prototype.limitScale=function(e,t,n,i,r){if(n>0){var a=n/t,o=!e||r.value>-a;i>0&&r.value<a&&o&&(1!==r.high&&r.value+r.high>a?(r.value=r.value+r.high,r.low=r.value-a):(r.value=a,r.low=0)),i<0&&r.value<a&&o&&(r.value=-a),1!==r.low&&r.value-r.low<a&&(r.low=0)}return r},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),It=n("qT6J"),Tt=n("ZhQg"),_t=n("/nnd"),jt=n("jw4I"),Pt=n("ZC55"),At=n("5Jpj"),Mt=n("0fSw"),Dt=n("ZTXN"),Rt=function(){function e(){}return e.getSidePosition=function(t){return e.sidePositions[t]},e.sidePositions={topleft:{x:0,y:0},topcenter:{x:.5,y:0},topright:{x:1,y:0},bottomleft:{x:0,y:1},bottomcenter:{x:.5,y:1},bottomright:{x:1,y:1},leftcenter:{x:0,y:.5},rightcenter:{x:1,y:.5},center:{x:.5,y:.5}},e}(),Lt=n("YtkY"),Ft=["secondaryItemContainer"],Nt=["itemContainer"];function Bt(e,t){}function Ut(e,t){}var zt=function(e){function t(t,n,i,r){var a=e.call(this,t,n)||this;return a.componentFactoryResolver=t,a.injector=n,a.elementRef=i,a.manager=r,a.secondaryLevelVisibility=new R.a(!1),a.showing=!1,a.element=i.nativeElement,a.element.style.position="absolute",a.items={},a.changeSubs={},a._change=new Dt.a,a.resetOperations(),a.hideToolbar(),a}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.manager.register(this)},t.prototype.show=function(){var e=this;return this.showing?this.apply():this.apply().pipe(Object(Lt.a)((function(){return e.showToolbar()})))},t.prototype.hide=function(){return this.showing&&this.hideToolbar(),Object(L.a)({})},t.prototype.addItem=function(e,t,n,i,r,a){void 0===a&&(a="primary");var o=this.makeComponent(t);i&&o.instance.setProperties(i),o.instance.id=e,o.instance.setData(n),o.instance.apply(),void 0===r&&(r=Object.keys(this.items).length+Object.keys(this.operations.add).length),this.operations.add[r]={itemRef:o,level:a}},t.prototype.addListItem=function(e,t,n,i,r,a){var o=this.makeComponent(t);i&&o.instance.setProperties(i),o.instance.id=e,o.instance.setData(n),o.instance.select(r),o.instance.apply(),void 0===a&&(a=Object.keys(this.items).length+Object.keys(this.operations.add).length),this.operations.add[a]={itemRef:o}},t.prototype.removeItem=function(e){this.items[e]&&this.operations.remove.push(e)},t.prototype.updateItem=function(e,t,n){var i=this.items[e];i&&(n&&i.instance.setProperties(n),i.instance.setData(t),this.operations.update.push(e))},t.prototype.updateListItem=function(e,t,n,i){var r=this.items[e];if(r){var a=r.instance;n&&r.instance.setProperties(n),a.setData(t),a.select(i),this.operations.update.push(e)}},t.prototype.position=function(e,t){void 0===t&&(t="center"),this.operations.position={point:e,side:t}},t.prototype.getItem=function(e){if(this.items){var t=this.items[e];if(t)return t.instance}},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},t.prototype.isFocused=function(){return this.element.contains(document.activeElement)},t.prototype.showToolbar=function(){this.items&&this.itemIds.length&&(this.element.style.display="inline-block",this.showing=!0)},t.prototype.hideToolbar=function(){this.element.style.display="none",this.showing=!1},t.prototype.apply=function(){var e=this,t=this.getPendingOperations();return t.length>0?Be.a.apply(void 0,Object(w.j)(t)).pipe(Object(A.a)({complete:function(){e.updateToolbarPosition(),e.resetOperations(),e.handleSecondaryLevelVisibility()}})):(this.updateToolbarPosition(),this.resetOperations(),Object(L.a)({}))},t.prototype.handleSecondaryLevelVisibility=function(){this.secondaryItemContainer.length>0?this.secondaryLevelVisibility.next(!0):this.secondaryLevelVisibility.next(!1)},t.prototype.insertToolbarItem=function(e,t,n){return this.items[e.instance.id]||(this.items[e.instance.id]=e,this.subscribeToItemChange(e.instance),"secondary"===n?this.insert(this.secondaryItemContainer,e):this.insert(this.itemContainer,e,t),e.changeDetectorRef.detectChanges()),Object(L.a)({})},t.prototype.removeToolbarItem=function(e){var t=this.items[e];return t&&(this.unsubscribeFromItemChange(e),this.remove(this.itemContainer,t),this.remove(this.secondaryItemContainer,t),delete this.items[e]),Object(L.a)({})},t.prototype.updateToolbarItem=function(e){var t=this.items[e];return t&&t.instance.apply(),Object(L.a)({})},t.prototype.updateToolbarPosition=function(){if(this.operations.position&&this.operations.position.point){var e=this.operations.position,t=e.point,n=e.side,i=this.element.getBoundingClientRect(),r=Rt.getSidePosition(n);this.element.style.left=t.x-i.width*r.x+"px",this.element.style.top=t.y-i.height*r.y+"px"}},t.prototype.resetOperations=function(){this.operations={add:{},remove:[],update:[]}},t.prototype.subscribeToItemChange=function(e){var t=this,n=e.change.subscribe((function(n){return t._change.next({id:e.id,data:n})}));this.changeSubs[e.id]=n},t.prototype.unsubscribeFromItemChange=function(e){this.changeSubs[e]&&(this.changeSubs[e].unsubscribe(),delete this.changeSubs[e])},t.prototype.getAddItemAnimation=function(e){var t=new E.e({});return t.element=e.location.nativeElement,t},t.prototype.getRemoveItemAnimation=function(e){var t=new E.e({});return t.element=e.location.nativeElement,t},t.prototype.getPendingOperations=function(){var e=this,t=[];if(this.operations.remove.length>0&&(t=t.concat(this.operations.remove.map((function(t){return e.removeToolbarItem(t)})))),Object.keys(this.operations.add).length>0)for(var n in this.operations.add)t.push(this.insertToolbarItem(this.operations.add[n].itemRef,Number(n),this.operations.add[n].level));return this.operations.update.length>0&&(t=t.concat(this.operations.update.map((function(t){return e.updateToolbarItem(t)})))),t},t.\u0275fac=function(e){return new(e||t)(D.fc(D.m),D.fc(D.C),D.fc(D.r),D.fc(Mt.a))},t.\u0275cmp=D.Zb({type:t,selectors:[["floating-toolbar"]],viewQuery:function(e,t){var n;(1&e&&(D.hd(Ft,!0,D.hb),D.hd(Nt,!0,D.hb)),2&e)&&(D.Lc(n=D.uc())&&(t.secondaryItemContainer=n.first),D.Lc(n=D.uc())&&(t.itemContainer=n.first))},inputs:{id:"id"},outputs:{change:"change"},features:[D.Pb],decls:11,vars:4,consts:[["data-keep-text-open","true",1,"ftb-container"],["class","ftb-container-inner"],["itemContainer",""],[1,"ftb-more-dd-btn"],[1,"nu-btn-small","nu-btn-icon"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"abs-dropdown-items-container"],["class","ftb-more-dd-placeholder"],["secondaryItemContainer",""]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Bt,0,0,"ng-template",1,2,D.bd),D.lc(3,"div",3),D.yc(4,"async"),D.lc(5,"button",4),D.wc(),D.lc(6,"svg",5),D.gc(7,"use",6),D.kc(),D.kc(),D.vc(),D.lc(8,"div",7),D.ad(9,Ut,0,0,"ng-template",8,9,D.bd),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(3),D.Xb("hidden",!D.zc(4,2,t.secondaryLevelVisibility)))},pipes:[F.b],styles:[".abs-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.abs-dropdown-items-container[_ngcontent-%COMP%]  .ps-content{padding:10px}.abs-dropdown-items-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:215px;border:1px solid #d8d8d8;border-radius:2px;background-color:#fff;overflow:hidden;box-shadow:0 2px 2px #c3c3de}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item{height:30px;line-height:30px;text-align:left}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item .nu-icon{margin:0 5px 0 -5px;float:left}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item .dropdown-item-select-tick{visibility:hidden}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item.selected .dropdown-item-select-tick{visibility:visible}.abs-dropdown-inner-wrapper[_ngcontent-%COMP%]{position:relative}.abs-dropdown-inner[_ngcontent-%COMP%]{position:absolute;z-index:10}.abs-dropdown-inner[_ngcontent-%COMP%]:not(.right){left:0}.abs-dropdown-inner.right[_ngcontent-%COMP%]{right:0}@-webkit-keyframes showingAnimationDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes showingAnimationUp{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationUp{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}.ftb-container[_ngcontent-%COMP%]{height:45px;border:1px solid #d3d3e7;background-color:#fff;border-radius:4px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;padding-right:10px}.ftb-container[_ngcontent-%COMP%]  .ftb-item, .ftb-container[_ngcontent-%COMP%]  .icon-button-container{width:35px;margin-left:10px;text-align:center}.ftb-container[_ngcontent-%COMP%]  .ftb-item button, .ftb-container[_ngcontent-%COMP%]  .icon-button-container button{padding:0}.ftb-container[_ngcontent-%COMP%]  .icon-button-container{padding:4px 0}.ftb-container[_ngcontent-%COMP%]  .ftb-item.ftb-item-text{width:auto;height:45px;line-height:45px}.ftb-container[_ngcontent-%COMP%]  .ftb-item .nu-btn-icon{width:inherit;padding:0}.ftb-container[_ngcontent-%COMP%]  .ftb-item .ftb-item-dropdown-arrow{width:0;height:0;border-color:transparent #dcdcdc #dcdcdc transparent;border-style:solid;border-width:4px;position:absolute;bottom:10px;right:1px}.ftb-container[_ngcontent-%COMP%]  .ftb-item .abs-dropdown-inner.down{top:44px}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .nu-btn-icon[_ngcontent-%COMP%]{padding-right:0}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .abs-dropdown-items-container[_ngcontent-%COMP%]{position:absolute;z-index:10;top:44px;padding:10px;display:none}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .abs-dropdown-items-container[_ngcontent-%COMP%]  rich-button{margin-bottom:10px;display:block}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .abs-dropdown-items-container[_ngcontent-%COMP%]  rich-button:last-of-type{margin-bottom:0}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]:hover   .abs-dropdown-items-container[_ngcontent-%COMP%]{-webkit-animation:showingAnimationDown .3s;animation:showingAnimationDown .3s;display:block}.ftb-container[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]{z-index:2}"],changeDetection:0}),t}(E.l),Vt=n("IGWl"),Gt=n("myrl"),Ht=function(){function e(e){this.state=e,this.isEditor=this.state.changes("InterfaceControlState").pipe(Object(Lt.a)((function(e){return"edit"===e})))}return e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb))},e.\u0275cmp=D.Zb({type:e,selectors:[["temp-fake-features-panel"]],decls:38,vars:4,consts:[["placement","left","tooltip",""],["disabled","",1,"nu-btn-med","nu-btn-icon","fake-sidebar-button"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notes"],[1,"coming-soon-tooltip-container","tooltip-content"],[1,"coming-soon-header"],["translate","",1,"tooltip-header"],["translate","",1,"coming-soon-header-ribbon"],["translate","",1,"coming-soon-feature-text"],["placement","left","tooltip","",1,"fake-hidable-btn"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-theme"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-layout"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"button",1),D.wc(),D.lc(2,"svg",2),D.gc(3,"use",3),D.kc(),D.kc(),D.vc(),D.lc(4,"div",4),D.lc(5,"div",5),D.lc(6,"span",6),D.cd(7,"FAKE_TOOLTIPS.NOTES"),D.kc(),D.lc(8,"div",7),D.cd(9,"LABELS.COMING_SOON"),D.kc(),D.kc(),D.lc(10,"div",8),D.cd(11,"FAKE_TOOLTIPS.NOTES_DESC"),D.kc(),D.kc(),D.kc(),D.lc(12,"div"),D.yc(13,"async"),D.lc(14,"div",9),D.lc(15,"button",1),D.wc(),D.lc(16,"svg",2),D.gc(17,"use",10),D.kc(),D.kc(),D.vc(),D.lc(18,"div",4),D.lc(19,"div",5),D.lc(20,"span",6),D.cd(21,"FAKE_TOOLTIPS.THEME"),D.kc(),D.lc(22,"div",7),D.cd(23,"LABELS.COMING_SOON"),D.kc(),D.kc(),D.lc(24,"div",8),D.cd(25,"FAKE_TOOLTIPS.THEME_DESC"),D.kc(),D.kc(),D.kc(),D.lc(26,"div",9),D.lc(27,"button",1),D.wc(),D.lc(28,"svg",2),D.gc(29,"use",11),D.kc(),D.kc(),D.vc(),D.lc(30,"div",4),D.lc(31,"div",5),D.lc(32,"span",6),D.cd(33,"FAKE_TOOLTIPS.LAYOUT"),D.kc(),D.lc(34,"div",7),D.cd(35,"LABELS.COMING_SOON"),D.kc(),D.kc(),D.lc(36,"div",8),D.cd(37,"FAKE_TOOLTIPS.LAYOUT_DESC"),D.kc(),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(12),D.Xb("hide-fake-btns",!D.zc(13,2,t.isEditor)))},directives:[Te.a,Q.a],pipes:[F.b],styles:[".fake-sidebar-button[_ngcontent-%COMP%]{display:block;margin-right:5px}.fake-hidable-btn[_ngcontent-%COMP%], .fake-sidebar-button[_ngcontent-%COMP%]{height:33px;margin-bottom:15px;transition-property:transform,height,margin-bottom;transition-duration:.3s;transition-timing-function:ease-in-out}.fake-hidable-btn[_ngcontent-%COMP%]{transform:scale(1)}.hide-fake-btns[_ngcontent-%COMP%]   .fake-hidable-btn[_ngcontent-%COMP%]{transform:scale(0);height:0;margin-bottom:0}"],changeDetection:0}),e}(),Wt=n("iPbu"),Yt=n("SBw3");function Xt(e,t){if(1&e&&(D.lc(0,"div",4),D.lc(1,"span",5),D.cd(2),D.kc(),D.lc(3,"span",6),D.cd(4),D.kc(),D.kc()),2&e){var n=t.$implicit;D.Sb(2),D.dd(n.label),D.Sb(2),D.dd(n.shortcutText)}}function qt(e,t){1&e&&(D.lc(0,"div",4),D.lc(1,"span",7),D.cd(2,"BASE_FEATURE.CANCEL_ACTION"),D.kc(),D.lc(3,"span",6),D.cd(4,"Esc"),D.kc(),D.kc())}var Kt=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["shortcut-window-section"]],inputs:{sectionList:"sectionList"},decls:5,vars:3,consts:[["translate","",1,"sw-col-heading"],[1,"sw-col-inner"],["class","sw-col-item",4,"ngFor","ngForOf"],["class","sw-col-item",4,"ngIf"],[1,"sw-col-item"],[1,"sw-col-item-label"],[1,"sw-col-item-value"],["translate","",1,"sw-col-item-label"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.cd(1),D.kc(),D.lc(2,"div",1),D.ad(3,Xt,5,2,"div",2),D.ad(4,qt,5,0,"div",3),D.kc()),2&e&&(D.Sb(1),D.dd(t.sectionList.title),D.Sb(2),D.Cc("ngForOf",t.sectionList.items),D.Sb(1),D.Cc("ngIf","BASE_FEATURE.EDITING"==t.sectionList.title))},directives:[Q.a,F.s,F.t],styles:[".sw-inner[_ngcontent-%COMP%]{z-index:10;white-space:nowrap;background-color:#7e7e7e;border-radius:4px;padding:50px;color:#fff}.sw-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:35px}.sw-col-heading[_ngcontent-%COMP%]{color:#aaa;text-transform:capitalize;margin-bottom:25px}.sw-col[_ngcontent-%COMP%]{display:inline-block;margin-right:75px}.sw-col[_ngcontent-%COMP%]:last-of-type{margin-right:0}.sw-col-inner[_ngcontent-%COMP%]{display:table}.sw-col-item[_ngcontent-%COMP%]{display:table-row;height:30px}.sw-col-item-label[_ngcontent-%COMP%], .sw-col-item-value[_ngcontent-%COMP%]{display:table-cell}.sw-col-item-value[_ngcontent-%COMP%]{padding-left:25px}.sw-close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:5px}"],changeDetection:0}),e}(),Jt=function(){function e(e,t){this.featureList=e,this.translate=t,this.shortcutSections={"BASE_FEATURE.EDITING":["cutShapes","copyShapes","pasteShapes","selectAll","remove","duplicateShapes","duplicateShapesAndMove","bringToFront","sendToBack","sendBackward","bringForward","openHyperlinkEditor","drawLine","addText","changeSnapState"],"BASE_FEATURE.CANVAS":["zoomIn","zoomOut","actualSize","undo","redo","switchToPanMouseControlState","addComment","freeHandPen","freeHandHighlighter"],"BASE_FEATURE.SELECTION":["keyboardSelectionMove","keyboardSelectionScale","aspectRatioDragScale"]}}return e.prototype.getSection=function(e){var t=this.getCustomItems();return t.push.apply(t,Object(w.j)(this.featureList.features)),{title:e,items:this.shortcutSections[e].map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e}))}},e.prototype.getCustomItems=function(){return[{id:"aspectRatioDragScale",label:this.translate.instant("BASE_FEATURE.SCALE"),shortcutText:"Shift + Resize"},{id:"duplicateShapesAndMove",label:this.translate.instant("BASE_FEATURE.DUPLICATE"),shortcutText:"Alt + Drag"}]},e.\u0275fac=function(t){return new(t||e)(D.fc(Yt.a),D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["shortcut-window"]],decls:9,vars:3,consts:[[1,"sw-inner","fx-center-without-flex"],["translate",""],[1,"sw-col"],[3,"sectionList"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"h1",1),D.cd(2,"BASE_FEATURE.SHORTCUTS"),D.kc(),D.lc(3,"div",2),D.gc(4,"shortcut-window-section",3),D.kc(),D.lc(5,"div",2),D.gc(6,"shortcut-window-section",3),D.kc(),D.lc(7,"div",2),D.gc(8,"shortcut-window-section",3),D.kc(),D.kc()),2&e&&(D.Sb(4),D.Cc("sectionList",t.getSection("BASE_FEATURE.EDITING")),D.Sb(2),D.Cc("sectionList",t.getSection("BASE_FEATURE.CANVAS")),D.Sb(2),D.Cc("sectionList",t.getSection("BASE_FEATURE.SELECTION")))},directives:[Q.a,Kt],styles:[".sw-inner[_ngcontent-%COMP%]{z-index:10;white-space:nowrap;background-color:#7e7e7e;border-radius:4px;padding:50px;color:#fff}.sw-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:35px}.sw-col-heading[_ngcontent-%COMP%]{color:#aaa;text-transform:capitalize;margin-bottom:25px}.sw-col[_ngcontent-%COMP%]{display:inline-block;margin-right:75px}.sw-col[_ngcontent-%COMP%]:last-of-type{margin-right:0}.sw-col-inner[_ngcontent-%COMP%]{display:table}.sw-col-item[_ngcontent-%COMP%]{display:table-row;height:30px}.sw-col-item-label[_ngcontent-%COMP%], .sw-col-item-value[_ngcontent-%COMP%]{display:table-cell}.sw-col-item-value[_ngcontent-%COMP%]{padding-left:25px}.sw-close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:5px}"],changeDetection:0}),e}(),Zt=function(e){function t(t){var n=e.call(this)||this;return n.modalCtrl=t,n}return Object(w.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.data.show?this.modalCtrl.show(Jt,void 0,!1):this.modalCtrl.hide(),!0},t.\u0275fac=function(e){return new(e||t)(D.pc(_.gb))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t=Object(w.d)([Object(_.v)(),Object(w.g)("design:paramtypes",[_.gb])],t)}(_.b);Object.defineProperty(Zt,"name",{value:"ShowShortcutWindow"});var Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(w.e)(t,e),t.register=function(e){e.map(t.showShortcutWindow).add(Zt)},t.showShortcutWindow=new t("ShowShortcutWindow"),t}(_.y),$t=n("vg1f"),en=n("3vL/"),tn=n("xpZS"),nn=n("1U5y"),rn=n("wf7V"),an=n("k0Sg"),on=n("zsv6"),sn=n("cOhl"),cn=n("dFmy"),un=n("RMc3"),ln=n("/g0E"),pn=n("TQyE"),dn=n("XwbL"),hn=n("XLk1"),fn=n("QCJn"),gn=n("uXwy"),mn=n("LC7v"),vn=n("g5Ym"),bn=n("tG6W"),yn=n("Gjo4"),Cn=n("LA+B"),On=n("s9Xn"),xn=n("sKtG"),Sn=n("Mb5J"),kn=n("PGgW"),wn=n("X5Q9"),En=n("vdZD"),In=n("vRBZ"),Tn=n("yhNa"),_n=n("iesc"),jn=n("wqq/"),Pn=n("xVbo"),An=n("BwBJ"),Mn=n("TaSY"),Dn=n("Ohay"),Rn=n("4y1S"),Ln=n("ljsB"),Fn=n("xnGY"),Nn=n("qMyy"),Bn=n("3QsU"),Un=n("hX56"),zn=n("2zi3"),Vn=n("3f6g"),Gn=n("Lmsv"),Hn=function(e){function t(t){var n=e.call(this)||this;return n.globalNotificationService=t,n}return Object(w.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{notificationIds:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!!(this.data.notificationIds&&this.data.notificationIds.length>0)&&this.globalNotificationService.markGlobalNotificationRead(this.data.notificationIds,!0)},t.prototype.revert=function(){var e=this.data.notificationIds;return this.globalNotificationService.markGlobalNotificationRead(e,!1)},t.\u0275fac=function(e){return new(e||t)(D.pc(Gn.a))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t=Object(w.d)([Object(_.v)(),Object(w.g)("design:paramtypes",[Gn.a])],t)}(J.b);Object.defineProperty(Hn,"name",{value:"MarkGlobalNotificationRead"});var Wn=function(e){function t(t){var n=e.call(this)||this;return n.globalNotificationService=t,n}return Object(w.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!1},t.prototype.executeResult=function(e){return this.globalNotificationService.addNewGlobalNotification(e.notification),!0},t.\u0275fac=function(e){return new(e||t)(D.pc(Gn.a))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t=Object(w.d)([Object(_.v)(),Object(w.g)("design:paramtypes",[Gn.a])],t)}(J.b);Object.defineProperty(Wn,"name",{value:"NewGlobalNotification"});var Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(w.e)(t,e),t.register=function(e){e.map(t.newGlobalNotification).add(Wn),e.map(t.getGlobalNotifications).add(Vn.a),e.map(t.markGlobalNotificationRead).add(Hn)},t.newGlobalNotification=new t("NewGlobalNotification"),t.getGlobalNotifications=new t("GetGlobalNotifications"),t.markGlobalNotificationRead=new t("MarkGlobalNotificationRead"),t}(_.y),Xn=n("yn08"),qn=n("uG58"),Kn=n("4Kso"),Jn=n("UFl8"),Zn=n("xejr"),Qn=n("lu3Q"),$n=n("i9xl"),ei=n("qZtG"),ti=n("mWib"),ni=n("9WAt"),ii=n("IdLP"),ri=n("2m+3"),ai=n("h1tj"),oi=n("kuMc"),si=function(e){function t(t){var n=e.call(this,t)||this;return n._zoom=1,n._panX=n.x,n._panY=n.y,ai.Touch.enable(n),n}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this._zoom=e,this.setCanvasScale()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panX",{get:function(){return this._panX},set:function(e){this._panX=e,this.setCanvasPan()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panY",{get:function(){return this._panY},set:function(e){this._panY=e,this.setCanvasPan()},enumerable:!1,configurable:!0}),t.prototype.getMouseX=function(){return this.mouseX/window.devicePixelRatio},t.prototype.getMouseY=function(){return this.mouseY/window.devicePixelRatio},t.prototype.setupStage=function(){var e=this;this.snapToPixelEnabled=!0,this.screenRatioChange=Object(Ee.a)(ai.Ticker,"tick").pipe(Object(Pn.a)((function(e){return!e.paused})),Object(Lt.a)((function(){return window.devicePixelRatio})),Object(Dn.a)()),this.screenSizeChange=this.getScreenSizeChanges(),this.screenSizeChange.subscribe((function(){return e.updateCanvasSize()})),this.captureMouseEventOnRetinaScreen().subscribe((function(t){return e.updateStagePosition(t)}))},t.prototype.getScreenSizeChanges=function(){return Object(Be.a)(this.screenRatioChange,Object(Ee.a)(window,"resize"))},t.prototype.captureMouseEventOnRetinaScreen=function(){var e=this;return this.screenRatioChange.pipe(Object(Pn.a)((function(e){return 1!==e})),Object(P.a)((function(){return Object(Be.a)(Object(Ee.a)(e,"mousedown",{capture:!0}),Object(Ee.a)(e,"pressmove",{capture:!0}),Object(Ee.a)(e,"pressup",{capture:!0}),Object(Ee.a)(e,"stagemousedown"),Object(Ee.a)(e,"stagemousemove"),Object(Ee.a)(e,"stagemouseup")).pipe(Object(oi.a)(e.screenRatioChange.pipe(Object(Pn.a)((function(e){return 1===e})))))})),Object(Lt.a)((function(e){return e})))},t.prototype.updateStagePosition=function(e){e.stageX=e.stageX/window.devicePixelRatio,e.stageY=e.stageY/window.devicePixelRatio},t.prototype.updateCanvasSize=function(){var e=this.canvas,t=e.width!==e.offsetWidth*window.devicePixelRatio,n=e.height!==e.offsetHeight*window.devicePixelRatio;t&&(e.width=e.offsetWidth*window.devicePixelRatio),n&&(e.height=e.offsetHeight*window.devicePixelRatio),this.setCanvasScale(),this.setCanvasPan(),this.update()},t.prototype.setCanvasScale=function(){this.scaleX=window.devicePixelRatio*this._zoom,this.scaleY=window.devicePixelRatio*this._zoom},t.prototype.setCanvasPan=function(){this.x=this._panX*window.devicePixelRatio,this.y=this._panY*window.devicePixelRatio},t}(ai.Stage),ci=function(){function e(e,t){this.gridService=e,this.state=t,this.dotSize=3,this.maxDotSize=8,this.minDotSize=1.5,this.dotColor="#E8E8EB",this.backgroundColor="#FAFAFC",this.minZoomLevel=.2,this.dotsSpacing=20,this.buffer=100,this._changed=!1}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return"grid-area-canvas"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),e.prototype.updateCanvas=function(){this.canvas.update()},e.prototype.clearChanges=function(){this._changed=!1},e.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new si(this.canvasId),this._canvas.setupStage(),this._grid=new ai.Shape,this._canvas.addChild(this._grid),this.getAllChanges().subscribe((function(){var t=e.state.get("DiagramZoomLevel")||1,n=e.state.get("DiagramPan")||{x:0,y:0};e.drawGrid(t,n)}))},e.prototype.getAllChanges=function(){return Object(Be.a)(this.state.changes("DiagramViewPort"),this.state.changes("DiagramZoomLevel"),this.state.changes("DiagramPan"),this.gridService.showGrid)},e.prototype.getCanvasBounds=function(){var e=this.canvas.canvas.getBoundingClientRect();return _.vb.fromClientRect(e)},e.prototype.drawGrid=function(e,t){this._canvas.panX=t.x,this._canvas.panY=t.y,this._grid.graphics.clear(),this.drawBackground(t),this.gridService.showGrid.value&&this.drawDottedGrid(e,t),this._changed=!0},e.prototype.drawDottedGrid=function(e,t){var n,i,r,a;if(!(e<this.minZoomLevel)){var o=this.getCornerPoints(t),s=o.topLeft,c=o.bottomRight,u=this.getGridLines(s.x,c.x,e),l=this.getGridLines(s.y,c.y,e),p=s.y;try{for(var d=Object(w.k)(l),h=d.next();!h.done;h=d.next()){if((b=h.value)%this.dotsSpacing){p=b*e;break}}}catch(C){n={error:C}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var f=this.dotsSpacing*e,g=Math.max(this.minDotSize,Math.min(this.dotSize*e,this.maxDotSize));try{for(var m=Object(w.k)(u),v=m.next();!v.done;v=m.next()){var b;if((b=v.value)%this.dotsSpacing){var y=b*e;this.drawDottedLine({x:y,y:p},{x:y,y:c.y},f,g)}}}catch(O){r={error:O}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(r)throw r.error}}}},e.prototype.drawHorizontalGridLines=function(e,t){var n,i,r=this.getCornerPoints(t),a=r.topLeft,o=r.bottomRight,s=this.getGridLines(a.y,o.y,e);try{for(var c=Object(w.k)(s),u=c.next();!u.done;u=c.next()){var l=u.value,p=l*e;this.drawLine({x:a.x,y:p},{x:o.x,y:p},this.gridService.isOnGridMajor(l))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},e.prototype.drawVerticalGridLines=function(e,t){var n,i,r=this.getCornerPoints(t),a=r.topLeft,o=r.bottomRight,s=this.getGridLines(a.x,o.x,e);try{for(var c=Object(w.k)(s),u=c.next();!u.done;u=c.next()){var l=u.value,p=l*e;this.drawLine({x:p,y:a.y},{x:p,y:o.y},this.gridService.isOnGridMajor(l))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},e.prototype.drawLine=function(e,t,n){void 0===n&&(n=!1),this._grid.graphics.setStrokeStyle(n?1:.5),this._grid.graphics.beginStroke(n?"#E8E8E8":"#F0F0F0"),this._grid.graphics.moveTo(e.x,e.y),this._grid.graphics.lineTo(t.x,t.y),this._grid.graphics.endStroke()},e.prototype.drawDottedLine=function(e,t,n,i){this._grid.graphics.setStrokeStyle(i,"round"),this._grid.graphics.setStrokeDash([0,n]),this._grid.graphics.beginStroke(this.dotColor),this._grid.graphics.moveTo(e.x,e.y),this._grid.graphics.lineTo(t.x,t.y),this._grid.graphics.endStroke()},e.prototype.drawBackground=function(e){var t=this.getCornerPoints(e),n=t.topLeft,i=t.bottomRight;this._grid.graphics.beginFill(this.backgroundColor),this._grid.graphics.drawRect(n.x,n.y,i.x-n.x,i.y-n.y),this._grid.graphics.endFill()},e.prototype.getCornerPoints=function(e){var t=this.getCanvasBounds();return{topLeft:{x:t.x-e.x-this.buffer,y:t.y-e.y-this.buffer},bottomRight:{x:t.x-e.x+t.width+this.buffer,y:t.y-e.y+t.height+this.buffer}}},e.prototype.getGridLines=function(e,t,n){return this.gridService.getGridLines(e/n,t/n)},e.\u0275fac=function(t){return new(t||e)(D.fc("GridService"),D.fc(_.Jb))},e.\u0275cmp=D.Zb({type:e,selectors:[["grid-area"]],decls:1,vars:1,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&D.gc(0,"canvas",0),2&e&&D.Dc("id",t.canvasId)},encapsulation:2,changeDetection:0}),e}(),ui=n("+AVE"),li=n("6Oco"),pi=n("GoAz"),di=function(e){function t(t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=!0);var a=e.call(this,t,i,r)||this;return a.child=n,a}return Object(w.e)(t,e),t}(ai.Event),hi=n("Dnwm"),fi=function(e){function t(t){var n=e.call(this,t)||this;return n.model=t,n.horizontalTextPadding=10,n}return Object(w.e)(t,e),t.prototype.update=function(t,n,i,r){if(e.prototype.update.call(this,t,n),i){var a=r?r.scaleX:1;this.lineWidth=Math.abs(t.hitArea?t.hitArea.width:i.width*a)-2*I.z,t.width>this.lineWidth&&(this.lineWidth=t.width);var o=void 0;o=void 0!==t.width?new _.vb(0,0,t.width,t.height):t.wordWrap?this.getTextBounds(t.value,t.hitArea?t.hitArea.width:i.width):this.getTextBounds(t.value),this.position(t.position,t.alignX,t.alignY,o,i,r),this.updateHitArea(t,o)}this.updateViewCache(t,n)},t.prototype.position=function(e,t,n,i,r,a){var o={width:this.lineWidth,height:i.height},s=nt.G.getPointOnShape(e,r,a),c=nt.G.getPointOnText(o,t,n,a);this.regX=c.x,this.regY=c.y,this.x=s.x,this.y=s.y,this.applyTransform(a)},t.prototype.applyTransform=function(e){e&&(this.rotation=nt.G.getTextAngle(e),this.rotation=this.rotation+this.model.angle)},t}(n("wOpJ").a),gi=n("cs9O"),mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.container=this.getContainer(this.id,this.model.type),this.imageElem=this.getImageElement(),this.imageElem.crossOrigin="anonymous",this.imageElem.onload=function(){return e.onImageLoad()},this.imageElem.onerror=function(t){return e.onImageLoadFailure(t)},this.imageElem.src=this._imageSource,this.image=this.getBitmap(this.imageElem),this.container.addChild(this.image)},t.prototype.render=function(t){e.prototype.render.call(this,t),this.scaleWidth(this.model.drawWidth/this.imageElem.width),this.scaleHeight(this.model.drawHeight/this.imageElem.height),this.image.setBounds(0,0,this.imageElem.width,this.imageElem.height)},t.prototype.onImageLoad=function(){this.render(),this.container&&this.container.stage?this.container.stage.update():_.db.warning("Image on loading failed due to unknown error. Either container or stage is null.")},t.prototype.onImageLoadFailure=function(e){_.db.error("Image loading failed for shape "+this.model.id)},t.prototype.addText=function(e){var t=new fi(e);this.container.addChild(t),this._texts.push(t)},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.move=function(e,t){this.image.x=e,this.image.y=t},t.prototype.scaleHeight=function(e){this.image.scaleY=e},t.prototype.scaleWidth=function(e){this.image.scaleX=e},t.prototype.rotate=function(e){this.image.rotation=e},t.prototype.getImageElement=function(){return new Image},t.prototype.getBitmap=function(e){return new ai.Bitmap(this.imageElem)},t.prototype.getContainer=function(e,t){return new gi.a(e,t)},t}(nt.q),vi=function(){function e(e){this.imageModel=e,this.fileAtInit=this.imageModel.file}return Object.defineProperty(e.prototype,"name",{get:function(){return this.imageModel.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.fileAtInit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderedImage",{get:function(){return this.bitmap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageOutline",{get:function(){return this.bitmapMask},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){var e=this,t=this.getImageElement();t.crossOrigin="anonymous",t.onload=function(){return e.onImageReady()},t.onerror=function(){return e.onImageError()},t.src=this.getImageUrl(),this.bitmap=this.getBitmapShape(t),this.bitmap.name=this.imageModel.id,this.setImageStoke()},e.prototype.update=function(e,t,n,i){var r=this;this.deferredUpdate=function(){return r.update(e,t,n,i)},this.imageModel=e;var a=this.bitmap.getBounds();if(a&&(this.resizeChild(n,a,this.imageModel,this.bitmap,i),this.positionChild(n,a,this.imageModel,this.bitmap,i),0===this.bitmap.cacheID&&this.bitmap.cache(0,0,a.width,a.height),this.bitmap.updateCache(),this.imageModel.mask)){this.bitmapMask||(this.bitmapMask=new ai.Shape,"square"===this.imageModel.mask.type?this.bitmapMask.graphics.f("rgba(255, 0, 0, 0.5)").dr(0,0,100,100):"roundedsquare"===this.imageModel.mask.type?this.bitmapMask.graphics.f("rgba(255, 0, 0, 0.5)").drawRoundRect(0,0,100,100,5):this.bitmapMask.graphics.f("rgba(255, 0, 0, 1)").dc(50,50,50),this.bitmapMask.setBounds(0,0,100,100)),this.bitmap.mask=this.bitmapMask;var o=this.bitmapMask.getBounds();this.resizeChild(n,o,this.imageModel.mask,this.bitmapMask,i),this.positionChild(n,o,this.imageModel.mask,this.bitmapMask,i)}},e.prototype.destroy=function(){},e.prototype.setImageStoke=function(){this.imageModel.mask&&this.imageModel.mask.stroke&&!this.bitmapMask&&(this.bitmapMask=new ai.Shape,"square"===this.imageModel.mask.type?this.bitmapMask.graphics.setStrokeStyle(this.imageModel.mask.stroke.size).s(this.imageModel.mask.stroke.color).dr(0,0,100,100):"roundedsquare"===this.imageModel.mask.type?this.bitmapMask.graphics.setStrokeStyle(this.imageModel.mask.stroke.size).s(this.imageModel.mask.stroke.color).drawRoundRect(0,0,100,100,5):this.bitmapMask.graphics.setStrokeStyle(this.imageModel.mask.stroke.size).s(this.imageModel.mask.stroke.color).dc(50,50,50),this.bitmapMask.setBounds(0,0,100,100))},e.prototype.getImageUrl=function(){return this.imageModel.fileType&&"url"===this.imageModel.fileType?this.fileAtInit:this.imageModel.fileType&&"shapesassets"===this.imageModel.fileType?"./assets/images/shapes-assets/"+this.fileAtInit:_.m.get("CUSTOM_IMAGE_BASE_URL")+this.fileAtInit},e.prototype.onImageReady=function(){this.deferredUpdate&&(this.deferredUpdate(),this.deferredUpdate=null),this.bitmap.stage&&this.bitmap.stage.update()},e.prototype.onImageError=function(){},e.prototype.getImageElement=function(){return new Image},e.prototype.getBitmapShape=function(e){return new ai.Bitmap(e)},e.prototype.resizeChild=function(e,t,n,i,r){n.w&&n.h?(i.scaleX=this.getExpectedScaleX(e,t,n,r),i.scaleY=this.getExpectedScaleY(e,t,n,r)):n.w?(i.scaleX=this.getExpectedScaleX(e,t,n,r),i.scaleY=i.scaleX):n.h?(i.scaleY=this.getExpectedScaleY(e,t,n,r),i.scaleX=i.scaleY):(i.scaleX=1,i.scaleY=1)},e.prototype.getExpectedScaleX=function(e,t,n,i){return"fixed"===n.w.type?n.w.value/t.width:"relative"===n.w.type?e.width*i.scaleX*n.w.value/t.width:(_.db.error("ShapeImageView: invalid shape image (or mask) width type"),1)},e.prototype.getExpectedScaleY=function(e,t,n,i){return"fixed"===n.h.type?n.h.value/t.height:"relative"===n.h.type?e.height*i.scaleY*n.h.value/t.height:(_.db.error("ShapeImageView: invalid shape image (or mask) height type"),1)},e.prototype.positionChild=function(e,t,n,i,r){var a=_.ob.onRect({x:n.x||{type:"relative",value:0},y:n.y||{type:"relative",value:0}},e,r),o={x:0,y:0};"l"===n.alignX||("r"===n.alignX?o.x=t.width:o.x=t.width/2),"t"===n.alignY||("b"===n.alignY?o.y=t.height:o.y=t.height/2),i.regX=o.x,i.regY=o.y,i.x=a.x,i.y=a.y,i.rotation=r.angle},e}(),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.shape.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this.shadowShape.graphics},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){this.container=new gi.a(this.id,this.model.type),this.shape=new ai.Shape,this.container.convertToCursorDrawable(this.shape),this.shape.name=this.id,this.shadowShape=new ai.Shape,this.model.style.shadow?(this.shadowShape.shadow=new ai.Shadow(this.model.style.shadow.color,this.model.style.shadow.offsetX,this.model.style.shadow.offsetY,this.model.style.shadow.blur),this.container.addChild(this.shadowShape,this.shape)):this.container.addChild(this.shape)},t.prototype.render=function(t){if(e.prototype.render.call(this,t),this.model.transformSettings.scaleRender===I.C.redraw)this.shape.setBounds(0,0,this.model.drawWidth,this.model.drawHeight),this.shadowShape.setBounds(0,0,this.model.drawWidth,this.model.drawHeight);else{var n=this.model.defaultBounds;this.shape.setBounds(n.x,n.y,n.width,n.height),this.shadowShape.setBounds(n.x,n.y,n.width,n.height)}},t.prototype.addText=function(e){if(!e.displayableTextId){var t=new fi(e);this.container.addChild(t),this._texts.push(t)}},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.addImage=function(e){var t=new vi(e);t.initialize(),this._images.push(t),this.container.addChild(t.renderedImage),t.imageOutline&&this.container.addChild(t.imageOutline)},t.prototype.move=function(e,t){this.shape.x=e,this.shape.y=t,this.shadowShape.x=e,this.shadowShape.y=t},t.prototype.scaleHeight=function(e){this.shape.scaleY=e,this.shadowShape.scaleY=e},t.prototype.scaleWidth=function(e){this.shape.scaleX=e,this.shadowShape.scaleX=e},t.prototype.rotate=function(e){this.shape.rotation=e,this.shadowShape.rotation=e},t}(nt.y),yi=function(e){function t(t,n,i,r,a){var o=e.call(this)||this;return o.link=t,o.ll=n,o.commandService=i,o.state=r,o.logger=a,o._changed=!1,o.fitToScreenPadding=30,o.changes={},o.handleZIndexChange=Object(T.debounce)(o.handleZIndexChange.bind(o),100),o}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"canvasId",{get:function(){return"diagram-draw-area"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrentObserver(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeViewType",{get:function(){return bi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageViewType",{get:function(){return mi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectorViewType",{get:function(){return hi.a},enumerable:!1,configurable:!0}),t.prototype.updateCanvas=function(){for(var t in this.changes){var n=this.changes[t],i=n.shape,r=n.modifier;e.prototype.render.call(this,i,r),this.changeTextVisibility(this.state.get("EditingText"))}this.changes={},this.canvas.update()},t.prototype.clearChanges=function(){this._changed=!1},t.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new si(this.canvasId),this._canvas.setupStage(),this._canvas.enableMouseOver(5),this._subs.push(this.loadFonts().subscribe({complete:function(){return e._subs.push(e.populateDiagram().subscribe())}})),this._subs.push(this.onEditTextChanges().subscribe()),this.state.set("DiagramPan",new _.mb(this._canvas.panX,this._canvas.panY)),this.state.changes("DiagramPan").subscribe((function(t){return e.pan(t)})),this.state.set("DiagramZoomLevel",1),this.state.changes("DiagramZoomLevel").subscribe((function(t){return e.zoom(t)})),this.fitToScreen(),this.commandService.dispatch(st.a.updateTextBounds)},t.prototype.pan=function(e){this._canvas.panX=e.x,this._canvas.panY=e.y,this._changed=!0},t.prototype.zoom=function(e){this._canvas.zoom=e,this._changed=!0},t.prototype.fitToScreen=function(){var e=this;this.state.changes("CurrentDiagram").pipe(Object(Dn.a)(T.isEqual),Object(P.a)((function(){var t=e.state.get("FocusTarget")||{};return t.shapeId?(e.link.navigateToShape(t.shapeId),e.state.set("FocusTarget",{}),Object(L.a)(null)):t.groupId?(e.link.navigateToGroup(t.groupId),e.state.set("FocusTarget",{}),Object(L.a)(null)):e.state.changes("DiagramViewPort").pipe(Object(Pn.a)((function(e){return!!e})),Object(K.a)(1),Object(P.a)((function(t){return e.getFitToScreenZoomPan(t)})))}))).subscribe((function(t){t&&e.commandService.dispatch(Ln.a.zoomAndPanDiagram,{level:t.zoomLevel,x:t.pan.x,y:t.pan.y})}))},t.prototype.getFitToScreenZoomPan=function(e){var t=this;return this.state.get("CurrentDiagram")?this.locator.pipe(Object(P.a)((function(e){return e.getDiagramOnce()})),Object(Lt.a)((function(n){if(!n.hasShapes)return null;var i=e.pad(-t.fitToScreenPadding),r=n.getAllFrames().length>0?n.getBounds([t.getFrameIdHasMinFrameIndex(n.getAllFrames())]):n.getBounds(),a=t.getZoomToViewPortLevel(r,i);return{zoomLevel:a,pan:{x:i.centerX-r.centerX*a,y:i.centerY-r.centerY*a}}}))):Object(li.b)()},t.prototype.getFrameIdHasMinFrameIndex=function(e){var t=e.filter((function(t){return t.data&&t.data.frameIndex&&t.data.frameIndex.value===Math.min.apply(Math,Object(w.j)(e.map((function(e){return e.data.frameIndex.value}))))}));return 0===t.length?e[0].id:t[Math.floor(Math.random()*t.length)].id},t.prototype.loadDiagramFonts=function(){var e=this;return this.locator.pipe(Object(P.a)((function(e){return e.getCurrentShapes()})),Object(P.a)((function(t){var n,i,r,a,o=[],s=new nt.F;try{for(var c=Object(w.k)(t),u=c.next();!u.done;u=c.next()){var l=u.value;if(l.hasAnyText)for(var p in l.texts){var d=l.texts[p],h=s.extractFonts(d.content);try{for(var f=(r=void 0,Object(w.k)(h)),g=f.next();!g.done;g=f.next()){var m=g.value;-1===o.indexOf(m)&&o.push(m)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}}}}catch(b){n={error:b}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return e.loadFonts(o)})))},t.prototype.getZoomToViewPortLevel=function(e,t){var n=e.width-t.width,i=e.height-t.height,r=1;return n/t.width<i/t.height&&i>0?r=t.height/e.height:n>0&&(r=t.width/e.width),r},t.prototype.render=function(e,t){if(this.changes[e.id]){this.changes[e.id].modifier;this.changes[e.id]={shape:e,modifier:(n=t,n)}}else this.changes[e.id]={shape:e,modifier:t};var n;this._changed=!0},t.prototype.addShape=function(t){e.prototype.addShape.call(this,t),this._canvas.addChild(t.renderedShape),this.handleZIndexChange(t.id),this._canvas.dispatchEvent(new di("childAdded",t.renderedShape))},t.prototype.removeShape=function(t){e.prototype.removeShape.call(this,t);var n=this._canvas.getChildByName(t);this._canvas.removeChild(n),this._canvas.dispatchEvent(new di("childRemoved",n)),this._changed=!0},t.prototype.handleZIndexChange=function(e){var t=this;this._canvas.children&&this._canvas.children.length>1&&this.locator.pipe(Object(P.a)((function(e){return e.getDiagramOnce()}))).subscribe((function(e){var n,i,r=[],a=e.getShapesOrderedByIndex();try{for(var o=Object(w.k)(a),s=o.next();!s.done;s=o.next()){var c=s.value,u=t.getShapeViews()[c.id];u&&r.push(u.renderedShape)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}t._canvas.children=r,t.updateCanvas()}))},t.prototype.onEditTextChanges=function(){var e=this;return this.state.changes("EditingText").pipe(Object(Lt.a)((function(t){Object(T.values)(e.getShapeViews()).forEach((function(e){e.allTextViews.forEach((function(e){return e.visible=!0}))})),e.changeTextVisibility(t),e._changed=!0})))},t.prototype.changeTextVisibility=function(e){if(e&&e.open&&e.shapeId&&e.textId){var t=(this.getShapeViews()||{})[e.shapeId];if(t){var n=e.textId;this.locator.pipe(Object(P.a)((function(t){return t.getShapeOnce(e.shapeId)})),Object(Pn.a)((function(e){return!!e})),Object(Lt.a)((function(t){var i=t.texts[e.textId];i&&(n=i.displayableTextId?i.displayableTextId:n)}))).subscribe((function(){var e=t.getTextView(n);e&&(e.visible=!1)}))}}},t.prototype.loadFonts=function(e){var t=this;if(e||(e=Object.keys(I.D)),e&&0===e.length)return Object(li.b)();var n=Promise.all(e.map((function(e){return new ui(e).load()}))).catch((function(e){t.logger.warning("Failed to load some fonts:",e.message)}));return Object(pi.a)(n)},t.\u0275fac=function(e){return new(e||t)(D.fc(oe.a),D.fc(M.a),D.fc(_.B),D.fc(_.Jb),D.fc(_.db))},t.\u0275cmp=D.Zb({type:t,selectors:[["diagram-view"]],features:[D.Pb],decls:1,vars:1,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&D.gc(0,"canvas",0),2&e&&D.Dc("id",t.canvasId)},encapsulation:2,changeDetection:0}),t}(nt.m),Ci=function(){function e(e,t,n){this.state=e,this.injector=t,this.commandService=n,this._changed=!1,this.handlerList=new Map}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return"interaction-area-canvas"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),e.prototype.updateCanvas=function(){this.canvas.update()},e.prototype.clearChanges=function(){this._changed=!1},e.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new si(this.canvasId),this._canvas.setupStage(),this._canvas.enableMouseOver(ai.Ticker.framerate),this.state.initialize("InteractionCanvas",this._canvas),this.state.changes("IndicatorHandlerList").subscribe((function(t){return e.createIndocatorHandlers(t)}))},e.prototype.ngOnDestroy=function(){this.state.remove("InteractionCanvas")},e.prototype.createIndocatorHandlers=function(e){var t,n,i,r;try{for(var a=Object(w.k)(e),o=a.next();!o.done;o=a.next()){var s=o.value;this.handlerList.has(s)||this.addHandler(s)}}catch(p){t={error:p}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}try{for(var c=Object(w.k)(this.handlerList),u=c.next();!u.done;u=c.next()){var l=Object(w.h)(u.value,2);s=l[0],l[1];e.has(s)||this.removeHandler(s)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}},e.prototype.createHandler=function(e){return D.C.create(this.getProviders(e),this.injector).get(e)},e.prototype.addHandler=function(e){var t=this,n=this.createHandler(e);n.indicatorLayer=this._canvas,n.add().subscribe((function(e){return t.addIndicator(e)})),n.remove().subscribe((function(e){return t.removeIndicator(e)})),n.change().subscribe((function(){return t._changed=!0})),n.initialize(),this.handlerList.set(e,n)},e.prototype.removeHandler=function(e){var t=this,n=this.handlerList.get(e);n.indicators&&n.indicators.length>0&&n.indicators.forEach((function(e){return t.removeIndicator(e)})),n.destroy(),this.handlerList.delete(e)},e.prototype.addIndicator=function(e){this.canvas.addChild(e),this._changed=!0},e.prototype.removeIndicator=function(e){this.canvas.removeChild(e),this._changed=!0},e.prototype.getProviders=function(e){return[{provide:e,useClass:e,deps:Reflect.getMetadata("design:paramtypes",e)||[]}]},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(D.C),D.fc(_.B))},e.\u0275cmp=D.Zb({type:e,selectors:[["interaction-area"]],decls:1,vars:2,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&D.gc(0,"canvas",0),2&e&&(D.Dc("id",t.canvasId),D.Tb("data-testid",t.canvasId))},encapsulation:2,changeDetection:0}),e}(),Oi=n("LaGA"),xi=function(){function e(){}return e.FRAME_RATE_COUNT=0,e}(),Si=n("24h1"),ki=n("0Woy"),wi=function(){function e(e){this.state=e,this.svgNS="http://www.w3.org/2000/svg",this.containerId="free-hand-container",this.svgId="freehand-svg",this.svgPathId="freehand-svg-path",this.subs=[]}return Object.defineProperty(e.prototype,"isFreeHandMode",{get:function(){return this.state.changes("MouseControlState").pipe(Object(P.a)((function(e){return e===Xn.b.Pen||e===Xn.b.Highlighter?Object(L.a)(!0):Object(L.a)(!1)})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.showSvgContainer().subscribe(),this.updateSvgViewBox().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getViewportBounds=function(){return document.querySelector(".diagram-viewport").getBoundingClientRect()},e.prototype.updateSvgViewBox=function(){var e=this;return this.state.changes("DiagramViewPort").pipe(Object(Pn.a)((function(t){var n=e.state.get("MouseControlState");return!!t&&(n===Xn.b.Pen||n===Xn.b.Highlighter)})),Object(A.a)((function(t){var n=(t=e.getViewportBounds()).width,i=t.height,r=t.x,a=t.y,o=document.getElementById(e.containerId),s="margin-left: "+r+"px; margin-top: "+a+"px; margin-right: "+t.right+"px;";o.setAttribute("style",s);var c=document.getElementById(e.svgId);c.setAttributeNS(null,"viewBox",r+" "+a+" "+n+" "+i),c.setAttributeNS(null,"width",n.toString()),c.setAttributeNS(null,"height",i.toString())})))},e.prototype.showSvgContainer=function(){var e=this;return this.state.changes("MouseControlState").pipe(Object(ki.a)(),Object(P.a)((function(t){var n=document.getElementById(e.containerId),i=[Xn.b.Highlighter,Xn.b.Pen],r=t[1],a=t[0];if(!i.includes(a)&&i.includes(r)){if(0===n.childNodes.length){var o=e.getViewportBounds(),s=o.width,c=o.height,u=o.x,l=o.y,p="margin-left: "+u+"px; margin-top: "+l+"px; margin-right: "+o.right+"px;";n.setAttribute("style",p);var d=document.createElementNS(e.svgNS,"svg");d.setAttributeNS(null,"id",e.svgId),d.setAttributeNS(null,"viewBox",u+" "+l+" "+s+" "+c),d.setAttributeNS(null,"width",s.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"fill","none");var h=document.createElementNS(e.svgNS,"path");h.setAttributeNS(null,"id",e.svgPathId),h.setAttributeNS(null,"stroke-linecap","round"),h.setAttributeNS(null,"stroke-width","0"),h.setAttributeNS(null,"stroke","#00FFFFFF"),d.appendChild(h),n.appendChild(d)}return Object(L.a)(!0)}return n.childNodes.forEach((function(e){return e.remove()})),Object(L.a)(!1)})))},e.\u0275fac=function(t){return new(t||e)(D.fc(Si.a))},e.\u0275cmp=D.Zb({type:e,selectors:[["free-hand-container"]],decls:2,vars:4,consts:[["id","free-hand-container",1,"fx-pointer-events-auto","fhSvgContainer"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.yc(1,"async"),D.kc()),2&e&&D.Xb("position",D.zc(1,2,t.isFreeHandMode))},pipes:[F.b],styles:[".fhSvgContainer[_ngcontent-%COMP%]{z-index:1;flex:1}.position[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),e}(),Ei=n("HM3f"),Ii=n("3+4Q"),Ti=n("crdX"),_i=n("wkcE"),ji=n("nT0V"),Pi=n("rwb9"),Ai=["commentThreadItem"];function Mi(e,t){if(1&e&&(D.gc(0,"comment-thread-item",5,6),D.yc(2,"async")),2&e){var n=t.$implicit,i=D.xc(2);D.Cc("comment",n.comment)("commenter",n.commenter)("showControls",!D.zc(2,3,i.readonly))}}function Di(e,t){if(1&e&&(D.lc(0,"div",3),D.ad(1,Mi,3,5,"comment-thread-item",4),D.yc(2,"async"),D.kc()),2&e){var n=D.xc();D.Sb(1),D.Cc("ngForOf",D.zc(2,2,n.commentsWithCollabs))("ngForTrackBy",n.getCommentId)}}function Ri(e,t){if(1&e&&D.gc(0,"user-image",12),2&e){var n=t.ngIf;D.Cc("hasImage",n.hasImage)("imagePath",n.image)("userColor",n.displayColor)("userInitials",n.initial)("userRegistered",n.isRegistered)("userOnlineStatus",!0)}}var Li=function(){return["Enter"]};function Fi(e,t){if(1&e){var n=D.mc();D.lc(0,"div",7),D.lc(1,"div",8),D.ad(2,Ri,1,6,"user-image",9),D.yc(3,"async"),D.kc(),D.lc(4,"div",10),D.lc(5,"text-input",11),D.tc("submit",(function(e){return D.Oc(n),D.xc().submit.next(e)})),D.yc(6,"translate"),D.kc(),D.kc(),D.kc()}if(2&e){var i=D.xc();D.Sb(2),D.Cc("ngIf",D.zc(3,8,i.userMdl)),D.Sb(3),D.Dc("placeholder",D.zc(6,10,"PLACEHOLDERS.COMMENT")),D.Cc("clearOnSubmit",!0)("submitOnCode",D.Gc(12,Li))("submitOnBlur",!0)("submitOnBlur",!0)("multiLined",!0)("autoFocus",!0)}}var Ni=function(){function e(e,t){this.collabLocator=e,this.state=t,this.readonly=new R.a(!1),this._comments=new R.a([]),this.submit=new Dt.a,this.subs=[]}return Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments.value},set:function(e){this._comments.next(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.state.get("CurrentUser");this.commentsWithCollabs=this._comments.pipe(Object(A.a)((function(t){var n=t.filter((function(e){return!e.parentId&&!!e.resolved}));e.readonly.next(!!n.length)})),Object(P.a)((function(t){return Object(Ei.b)(t.map((function(t){return e.collabLocator.getCollabs().pipe(Object(Lt.a)((function(e){var n=e.find((function(e){return e.id===t.userId}));return{comment:t,commenter:n}})))})))})),Object(A.a)((function(){return setTimeout((function(){e.scrollToBottom()}),300)}))),this.userMdl=this.collabLocator.getCollabs().pipe(Object(Lt.a)((function(e){return e.filter((function(e){return e.id===t}))[0]}))),this.subs.push(Object(Ee.a)(window,"keydown").pipe(Object(Pn.a)((function(e){return e.keyCode===I.k.Escape})),Object(A.a)((function(){var t=e.state.get("CommentThreadData");if(!t||!t.parentSelector){var n=e.commentThreadItems&&e.commentThreadItems.filter((function(e){return e.isEditMode.value}));n&&!n.length&&(_.Lb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),e.state.set("CommentThreadData",{}))}}))).subscribe())},e.prototype.getCommentId=function(e,t){return t.id},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.scrollToBottom=function(){this.scrollRef&&this.scrollRef.directiveRef&&this.scrollRef.directiveRef.scrollToBottom()},e.\u0275fac=function(t){return new(t||e)(D.fc(_i.a),D.fc(_.Jb))},e.\u0275cmp=D.Zb({type:e,selectors:[["comment-thread-container"]],viewQuery:function(e,t){var n;(1&e&&(D.Vc(Ti.b,!0),D.hd(Ai,!0)),2&e)&&(D.Lc(n=D.uc())&&(t.scrollRef=n.first),D.Lc(n=D.uc())&&(t.commentThreadItems=n))},inputs:{comments:"comments"},outputs:{submit:"submit"},decls:5,vars:4,consts:[[1,"comment-thread-container"],["class","comment-thread-items-area",4,"ngIf"],["class","comment-thread-input",4,"ngIf"],[1,"comment-thread-items-area"],[3,"comment","commenter","showControls",4,"ngFor","ngForOf","ngForTrackBy"],[3,"comment","commenter","showControls"],["commentThreadItem",""],[1,"comment-thread-input"],[1,"comment-thread-input-user"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],[1,"comment-thread-input-box"],[3,"placeholder","clearOnSubmit","submitOnCode","submitOnBlur","multiLined","autoFocus","submit"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"perfect-scrollbar"),D.ad(2,Di,3,4,"div",1),D.kc(),D.ad(3,Fi,7,13,"div",2),D.yc(4,"async"),D.kc()),2&e&&(D.Sb(2),D.Cc("ngIf",t.comments.length>0),D.Sb(1),D.Cc("ngIf",!D.zc(4,2,t.readonly)))},directives:[Ti.b,F.t,F.s,ji.a,Ke.a,Pi.a],pipes:[F.b,Q.d],styles:[".comment-thread-container[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#fff;border:1px solid #d3d3e7;box-shadow:0 2px 2px #c3c3de;border-radius:4px;width:290px;transform:translate(30px,-50%)}.comment-thread-container[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]  .text-input{margin-bottom:5px}.comment-thread-items-area[_ngcontent-%COMP%]{padding:5px;max-height:500px}.comment-thread-input[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;border-top:1px solid #d3d3e7}.comment-thread-input-box[_ngcontent-%COMP%]{flex:1;padding-left:5px}"],changeDetection:0}),e}();function Bi(e,t){if(1&e){var n=D.mc();D.lc(0,"div",1),D.yc(1,"async"),D.lc(2,"comment-thread-container",2),D.tc("submit",(function(e){return D.Oc(n),D.xc().addComment(e)})),D.yc(3,"async"),D.kc(),D.kc()}if(2&e){var i=D.xc();D.Wc(D.zc(1,3,i.styleset)),D.Sb(2),D.Cc("comments",D.zc(3,5,i.comments))}}var Ui=function(){function e(e,t,n,i,r,a,o){this.ll=e,this.states=t,this.sanitizer=n,this.datastore=i,this.commandService=r,this.diagToViewport=a,this.elementRef=o,this.defaulParentSelector=".diagram-area-wrapper",this.subs=[],this.visibility=new R.a(!1),this.comments=new R.a([]),this.styleset=new R.a(this.sanitizer.bypassSecurityTrustStyle(""))}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.states.changes("CommentThreadData").pipe(Object(Pn.a)((function(e){return Boolean(e)})),Object(P.a)((function(t){return Object(Be.a)(e.updateVisibility(t),e.attachToParent(t),e.updatePosition(t),e.updateComments(t))}))).subscribe())},e.prototype.ngOnDestroy=function(){var e,t;try{for(var n=Object(w.k)(this.subs),i=n.next();!i.done;i=n.next()){i.value.unsubscribe(),this.subs=[]}}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.addComment=function(e){var t=this.states.get("CommentThreadData");t.threadId||this.visibility.next(!1),e&&(_.Lb.track("comments.new_comment_added.onenter"),this.commandService.dispatch(Nn.a.addComment,{comment:{id:_.sb.commentId(),comment:e,parentId:t.threadId,shapeId:t.shapeId,locOnDiagram:t.position}}))},e.prototype.attachToParent=function(e){var t=this.elementRef.nativeElement,n=document.querySelector(e.parentSelector||this.defaulParentSelector);return n&&n.appendChild(t),Object(li.b)()},e.prototype.updateVisibility=function(e){return this.visibility.next(!!e.visible),Object(li.b)()},e.prototype.updatePosition=function(e){var t=this;if(!e.visible)return Object(li.b)();if(e.parentSelector)return Object(li.b)();if(e.threadId){var n=Object(w.h)(e.comments,1)[0];return n.shapeId?this.locator.getShapeOnce(n.shapeId).pipe(Object(P.a)((function(e){return e?t.syncWithShapePosition(n.shapeId,n.locOnShape):t.syncWithDiagramPosition(n.locOnDiagram)}))):this.syncWithDiagramPosition(n.locOnDiagram)}return e.shapeId?this.locator.getShapeOnce(e.shapeId).pipe(Object(P.a)((function(n){if(n.isConnector())return t.syncWithDiagramPosition(e.position);var i=n.getPositionOnShape(e.position);return t.syncWithShapePosition(e.shapeId,i)}))):this.syncWithDiagramPosition(e.position)},e.prototype.updateComments=function(e){var t=this;if(e.comments&&e.comments[0]){var n=Object(w.h)(e.comments,1)[0];return Object(Ei.b)(this.datastore.findOne(Ii.a,{id:n.id}),this.datastore.find(Ii.a,{parentId:n.id},{sort:{added:1}})).pipe(Object(A.a)((function(e){var n=Object(w.h)(e,2),i=n[0],r=n[1];t.comments.next(Object(w.j)([i],r))})))}return this.comments.next([]),Object(li.b)()},e.prototype.syncWithDiagramPosition=function(e){var t=this;return this.updateOnViewportChange((function(){var n=t.diagToViewport.x(e.x),i=t.diagToViewport.y(e.y);return t.updatePositionStyles(n,i),Object(li.b)()}))},e.prototype.syncWithShapePosition=function(e,t){var n=this;return this.updateOnViewportChange((function(){return n.locator.getShapeModel(e).pipe(Object(A.a)((function(e){var i=_.ob.onRect(t,e.defaultBounds,e.transform),r=n.diagToViewport.x(i.x),a=n.diagToViewport.y(i.y);n.updatePositionStyles(r,a)})))}))},e.prototype.updatePositionStyles=function(e,t){this.styleset.next(this.sanitizer.bypassSecurityTrustStyle("transform: translate("+e+"px, "+t+"px)"))},e.prototype.updateOnViewportChange=function(e){return Object(Be.a)(this.states.changes("DiagramPan"),this.states.changes("DiagramZoomLevel")).pipe(Object(P.a)((function(){return e()})))},e.\u0275fac=function(t){return new(t||e)(D.fc(M.a),D.fc(_.Jb),D.fc(Z.b),D.fc(Un.b),D.fc(_.B),D.fc(j.a),D.fc(D.r))},e.\u0275cmp=D.Zb({type:e,selectors:[["comment-thread-view"]],decls:2,vars:3,consts:[["class","comment-thread-view",3,"style",4,"ngIf"],[1,"comment-thread-view"],[3,"comments","submit"]],template:function(e,t){1&e&&(D.ad(0,Bi,4,7,"div",0),D.yc(1,"async")),2&e&&D.Cc("ngIf",D.zc(1,1,t.visibility))},directives:[F.t,Ni],pipes:[F.b],styles:[".comment-thread-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1000}"],changeDetection:0}),e}(),zi=function(){function e(e,t,n,i,r,a,o){this.state=e,this.injector=t,this.ll=n,this.loader=i,this.cursorGen=r,this.resources=a,this.elementRef=o,this.changeDebounceTime=3e4,ai.Ticker.timingMode=ai.Ticker.RAF,this.subs=[],this.compSubs=[]}return e.prototype.ngAfterViewInit=function(){var e=this;this.interactionLayer.canvas.nextStage=this.diagramView.canvas,this.diagramView.canvas.nextStage=this.gridArea.canvas,this.compSubs.push(this.state.changes("CurrentDiagram").subscribe((function(){return e.initViewComponents()}))),ai.Ticker.addEventListener("tick",(function(t){return e.tick(t)})),this.initSvgGenerator()},e.prototype.ngOnDestroy=function(){for(this.state.remove("DiagramCanvas"),this.clearSubscriptions();this.compSubs.length>0;)this.compSubs.pop().unsubscribe()},e.prototype.initViewComponents=function(){var e=this;this.clearSubscriptions(),this.subs.push(this.createInteractionHandler().subscribe());var t=document.querySelector(".diagram-viewport");this.state.set("DiagramViewPort",new _.vb(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)),this.subs.push(this.observeBounds(t,300).subscribe((function(t){return e.updateViewPort(t)}))),this.state.initialize("GridAreaCanvas",this.gridArea.canvas),this.state.initialize("DiagramCanvas",this.diagramView.canvas)},e.prototype.initSvgGenerator=function(){var e=this,t=this.ll.forCurrentObserver(!1),n=t.pipe(Object(P.a)((function(e){return e.getDiagramModel()})),Object(ti.a)(this.changeDebounceTime),Object(P.a)((function(){var n=e.createDiagramSVGView(t),i=n.populateDiagram().pipe(Object(ni.a)()),r=Object($n.a)((function(){return n.toSvg().pipe(Object(K.a)(1))}));return Object(ei.a)(i,r)}))).subscribe((function(t){var n=_.m.get("DIAGRAM_SVG_BASE_URL")+e.state.get("CurrentDiagram");e.loader.store(n,t,I.s.Uploaded)}));this.subs.push(n)},e.prototype.createDiagramSVGView=function(e){return new nt.n(e,this.resources,!0)},e.prototype.clearSubscriptions=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.observeBounds=function(e,t){var n=this;return ii.a.create((function(t){var i=n.createResizeObserver((function(n){var i,r;try{for(var a=Object(w.k)(n),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.target===e){var c=_.vb.fromClientRect(s.target.getBoundingClientRect());t.next(c)}}}catch(u){i={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}}));return i.observe(e),function(){i.disconnect()}})).pipe(Object(ti.a)(t))},e.prototype.createResizeObserver=function(e){return new Oi.default(e)},e.prototype.createInteractionHandler=function(){var e,t=this;return this.state.changes("CurrentInteractionHandler").pipe(Object(Dn.a)((function(e,t){return e.type===t.type})),Object(P.a)((function(n){return e&&e.destroy(),e=n.injector.get(n.type),Object(Be.a)(e.initialize(t.diagramView.canvas,t.interactionLayer.canvas,t.gridArea.canvas),e.getCursor().pipe(Object(A.a)((function(e){return t.updateCursor(e)}))))})))},e.prototype.updateCursor=function(e){var t;return t="css"===e.type?e.cursor:"cur"===e.type?this.cursorGen.getCursorIcon(e):this.cursorGen.getCursorCSS(e),"app"===e.viewingArea?document.body.style.cursor=t:document.body.style.cursor="default",requestAnimationFrame((function(){})),this.elementRef.nativeElement.style.cursor=t},e.prototype.tick=function(e){e.paused||(this.updateCanvas(this.diagramView),this.updateCanvas(this.interactionLayer),this.updateCanvas(this.gridArea),_.P.get("DEBUG_FRAME_RATE")&&xi.FRAME_RATE_COUNT++)},e.prototype.updateCanvas=function(e){e.hasChanges&&(e.updateCanvas(),e.clearChanges())},e.prototype.updateViewPort=function(e){var t=this.state.get("DiagramViewPort");t.width===e.width&&t.height===e.height&&t.x===e.x&&t.y===e.y||(t.width=e.width,t.height=e.height,t.x=e.x,t.y=e.y,this.state.set("DiagramViewPort",t))},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(D.C),D.fc(M.a),D.fc(_.Ab),D.fc(Qn.a),D.fc(_.W),D.fc(D.r))},e.\u0275cmp=D.Zb({type:e,selectors:[["diagram-area"]],viewQuery:function(e,t){var n;(1&e&&(D.hd(yi,!0),D.hd(Ci,!0),D.hd(ci,!0),D.hd(wi,!0)),2&e)&&(D.Lc(n=D.uc())&&(t.diagramView=n.first),D.Lc(n=D.uc())&&(t.interactionLayer=n.first),D.Lc(n=D.uc())&&(t.gridArea=n.first),D.Lc(n=D.uc())&&(t.freeHandContainer=n.first))},features:[D.Rb([_.Ab])],decls:13,vars:0,consts:[[1,"diagram-area-wrapper","fx-cover"],["name","shape-text-editor"],["name","weblinks-viewer"],["name","hyperlink-editor"],["name","shape-data-viewer"],["name","shapelink-editor"],["id","contextual-toolbar"],["id","shape-text-toolbar"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.gc(1,"grid-area"),D.gc(2,"diagram-view"),D.gc(3,"interaction-area"),D.gc(4,"free-hand-container"),D.gc(5,"router-outlet",1),D.gc(6,"router-outlet",2),D.gc(7,"router-outlet",3),D.gc(8,"router-outlet",4),D.gc(9,"router-outlet",5),D.gc(10,"floating-toolbar",6),D.gc(11,"floating-toolbar",7),D.gc(12,"comment-thread-view"),D.kc())},directives:[ci,yi,Ci,wi,Oe.i,zt,Ui],encapsulation:2,changeDetection:0}),e}(),Vi=n("7ntQ"),Gi=n("Wg7D"),Hi=n("qonV"),Wi=n("7zx0"),Yi=n("vz8n"),Xi=function(){function e(e,t,n,i,r){var a=this;this.state=e,this.pluginReg=t,this.user=n,this.collabLocator=i,this.realtimeService=r,this.startConnectionDelay=5e3,this.userStatus={},this.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.event,i=t.data,r=a.currentConference.value&&a.currentConference.value.room?a.currentConference.value.room:void 0;n===Yi.ConferenceEvents.conferenceConnectionSuccess?a.onConferenceConnected():n===Yi.ConferenceEvents.conferenceDisconected?a.onConferenceDisconnected(r,i):n===Yi.ConferenceEvents.conferenceError?a.onConferenceError(r,i):n===Yi.ConferenceEvents.conferenceUserListChanged?a.onUserListChange(i):_.db.error("Unhandled Conference Event",n)}},this.currentConference=new R.a(void 0),this.userCount=new R.a(1),this.listenToConnectionStart()}return Object.defineProperty(e.prototype,"manifestUrl",{get:function(){return this.axionManifestUrl||(this.axionManifestUrl=_.m.get("PLUGIN_AXION_MANIFEST")),this.axionManifestUrl},enumerable:!1,configurable:!0}),e.prototype.startConference=function(){return Object(w.c)(this,void 0,void 0,(function(){return Object(w.f)(this,(function(e){switch(e.label){case 0:return[4,this.pluginReg.load(this.manifestUrl)];case 1:return e.sent(),0===this.userCount.value&&this.userCount.next(1),this.messageSub=this.pluginReg.recieveMessages(this.axionManifestUrl).subscribe(this.handleIncomingMessages),this.pluginReg.sendMessage(Yi.ConferenceCommands.conferenceStart,{room:this.state.get("CurrentDiagram")},this.axionManifestUrl),this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"connecting"}),[2]}}))}))},e.prototype.stopConference=function(e){return Object(w.c)(this,void 0,void 0,(function(){return Object(w.f)(this,(function(t){return this.messageSub.unsubscribe(),this.messageSub=void 0,this.pluginReg.sendMessage(Yi.ConferenceCommands.conferenceStop,{room:this.currentConference.value.room},this.axionManifestUrl),e?this.currentConference.next(void 0):this.currentConference.next({room:this.currentConference.value.room,status:"disconnected"}),this.updateUserCount(),this.pluginReg.unload(this.axionManifestUrl),[2]}))}))},e.prototype.listenToConnectionStart=function(){var e=this;this.state.changes("RealtimeConnectionStatus").pipe(Object(Pn.a)((function(e){return e===Wi.a.ONLINE})),Object(An.a)(this.startConnectionDelay),Object(K.a)(1)).subscribe((function(t){e.start()}))},e.prototype.start=function(){this.listenToConferenceChanges(),this.listenToRealtimeChannel(),this.listenToCollabChanges(),this.listenToDocumentChanges()},e.prototype.switch=function(){this.currentConference.value&&("joined"===this.currentConference.value.status&&this.stopConference(!0),this.currentConference.next(void 0)),this.annouceJoin()},e.prototype.annouceJoin=function(){_.db.debug("Conference Service - announcing join."),this.realtimeService.set(e.KEY_CONFERENCE_STATUS,e.CONFERENCE_ANNOUNCE)},e.prototype.listenToDocumentChanges=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(Pn.a)((function(e){return Boolean(e)})),Object(Dn.a)(),Object(A.a)((function(t){return e.switch()}))).subscribe()},e.prototype.listenToConferenceChanges=function(){var t=this;return this.currentConference.pipe(Object(Pn.a)((function(e){return!!e})),Object(Dn.a)(),Object(A.a)((function(n){t.realtimeService.set(e.KEY_CONFERENCE_STATUS,n.status)}))).subscribe()},e.prototype.listenToRealtimeChannel=function(){var t=this;return this.realtimeService.get(e.KEY_CONFERENCE_STATUS).pipe(Object(Dn.a)(),Object(A.a)((function(n){n.value===e.CONFERENCE_ANNOUNCE?t.currentConference.value&&"joined"===t.currentConference.value.status&&t.realtimeService.set(e.KEY_CONFERENCE_STATUS,"joined"):t.updateConferenceStatus(n.userId,n.value)}))).subscribe()},e.prototype.listenToCollabChanges=function(){var t=this;return this.collabLocator.getCollabs().pipe(Object(Dn.a)((function(e,t){return Object(T.filter)(e,(function(e){return e.online})).length===Object(T.filter)(t,(function(e){return e.online})).length}))).subscribe((function(n){t.removeDisconnectedPeers(n),t.currentConference.value&&"joined"===t.currentConference.value.status&&t.realtimeService.set(e.KEY_CONFERENCE_STATUS,"joined")}))},e.prototype.removeDisconnectedPeers=function(e){var t=this,n=Object(T.map)(Object(T.filter)(e,(function(e){return!e.online})),"id"),i=!1;Object(T.each)(n,(function(e){t.userStatus[e]&&(t.userStatus[e]="disconected",i=!0)})),i&&this.currentConference.value&&"joined"!==this.currentConference.value.status&&!Object(T.find)(this.userStatus,(function(e){return"joined"===e}))&&this.currentConference.next(void 0),this.updateUserCount()},e.prototype.updateConferenceStatus=function(e,t){t&&(this.userStatus[e]=t),"joined"===t?this.currentConference.value&&"disconnected"!==this.currentConference.value.status||this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"active"}):"disconnected"!==t&&"error"!==t||"active"!==this.currentConference.value.status||Object(T.find)(this.userStatus,(function(e){return"joined"===e}))||this.currentConference.next(void 0),this.updateUserCount()},e.prototype.updateUserCount=function(){if(!this.currentConference.value||"joined"!==this.currentConference.value.status){var e=Object(T.filter)(this.userStatus,(function(e){return"joined"===e}));this.userCount.next(e.length),this.applyConferenceLimit()}},e.prototype.applyConferenceLimit=function(){this.currentConference.value&&"active"===this.currentConference.value.status&&this.userCount.value>e.MAX_CALLERS&&this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"full"})},e.prototype.onConferenceConnected=function(){var e=this;this.user.getUserData().pipe(Object(Pn.a)((function(e){return!!e})),Object(K.a)(1)).subscribe((function(t){e.pluginReg.sendMessage(Yi.ConferenceCommands.conferenceStart,{room:e.state.get("CurrentDiagram"),name:t.fullName},e.axionManifestUrl),e.currentConference.next({room:e.state.get("CurrentDiagram"),status:"joined"})}))},e.prototype.onConferenceDisconnected=function(e,t){e&&e===t.room&&this.currentConference.next({room:e,status:"disconnected"})},e.prototype.onConferenceError=function(e,t){e&&e===t.room&&this.currentConference.next({room:e,status:"error"})},e.prototype.onUserListChange=function(e){e&&e.activeCount&&(this.userCount.next(e.activeCount),this.applyConferenceLimit())},e.KEY_CONFERENCE_STATUS="KEY_CONFERENCE_STATUS",e.CONFERENCE_ANNOUNCE="CONFERENCE_ANNOUNCE",e.MAX_CALLERS=4,e.\u0275fac=function(t){return new(t||e)(D.pc(_.Jb),D.pc(Hi.a),D.pc(Rn.x),D.pc(_i.a),D.pc(Wi.b))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),qi=n("oyCe"),Ki=n("iV8b"),Ji=n("B/3P"),Zi=n("K0+f"),Qi=function(){return{event:"conversion.payment-failed.banner.click"}},$i=function(){function e(e,t){this.modalController=e,this.translate=t}return e.prototype.showBillingPage=function(){this.modalController.show(Rn.r,{inputs:{page:"billing"}})},e.\u0275fac=function(t){return new(t||e)(D.fc(_.gb),D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["payment-failed-message"]],decls:15,vars:11,consts:[[1,"payment-failed-container","fx-pointer-events-auto"],[1,"payment-failed-inner","fx-center-vertical"],[1,"payment-failed-icon"],[1,"nu-icon","nu-icon-small","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],[1,"payment-failed-text"],[1,"payment-failed-auth-link","white",3,"trackAction","click"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"div",1),D.lc(2,"div",2),D.wc(),D.lc(3,"svg",3),D.gc(4,"use",4),D.kc(),D.kc(),D.vc(),D.lc(5,"div",5),D.lc(6,"span"),D.cd(7),D.yc(8,"async"),D.kc(),D.lc(9,"span"),D.cd(10),D.yc(11,"async"),D.kc(),D.lc(12,"a",6),D.tc("click",(function(){return t.showBillingPage()})),D.cd(13),D.yc(14,"async"),D.kc(),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(7),D.ed(" ",D.zc(8,4,t.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1"))," "),D.Sb(3),D.ed(" ",D.zc(11,6,t.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART2"))," "),D.Sb(2),D.Cc("trackAction",D.Gc(10,Qi)),D.Sb(1),D.ed(" ",D.zc(14,8,t.translate.get("PAYMENT_FAILED_MESSAGES.BUTTONS"))," "))},directives:[Zi.a],pipes:[F.b],styles:[".payment-failed-container[_ngcontent-%COMP%]{color:#fae8e5;height:30px;position:relative;top:0;width:100%;z-index:1;background-color:#f05252;padding:20px}.payment-failed-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.payment-failed-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:700;color:#fae8e5}.payment-failed-inner[_ngcontent-%COMP%]{height:100%}.payment-failed-icon[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.payment-failed-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:4px}"],changeDetection:0}),e}(),er=n("uIWG"),tr=n("uDTp"),nr=n("thzy"),ir=n("YsaH"),rr=function(){return{event:"header.right.avatar.click"}};function ar(e,t){if(1&e&&(D.lc(0,"div",5),D.gc(1,"user-image",6),D.lc(2,"div",7),D.lc(3,"div",8),D.lc(4,"p",9),D.cd(5),D.kc(),D.lc(6,"p"),D.lc(7,"label",10),D.cd(8),D.kc(),D.kc(),D.lc(9,"p"),D.lc(10,"span",11),D.cd(11),D.kc(),D.kc(),D.lc(12,"p",12),D.cd(13),D.yc(14,"translate"),D.kc(),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc().$implicit;D.Sb(1),D.Cc("hasImage",n.collab.hasImage)("imagePath",n.collab.image)("userColor",n.collab.displayColor)("userInitials",n.collab.initial)("userRegistered",n.collab.isRegistered)("trackAction",D.Gc(13,rr))("userOnlineStatus",n.collab.online),D.Sb(4),D.dd(n.collab.fullName),D.Sb(3),D.dd(n.collab.roleTitle),D.Sb(3),D.dd(n.collab.email),D.Sb(2),D.dd(D.zc(14,11,n.collab.lastSeenMoment))}}function or(e,t){if(1&e&&(D.lc(0,"div",13),D.lc(1,"div",14),D.lc(2,"span"),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc().$implicit;D.Sb(3),D.ed("+",n.remainingCount,"")}}var sr=function(e,t){return{right:e,"z-index":t}},cr=function(e,t){return{active:e,inactive:t}};function ur(e,t){if(1&e&&(D.lc(0,"div",2),D.ad(1,ar,15,14,"div",3),D.ad(2,or,4,1,"div",4),D.kc()),2&e){var n=t.$implicit;D.Cc("ngStyle",D.Ic(4,sr,n.position+"px",n.index))("ngClass",D.Ic(7,cr,n.collab&&n.collab.online,n.collab&&!n.collab.online)),D.Sb(1),D.Cc("ngIf",!!n.collab),D.Sb(1),D.Cc("ngIf",!n.collab)}}var lr=function(e){function t(t,n,i){var r=e.call(this)||this;return r.state=i,r.limitCount=0,r.collabs=n.getUserData().pipe(Object(Pn.a)((function(e){return!!e})),Object(P.a)((function(e){return Object(Ei.b)(t.getCollabs().pipe(Object(Lt.a)((function(e){return e.filter((function(e){return e.id!==r.state.get("CurrentUser")}))}))),r.collabHover).pipe(Object(Lt.a)((function(e){var t=Object(w.h)(e,2),n=t[0],i=t[1];return r.getCollabViews(n,i)})))}))),r}return Object(w.e)(t,e),t.\u0275fac=function(e){return new(e||t)(D.fc(_i.a),D.fc(Rn.x),D.fc(_.Jb))},t.\u0275cmp=D.Zb({type:t,selectors:[["user-strip"]],inputs:{limitCount:"limitCount"},features:[D.Pb],decls:3,vars:4,consts:[[1,"user-strip-container"],["class","user-strip-img-wrapper",3,"ngStyle","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"user-strip-img-wrapper",3,"ngStyle","ngClass"],["tooltip","","placement","bottom","style","display: inline-block;",4,"ngIf"],["style","display: inline-block;",4,"ngIf"],["tooltip","","placement","bottom",2,"display","inline-block"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","trackAction","userOnlineStatus"],[1,"tooltip-content"],[1,"user-info-bubble"],[1,"nu-text-bold"],["translate",""],[1,"white"],[1,"nu-text-small"],[2,"display","inline-block"],[1,"user-count-inner","fx-round"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,ur,3,10,"div",1),D.yc(2,"async"),D.kc()),2&e&&(D.Sb(1),D.Cc("ngForOf",D.zc(2,2,t.collabs))("ngForTrackBy",t.getCollabTrackingId))},directives:[F.s,F.w,F.q,F.t,Te.a,Pi.a,Zi.a,Q.a],pipes:[F.b,Q.d],styles:['.user-strip-container[_ngcontent-%COMP%]{height:27px;position:fixed;margin-right:5px;top:10px}.user-info-bubble[_ngcontent-%COMP%]{padding:5px}.user-count-inner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:30px;width:30px;position:fixed;background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#b9b9b9;position:relative;overflow:hidden;text-align:center;border:1px solid #d3d3e7}.user-count-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;height:28px}.user-count-inner[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;height:inherit;width:inherit;top:0;background:hsla(0,0%,100%,.7)}.user-strip-img-wrapper[_ngcontent-%COMP%]{max-width:100px;transition:all .2s linear;transition-delay:0s;position:absolute}.user-strip-img-wrapper[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{position:relative;transform:scale(1);transition:all .2s linear;transition-delay:.3s}.user-strip-container[_ngcontent-%COMP%]     .user-img-inner{box-shadow:2px 0 #f9f8f7}.user-strip-container[_ngcontent-%COMP%]     .user-img-container.active .user-img-inner{box-shadow:none}'],changeDetection:0}),t}(ir.a),pr=n("8lHc"),dr=n("fqe/"),hr=n("VVrU"),fr=n("qeMm");function gr(e,t){if(1&e&&D.gc(0,"collab-list-item",8),2&e){var n=t.$implicit;D.Cc("collab",n)}}var mr=function(){return{event:"dialog.share.user.role.change"}},vr=function(e){function t(t,n,i,r,a,o,s,c){var u=e.call(this,a)||this;return u.ll=t,u.collabLocator=n,u.commandService=i,u.userLocator=r,u.modalController=a,u.planPermManager=o,u.translate=s,u.stateService=c,u.subs=[],u.openCollabSettings=new D.t,u.title=s.instant("SHARE.HEADING"),u.collabs=n.getCollabsSortedIgnoringOnline(),u.isVerifiedUser=new R.a(!1),u.subs.push(u.checkUserEmailIsVerified().subscribe()),u}return Object(w.e)(t,e),t.prototype.getPrivacyText=function(){var e=this,t=this.getTeamName().subscribe((function(t){e.teamName=t}));return this.subs.push(t),this.getPrivacyLevel().pipe(Object(Lt.a)((function(t){switch(t.level){case 0:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.SPECIFIC_USERS");case 1:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT")+e.teamName+" "+e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT_LINK");case 2:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT")+e.teamName;case 3:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_LINK");case 4:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.PUBLIC")}})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.getTeamName=function(){return this.userLocator.getUserData().pipe(Object(Pn.a)((function(e){return!!e})),Object(K.a)(1),Object(Lt.a)((function(e){return e.team?e.team.organizationName:null})))},t.prototype.getPrivacyLevel=function(){return this.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramModel().pipe(Object(K.a)(1),Object(Lt.a)((function(e){return e.privacy})))})))},t.prototype.removeCollaborator=function(e){this.commandService.dispatch(Nn.a.removeDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabIds:[e]})},t.prototype.addCollaborators=function(e){var t=this;this.collabLocator.getCollabs().pipe(Object(K.a)(1),Object(Lt.a)((function(n){e.forEach((function(t){var i=n.find((function(e){return e.email===t.email}));i&&(e=e.filter((function(e){return e.email!==i.email})))})),e.length>0&&t.dispatchAddCollabsCommand(e)}))).subscribe()},t.prototype.dispatchAddCollabsCommand=function(e){var t=this;this.commandService.dispatch(Nn.a.addDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabs:e}).subscribe({error:function(e){t.handleDiagramPermissionError(e)}})},t.prototype.handleDiagramPermissionError=function(e){if(1618===e.code)throw new Rn.l("Adding diagram collaborator permission is denied for owner",Object(w.a)(Object(w.a)({},Ji.a[I.r.DIAGRAM_ADD_EDITORS]),{descriptionParams:{maxUsage:this.planPermManager.getMaxUsage(I.r.DIAGRAM_ADD_EDITORS)}}));if(1620!==e.code)throw e;this.subs.push(this.showAddCollaboratorError().subscribe())},t.prototype.showAddCollaboratorError=function(){var e=this;return this.collabLocator.getCollabs().pipe(Object(K.a)(1),Object(P.a)((function(t){var n=t.find((function(e){return e.role===ve.g.OWNER}));return e.userLocator.getUserInfo(n.id).pipe(Object(A.a)((function(t){var n=Object(w.a)(Object(w.a)({},Ji.a[I.r.DIAGRAM_COLLABORATOR_ADD_EDITORS]),{descriptionParams:{ownerName:t.fullName},buttons:[{type:"ok",text:"BUTTONS.OK",clickHandler:e.hideModal.bind(e)}],hideCancelButton:!0});throw new Rn.l("Adding diagram collaborator permission is denied for collaborator",n)})))})))},t.prototype.hideModal=function(){return this.modalController.hide()},t.prototype.changeCollabRole=function(e){this.commandService.dispatch(Nn.a.changeDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabs:[{id:e.userId,role:e.role}]})},t.prototype.checkUserEmailIsVerified=function(){var e=this;return this.userLocator.getUserData().pipe(Object(Pn.a)((function(e){return!!e})),Object(A.a)((function(t){t.emailToConfirm?e.isVerifiedUser.next(!1):e.isVerifiedUser.next(!0)})))},t.\u0275fac=function(e){return new(e||t)(D.fc(M.a),D.fc(_i.a),D.fc(_.B),D.fc(Rn.x),D.fc(_.gb),D.fc(Rn.o),D.fc(Q.e),D.fc(_.Jb))},t.\u0275cmp=D.Zb({type:t,selectors:[["diagram-share-window"]],outputs:{openCollabSettings:"openCollabSettings"},features:[D.Pb],decls:14,vars:11,consts:[[1,"diagram-share-tab-container"],[1,"collaborator-setting"],["translate",""],["translate","",1,"primary",3,"trackAction","click"],[1,"collaborator-list-container"],[3,"collab",4,"ngFor","ngForOf"],[1,"collaborator-invite-form"],[3,"verifiedUser"],[3,"collab"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"div",1),D.lc(2,"span",2),D.cd(3),D.yc(4,"async"),D.kc(),D.lc(5,"a",3),D.tc("click",(function(){return t.openCollabSettings.next(!0)})),D.cd(6,"SHARE.PRIVACY_CHANGE"),D.kc(),D.kc(),D.lc(7,"div",4),D.lc(8,"perfect-scrollbar"),D.ad(9,gr,1,1,"collab-list-item",5),D.yc(10,"async"),D.kc(),D.kc(),D.lc(11,"div",6),D.gc(12,"collab-invite-form",7),D.yc(13,"async"),D.kc(),D.kc()),2&e&&(D.Sb(3),D.dd(D.zc(4,4,t.getPrivacyText())),D.Sb(2),D.Cc("trackAction",D.Gc(10,mr)),D.Sb(4),D.Cc("ngForOf",D.zc(10,6,t.collabs)),D.Sb(3),D.Cc("verifiedUser",D.zc(13,8,t.isVerifiedUser)))},directives:[Q.a,Zi.a,Ti.b,F.s,hr.a,fr.a],pipes:[F.b],styles:[".collab-list[_ngcontent-%COMP%]{color:#fff;margin:0 auto;max-height:calc(100% - 60px);width:100%}.diagram-share-tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.collaborator-list-container[_ngcontent-%COMP%]{flex:1;padding-top:20px;overflow:auto}.collaborator-setting[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:20px;border-radius:4px;display:flex;align-items:center}.collaborator-setting[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;padding-right:30px}"],changeDetection:0}),t}(ve.f),br=n("Mo46");function yr(e,t){if(1&e){var n=D.mc();D.lc(0,"collab-privacy-item",1),D.tc("privacyChange",(function(e){return D.Oc(n),D.xc().privacyChange.next(e)}))("privacyRoleChanged",(function(e){return D.Oc(n),D.xc().selectedRole.next(e)})),D.yc(1,"async"),D.kc()}if(2&e){var i=t.$implicit,r=D.xc();D.Cc("name",r.collabPrivacyItem)("disabled",!1)("checked",i.level===r.currentPrivacy.level)("privacyInfo",i)("role",D.zc(1,5,r.selectedRole))}}var Cr=function(e){function t(t,n,i,r){var a=e.call(this,t,r)||this;return a.userLocator=t,a.ll=n,a.collabLocator=i,a.translate=r,a}return Object(w.e)(t,e),t.prototype.getPrivacyDetails=function(e){var t,n=this;e.team&&(t=e.team.organizationName);var i={title:this.translate.instant("SHARE.PUBLIC"),description:this.translate.instant("SHARE.PUBLIC_DESC_VIEW"),level:Rn.p.PUBLIC},r={title:this.translate.instant("SHARE.ANYONE_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")},level:Rn.p.ANYONE_WITH_LINK},a={title:this.translate.instant("SHARE.ANYONE_AT")+" "+t,description:{edit:this.translate.instant("SHARE.ANYONE_AT")+" "+t+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_AT")+" "+t+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_VIEW")},level:Rn.p.ANYONE_IN_TEAM},o={title:this.translate.instant("SHARE.ANYONE_AT")+" "+t+" "+this.translate.instant("SHARE.ANYONE_AT_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")},level:Rn.p.ANYONE_IN_TEAM_WITH_LINK},s={title:this.translate.instant("SHARE.SPECIFIC_USERS"),description:this.translate.instant("SHARE.SPECIFIC_USERS_DESC"),level:Rn.p.SPECIFIC};return this.collabLocator.getCollabs().pipe(Object(K.a)(1),Object(Lt.a)((function(t){return n.isInTeam(e,t)?[i,r,a,o,s]:[i,r,s]})))},t.\u0275fac=function(e){return new(e||t)(D.fc(Rn.x),D.fc(M.a),D.fc(_i.a),D.fc(Q.e))},t.\u0275cmp=D.Zb({type:t,selectors:[["diagram-privacy-form"]],viewQuery:function(e,n){var i;(1&e&&D.hd(t,!0),2&e)&&(D.Lc(i=D.uc())&&(n.diagramPrivacyForm=i.first))},features:[D.Pb],decls:2,vars:3,consts:[[3,"name","disabled","checked","privacyInfo","role","privacyChange","privacyRoleChanged",4,"ngFor","ngForOf"],[3,"name","disabled","checked","privacyInfo","role","privacyChange","privacyRoleChanged"]],template:function(e,t){1&e&&(D.ad(0,yr,2,7,"collab-privacy-item",0),D.yc(1,"async")),2&e&&D.Cc("ngForOf",D.zc(1,1,t.privacyTypes))},directives:[F.s,br.a],pipes:[F.b],encapsulation:2,changeDetection:0}),t}(ve.d),Or=function(e){function t(t,n,i,r,a){var o=e.call(this)||this;return o.ll=t,o.commandService=n,o.planPermManager=i,o.translate=r,o.stateService=a,o.privacy=t.forCurrent(!1).getDiagramModel().pipe(Object(Lt.a)((function(e){return e.privacy}))),o}return Object(w.e)(t,e),t.prototype.changePrivacy=function(e){if(e.level!==Rn.p.PUBLIC&&!this.planPermManager.check([I.r.DIAGRAM_CREATE])&&!this.planPermManager.check([I.r.DIAGRAM_CREATE_PRIVATE]))throw new Rn.l(this.translate.instant("SHARE.PERMISSION_ERROR"),Ji.a[I.r.DIAGRAM_CREATE_PRIVATE_NONE]);this.commandService.dispatch(Nn.a.changeDiagramPrivacy,{diagramId:this.stateService.get("CurrentDiagram"),privacy:e})},t.\u0275fac=function(e){return new(e||t)(D.fc(M.a),D.fc(_.B),D.fc(Rn.o),D.fc(Q.e),D.fc(_.Jb))},t.\u0275cmp=D.Zb({type:t,selectors:[["diagram-collab-settings"]],features:[D.Pb],decls:4,vars:3,consts:[[1,"collab-permission-container","fx-margin-bottom-30"],[3,"currentPrivacy"],["privacyForm",""]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.gc(1,"diagram-privacy-form",1,2),D.yc(3,"async"),D.kc()),2&e&&(D.Sb(1),D.Cc("currentPrivacy",D.zc(3,1,t.privacy)))},directives:[Cr],pipes:[F.b],styles:[""],changeDetection:0}),t}(ve.e),xr=n("GIU+"),Sr=n("xEGh");function kr(e,t){if(1&e){var n=D.mc();D.lc(0,"button",11),D.tc("click",(function(){return D.Oc(n),D.xc(3).showResetConfirmationDialog()})),D.cd(1,"Reset"),D.kc()}}var wr=function(){return{event:"dialog.share.embed.link.copy"}};function Er(e,t){if(1&e){var n=D.mc();D.lc(0,"div",6),D.lc(1,"div",7),D.gc(2,"text-input",8),D.yc(3,"async"),D.kc(),D.lc(4,"button",9),D.tc("click",(function(){return D.Oc(n),D.xc(2).copyEmbedText()})),D.cd(5,"Copy"),D.kc(),D.ad(6,kr,2,0,"button",10),D.yc(7,"async"),D.kc()}if(2&e){var i=D.xc(2);D.Sb(2),D.Cc("value",D.zc(3,4,i.embedUrl))("readonly",!0),D.Sb(2),D.Cc("trackAction",D.Gc(8,wr)),D.Sb(2),D.Cc("ngIf",D.zc(7,6,i.isShowResetButton))}}function Ir(e,t){1&e&&D.gc(0,"loading-bubbles",12)}function Tr(e,t){if(1&e&&(D.lc(0,"div",2),D.lc(1,"p",3),D.cd(2,"Attach the workspace as an image."),D.kc(),D.ad(3,Er,8,9,"div",4),D.yc(4,"async"),D.ad(5,Ir,1,0,"ng-template",null,5,D.bd),D.kc()),2&e){var n=D.Mc(6),i=D.xc();D.Sb(3),D.Cc("ngIf",D.zc(4,2,i.isLoaded))("ngIfElse",n)}}function _r(e,t){1&e&&D.gc(0,"loading-bubbles",12)}var jr=function(){function e(e,t,n,i,r,a){this.ll=e,this.commandService=t,this.dialogBoxController=n,this.state=i,this.notifierController=r,this.translate=a,this.embedUrl=new R.a(""),this.isLoaded=new R.a(!0),this.isEmbedUrlLoaded=new R.a(!1),this.isShowResetButton=new R.a(!0),this.startEmbedImageNotificationId="EMBED_IMAGE_TEXT_COPIED",this.subs=[],this.notificationMessages=new lt.a(this.translate)}return e.prototype.ngOnInit=function(){this.generateEmbedImageUrl()},e.prototype.copyEmbedText=function(){var e=this;return xr.writeText(this.embedUrl.value).then((function(){return e.showEmbedImageNotification()}))},e.prototype.resetToken=function(){var e=this,t=this.state.get("CurrentDiagram");_.Lb.track("dialog.share.embed.reset"),this.isLoaded.next(!1);var n=this.dispatchResetEmbedImageToken(t).subscribe({next:function(t){var n='<img src="'+t.data.documentResetEmbed+'&type=svg">';e.embedUrl.next(n)},complete:function(){e.isLoaded.next(!0)}});this.subs.push(n)},e.prototype.dispatchFetchEmbedURL=function(e){return this.commandService.dispatch(Nn.a.fetchEmbedImageUrl,{resourceId:e}).pipe(Object(Mn.a)(),Object(Lt.a)((function(e){return e&&e.resultData[0]?JSON.parse(e.resultData[0]):null})))},e.prototype.dispatchResetEmbedImageToken=function(e){return this.commandService.dispatch(Nn.a.resetEmbedImageToken,{resourceId:e}).pipe(Object(Mn.a)(),Object(Lt.a)((function(e){return e&&e.resultData[0]?JSON.parse(e.resultData[0]):null})))},e.prototype.showResetConfirmationDialog=function(){var e=this,t={id:"share-diagram-embed-image-reset",heading:"DIALOG_BOX.RESET_EMBED_IMAGE.HEADING",description:"DIALOG_BOX.RESET_EMBED_IMAGE.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RESET_EMBED_IMAGE",clickHandler:function(){return e.resetToken()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){}}]};this.dialogBoxController.showDialog(t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(K.a)(1),Object(Lt.a)((function(e){return e.privacy})))},e.prototype.generateEmbedImageUrl=function(){var e=this;this.isEmbedUrlLoaded.next(!1);var t=this.state.get("CurrentDiagram"),n=this.getPrivacyLevel().pipe(Object(P.a)((function(n){return 4===n.level?(e.embedUrl.next('<img src="'+_.m.get("EMBED_ENDPOINT_URL")+"/"+t+'?type=svg">'),e.setResetButtonVisiblity(!1),Object(L.a)()):(e.setResetButtonVisiblity(!0),e.dispatchFetchEmbedURL(t).pipe(Object(A.a)((function(t){var n='<img src="'+t.data.document.image.svg+'">';e.embedUrl.next(n)}))))}))).subscribe({complete:function(){e.isEmbedUrlLoaded.next(!0)}});this.subs.push(n)},e.prototype.showEmbedImageNotification=function(){var e=this.notificationMessages.getNotificationMessage(lt.b.EMBED_IMAGE_TEXT_COPIED);this.notifierController.show(lt.b.EMBED_IMAGE_TEXT_COPIED,e.component,e.type,e.options,e.collapsed)},e.prototype.setResetButtonVisiblity=function(e){this.isShowResetButton.value!==e&&this.isShowResetButton.next(e)},e.\u0275fac=function(t){return new(t||e)(D.fc(M.a),D.fc(_.B),D.fc(_.M),D.fc(_.Jb),D.fc(_.kb),D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["embed-tab"]],inputs:{diagramID:"diagramID"},decls:4,vars:4,consts:[["class","embed-tab-container",4,"ngIf","ngIfElse"],["loadingContainer",""],[1,"embed-tab-container"],[1,"grey"],["class","embed-tab-copy",4,"ngIf","ngIfElse"],["loading",""],[1,"embed-tab-copy"],[1,"embed-tab-text"],[1,"hyperlink-input",3,"value","readonly"],[1,"nu-btn-med","primary",3,"trackAction","click"],["class","nu-btn-med primary",3,"click",4,"ngIf"],[1,"nu-btn-med","primary",3,"click"],["color","secondary",1,"fx-margin-top-10"]],template:function(e,t){if(1&e&&(D.ad(0,Tr,7,4,"div",0),D.yc(1,"async"),D.ad(2,_r,1,0,"ng-template",null,1,D.bd)),2&e){var n=D.Mc(3);D.Cc("ngIf",D.zc(1,2,t.isEmbedUrlLoaded))("ngIfElse",n)}},directives:[F.t,Ke.a,Zi.a,Sr.a],pipes:[F.b],styles:[".embed-tab-copy[_ngcontent-%COMP%]{display:flex;align-items:center}.embed-tab-copy[_ngcontent-%COMP%]   .nu-btn-med[_ngcontent-%COMP%]{height:32px}.embed-tab-text[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),e}(),Pr=n("x+xc"),Ar=["window"],Mr=["windowInner"],Dr=["shareFrame"];function Rr(e,t){if(1&e){var n=D.mc();D.lc(0,"div",19),D.lc(1,"diagram-share-window",20),D.tc("openCollabSettings",(function(){return D.Oc(n),D.xc(4).selectedTab.next("collab-settings")})),D.kc(),D.kc()}}function Lr(e,t){1&e&&(D.lc(0,"div",19),D.gc(1,"diagram-collab-settings"),D.kc())}function Fr(e,t){1&e&&(D.lc(0,"div",19),D.gc(1,"embed-tab"),D.kc())}var Nr=function(){return{event:"dialog.share.tab.embed.click"}};function Br(e,t){if(1&e){var n=D.mc();D.wc(),D.vc(),D.lc(0,"div",13),D.lc(1,"div",14),D.lc(2,"a",15),D.tc("click",(function(){return D.Oc(n),D.xc(3).selectedTab.next("collaborators")})),D.cd(3,"SHARE.TAB_COLLAB"),D.kc(),D.lc(4,"a",15),D.tc("click",(function(){return D.Oc(n),D.xc(3).selectedTab.next("collab-settings")})),D.cd(5,"SHARE.TAB_COLLAB_SETTINGS"),D.kc(),D.lc(6,"a",16),D.tc("click",(function(){return D.Oc(n),D.xc(3).selectedTab.next("embed")})),D.cd(7,"SHARE.TAB_EMBED"),D.kc(),D.kc(),D.lc(8,"div",17),D.ad(9,Rr,2,0,"div",18),D.ad(10,Lr,2,0,"div",18),D.ad(11,Fr,2,0,"div",18),D.kc(),D.kc()}if(2&e){var i=t.ngIf;D.Sb(2),D.Xb("active","collaborators"===i),D.Sb(2),D.Xb("active","collab-settings"===i),D.Sb(2),D.Xb("active","embed"===i),D.Cc("trackAction",D.Gc(10,Nr)),D.Sb(3),D.Cc("ngIf","collaborators"===i),D.Sb(1),D.Cc("ngIf","collab-settings"===i),D.Sb(1),D.Cc("ngIf","embed"===i)}}function Ur(e,t){if(1&e){var n=D.mc();D.lc(0,"div",5,6),D.lc(2,"div",7),D.lc(3,"h1",8),D.cd(4,"SHARE.HEADING"),D.kc(),D.lc(5,"button",9),D.tc("click",(function(){return D.Oc(n),D.xc(2).closeWindow()})),D.wc(),D.lc(6,"svg",10),D.gc(7,"use",11),D.kc(),D.kc(),D.kc(),D.ad(8,Br,12,11,"div",12),D.yc(9,"async"),D.kc()}if(2&e){var i=D.xc(2);D.Sb(8),D.Cc("ngIf",D.zc(9,1,i.selectedTab))}}function zr(e,t){if(1&e&&(D.lc(0,"div",21),D.gc(1,"iframe",22,23),D.yc(3,"safe"),D.kc()),2&e){var n=D.xc().ngIf,i=D.xc();D.Sb(1),D.Cc("src",D.zc(3,1,i.getSourceIframeUrl(n)),D.Qc)}}function Vr(e,t){if(1&e){var n=D.mc();D.lc(0,"div",1,2),D.tc("click",(function(e){return D.Oc(n),D.xc().closeOnOverlayClick(e)})),D.ad(2,Ur,10,3,"div",3),D.ad(3,zr,4,3,"div",4),D.kc()}if(2&e){var i=t.ngIf,r=D.xc();D.Xb("modal-window-container",!r.isExternalDocument(i))("modal-window-container-no-bg",r.isExternalDocument(i)),D.Sb(2),D.Cc("ngIf",!r.isExternalDocument(i)),D.Sb(1),D.Cc("ngIf",r.isExternalDocument(i))}}var Gr=function(e){function t(t,n,i,r,a,o){var s=e.call(this)||this;return s.modalController=t,s.ll=n,s.pm=i,s.auth=r,s.commandService=a,s.stateService=o,s.subs=[],s.selectedTab=new R.a("collaborators"),s.diagramModel=s.ll.forCurrent(!1).getDiagramOnce().pipe(Object(A.a)((function(e){s.isExternalDocument(e)&&s.stateService.set("ModalBlur",!1)}))),s.subs.push(s.listenToConnectionChanges().subscribe()),s}return Object(w.e)(t,e),t.prototype.isExternalDocument=function(e){return Boolean(e.source&&"creately"!==e.source.type)},t.prototype.getSourceIframeUrl=function(e){return _.m.sourceConfig[e.source.type].shareUrl},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){var e=this;if(this.container&&this.containerInner){var t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t)}var n=this.pm.recv().subscribe((function(t){return e.handleIncomingMessages(t)}));this.subs.push(n)},t.prototype.closeWindow=function(){var e=this;if(this.container&&this.containerInner){var t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)}},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.listenToConnectionChanges=function(){var e=this;return this.stateService.changes(J.c).pipe(Object(A.a)((function(t){t!==J.c.ONLINE&&e.modalController.hide()})))},t.prototype.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.source,i=t.event,r=t.data;"api/source/gdrive"===n&&("ready"===i&&this.handleShareFrameReady(r),"close"===i&&this.handleShareFrameClose(r))}},t.prototype.handleShareFrameReady=function(e){var t=this;this.diagramModel.subscribe((function(e){var n=e.source.fileId,i=t.auth.token,r=t.shareFrame.nativeElement;t.pm.sendToWindow("share",{fileId:n,token:i},r.contentWindow)}))},t.prototype.handleShareFrameClose=function(e){this.modalController.hide()},t.\u0275fac=function(e){return new(e||t)(D.fc(_.gb),D.fc(M.a),D.fc(_.pb),D.fc(dr.a),D.fc(_.B),D.fc(_.Jb))},t.\u0275cmp=D.Zb({type:t,selectors:[["share-window"]],viewQuery:function(e,t){var n;(1&e&&(D.hd(Ar,!0),D.hd(Mr,!0),D.hd(Dr,!0)),2&e)&&(D.Lc(n=D.uc())&&(t.container=n.first),D.Lc(n=D.uc())&&(t.containerInner=n.first),D.Lc(n=D.uc())&&(t.shareFrame=n.first))},features:[D.Pb],decls:2,vars:3,consts:[["class","fx-cover fx-center-all",3,"modal-window-container","modal-window-container-no-bg","click",4,"ngIf"],[1,"fx-cover","fx-center-all",3,"click"],["window",""],["class","modal-window-inner",4,"ngIf"],["class","fx-cover",4,"ngIf"],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate",""],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["class","modal-window-content",4,"ngIf"],[1,"modal-window-content"],[1,"share-tabs-header"],["translate","",3,"click"],["translate","",3,"trackAction","click"],[1,"share-tabs-content"],["class","share-tab-item",4,"ngIf"],[1,"share-tab-item"],[3,"openCollabSettings"],[1,"fx-cover"],[1,"share-iframe",3,"src"],["shareFrame",""]],template:function(e,t){1&e&&(D.ad(0,Vr,4,6,"div",0),D.yc(1,"async")),2&e&&D.Cc("ngIf",D.zc(1,1,t.diagramModel))},directives:[F.t,Q.a,Zi.a,vr,Or,jr],pipes:[F.b,Pr.b],styles:[".share-tabs-header[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3e7;padding:10px 20px 7px;margin-bottom:20px}.share-tabs-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-bottom:5px;border-bottom:2px solid transparent;margin-right:30px}.share-tabs-header[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid #ffc648}.modal-window-inner[_ngcontent-%COMP%]{width:600px;height:475px;padding:0}.share-tabs-content[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-bottom:20px;height:calc(100% - 54px)}.share-tab-item[_ngcontent-%COMP%]{height:100%}  .modal-window-content{height:calc(100% - 65px)}.modal-window-heading[_ngcontent-%COMP%]{padding-top:25px}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.share-iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border:none}"],changeDetection:0}),t}(E.q),Hr=n("P1E4"),Wr=n("onas");function Yr(e,t){if(1&e&&D.gc(0,"notification-list-item",5),2&e){var n=t.$implicit;D.Cc("notification",n)}}function Xr(e,t){if(1&e){var n=D.mc();D.lc(0,"div",2),D.lc(1,"perfect-scrollbar",3),D.tc("psYReachEnd",(function(){return D.Oc(n),D.xc().loadMore()})),D.ad(2,Yr,1,1,"notification-list-item",4),D.yc(3,"async"),D.kc(),D.kc()}if(2&e){var i=D.xc();D.Sb(2),D.Cc("ngForOf",D.zc(3,1,i.notifications))}}function qr(e,t){1&e&&(D.lc(0,"div",2),D.lc(1,"div",6),D.lc(2,"div",7),D.cd(3,"GLOBAL_NOTIFICATION.NO_NOTIFICATION"),D.kc(),D.kc(),D.kc())}var Kr=function(){function e(e,t){this.globalNotificationService=e,this.commandService=t,this.notifications=this.globalNotificationService.getGlobalNotifications()}return e.prototype.loadMore=function(){var e=this.globalNotificationService.getNoOfGlobalNotifications();this.commandService.dispatch(Yn.getGlobalNotifications,{offset:e,limit:20})},e.\u0275fac=function(t){return new(t||e)(D.fc(Gn.a),D.fc(_.B))},e.\u0275cmp=D.Zb({type:e,selectors:[["global-notification-notifications"]],decls:5,vars:6,consts:[[1,"notifications-tab-container"],["class","notifications-list-container",4,"ngIf"],[1,"notifications-list-container"],[3,"psYReachEnd"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"],[1,"globle-notification-no-notification-container","fx-margin-bottom-30"],["translate","",1,"globle-notification-no-notification-text"]],template:function(e,t){if(1&e&&(D.lc(0,"div",0),D.ad(1,Xr,4,3,"div",1),D.yc(2,"async"),D.ad(3,qr,4,0,"div",1),D.yc(4,"async"),D.kc()),2&e){var n,i;D.Sb(1),D.Cc("ngIf",(null==(n=D.zc(2,2,t.notifications))?null:n.length)>0),D.Sb(2),D.Cc("ngIf",!((null==(i=D.zc(4,4,t.notifications))?null:i.length)>0))}},styles:[".notifications-list[_ngcontent-%COMP%]{color:#fff;margin:0 auto;max-height:calc(100% - 60px);width:100%}.notifications-tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.notifications-list-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.notifications-list-boundary[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;justify-content:space-around;align-items:center;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:#7e7e7e}.notifications-list-boundary[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:1px solid #f2f2f2;transform:rotate(180deg);width:140px}.globle-notification-no-notification-container[_ngcontent-%COMP%]{margin-top:18px;margin-left:18px;margin-right:12px}.globle-notification-no-notification-text[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:17px;color:#7e7e7e;padding-top:12px;padding-bottom:12px;text-align:center}"],changeDetection:0}),e}(),Jr=n("ZFuN"),Zr=function(){return{event:"notification.panel.settings.toggle.click"}},Qr=function(){function e(){}return e.prototype.ngOnInit=function(){_.Lb.track("notification.panel.settings.load")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["global-notification-settings"]],decls:28,vars:2,consts:[[1,"globle-notification-setting-container","fx-margin-bottom-30"],[1,"globle-notification-setting-toggle-row"],[1,"globle-notification-setting-toggle-header"],[1,"globle-notification-setting-toggle"],[3,"trackAction"],[1,"globle-notification-setting-sub-text"],[1,"globle-notification-setting-sub-text-dash"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"div",1),D.lc(2,"div",2),D.cd(3,"Recieve Fewer notifications."),D.kc(),D.lc(4,"div",3),D.gc(5,"toggle-button",4),D.kc(),D.kc(),D.lc(6,"div",5),D.cd(7,"You will not be notified of the following activities:"),D.kc(),D.lc(8,"div",5),D.lc(9,"div",6),D.cd(10," - "),D.kc(),D.cd(11," A workspace or folder you are collaborating on is deleted by the owner."),D.kc(),D.lc(12,"div",5),D.lc(13,"div",6),D.cd(14," - "),D.kc(),D.cd(15," A workspace you are collaborating on is moved by an editor or the owner."),D.kc(),D.lc(16,"div",5),D.lc(17,"div",6),D.cd(18," - "),D.kc(),D.cd(19," A workspace or folder you are collaborating on is renamed by an editor or the owner."),D.kc(),D.lc(20,"div",5),D.lc(21,"div",6),D.cd(22," - "),D.kc(),D.cd(23," A workspace or folder you are collaborating on is shared with other users by an editor or the owner."),D.kc(),D.lc(24,"div",5),D.lc(25,"div",6),D.cd(26," - "),D.kc(),D.cd(27," A collaborator edited the description or tags on a workspace you\u2019re working on."),D.kc(),D.kc()),2&e&&(D.Sb(5),D.Cc("trackAction",D.Gc(1,Zr)))},directives:[Jr.a,Zi.a],styles:[".globle-notification-setting-container[_ngcontent-%COMP%]{margin-top:18px;margin-left:18px;margin-right:12px}.globle-notification-setting-toggle-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.globle-notification-setting-toggle-header[_ngcontent-%COMP%]{font-weight:700;color:#04263d}.globle-notification-setting-sub-text[_ngcontent-%COMP%], .globle-notification-setting-toggle-header[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-style:normal;font-size:14px;line-height:17px}.globle-notification-setting-sub-text[_ngcontent-%COMP%]{font-weight:400;color:#7e7e7e;padding-top:12px;padding-bottom:12px;display:flex}.globle-notification-setting-sub-text-dash[_ngcontent-%COMP%]{padding-right:10px}"],changeDetection:0}),e}(),$r=["window"],ea=["windowInner"],ta=function(){return{event:"notification.panel.markAllRead.click"}};function na(e,t){if(1&e){var n=D.mc();D.lc(0,"button",12),D.tc("click",(function(){return D.Oc(n),D.xc(3).markAllAsRead()})),D.lc(1,"span",13),D.cd(2,"TOOLTIPS.NOTIFICATION.MARK_ALL_AS_READ"),D.kc(),D.wc(),D.lc(3,"svg",16),D.gc(4,"use",17),D.kc(),D.kc()}2&e&&D.Cc("trackAction",D.Gc(1,ta))}var ia=function(){return{event:"notification.panel.settings.click"}};function ra(e,t){if(1&e){var n=D.mc();D.lc(0,"div",7),D.lc(1,"div",8),D.cd(2),D.yc(3,"async"),D.kc(),D.lc(4,"div",9),D.ad(5,na,5,2,"button",10),D.yc(6,"async"),D.kc(),D.lc(7,"div",11),D.lc(8,"button",12),D.tc("click",(function(){return D.Oc(n),D.xc(2).selectedTab.next("notifications-settings")})),D.lc(9,"span",13),D.cd(10,"TOOLTIPS.NOTIFICATION.NOTIFICATION_SETTINGS"),D.kc(),D.wc(),D.lc(11,"svg",14),D.gc(12,"use",15),D.kc(),D.kc(),D.kc(),D.kc()}if(2&e){var i=D.xc(2);D.Sb(2),D.ed("",D.zc(3,3,i.noOfUnreadGlobalNotification)," new notifcations"),D.Sb(3),D.Cc("ngIf",D.zc(6,5,i.hasUnreadGlobalNotifications)),D.Sb(3),D.Cc("trackAction",D.Gc(7,ia))}}var aa=function(){return{event:"notification.panel.settings.back.click"}};function oa(e,t){if(1&e){var n=D.mc();D.lc(0,"div",7),D.lc(1,"button",18),D.tc("click",(function(){return D.Oc(n),D.xc(2).selectedTab.next("notifications")})),D.wc(),D.lc(2,"svg",19),D.gc(3,"use",20),D.kc(),D.kc(),D.vc(),D.lc(4,"div",21),D.cd(5,"GLOBAL_NOTIFICATION.NOTIFICATION_SETTINGS"),D.kc(),D.kc()}2&e&&(D.Sb(1),D.Cc("trackAction",D.Gc(1,aa)))}function sa(e,t){1&e&&(D.lc(0,"div",25),D.gc(1,"global-notification-notifications"),D.kc())}function ca(e,t){1&e&&(D.lc(0,"div",25),D.gc(1,"global-notification-settings"),D.kc())}function ua(e,t){if(1&e&&(D.lc(0,"div",22),D.lc(1,"div",23),D.ad(2,sa,2,0,"div",24),D.ad(3,ca,2,0,"div",24),D.kc(),D.kc()),2&e){var n=t.ngIf;D.Sb(2),D.Cc("ngIf","notifications"===n),D.Sb(1),D.Cc("ngIf","notifications-settings"===n)}}function la(e,t){if(1&e&&(D.lc(0,"div",3,4),D.ad(2,ra,13,8,"div",5),D.ad(3,oa,6,2,"div",5),D.ad(4,ua,4,2,"div",6),D.yc(5,"async"),D.kc()),2&e){var n=t.ngIf,i=D.xc();D.Sb(2),D.Cc("ngIf","notifications"===n),D.Sb(1),D.Cc("ngIf","notifications-settings"===n),D.Sb(1),D.Cc("ngIf",D.zc(5,3,i.selectedTab))}}var pa=function(e){function t(t,n,i,r){var a=e.call(this)||this;return a.modalController=t,a.stateService=n,a.globalNotificationService=i,a.commandService=r,a.subs=[],a.stateService.set("ModalBlur",!1),a.selectedTab=new R.a("notifications"),a}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"hasUnreadGlobalNotifications",{get:function(){return this.globalNotificationService.hasUnreadGlobalNotifications()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noOfUnreadGlobalNotification",{get:function(){return this.globalNotificationService.getNoOfUnreadGlobalNotification()},enumerable:!1,configurable:!0}),t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){if(_.Lb.track("notification.panel.load"),this.container&&this.containerInner){var e=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(e)}},t.prototype.closeWindow=function(){var e=this;if(this.container&&this.containerInner){var t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)}},t.prototype.markAllAsRead=function(){var e=this;this.globalNotificationService.getUnreadNotificationIds().pipe(Object(K.a)(1),Object(P.a)((function(t){return e.commandService.dispatch(Yn.markGlobalNotificationRead,{notificationIds:t})}))).subscribe()},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(D.fc(_.gb),D.fc(_.Jb),D.fc(Gn.a),D.fc(_.B))},t.\u0275cmp=D.Zb({type:t,selectors:[["global-notification"]],viewQuery:function(e,t){var n;(1&e&&(D.hd($r,!0),D.hd(ea,!0)),2&e)&&(D.Lc(n=D.uc())&&(t.container=n.first),D.Lc(n=D.uc())&&(t.containerInner=n.first))},features:[D.Pb],decls:4,vars:3,consts:[[1,"fx-cover","modal-window-container","global-notification-container",3,"click"],["window",""],["class","modal-window-inner",4,"ngIf"],[1,"modal-window-inner"],["windowInner",""],["class","modal-window-heading",4,"ngIf"],["class","modal-window-content",4,"ngIf"],[1,"modal-window-heading"],[1,"global-notification-heading"],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn","global-notification-button-container"],["class","nu-btn-small nu-btn-icon lib-browser-close-btn","tooltip","","placement","bottom",3,"trackAction","click",4,"ngIf"],[1,"global-notification-button-container"],["tooltip","","placement","bottom",1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"trackAction","click"],["translate","",1,"tooltip-content"],[1,"nu-icon","nu-icon-med","nu-ic-settings"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-settings"],[1,"nu-icon","nu-icon-med","nu-ic-notification-tick-double"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notification-tick-double"],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn","global-notification-notifications-button",3,"trackAction","click"],[1,"nu-icon","nu-icon-med","nu-ic-arrow-left"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow-left"],["translate","",1,"global-notification-heading-settings"],[1,"modal-window-content"],[1,"global-notification-tabs-content"],["class","global-notification-tab-item",4,"ngIf"],[1,"global-notification-tab-item"]],template:function(e,t){1&e&&(D.lc(0,"div",0,1),D.tc("click",(function(e){return t.closeOnOverlayClick(e)})),D.ad(2,la,6,5,"div",2),D.yc(3,"async"),D.kc()),2&e&&(D.Sb(2),D.Cc("ngIf",D.zc(3,1,t.selectedTab)))},directives:[F.t,Te.a,Zi.a,Q.a,Kr,Qr],pipes:[F.b],styles:['.modal-window-inner[_ngcontent-%COMP%]{width:401px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:0;background:#fff;border:1px solid #e0e0e0;box-sizing:border-box;border-radius:4px;top:49px;left:-5px}.global-notification-tabs-content[_ngcontent-%COMP%]{height:calc(100vh - 110px)}.global-notification-tab-item[_ngcontent-%COMP%]{height:100%}  .modal-window-content{height:calc(100% - 65px)}.modal-window-heading[_ngcontent-%COMP%]{padding-top:17px;padding-bottom:18px;height:52px;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-bottom:1px solid #e0e0e0}.modal-window-heading[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:unset;top:0;right:0}.global-notification-heading[_ngcontent-%COMP%]{font-family:lt_regular,Open Sans,sans-serif;padding-left:16px;width:70%}.global-notification-heading[_ngcontent-%COMP%], .global-notification-heading-settings[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:14px;line-height:17px;color:#04263d}.global-notification-heading-settings[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.global-notification-container[_ngcontent-%COMP%]{background-color:unset;display:flex;justify-content:flex-end;z-index:10}.global-notification-container[_ngcontent-%COMP%]:after, .global-notification-container[_ngcontent-%COMP%]:before{content:"";display:block;width:0;height:0;position:absolute;border-style:solid}.global-notification-container[_ngcontent-%COMP%]:before{top:40px;right:53px;border-color:transparent transparent #e0e0e0;border-width:5px}.global-notification-container[_ngcontent-%COMP%]:after{top:42px;right:53px;border-color:transparent transparent #fff;border-width:5px}.global-notification-button-container[_ngcontent-%COMP%]{width:15%}'],changeDetection:0}),t}(_.nb),da=function(){function e(e,t,n,i,r){this.state=e,this.templateRef=t,this.viewContainer=n,this.changeDetector=i,this.collabLocator=r,this.viewEnabled=!1}return e.prototype.ngOnInit=function(){var e=this;if(void 0===ve.g[this.diagramRole])throw new Error("DiagramRole directive require a valid collaborator role to be matched against.");this.changeSub=this.state.changes("CurrentUser").pipe(Object(Pn.a)((function(e){return!!e})),Object(P.a)((function(t){return e.state.get("CurrentDiagram")?e.collabLocator.getCollabs().pipe(Object(Lt.a)((function(n){if(n.length>0){var i=n.find((function(e){return e.id===t}));i&&i.role<=ve.g[e.diagramRole]?e.addElement():e.removeElement()}}))):Object(li.b)()}))).subscribe()},e.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},e.prototype.addElement=function(){this.viewEnabled||(this.viewContainer.createEmbeddedView(this.templateRef),this.viewEnabled=!0,this.changeDetector.detectChanges())},e.prototype.removeElement=function(){this.viewContainer.clear(),this.viewEnabled=!1,this.changeDetector.detectChanges()},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(D.cb),D.fc(D.hb),D.fc(D.j),D.fc(_i.a))},e.\u0275dir=D.ac({type:e,selectors:[["","diagramRole",""]],inputs:{diagramRole:"diagramRole"}}),e}(),ha=n("pYIu"),fa=n("TdEb"),ga=n("pVzg"),ma=function(){return{event:"header.right.share.click"}};function va(e,t){if(1&e){var n=D.mc();D.lc(0,"button",5),D.tc("click",(function(){return D.Oc(n),D.xc(3).openShareWindow()})),D.yc(1,"async"),D.wc(),D.lc(2,"svg",6),D.gc(3,"use"),D.yc(4,"async"),D.kc(),D.vc(),D.lc(5,"label",7),D.cd(6,"LABELS.SHARE"),D.kc(),D.lc(7,"span",8),D.lc(8,"p",9),D.cd(9),D.yc(10,"async"),D.kc(),D.lc(11,"p",10),D.cd(12),D.yc(13,"async"),D.kc(),D.kc(),D.kc()}if(2&e){var i=D.xc(3);D.Cc("disabled",0===D.zc(1,5,i.appConnectionStatus))("trackAction",D.Gc(13,ma)),D.Sb(3),D.Tb("href","./assets/icons/symbol-defs.svg#nu-ic-"+D.zc(4,7,i.shareButtonIcon),null,"xlink"),D.Sb(6),D.dd(D.zc(10,9,i.tooltipHeading)),D.Sb(3),D.dd(D.zc(13,11,i.tooltipDescription))}}var ba=function(){return["InterfaceControlState","edit"]};function ya(e,t){1&e&&(D.jc(0),D.ad(1,va,14,14,"button",4),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,ba)))}var Ca=function(){return["ApplicationIsEmbedded",!1]};function Oa(e,t){1&e&&(D.jc(0),D.ad(1,ya,2,2,"ng-container",3),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,Ca)))}function xa(e,t){if(1&e){var n=D.mc();D.lc(0,"simple-dropdown-item",17),D.lc(1,"div",18),D.lc(2,"a",19),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc(2).export(e.id)})),D.yc(3,"async"),D.cd(4),D.kc(),D.kc(),D.kc()}if(2&e){var i=t.$implicit,r=D.xc(2);D.Cc("item",i),D.Sb(2),D.Xb("disabled",0===D.zc(3,4,r.appConnectionStatus)&&!i.offline),D.Sb(2),D.dd(i.label)}}var Sa=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}};function ka(e,t){if(1&e&&(D.lc(0,"div",11),D.lc(1,"abs-dropdown",12,13),D.lc(3,"simple-dropdown-button",14),D.lc(4,"button",15),D.lc(5,"label",7),D.cd(6,"LABELS.EXPORT"),D.kc(),D.kc(),D.kc(),D.ad(7,xa,5,6,"simple-dropdown-item",16),D.kc(),D.kc()),2&e){var n=D.xc();D.Sb(1),D.Cc("settings",D.Gc(3,Sa)),D.Sb(2),D.Cc("items",n.exportTypes),D.Sb(4),D.Cc("ngForOf",n.exportTypes)}}var wa=function(){return{event:"header.right.upgrade.click"}};function Ea(e,t){if(1&e){var n=D.mc();D.lc(0,"button",21),D.tc("click",(function(){return D.Oc(n),D.xc(3).openUpgradePage()})),D.wc(),D.lc(1,"svg",22),D.gc(2,"use",23),D.kc(),D.vc(),D.lc(3,"label",7),D.cd(4,"LABELS.UPGRADE"),D.kc(),D.lc(5,"div",8),D.lc(6,"span",24),D.cd(7,"TOOLTIPS.UPGRADE"),D.kc(),D.gc(8,"br"),D.lc(9,"p",25),D.cd(10,"TOOLTIPS.UPGRADE_DESC"),D.kc(),D.kc(),D.kc()}2&e&&D.Cc("trackAction",D.Gc(1,wa))}function Ia(e,t){if(1&e&&(D.jc(0),D.ad(1,Ea,11,2,"button",20),D.yc(2,"async"),D.ic()),2&e){var n=D.xc(2);D.Sb(1),D.Cc("ngIf",D.zc(2,1,n.showUpgradeButton))}}function Ta(e,t){1&e&&(D.jc(0),D.ad(1,Ia,3,3,"ng-container",3),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,Ca)))}function _a(e,t){1&e&&(D.lc(0,"label",7),D.cd(1,"LABELS.SAVE"),D.kc())}function ja(e,t){1&e&&(D.lc(0,"label",7),D.cd(1,"LABELS.SAVING"),D.kc())}var Pa=function(){return{event:"header.right.save.click"}};function Aa(e,t){if(1&e){var n=D.mc();D.lc(0,"button",27),D.tc("click",(function(){return D.Oc(n),D.xc(3).openSaveDialog()})),D.yc(1,"async"),D.ad(2,_a,2,0,"label",28),D.yc(3,"async"),D.ad(4,ja,2,0,"label",28),D.yc(5,"async"),D.lc(6,"span",29),D.cd(7,"TOOLTIPS.SAVE"),D.kc(),D.kc()}if(2&e){var i=D.xc(3);D.Cc("disabled",D.zc(1,4,i.isSaveInProgress))("trackAction",D.Gc(10,Pa)),D.Sb(2),D.Cc("ngIf",!D.zc(3,6,i.isSaveInProgress)),D.Sb(2),D.Cc("ngIf",D.zc(5,8,i.isSaveInProgress))}}function Ma(e,t){1&e&&(D.jc(0),D.ad(1,Aa,8,11,"button",26),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,ba)))}function Da(e,t){1&e&&(D.jc(0),D.ad(1,Ma,2,2,"ng-container",3),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,Ca)))}function Ra(e,t){1&e&&(D.wc(),D.lc(0,"svg",34),D.gc(1,"use",35),D.kc())}var La=function(){return{event:"notification.icon.click"}};function Fa(e,t){if(1&e){var n=D.mc();D.jc(0),D.jc(1),D.ad(2,Ra,2,0,"svg",30),D.yc(3,"async"),D.lc(4,"button",31),D.tc("click",(function(){return D.Oc(n),D.xc().showGlobalNotificationModal()})),D.lc(5,"span",8),D.cd(6),D.yc(7,"async"),D.kc(),D.wc(),D.lc(8,"svg",32),D.gc(9,"use",33),D.kc(),D.kc(),D.ic(),D.ic()}if(2&e){var i=D.xc();D.Sb(2),D.Cc("ngIf",D.zc(3,3,i.hasMoreUnreadGlobalNotifications)),D.Sb(2),D.Cc("trackAction",D.Gc(7,La)),D.Sb(2),D.dd(D.zc(7,5,i.getGlobalNotificationBellToolTip()))}}var Na=function(){function e(e,t,n,i,r,a,o,s,c,u){var l=this;this.state=e,this.userLocator=t,this.modalController=n,this.commandService=i,this.planPermManager=r,this.translate=a,this.dataStore=o,this.authService=s,this.postMessage=c,this.globalNotificationService=u,this.saveDialogDelay=500,this.subs=[],this.showUpgradeButton=new R.a(!1),this.isSaveInProgress=new R.a(!1),this.shareButtonIcon=new R.a(""),this.tooltipHeading=new R.a(""),this.tooltipDescription=new R.a(""),this.isDemoUser=new R.a(!1),this.isFreeUser=new R.a(!1),this.isFreeUserSuspended=!1,this.subs.push(r.isFreeOrDemoUser().subscribe((function(e){return l.showUpgradeButton.next(e)})),this.getTeamName().subscribe((function(e){return l.teamName=e})),r.isDemoUser().subscribe((function(e){return l.isDemoUser.next(e)})),r.isFreeUser().subscribe((function(e){return l.isFreeUser.next(e)})),this.userLocator.isUserPaused().pipe(Object(Dn.a)(),Object(A.a)((function(e){return l.isUserPaused=e}))).subscribe(),this.checkIsUserSuspended()),this.handlePostMessagesRecv()}return Object.defineProperty(e.prototype,"exportTypes",{get:function(){var e=[{id:"png",label:"LABELS.EXPORT_OPTIONS.PNG",offline:!0},{id:"svg",label:"LABELS.EXPORT_OPTIONS.SVG",offline:!0},{id:"jpeg",label:"LABELS.EXPORT_OPTIONS.JPEG",offline:!0}];return"plugin"!==_.m.get("APP_MODE")&&e.push({id:"pdf",label:"LABELS.EXPORT_OPTIONS.PDF",offline:!1}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(J.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMoreUnreadGlobalNotifications",{get:function(){return this.globalNotificationService.hasUnreadGlobalNotifications()},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.updatePrivacy().subscribe())},e.prototype.openSaveDialog=function(){var e=this;this.isSaveInProgress.next(!0);var t=this.commandService.dispatch(Hr.a.saveDocument),n=Object(pr.a)(this.saveDialogDelay);Object(Ei.b)(t,n).subscribe({error:function(t){_.db.error(t),e.isSaveInProgress.next(!1)},complete:function(){e.isSaveInProgress.next(!1)}})},e.prototype.openShareWindow=function(){this.state.get("CurrentUser")&&this.modalController.show(Gr)},e.prototype.openUpgradePage=function(){this.isFreeUserSuspended?this.modalController.show(Rn.i):window.open(_.m.get("PLAN_PAGE_URL"),"_blank")},e.prototype.export=function(e){var t=this;_.Lb.track("header.right.export.click",{value1Type:"type",value1:e});var n=null;switch(e){case"png":this.isDemoUser.value?this.showAuthDialog():this.planPermManager.check([I.r.DIAGRAM_EXPORT_AS_PNG])?(this.commandService.dispatch(Nn.a.exportAsPng),n=Nn.a.exportAsPng):this.handleExportError(I.r.DIAGRAM_EXPORT_AS_PNG);break;case"jpeg":this.isDemoUser.value?this.showAuthDialog():this.planPermManager.check([I.r.DIAGRAM_EXPORT_AS_JPEG])?(this.commandService.dispatch(Nn.a.exportAsJpeg),n=Nn.a.exportAsJpeg):this.handleExportError(I.r.DIAGRAM_EXPORT_AS_JPEG);break;case"svg":this.planPermManager.check([I.r.DIAGRAM_EXPORT_AS_SVG])?this.isUserPaused?this.showUserPauseWarningDialogBox():this.commandService.dispatch(Nn.a.exportAsSvg):this.handleExportError(I.r.DIAGRAM_EXPORT_AS_SVG);break;case"csv":this.commandService.dispatch(Nn.a.exportAsCsv);break;case"xmi":this.commandService.dispatch(Nn.a.exportAsXmi);break;case"java":this.commandService.dispatch(Nn.a.exportAsCode,{type:"java"});break;case"mysql":this.commandService.dispatch(Nn.a.exportAsCode,{type:"mysql"});break;case"pdf":this.planPermManager.check([I.r.DIAGRAM_EXPORT_AS_PDF])?this.isUserPaused?this.showUserPauseWarningDialogBox():(this.modalController.show(_.cb,{inputs:{message:this.translate.instant("LOADING_WINDOWS.PDF_EXPORT"),icon:"vendor-logos/pdf.svg",class:"pdf-loading-window"}}),this.subs.push(this.commandService.dispatch(Nn.a.exportAsPdf).pipe(Object(A.a)({complete:function(){return t.modalController.hide()}})).subscribe())):this.handleExportError(I.r.DIAGRAM_EXPORT_AS_PDF)}this.isFreeUser.value&&n&&this.modalController.show(Rn.f,{inputs:{openUpgradePage:this.openUpgradePage,exportCommandEvent:n}})},e.prototype.showUserPauseWarningDialogBox=function(){var e=this,t={id:"account-paused-renew",heading:"DIALOG_BOX.ACCOUNT_PAUSED.HEADING",description:"DIALOG_BOX.ACCOUNT_PAUSED.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RENEW",clickHandler:function(){return e.showTeamPortal()}}]};this.modalController.show(Rn.t,{inputs:{dialogData:t}})},e.prototype.showTeamPortal=function(){this.modalController.show(Wr.c)},e.prototype.showAuthDialog=function(){var e=this,t=this.state.get("CurrentUser");this.userLocator.getUserData().pipe(Object(K.a)(1),Object(P.a)((function(t){var n=t.email.includes(t.id)?{}:{email:t.email};return e.authService.showSignUp(n)}))).subscribe({complete:function(){e.handleDemoUserSignIn(e.state.get("CurrentUser")!==t)},error:function(){}})},e.prototype.showGlobalNotificationModal=function(){this.modalController.show(pa)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getGlobalNotificationBellToolTip=function(){var e=this;return this.globalNotificationService.getNoOfUnreadGlobalNotification().pipe(Object(Lt.a)((function(t){return e.translate.instant("TOOLTIPS.NOTIFICATION.NEW_NOTIFICATIONS",{noOfNewNotifications:t})})))},e.prototype.handlePostMessagesRecv=function(){var e=this;this.subs.push(this.isDemoUser.pipe(Object(Pn.a)((function(e){return e})),Object(P.a)((function(){return e.postMessage.recv()})),Object(A.a)((function(t){return e.handleIncomingMessages(t)}))).subscribe())},e.prototype.updatePrivacy=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(P.a)((function(t){return e.dataStore.findOne(qi.a,{id:t})})),Object(Pn.a)((function(e){return!!e})),Object(A.a)({next:function(t){if(t&&e.privacy!==t.privacy){e.privacy=t.privacy;var n=e.getPrivacyInfo(e.privacy.level),i=e.getPrivacyDescription(n.description,e.privacy.role);e.shareButtonIcon.next(n.icon),e.tooltipHeading.next(n.heading),e.tooltipDescription.next(i)}}}))},e.prototype.getTeamName=function(){return this.userLocator.getUserData().pipe(Object(Pn.a)((function(e){return!!e})),Object(K.a)(1),Object(Lt.a)((function(e){return e.team?e.team.organizationName:null})))},e.prototype.getPrivacyInfo=function(e){switch(e){case Rn.p.SPECIFIC:return{icon:"user",heading:this.translate.instant("SHARE.SPECIFIC_USERS"),description:{edit:this.translate.instant("SHARE.SPECIFIC_USERS_DESC"),view:this.translate.instant("SHARE.SPECIFIC_USERS_DESC")}};case Rn.p.ANYONE_IN_TEAM_WITH_LINK:return{icon:"company-link",heading:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")}};case Rn.p.ANYONE_IN_TEAM:return{icon:"company",heading:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName,description:{edit:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_VIEW")}};case Rn.p.ANYONE_WITH_LINK:return{icon:"user-link",heading:this.translate.instant("SHARE.ANYONE_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")}};case Rn.p.PUBLIC:return{icon:"globe",heading:this.translate.instant("SHARE.PUBLIC"),description:this.translate.instant("SHARE.PUBLIC_DESC_VIEW")}}},e.prototype.getPrivacyDescription=function(e,t){switch(t){case ve.g.EDITOR:return e.edit;case ve.g.REVIEWER:return e.view}},e.prototype.handleExportError=function(e){setTimeout((function(){throw new Rn.l("Diagram export permission is denied",Ji.a[e])}))},e.prototype.handleDemoUserSignIn=function(e){var t=this;window.gravity.client.getCurrentUserPlan().startsWith("free")?(this.modalController.show(Rn.k,{inputs:{page:Rn.j.Plans}}),e&&this.commandService.dispatch(Nn.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe()):e?this.commandService.dispatch(Nn.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe({error:function(e){t.reload()},complete:function(){t.reload()}}):this.reload()},e.prototype.reload=function(){window.location.reload()},e.prototype.checkIsUserSuspended=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(Pn.a)((function(e){return!!e&&e.suspended})),Object(A.a)((function(){return e.isFreeUserSuspended=!0}))).subscribe()},e.prototype.handleIncomingMessages=function(e){e&&"object"==typeof e&&("phoenix:demoUserSignInSuccess"===e.event&&this.handleDemoUserSignIn(!0))},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(Rn.x),D.fc(_.gb),D.fc(_.B),D.fc(Rn.o),D.fc(Q.e),D.fc(Un.b),D.fc(Rn.a),D.fc(_.pb),D.fc(Gn.a))},e.\u0275cmp=D.Zb({type:e,selectors:[["header-action-buttons"]],decls:6,vars:5,consts:[[1,"header-action-btns-container"],[4,"ifMode"],["class","header-action-btns-dropdown fx-display-inline-block",4,"diagramRole"],[4,"ifState"],["class","nu-btn-small nu-btn-icon-text primary fx-left","data-testid","share-button","placement","bottom","tooltip","",3,"disabled","trackAction","click",4,"ifState"],["data-testid","share-button","placement","bottom","tooltip","",1,"nu-btn-small","nu-btn-icon-text","primary","fx-left",3,"disabled","trackAction","click"],[1,"nu-icon","nu-ic-share","share"],["translate",""],[1,"tooltip-content"],[1,"tooltip-header","nu-text-bold"],[1,"tooltip-body"],[1,"header-action-btns-dropdown","fx-display-inline-block"],["direction","top","alignment","right",3,"settings"],["dropdown",""],["ddbutton","",3,"items"],["data-testid","export-button",1,"header-action-btns-export","nu-btn-small","secondary"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","",3,"item"],[1,"header-action-btns-dropdown-item","fx-margin-bottom-15"],["translate","",3,"click"],["class","header-action-btns-upgrade nu-btn-small nu-btn-icon-text light-orange","data-testid","upgrade-button","placement","bottom","tooltip","",3,"trackAction","click",4,"ngIf"],["data-testid","upgrade-button","placement","bottom","tooltip","",1,"header-action-btns-upgrade","nu-btn-small","nu-btn-icon-text","light-orange",3,"trackAction","click"],[1,"nu-icon","nu-ic-star","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-star"],["translate","",1,"nu-text-bold","fx-margin-bottom-5"],["translate","",1,"header-upgrade-desc","nu-text-small"],["class","header-action-btns-save nu-btn-small nu-btn-icon-text primary fx-left","placement","bottom","tooltip","",3,"disabled","trackAction","click",4,"ifState"],["placement","bottom","tooltip","",1,"header-action-btns-save","nu-btn-small","nu-btn-icon-text","primary","fx-left",3,"disabled","trackAction","click"],["translate","",4,"ngIf"],["translate","",1,"tooltip-content"],["class","nu-icon nu-icon-xsmall nu-ic-ellipse-border-white header-action-btns-new-notification",4,"ngIf"],["tooltip","","placement","bottom",1,"header-action-btns-notification","nu-btn-small","nu-btn-icon","fx-right",3,"trackAction","click"],[1,"nu-icon","nu-ic-notification_bell"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notification_bell"],[1,"nu-icon","nu-icon-xsmall","nu-ic-ellipse-border-white","header-action-btns-new-notification"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-ellipse-border-white"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Oa,2,2,"ng-container",1),D.ad(2,ka,8,4,"div",2),D.ad(3,Ta,2,2,"ng-container",1),D.ad(4,Da,2,2,"ng-container",1),D.ad(5,Fa,10,8,"ng-container",1),D.kc()),2&e&&(D.Sb(1),D.Cc("ifMode","default"),D.Sb(1),D.Cc("diagramRole","EDITOR"),D.Sb(1),D.Cc("ifMode","default"),D.Sb(1),D.Cc("ifMode","plugin"),D.Sb(1),D.Cc("ifMode","default"))},directives:[tr.a,da,Kn.a,Te.a,Zi.a,Q.a,ha.a,fa.a,F.s,ga.a,F.t],pipes:[F.b],styles:[".header-action-btns-dropdown[_ngcontent-%COMP%]     .abs-dropdown-items-container{padding:8px}.header-action-btns-dropdown[_ngcontent-%COMP%]     .ps-content{min-width:120px;min-height:100px}.header-action-btns-dropdown[_ngcontent-%COMP%]     simple-dropdown-item:last-of-type .header-action-btns-dropdown-item{margin:0}.header-action-btns-dropdown[_ngcontent-%COMP%]     .abs-dropdown-inner{margin-right:5px}.header-action-btns-export[_ngcontent-%COMP%]{min-width:75px}.header-action-btns-container[_ngcontent-%COMP%]   .nu-btn-small[_ngcontent-%COMP%]{margin-top:9px}.header-upgrade-desc[_ngcontent-%COMP%]{margin-top:5px}.header-action-btns-upgrade[_ngcontent-%COMP%]{margin-right:0}.header-action-btns-notification[_ngcontent-%COMP%]{margin-right:-12px;padding-top:5px}.header-action-btns-notification[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.header-action-btns-save[_ngcontent-%COMP%]{text-align:center;min-width:75px}.header-action-btns-new-notification[_ngcontent-%COMP%]{position:absolute;margin-left:20px;margin-top:12px}"],changeDetection:0}),e}(),Ba=n("MjP4"),Ua=function(){function e(e,t,n,i){this.state=e,this.ll=t,this.resources=n,this.translate=i,this.maxClientExportWidthOrHeight=6e3,this.maxServerExportWidth=32e3}return e.prototype.prepareSvgData=function(){var e=this.ll.forCurrentObserver(!0),t=this.createDiagramSVGView(e);return e.pipe(Object(K.a)(1),Object(P.a)((function(e){return e.getDiagramOnce()})),Object(P.a)((function(e){return Object(ei.a)(Object($n.a)((function(){return t.populateDiagram()})),Object($n.a)((function(){return t.toSvg().pipe(Object(K.a)(1),Object(Lt.a)((function(t){return{svg:t,name:e.name,id:e.id}})))})))})))},e.prototype.getPngBlob=function(e,t){var n=this;return this.ll.forCurrent(e).getDiagramOnce().pipe(Object(P.a)((function(e){var i=n.state.get("DiagramCanvas"),r=0===n.state.get("Selected").length||t?e.getBounds():e.getBounds(n.state.get("Selected")),a=r.width+40,o=r.height+40;if(n.isDiagramExceededMaxClientExport(a,o))return n.fetchDiagramFromServer("png",2*a).pipe(Object(Lt.a)((function(t){return{name:e.name,blob:t}})));i.cache(r.x-20,r.y-20,a,o,2);var s=i.getCacheDataURL();return i.uncache(),Object(L.a)({name:e.name,blob:s})})),Object(Lt.a)((function(e){return{content:e.blob,name:e.name+".png",type:"image/png",format:"blob"}})))},e.prototype.isDiagramExceededMaxClientExport=function(e,t){return e>this.maxClientExportWidthOrHeight||t>this.maxClientExportWidthOrHeight},e.prototype.createDiagramSVGView=function(e){return new nt.n(e,this.resources)},e.prototype.fetchDiagramFromServer=function(e,t){var n=Math.min(this.maxServerExportWidth,Math.round(t));return this.prepareSvgData().pipe(Object(P.a)((function(t){return Object(pi.a)(fetch(_.m.get("SVG_TO_RASTER_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,width:n,svg:t.svg,id:t.id})}))})),Object(P.a)((function(e){return Object(pi.a)(e.blob())})))},e.\u0275fac=function(t){return new(t||e)(D.pc(_.Jb),D.pc(M.a),D.pc(_.W),D.pc(Q.e))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),za=function(){return{event:"header.right.exit.click"}},Va=function(){function e(e,t,n){this.state=e,this.postMessage=t,this.diagramExportService=n}return e.prototype.confirmAndClose=function(){var e=this;if("confluence"===this.state.get("PluginApp")){this.state.set("LoadingIndicatorState",{main:!0,description:"Generating Diagram Image..."}),this.diagramExportService.getPngBlob(!0,!0).subscribe((function(t){var n=t;e.postMessage.sendToParent("document:close",{documentId:e.state.get("CurrentDiagram"),dataUrl:n.content})}))}else this.redirectToUrl(Ba.a.get().exitUrl)},e.prototype.redirectToUrl=function(e){window.location=e},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(_.pb),D.fc(Ua))},e.\u0275cmp=D.Zb({type:e,selectors:[["close-document-button"]],decls:6,vars:2,consts:[["tooltip","","placement","bottom",1,"ic-btn-close","nu-btn-med","nu-btn-icon",3,"trackAction","click"],[1,"fx-center-all"],[1,"nu-icon","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["translate","",1,"tooltip-content"]],template:function(e,t){1&e&&(D.lc(0,"button",0),D.tc("click",(function(){return t.confirmAndClose()})),D.lc(1,"span",1),D.wc(),D.lc(2,"svg",2),D.gc(3,"use",3),D.kc(),D.kc(),D.vc(),D.lc(4,"span",4),D.cd(5,"TOOLTIPS.CLOSE"),D.kc(),D.kc()),2&e&&D.Cc("trackAction",D.Gc(1,za))},directives:[Te.a,Zi.a,Q.a],styles:[".nu-btn-med[_ngcontent-%COMP%] { margin-top: 10px; padding-right: 0; height: 30px; }"],changeDetection:0}),e}(),Ga=function(){return{event:"header.right.view.click"}};function Ha(e,t){if(1&e){var n=D.mc();D.lc(0,"button",2),D.tc("click",(function(){return D.Oc(n),D.xc().goToView()})),D.lc(1,"span",3),D.wc(),D.lc(2,"svg",4),D.gc(3,"use",5),D.kc(),D.kc(),D.vc(),D.lc(4,"span",6),D.cd(5,"TOOLTIPS.VIEW"),D.kc(),D.kc()}2&e&&D.Cc("trackAction",D.Gc(1,Ga))}var Wa=function(){return{event:"header.right.edit.click"}};function Ya(e,t){if(1&e){var n=D.mc();D.lc(0,"button",7),D.tc("click",(function(){return D.Oc(n),D.xc().goToEdit()})),D.lc(1,"span",3),D.wc(),D.lc(2,"svg",4),D.gc(3,"use",8),D.kc(),D.kc(),D.vc(),D.lc(4,"span",6),D.cd(5,"TOOLTIPS.EDIT"),D.kc(),D.kc()}2&e&&D.Cc("trackAction",D.Gc(1,Wa))}var Xa=function(){return["InterfaceControlState","edit"]},qa=function(){return["InterfaceControlState","view"]},Ka=function(){function e(e,t,n,i){this.router=e,this.state=t,this.modalController=n,this.userLocator=i,this.subs=[]}return e.prototype.goToEdit=function(){var e=this;this.state.set("HistoryPreviewMode",!1),this.subs.push(this.userLocator.isUserPaused().pipe(Object(Dn.a)(),Object(A.a)((function(t){t&&e.showUserPauseWarningDialogBox()}))).subscribe()),this.router.navigate(["../",this.state.get("CurrentDiagram"),"edit"])},e.prototype.goToView=function(){this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},e.prototype.showUserPauseWarningDialogBox=function(){var e=this,t={id:"account-paused-renew",heading:"DIALOG_BOX.ACCOUNT_PAUSED.HEADING",description:"DIALOG_BOX.ACCOUNT_PAUSED.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RENEW",clickHandler:function(){return e.showTeamPortal()}}]};this.modalController.show(Rn.t,{inputs:{dialogData:t}})},e.prototype.showTeamPortal=function(){this.modalController.show(Wr.c)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.\u0275fac=function(t){return new(t||e)(D.fc(Oe.d),D.fc(_.Jb),D.fc(_.gb),D.fc(Rn.x))},e.\u0275cmp=D.Zb({type:e,selectors:[["interface-change-button"]],decls:2,vars:4,consts:[["class","ic-btn-view nu-btn-med nu-btn-icon","tooltip","","placement","bottom",3,"trackAction","click",4,"ifState"],["class","ic-btn-edit nu-btn-med nu-btn-icon","tooltip","","placement","bottom",3,"trackAction","click",4,"ifState"],["tooltip","","placement","bottom",1,"ic-btn-view","nu-btn-med","nu-btn-icon",3,"trackAction","click"],[1,"fx-center-all"],[1,"nu-icon","nu-ic-view"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-view"],["translate","",1,"tooltip-content"],["tooltip","","placement","bottom",1,"ic-btn-edit","nu-btn-med","nu-btn-icon",3,"trackAction","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-edit"]],template:function(e,t){1&e&&(D.ad(0,Ha,6,2,"button",0),D.ad(1,Ya,6,2,"button",1)),2&e&&(D.Cc("ifState",D.Gc(2,Xa)),D.Sb(1),D.Cc("ifState",D.Gc(3,qa)))},directives:[Kn.a,Te.a,Zi.a,Q.a],styles:[".nu-btn-med[_ngcontent-%COMP%] { margin-top: 10px; height: 30px; }"],changeDetection:0}),e}(),Ja=["diagramNameToolTip"],Za=["callButtonTooltip"],Qa=["diagramAppStatusToolTip"];function $a(e,t){1&e&&D.gc(0,"payment-failed-message")}function eo(e,t){if(1&e&&(D.lc(0,"div",14),D.gc(1,"nu-badge",15),D.yc(2,"async"),D.yc(3,"async"),D.yc(4,"async"),D.kc()),2&e){var n=D.xc(2);D.Sb(1),D.Cc("badgeText",D.zc(2,3,n.documentStatus).label)("bgColor",D.zc(3,5,n.documentStatus).bgColor)("textColor",D.zc(4,7,n.documentStatus).textColor)}}function to(e,t){1&e&&(D.lc(0,"span",16),D.gc(1,"img",17),D.lc(2,"span",18),D.lc(3,"p",19),D.cd(4,"TOOLTIPS.GOOGLE_DRIVE.HEADER_DRIVE_ICON.HEADING"),D.kc(),D.lc(5,"p",20),D.cd(6,"TOOLTIPS.GOOGLE_DRIVE.HEADER_DRIVE_ICON.DESCRIPTION"),D.kc(),D.kc(),D.kc())}function no(e,t){1&e&&(D.wc(),D.lc(0,"svg",26),D.gc(1,"use",27),D.kc())}function io(e,t){1&e&&(D.wc(),D.lc(0,"svg",26),D.gc(1,"use",28),D.kc())}function ro(e,t){if(1&e&&(D.lc(0,"span"),D.ad(1,no,2,0,"svg",25),D.yc(2,"async"),D.ad(3,io,2,0,"svg",25),D.yc(4,"async"),D.kc()),2&e){var n=D.xc(3);D.Sb(1),D.Cc("ngIf","offline"===D.zc(2,2,n.appStatusIndicatorInfo).icon),D.Sb(2),D.Cc("ngIf","online"===D.zc(4,4,n.appStatusIndicatorInfo).icon)}}function ao(e,t){if(1&e){var n=D.mc();D.jc(0),D.lc(1,"span",21,22),D.tc("mouseenter",(function(e){return D.Oc(n),D.xc(2).appStatusIconMouseState(e)}))("mouseleave",(function(e){return D.Oc(n),D.xc(2).appStatusIconMouseState(e)})),D.ad(3,ro,5,6,"span",0),D.lc(4,"span",18),D.lc(5,"p",23),D.cd(6),D.yc(7,"async"),D.kc(),D.lc(8,"p",24),D.cd(9),D.yc(10,"async"),D.kc(),D.kc(),D.kc(),D.ic()}if(2&e){var i=D.xc().ngIf,r=D.xc();D.Sb(3),D.Cc("ngIf",!i.source||"creately"===i.source.type),D.Sb(3),D.dd(D.zc(7,3,r.appStatusIndicatorInfo).tooltip.heading),D.Sb(3),D.dd(D.zc(10,5,r.appStatusIndicatorInfo).tooltip.description)}}function oo(e,t){if(1&e&&(D.jc(0),D.lc(1,"span",29),D.cd(2),D.kc(),D.ic()),2&e){var n=D.xc().ngIf,i=D.xc();D.Sb(2),D.dd(i.getDiagramProjectName(n))}}function so(e,t){1&e&&(D.lc(0,"span"),D.lc(1,"span",31),D.cd(2,"|"),D.kc(),D.lc(3,"span",32),D.cd(4," SHARE.PUBLIC "),D.lc(5,"span",18),D.lc(6,"p",19),D.cd(7,"TOOLTIPS.DIAGRAM_PRIVACY_LEVEL_TITLE"),D.kc(),D.lc(8,"p",20),D.cd(9,"TOOLTIPS.DIAGRAM_PRIVACY_LEVEL_CONTENT"),D.kc(),D.kc(),D.kc(),D.kc())}function co(e,t){if(1&e&&(D.jc(0),D.ad(1,so,10,0,"span",0),D.ic()),2&e){var n=D.xc(2).ngIf;D.Sb(1),D.Cc("ngIf",4===(null==n||null==n.privacy?null:n.privacy.level))}}var uo=function(){return["ApplicationIsEmbedded",!1]};function lo(e,t){1&e&&(D.jc(0),D.ad(1,co,2,1,"ng-container",30),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,uo)))}var po=function(){return{event:"header.left.diagramName.click"}};function ho(e,t){if(1&e){var n=D.mc();D.jc(0),D.lc(1,"div",4),D.ad(2,eo,5,9,"div",5),D.yc(3,"async"),D.lc(4,"div",6),D.lc(5,"editable-label",7),D.tc("changedText",(function(e){return D.Oc(n),D.xc().renameDiagram(e)}))("click",(function(e){return D.Oc(n),D.xc().selectDiagramName(e)}))("focusout",(function(){return D.Oc(n),D.xc().diagramNameClicked=!1})),D.yc(6,"async"),D.kc(),D.lc(7,"span",8),D.cd(8,"TOOLTIPS.RENAME_DIAGRAM"),D.kc(),D.lc(9,"div",9,10),D.lc(11,"span",8),D.cd(12,"TOOLTIPS.REQUIRED_RENAME"),D.kc(),D.kc(),D.kc(),D.kc(),D.lc(13,"div",11),D.ad(14,to,7,0,"span",12),D.ad(15,ao,11,7,"ng-container",13),D.ad(16,oo,3,1,"ng-container",13),D.ad(17,lo,2,2,"ng-container",13),D.kc(),D.ic()}if(2&e){var i=t.ngIf,r=D.xc();D.Sb(2),D.Cc("ngIf","none"!==D.zc(3,8,r.documentStatus).id),D.Sb(3),D.Dc("value",null==i?null:i.name),D.Cc("trackAction",D.Gc(12,po))("readonly","view"===D.zc(6,10,r.uiState)),D.Sb(9),D.Cc("ngIf",i.source&&"gdrive"===i.source.type),D.Sb(1),D.Cc("ifMode","default"),D.Sb(1),D.Cc("ifMode","default"),D.Sb(1),D.Cc("ifMode","default")}}function fo(e,t){1&e&&(D.wc(),D.lc(0,"svg",42),D.gc(1,"use",43),D.kc())}function go(e,t){1&e&&(D.lc(0,"div",44),D.lc(1,"div",45),D.gc(2,"div",46),D.gc(3,"div",47),D.gc(4,"div",48),D.kc(),D.kc())}function mo(e,t){1&e&&(D.wc(),D.lc(0,"svg",42),D.gc(1,"use",49),D.kc())}function vo(e,t){1&e&&(D.wc(),D.lc(0,"svg",42),D.gc(1,"use",50),D.kc())}function bo(e,t){if(1&e&&(D.lc(0,"p",19),D.cd(1),D.kc()),2&e){var n=D.xc().ngIf;D.Sb(1),D.dd(n.heading)}}function yo(e,t){if(1&e&&(D.lc(0,"div"),D.lc(1,"label",51),D.cd(2,"LABELS.BETA"),D.kc(),D.ad(3,bo,2,1,"p",52),D.lc(4,"p",53),D.cd(5),D.kc(),D.kc()),2&e){var n=t.ngIf;D.Sb(3),D.Cc("ngIf",n.heading),D.Sb(2),D.dd(n.description)}}var Co=function(e){return{value1:e}},Oo=function(e){return{event:"header.right.axion.call.click",data:e}},xo=function(e,t,n,i){return{crimson:e,secondary:t,yellow:n,"light-yellow":i}};function So(e,t){if(1&e){var n=D.mc();D.lc(0,"button",38,39),D.tc("click",(function(){return D.Oc(n),D.xc(3).actionConference()})),D.yc(2,"async"),D.yc(3,"async"),D.yc(4,"async"),D.yc(5,"async"),D.yc(6,"async"),D.yc(7,"async"),D.ad(8,fo,2,0,"svg",40),D.yc(9,"async"),D.ad(10,go,5,0,"div",41),D.yc(11,"async"),D.ad(12,mo,2,0,"svg",40),D.yc(13,"async"),D.ad(14,vo,2,0,"svg",40),D.yc(15,"async"),D.lc(16,"span",18),D.ad(17,yo,6,2,"div",0),D.yc(18,"async"),D.kc(),D.kc()}if(2&e){var i=D.xc(3);D.Cc("disabled",0===D.zc(2,8,i.appConnectionStatus))("trackAction",D.Hc(32,Oo,D.Hc(30,Co,D.zc(3,10,i.conferenceStatus))))("ngClass",D.Kc(34,xo,"joined"===D.zc(4,12,i.conferenceStatus),"unstarted"===D.zc(5,14,i.conferenceStatus),"connecting"===D.zc(6,16,i.conferenceStatus),"active"===D.zc(7,18,i.conferenceStatus))),D.Sb(8),D.Cc("ngIf","unstarted"===D.zc(9,20,i.conferenceStatus)),D.Sb(2),D.Cc("ngIf","connecting"===D.zc(11,22,i.conferenceStatus)),D.Sb(2),D.Cc("ngIf","active"===D.zc(13,24,i.conferenceStatus)),D.Sb(2),D.Cc("ngIf","joined"===D.zc(15,26,i.conferenceStatus)),D.Sb(3),D.Cc("ngIf",D.zc(18,28,i.conferenceButtonTooltip))}}var ko=function(){return["InterfaceControlState","edit"]};function wo(e,t){1&e&&(D.lc(0,"div",36),D.ad(1,So,19,39,"button",37),D.kc()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,ko)))}function Eo(e,t){if(1&e&&(D.jc(0),D.lc(1,"div",33),D.gc(2,"user-strip",34),D.kc(),D.ad(3,wo,2,2,"div",35),D.yc(4,"async"),D.ic()),2&e){var n=D.xc();D.Sb(2),D.Cc("limitCount",10),D.Sb(1),D.Cc("ngIf",D.zc(4,2,n.appDisabledState))}}function Io(e,t){1&e&&(D.jc(0),D.gc(1,"close-document-button",55),D.ic())}function To(e,t){1&e&&(D.jc(0),D.gc(1,"close-document-button",55),D.ic())}function _o(e,t){1&e&&(D.jc(0),D.gc(1,"interface-change-button",56),D.ic())}var jo=function(){return["ShowAppCloseButton",!0]};function Po(e,t){1&e&&(D.lc(0,"div",54),D.gc(1,"header-action-buttons",55),D.ad(2,Io,2,0,"ng-container",13),D.ad(3,To,2,0,"ng-container",30),D.ad(4,_o,2,0,"ng-container",30),D.kc()),2&e&&(D.Sb(2),D.Cc("ifMode","plugin"),D.Sb(1),D.Cc("ifState",D.Gc(3,jo)),D.Sb(1),D.Cc("ifState",D.Gc(4,uo)))}var Ao=function(){function e(e,t,n,i,r,a,o,s,c,u){var l=this;this.state=e,this.route=t,this.dataStore=n,this.commandService=i,this.titleService=r,this.ll=a,this.translate=o,this.conference=s,this.planPermManager=c,this.documentStatusSvc=u,this.showPaymentFailedMessage=!1,this.diagramNameClicked=!1,this.showToolTipDelay=3e3,this.hideToolTipDelay=3e3,this.subs=[],this.diagram=this.state.changes("CurrentDiagram").pipe(Object(P.a)((function(e){return l.dataStore.findOne(qi.a,{id:e}).pipe(Object(Vi.a)())}))),this.subs.push(this.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramName().pipe(Object(A.a)((function(e){var t;t=e&&e.length>0?e+" - Creately":"Creately",l.titleService.setTitle(t)})))}))).subscribe()),this.subs.push(this.ll.forCurrentObserver(!1).pipe(Object(K.a)(1),Object(P.a)((function(e){return e.getDiagramName().pipe(Object(P.a)((function(e){return"Untitled Workspace"===e?l.showDiagramNameTooltip():(l.hideDiagramNameTooltip(),li.a)})))}))).subscribe()),this.documentStatus=new R.a(this.documentStatusSvc.getDocumentStatus("none")),this.listenToAppStatusState()}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(P.a)((function(e){return""===e||"start"===e?Object(L.a)(!1):Object(L.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appStatusIndicatorInfo",{get:function(){var e=this;return this.state.changes(J.c).pipe(Object(Lt.a)((function(t){return t===J.c.OFFLINE?{icon:"offline",tooltip:{heading:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.DESCRIPTION")}}:{icon:"online",tooltip:{heading:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.DESCRIPTION")}}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conferenceButtonTooltip",{get:function(){var e=this;return this.conference.currentConference.pipe(Object(Lt.a)((function(t){return t?"connecting"===t.status?{description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_CONNECTING")}:"active"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.JOIN_CALL.HEADING"),description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.JOIN_CALL.DESC")}:"joined"===t.status?{description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.END_CALL")}:"full"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_FULL.HEADING"),description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_FULL.DESC")}:{description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.START_CALL")}:{description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.START_CALL")}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conferenceStatus",{get:function(){return this.conference.currentConference.pipe(Object(Lt.a)((function(e){return e&&"disconnected"!==e.status?e.status:"unstarted"})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(J.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableCalls",{get:function(){return!this.state.get("PluginApp")&&"default"===_.m.get("APP_MODE")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.conference.currentConference.pipe(Object(Pn.a)((function(e){return e&&"active"===e.status})),Object(A.a)((function(){e.callButtonTooltip.show()})),Object(An.a)(this.hideToolTipDelay),Object(A.a)((function(){e.callButtonTooltip.hide()}))).subscribe()),this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(Dn.a)(),Object(P.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramModel()})),Object(Pn.a)((function(e){return null!==e})),Object(Lt.a)((function(t){return e.documentStatusSvc.getDocumentStatus(t.status)})))}))).subscribe((function(t){e.documentStatus.next(t)})))},e.prototype.appStatusIconMouseState=function(e){"mouseenter"===e.type?this.showAppStatusTTOnMouse=!0:this.showAppStatusTTOnMouse=!1},e.prototype.renameDiagram=function(e){_.Lb.track("header.left.diagramName.change"),this.commandService.dispatch(st.a.renameDiagram,this.state.get("CurrentDiagram"),{name:e})},e.prototype.actionConference=function(){if(this.conference.currentConference.value&&["joined","connecting","error"].indexOf(this.conference.currentConference.value.status)>-1)this.conference.stopConference();else if(!this.conference.currentConference.value||"full"!==this.conference.currentConference.value.status){if(!this.planPermManager.check([I.r.CREATELY_VIDEO_CONFERENCE]))throw new Rn.l("Joining video conference permission is denied",Ji.a[I.r.CREATELY_VIDEO_CONFERENCE]);this.conference.startConference()}},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.selectDiagramName=function(e){if(!this.diagramNameClicked){window.getSelection().removeAllRanges();var t=document.createRange();t.selectNodeContents(e.target),window.getSelection().addRange(t),e.target.focus()}this.diagramNameClicked=!this.diagramNameClicked},e.prototype.getDiagramProjectName=function(e){if(!e||!e.project)return"";if(e.project.id===ve.D.HOME){var t=e.owner.id===this.state.get("CurrentUser")?"LABELS.HOME":"LABELS.SHARED_HOME";return this.translate.instant(t)}return e.project.name},e.prototype.showDiagramNameTooltip=function(){var e=this;return Object(L.a)({}).pipe(Object(An.a)(this.showToolTipDelay),Object(Pn.a)((function(t){return!!e.diagramNameToolTip})),Object(A.a)((function(){return e.diagramNameToolTip.show()})),Object(An.a)(this.hideToolTipDelay),Object(Pn.a)((function(t){return!!e.diagramNameToolTip})),Object(A.a)((function(){return e.diagramNameToolTip.hide()})))},e.prototype.hideDiagramNameTooltip=function(){this.diagramNameToolTip&&this.diagramNameToolTip.hide()},e.prototype.listenToAppStatusState=function(){var e=this;this.subs.push(this.state.changes("AppStatusIndicatorState").pipe(Object(Pn.a)((function(e){return e&&e.open})),Object(Gi.a)(this.hideToolTipDelay),Object(A.a)((function(){return e.diagramAppStatusToolTip.show()})),Object(An.a)(this.hideToolTipDelay),Object(A.a)((function(){e.showAppStatusTTOnMouse||e.diagramAppStatusToolTip.hide(),e.state.set("AppStatusIndicatorState",{open:!1})}))).subscribe())},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(Oe.a),D.fc(Un.b),D.fc(_.B),D.fc(Z.c),D.fc(M.a),D.fc(Q.e),D.fc(Xi),D.fc(Rn.o),D.fc(Ki.a))},e.\u0275cmp=D.Zb({type:e,selectors:[["header-layout"]],viewQuery:function(e,t){var n;(1&e&&(D.hd(Ja,!0,E.u),D.hd(Za,!0,E.u),D.hd(Qa,!0,E.u)),2&e)&&(D.Lc(n=D.uc())&&(t.diagramNameToolTip=n.first),D.Lc(n=D.uc())&&(t.callButtonTooltip=n.first),D.Lc(n=D.uc())&&(t.diagramAppStatusToolTip=n.first))},inputs:{showPaymentFailedMessage:"showPaymentFailedMessage"},features:[D.Rb([E.u,E.f])],decls:8,vars:8,consts:[[4,"ngIf"],[1,"header","align-items-center","white","fx-pointer-events-auto"],[1,"header-titles-container","col"],["class","header-right-btns",4,"ngIf"],[1,"fx-center-vertical"],["class","status-badge",4,"ngIf"],["tooltip","","placement","bottom",1,"document-title-label"],[3,"trackAction","value","readonly","changedText","click","focusout"],["translate","",1,"tooltip-content"],["tooltip","","openOnHover","false","placement","bottom"],["diagramNameToolTip",""],[1,"header-secondary-title"],["tooltip","","placement","bottom","class","header-drive-icon",4,"ngIf"],[4,"ifMode"],[1,"status-badge"],[3,"badgeText","bgColor","textColor"],["tooltip","","placement","bottom",1,"header-drive-icon"],["src","./assets/images/vendor-logos/gdrive.svg","width","15"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"],["tooltip","","placement","bottom",3,"mouseenter","mouseleave"],["diagramAppStatusToolTip",""],[1,"tooltip-header","nu-text-bold"],[1,"tooltip-body"],["class","header-app-status-indicator nu-icon",4,"ngIf"],[1,"header-app-status-indicator","nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-status-offline"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-status-online"],[1,"header-prj-title","grey","fx-ellipsis","nu-text-small"],[4,"ifState"],[1,"header-divider","xmedium-grey","nu-text-small"],["tooltip","","translate","","placement","bottom",1,"orange","nu-text-small","fx-no-selection"],[1,"header-collabs"],[3,"limitCount"],["class","header-plugins",4,"ngIf"],[1,"header-plugins"],["class","nu-btn-small header-call-btn fx-center-all","placement","bottom","tooltip","",3,"disabled","trackAction","ngClass","click",4,"ifState"],["placement","bottom","tooltip","",1,"nu-btn-small","header-call-btn","fx-center-all",3,"disabled","trackAction","ngClass","click"],["callButtonTooltip",""],["class","nu-icon",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-start-call"],[1,"spinner-container"],["id","spinner",1,"spinner","small"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-call-started"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-end-call"],["translate","",1,"callbutton-tooltip-beta","nu-beta-tag","fx-margin-bottom-5","fx-margin-top-5"],["class","tooltip-header nu-text-bold","translate","",4,"ngIf"],["translate","",1,"call-button-tooltip","tooltip-body"],[1,"header-right-btns"],[1,"fx-left"],[1,"fx-right"]],template:function(e,t){1&e&&(D.ad(0,$a,1,0,"payment-failed-message",0),D.lc(1,"div",1),D.lc(2,"div",2),D.ad(3,ho,18,13,"ng-container",0),D.yc(4,"async"),D.kc(),D.ad(5,Eo,5,4,"ng-container",0),D.ad(6,Po,5,5,"div",3),D.yc(7,"async"),D.kc()),2&e&&(D.Cc("ngIf",t.showPaymentFailedMessage),D.Sb(3),D.Cc("ngIf",D.zc(4,4,t.diagram)),D.Sb(2),D.Cc("ngIf",t.enableCalls),D.Sb(1),D.Cc("ngIf",D.zc(7,6,t.appDisabledState)))},directives:[F.t,$i,Te.a,er.a,Zi.a,Q.a,tr.a,nr.a,Kn.a,lr,F.q,Na,Va,Ka],pipes:[F.b],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.header[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3e7;height:50px;display:flex}.document-title-label[_ngcontent-%COMP%]{width:270px}.header-titles-container[_ngcontent-%COMP%]{overflow:hidden}.header-titles-container[_ngcontent-%COMP%]  .editable-label-container{height:22px}.header-titles-container[_ngcontent-%COMP%]  .editable-label{font-size:16px}.header-right-btns[_ngcontent-%COMP%]{height:50px}.header-right-btns[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:inherit}.header-collabs[_ngcontent-%COMP%]{margin-right:10px}.header-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:2px}.header-bulb[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#04263d}.header-divider[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.header-secondary-title[_ngcontent-%COMP%]{padding-left:1px}.header-app-status-indicator[_ngcontent-%COMP%]{height:11px;margin-left:-6px}.header-drive-icon[_ngcontent-%COMP%]{margin-right:5px}.header-call-btn[_ngcontent-%COMP%]{border-radius:100%;width:30px;height:30px;padding:0}.spinner-container[_ngcontent-%COMP%]{margin-top:-5px}.call-button-tooltip[_ngcontent-%COMP%]{min-width:90px}.status-badge[_ngcontent-%COMP%]{margin-right:10px}"],changeDetection:0}),e}(),Mo=n("09KV");function Do(e,t){1&e&&(D.lc(0,"span"),D.cd(1),D.yc(2,"translate"),D.kc()),2&e&&(D.Sb(1),D.ed(" ",D.zc(2,1,"HISTORY_PREVIEW_MESSAGES.HEADER_MSG_LATEST")," "))}function Ro(e,t){1&e&&(D.cd(0),D.yc(1,"translate")),2&e&&D.ed(" ",D.zc(1,1,"HISTORY_PREVIEW_MESSAGES.HEADER_MSG_OLDER")," ")}var Lo=function(){function e(e){this.state=e,this.latestVersion=this.state.changes("CurrentSnapshot").pipe(Object(Lt.a)((function(e){return"__CURRENT__"===e})))}return e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb))},e.\u0275cmp=D.Zb({type:e,selectors:[["history-preview-message"]],decls:10,vars:4,consts:[[1,"history-preview-message-container","primary"],["data-testid","signup-banner",1,"history-preview-message-inner","fx-center-vertical"],[1,"history-preview-message-icon"],[1,"nu-icon","nu-icon-small","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],[1,"history-preview-message-text"],[4,"ngIf","ngIfElse"],["elseMessage",""]],template:function(e,t){if(1&e&&(D.lc(0,"div",0),D.lc(1,"div",1),D.lc(2,"div",2),D.wc(),D.lc(3,"svg",3),D.gc(4,"use",4),D.kc(),D.kc(),D.vc(),D.lc(5,"div",5),D.ad(6,Do,3,3,"span",6),D.yc(7,"async"),D.ad(8,Ro,2,3,"ng-template",null,7,D.bd),D.kc(),D.kc(),D.kc()),2&e){var n=D.Mc(9);D.Sb(6),D.Cc("ngIf",D.zc(7,2,t.latestVersion))("ngIfElse",n)}},directives:[F.t],pipes:[F.b,Q.d],styles:[".history-preview-message-container[_ngcontent-%COMP%]{color:#fff;height:30px;top:0;width:100%;z-index:1}.history-preview-message-inner[_ngcontent-%COMP%]{height:100%}.history-preview-message-icon[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.history-preview-message-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:4px}"],changeDetection:0}),e}(),Fo=n("DL1I");function No(e,t){1&e&&(D.wc(),D.lc(0,"svg",9),D.gc(1,"use",10),D.kc())}function Bo(e,t){if(1&e){var n=D.mc();D.lc(0,"li",6),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc(2).onPenTypeChange(e)})),D.ad(1,No,2,0,"svg",7),D.wc(),D.lc(2,"svg",8),D.gc(3,"use"),D.kc(),D.kc()}if(2&e){var i=t.$implicit,r=D.xc(2);D.Sb(1),D.Cc("ngIf",i.selected),D.Sb(1),D.Xc("width",80),D.Sb(1),D.Tb("href",r.getIconHref(i),null,"xlink")}}function Uo(e,t){if(1&e&&(D.lc(0,"div"),D.lc(1,"ul",4),D.ad(2,Bo,4,4,"li",5),D.kc(),D.kc()),2&e){var n=t.ngIf;D.Sb(2),D.Cc("ngForOf",n)}}function zo(e,t){if(1&e){var n=D.mc();D.lc(0,"toolbar-shape-style-dropdown-item",13),D.tc("changed",(function(e){return D.Oc(n),D.xc(2).onColorChange(e)})),D.kc()}if(2&e){var i=t.$implicit;D.Cc("item",i)("isSelected",i.selected)}}function Vo(e,t){if(1&e&&(D.lc(0,"div",11),D.lc(1,"ul",4),D.ad(2,zo,1,2,"toolbar-shape-style-dropdown-item",12),D.kc(),D.kc()),2&e){var n=t.ngIf;D.Sb(2),D.Cc("ngForOf",n)}}var Go=function(){function e(e){this.state=e,this.colors=new R.a(null),this.penTypes=new R.a(null),this.prepareDropdown()}return e.prototype.close=function(){this.state.set("MouseControlState",Xn.b.Normal)},e.prototype.onKeydown=function(e){"Escape"===e.key&&this.close()},e.prototype.onPenTypeChange=function(e){_.Lb.track("toolbar.freehand.lineType.change",{value1Type:"lineType",value1:e.id});var t=this.getPenTypes(),n=t.findIndex((function(t){return t.id===e.id}));t[n].selected=!0;var i=this.state.get("FreeHandLastUsedItem");this.state.set("FreeHandLastUsedItem",{state:i.state,styles:Object(w.a)(Object(w.a)({},i.styles),e.styles)}),this.penTypes.next(t)},e.prototype.onColorChange=function(e){var t=this.getColors(),n=t.findIndex((function(t){return t.id===e}));t[n].selected=!0;var i=this.state.get("FreeHandLastUsedItem"),r=t[n];_.Lb.track("toolbar.freehand.color.change",{value1Type:"colorName",value1:e,value2Type:"colorCode",value2:r.fillColor}),this.state.set("FreeHandLastUsedItem",{state:i.state,styles:Object(w.a)(Object(w.a)({},i.styles),{stroke:r.fillColor})}),this.colors.next(t)},e.prototype.getIconHref=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e.itemIcon.value},e.prototype.prepareDropdown=function(){var e=this.state.get("FreeHandLastUsedItem").styles,t=this.getPenTypes();t.forEach((function(t){Object.keys(t.styles).every((function(n){return t.styles[n]===e[n]}))&&(t.selected=!0)}));var n=this.getColors();n.forEach((function(t){t.fillColor===e.stroke&&(t.selected=!0)})),this.colors.next(n),this.penTypes.next(t)},e.prototype.getPenTypes=function(){return[{id:"pencil",itemIcon:{type:"svg",value:"pencil-line"},tooltip:"Pencil",styles:{"stroke-width":2,"stroke-dasharray":"0, 0"}},{id:"pen",itemIcon:{type:"svg",value:"pen-line"},value:"connectors.bundle.js#ConnectorStraight",tooltip:"Pen",styles:{"stroke-width":4,"stroke-dasharray":"0, 0"}},{id:"pencil-dotted",itemIcon:{type:"svg",value:"pencil-dotted"},tooltip:"Pencil Dotted Line",styles:{"stroke-width":2,"stroke-dasharray":"5, 5"}},{id:"pen-dotted",itemIcon:{type:"svg",value:"pen-dotted"},tooltip:"Pen Dotted Line",styles:{"stroke-width":4,"stroke-dasharray":"10, 5"}}]},e.prototype.getColors=function(){return[Object(w.a)({id:"white"},new Fo.a(2,"#CACECC",[0,0],1,"#FFFFFF",I.i.Solid,void 0,1,"#FFFFFF")),Object(w.a)({id:"grey"},new Fo.a(2,"#FFFFFF",[0,0],1,"#8F8F8F",I.i.Solid,void 0,1,"#8F8F8F")),Object(w.a)({id:"matterhorn"},new Fo.a(2,"#FFFFFF",[0,0],1,"#4E4C4C",I.i.Solid,void 0,1,"#4E4C4C")),Object(w.a)({id:"black"},new Fo.a(2,"#FFFFFF",[0,0],1,"#000000",I.i.Solid,void 0,1,"#000000")),Object(w.a)({id:"burnt-crimson"},new Fo.a(2,"#FFFFFF",[0,0],1,"#612425",I.i.Solid,void 0,1,"#612425")),Object(w.a)({id:"sea-buckthorn"},new Fo.a(2,"#FFFFFF",[0,0],1,"#EB9052",I.i.Solid,void 0,1,"#EB9052")),Object(w.a)({id:"matisse"},new Fo.a(2,"#FFFFFF",[0,0],1,"#416178",I.i.Solid,void 0,1,"#416178")),Object(w.a)({id:"killarney"},new Fo.a(2,"#FFFFFF",[0,0],1,"#527D50",I.i.Solid,void 0,1,"#527D50")),Object(w.a)({id:"night-shade"},new Fo.a(2,"#FFFFFF",[0,0],1,"#A03349",I.i.Solid,void 0,1,"#A03349")),Object(w.a)({id:"cream-can"},new Fo.a(2,"#FFFFFF",[0,0],1,"#EFBB4D",I.i.Solid,void 0,1,"#EFBB4D")),Object(w.a)({id:"seagull"},new Fo.a(2,"#FFFFFF",[0,0],1,"#6AAFCC",I.i.Solid,void 0,1,"#6AAFCC")),Object(w.a)({id:"green-smoke"},new Fo.a(2,"#FFFFFF",[0,0],1,"#9EAB5D",I.i.Solid,void 0,1,"#9EAB5D")),Object(w.a)({id:"alizarin"},new Fo.a(2,"#FFFFFF",[0,0],1,"#D82837",I.i.Solid,void 0,1,"#D82837")),Object(w.a)({id:"orchid"},new Fo.a(2,"#FFFFFF",[0,0],1,"#AD67C3",I.i.Solid,void 0,1,"#AD67C3")),Object(w.a)({id:"cornflower-blue"},new Fo.a(2,"#FFFFFF",[0,0],1,"#6D88F0",I.i.Solid,void 0,1,"#6D88F0"))]},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb))},e.\u0275cmp=D.Zb({type:e,selectors:[["free-hand-toolbar"]],decls:6,vars:6,consts:[[1,"fx-pointer-events-auto","fht-dd-container"],[4,"ngIf"],[1,"separator"],["class","fht-dd-styles-container",4,"ngIf"],[1,"abs-dropdown-items-container"],["tabindex","-1","class","abs-dropdown-item fx-center-all",3,"click",4,"ngFor","ngForOf"],["tabindex","-1",1,"abs-dropdown-item","fx-center-all",3,"click"],["class","nu-icon dropdown-item-select-tick",4,"ngIf"],[1,"nu-icon","light-nv-blue"],[1,"nu-icon","dropdown-item-select-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[1,"fht-dd-styles-container"],[3,"item","isSelected","changed",4,"ngFor","ngForOf"],[3,"item","isSelected","changed"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Uo,3,1,"div",1),D.yc(2,"async"),D.gc(3,"div",2),D.ad(4,Vo,3,1,"div",3),D.yc(5,"async"),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",D.zc(2,2,t.penTypes)),D.Sb(3),D.Cc("ngIf",D.zc(5,4,t.colors)))},directives:[F.t,F.s,En.a],pipes:[F.b],styles:[".fht-dd-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-left:10px;margin-top:10px;border:1px solid #d3d3e7;position:absolute;z-index:2;display:inline-block}.fht-dd-container[_ngcontent-%COMP%]  .abs-dropdown-container{float:right}.fht-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:100;text-align:center}.fht-dd-container[_ngcontent-%COMP%]  .ps-content{padding:0}.fht-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:100px}.fht-dd-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.abs-dropdown-item[_ngcontent-%COMP%]{height:30px}.fht-dd-styles-container[_ngcontent-%COMP%]{display:block;width:130px;align-items:normal;flex-wrap:wrap;padding:10px}.fht-dd-styles-container[_ngcontent-%COMP%]  .tss-dd-item-container{display:inline-block}.separator[_ngcontent-%COMP%]{height:1px;width:100%;background:#e7e6e6;margin:3px 0 7px}"],changeDetection:0}),e}(),Ho=n("s9xl");function Wo(e,t){if(1&e){var n=D.mc();D.lc(0,"div",2),D.wc(),D.lc(1,"svg",3),D.gc(2,"use",4),D.kc(),D.vc(),D.lc(3,"span",5),D.lc(4,"b",5),D.cd(5,"STORAGE_EXCEEDED.STORAGE_LIMIT "),D.kc(),D.cd(6,"STORAGE_EXCEEDED.UPGRATE_PLAN"),D.kc(),D.lc(7,"button",6),D.tc("click",(function(){return D.Oc(n),D.xc().showPlanPage()})),D.cd(8,"STORAGE_EXCEEDED.CLICK_HERE"),D.kc(),D.kc()}}function Yo(e,t){if(1&e){var n=D.mc();D.lc(0,"div",2),D.wc(),D.lc(1,"svg",3),D.gc(2,"use",4),D.kc(),D.vc(),D.lc(3,"span",5),D.lc(4,"b",5),D.cd(5,"STORAGE_EXCEEDED.ACCOUNT_PAUSED "),D.kc(),D.cd(6,"STORAGE_EXCEEDED.UPGRATE"),D.kc(),D.lc(7,"button",6),D.tc("click",(function(){return D.Oc(n),D.xc().showPlanPage()})),D.cd(8,"STORAGE_EXCEEDED.CLICK_HERE"),D.kc(),D.kc()}}var Xo=function(){function e(e,t,n){this.state=e,this.translateService=t,this.modalController=n,this.isFreePause=!1}return e.prototype.ngOnInit=function(){this.isFreePause?_.Lb.track("conversion.banner.upgrade.load",{value1:"LP After Paused",value2:"Your free usage limit of Creately has exceeded and your account is paused."}):_.Lb.track("conversion.banner.upgrade.load",{value1:"LP 3-Day Warning",value2:"Your storage limit has exceeded."})},e.prototype.showPlanPage=function(){this.isFreePause?(this.modalController.show(Ho.a),_.Lb.track("conversion.banner.upgrade.click",{value1:"LP After Paused"})):(this.state.set("ShowPlanWindow",!0),_.Lb.track("conversion.banner.upgrade.click",{value1:"LP 3-Day Warning"}))},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(Q.e),D.fc(_.gb))},e.\u0275cmp=D.Zb({type:e,selectors:[["storage-exceeded-banner"]],inputs:{isFreePause:"isFreePause"},decls:3,vars:2,consts:[[1,"email-verification-banner-container","fx-pointer-events-auto"],["class","email-verification-banner warning",4,"ngIf"],[1,"email-verification-banner","warning"],[1,"nu-icon","nu-ic-small","fx-margin-right-5"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],["translate",""],["translate","",1,"nu-btn-med",3,"click"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Wo,9,0,"div",1),D.ad(2,Yo,9,0,"div",1),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",!t.isFreePause),D.Sb(1),D.Cc("ngIf",t.isFreePause))},directives:[F.t,Q.a],styles:[".warning[_ngcontent-%COMP%]{background-color:#fffaef;border:1px solid #e8dcc2}.warning[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#dd9c0b}.email-sent[_ngcontent-%COMP%]{background-color:#f2f7ff;border:1px solid #bfd0f0}.email-sent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#588ff5}.email-verification-banner[_ngcontent-%COMP%]{border-radius:2px;padding:10px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin:0 0 0 8px}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.email-verification-banner-container[_ngcontent-%COMP%]{position:absolute;top:20px;width:100%;display:flex;align-items:center;justify-content:center;z-index:3}"],changeDetection:0}),e}();function qo(e,t){if(1&e){var n=D.mc();D.lc(0,"div",3),D.wc(),D.lc(1,"svg",4),D.gc(2,"use",5),D.kc(),D.vc(),D.lc(3,"span",6),D.lc(4,"b",6),D.cd(5,"EMAIL_VERIFICATION_BANNER.TITLE"),D.kc(),D.cd(6," EMAIL_VERIFICATION_BANNER.NOT_VERIFIED"),D.kc(),D.lc(7,"button",7),D.tc("click",(function(){return D.Oc(n),D.xc().resendEmail()})),D.cd(8,"EMAIL_VERIFICATION_BANNER.RESEND_VERIFICATION"),D.kc(),D.kc()}}function Ko(e,t){if(1&e&&(D.lc(0,"div",8),D.wc(),D.lc(1,"svg",4),D.gc(2,"use",9),D.kc(),D.vc(),D.lc(3,"span",6),D.lc(4,"b",10),D.cd(5,"EMAIL_VERIFICATION_BANNER.TITLE"),D.kc(),D.gc(6,"span",11),D.yc(7,"async"),D.kc(),D.kc()),2&e){var n=D.xc();D.Sb(6),D.Cc("innerHTML",D.zc(7,1,n.emailSentLabel),D.Pc)}}var Jo=function(){function e(e,t){this.translateService=e,this.user=t,this.emailResent=new R.a(!1),this.emailSentLabel=this.getEmailMessage(),this.checkEmailVerificationSent()}return e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(K.a)(1))},e.prototype.resendEmail=function(){var e=this;window.gravity.api.requestConfirmation().then((function(){e.emailResent.next(!0),localStorage.verificationEmailSent=(new Date).getTime().toString()})).catch((function(){}))},e.prototype.checkEmailVerificationSent=function(){this.isNewDay()?this.emailResent.next(!1):this.emailResent.next(!0)},e.prototype.getEmailMessage=function(){var e=this;return this.getUserEmail().pipe(Object(P.a)((function(t){return e.translate("EMAIL_VERIFICATION_BANNER.SENT_VERIFICATION",{email:t})})))},e.prototype.getUserEmail=function(){return this.user.getUserData().pipe(Object(Pn.a)((function(e){return!!e})),Object(K.a)(1),Object(Lt.a)((function(e){return e.email})))},e.prototype.isNewDay=function(){var e=new Date(parseFloat(localStorage.verificationEmailSent)),t=new Date;return!_.J.isSameDay(e,t)},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e),D.fc(Rn.x))},e.\u0275cmp=D.Zb({type:e,selectors:[["email-verification-banner"]],inputs:{emailResent:"emailResent"},decls:5,vars:6,consts:[[1,"email-verification-banner-container","fx-pointer-events-auto"],["class","email-verification-banner warning","data-testid","email-validation-banner",4,"ngIf"],["class","email-verification-banner email-sent","data-testid","email-validation-banner",4,"ngIf"],["data-testid","email-validation-banner",1,"email-verification-banner","warning"],[1,"nu-icon","nu-ic-small","fx-margin-right-5"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],["translate",""],["translate","",1,"nu-btn-med",3,"click"],["data-testid","email-validation-banner",1,"email-verification-banner","email-sent"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],["translate","",1,"fx-margin-right-5"],[3,"innerHTML"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,qo,9,0,"div",1),D.yc(2,"async"),D.ad(3,Ko,8,3,"div",2),D.yc(4,"async"),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",!D.zc(2,2,t.emailResent)),D.Sb(2),D.Cc("ngIf",D.zc(4,4,t.emailResent)))},directives:[F.t,Q.a],pipes:[F.b],styles:[".warning[_ngcontent-%COMP%]{background-color:#fffaef;border:1px solid #e8dcc2}.warning[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#dd9c0b}.email-sent[_ngcontent-%COMP%]{background-color:#f2f7ff;border:1px solid #bfd0f0}.email-sent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#588ff5}.email-verification-banner[_ngcontent-%COMP%]{border-radius:2px;padding:10px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin:0 0 0 20px}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.email-verification-banner-container[_ngcontent-%COMP%]{position:absolute;top:20px;width:100%;display:flex;align-items:center;justify-content:center;z-index:2}"],changeDetection:0}),e}(),Zo=function(){function e(e){this.translateService=e}return e.prototype.updateStatusAndReload=function(){localStorage.appReloadedForOffline=!0,this.appReload()},e.prototype.appReload=function(){window.location.reload()},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["app-offline-reload-banner"]],decls:8,vars:0,consts:[[1,"app-offline-reload-banner-container","fx-pointer-events-auto"],["data-testid","app-offline-reload-banner",1,"app-offline-reload-banner","warning"],[1,"nu-icon","nu-ic-small","fx-margin-right-5","fx-margin-top-12"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning-fill"],["translate",""],["translate","",1,"app-offline-reload-banner-button",3,"click"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"div",1),D.wc(),D.lc(2,"svg",2),D.gc(3,"use",3),D.kc(),D.vc(),D.lc(4,"span",4),D.cd(5,"APP_OFFLINE_RELOAD_BANNER.TITLE"),D.kc(),D.lc(6,"button",5),D.tc("click",(function(){return t.updateStatusAndReload()})),D.cd(7,"APP_OFFLINE_RELOAD_BANNER.BUTTON"),D.kc(),D.kc(),D.kc())},directives:[Q.a],styles:[".warning[_ngcontent-%COMP%]{background-color:#fcf0d9;border:1px solid #f9d686}.warning[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fab638}.app-offline-reload-banner[_ngcontent-%COMP%]{border-radius:4px;padding:10px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:36px}.app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin:0 0 0 60px}.app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.app-offline-reload-banner-container[_ngcontent-%COMP%]{position:absolute;top:15px;width:100%;display:flex;align-items:center;justify-content:center;z-index:2}.app-offline-reload-banner-button[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:14px;line-height:16px}.app-offline-reload-banner-button[_ngcontent-%COMP%]:hover{cursor:pointer}"],changeDetection:0}),e}(),Qo=["container"],$o=["bottomPanelContainer"],es=function(){function e(e,t,n,i){this.pluginReg=e,this.state=t,this.conference=n,this.browserWindow=i,this.videoTileSizeSmallWidth=170,this.videoTileSizeSmallHeight=100,this.videoTileSizeLargeHeight=200,this.resizeThrottle=1e3,this.subs=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.manifest._url},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this,t=this.pluginReg.burrowMainIframe(this.manifest._url);this.container.nativeElement.appendChild(t);var n=Object(Be.a)(this.listenToViewportChanges(),this.conference.userCount.asObservable()).pipe(Object(A.a)((function(){e.updateVideoStripWidth()}))).subscribe();this.subs.push(n)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.updateVideoStripWidth=function(){var e=this.conference.userCount.value,t=this.bottomPanelContainer.nativeElement.offsetWidth,n=this.container.nativeElement.getElementsByTagName("iframe"),i=e*this.videoTileSizeSmallWidth;n[0].style.width=i>t?t+"px":i+"px"},e.prototype.updateVideoStripHeight=function(){},e.prototype.listenToViewportChanges=function(){return Object(Be.a)(this.state.changes("LeftSidebarState").pipe(Object(Pn.a)((function(e){return"opened"===e||"closed"===e}))),this.state.changes("RightSidebarPanel"),Object(Ee.a)(this.browserWindow,"resize").pipe(Object(ti.a)(this.resizeThrottle)))},e.\u0275fac=function(t){return new(t||e)(D.fc(Hi.a),D.fc(_.Jb),D.fc(Xi),D.fc("BrowserWindow"))},e.\u0275cmp=D.Zb({type:e,selectors:[["bottom-panel"]],viewQuery:function(e,t){var n;(1&e&&(D.Vc(Qo,!0),D.hd($o,!0)),2&e)&&(D.Lc(n=D.uc())&&(t.container=n.first),D.Lc(n=D.uc())&&(t.bottomPanelContainer=n.first))},inputs:{manifest:"manifest"},decls:4,vars:0,consts:[[1,"bottom-panel-container","fx-pointer-events-auto"],["bottomPanelContainer",""],[1,"plugin-iframe-container"],["container",""]],template:function(e,t){1&e&&(D.lc(0,"div",0,1),D.gc(2,"div",2,3),D.kc())},styles:[".bottom-panel-container[_ngcontent-%COMP%]{height:90px;width:100%}.plugin-iframe-container[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e}(),ts=n("1OUs"),ns=function(){return["MouseControlState","normal","active"]},is=function(){return{event:"footer.select.click"}},rs=function(){return["MouseControlState","pan","active"]},as=function(){return{event:"footer.pan.click"}};function os(e,t){if(1&e){var n=D.mc();D.lc(0,"div",2),D.lc(1,"button",19),D.tc("click",(function(){return D.Oc(n),D.xc().setMouseControlState("normal")})),D.wc(),D.lc(2,"svg",20),D.gc(3,"use",21),D.kc(),D.vc(),D.lc(4,"span",22),D.cd(5,"TOOLTIPS.NORMAL"),D.kc(),D.kc(),D.lc(6,"button",23),D.tc("click",(function(){return D.Oc(n),D.xc().setMouseControlState("pan")})),D.wc(),D.lc(7,"svg",24),D.gc(8,"use",25),D.kc(),D.vc(),D.lc(9,"div",6),D.lc(10,"span",7),D.cd(11,"TOOLTIPS.PAN"),D.kc(),D.lc(12,"span",8),D.cd(13,"Space + Drag"),D.kc(),D.kc(),D.kc(),D.kc()}2&e&&(D.Sb(1),D.Cc("ifStateClass",D.Gc(4,ns))("trackAction",D.Gc(5,is)),D.Sb(5),D.Cc("ifStateClass",D.Gc(6,rs))("trackAction",D.Gc(7,as)))}function ss(e,t){if(1&e){var n=D.mc();D.lc(0,"simple-dropdown-item",26),D.lc(1,"a",27),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc().updateZoomLevel(e.level)})),D.cd(2),D.kc(),D.kc()}if(2&e){var i=t.$implicit;D.Cc("item",i),D.Sb(2),D.ed("",i.label,"%")}}function cs(e,t){if(1&e){var n=D.mc();D.lc(0,"div",2),D.lc(1,"div",28),D.lc(2,"button",29),D.tc("click",(function(){return D.Oc(n),D.xc().undoRedo("undo")})),D.yc(3,"async"),D.wc(),D.lc(4,"svg",30),D.gc(5,"use",31),D.kc(),D.vc(),D.lc(6,"div",6),D.lc(7,"span",7),D.cd(8,"TOOLTIPS.UNDO"),D.kc(),D.lc(9,"span",8),D.cd(10),D.kc(),D.kc(),D.kc(),D.kc(),D.lc(11,"div",28),D.lc(12,"button",32),D.tc("click",(function(){return D.Oc(n),D.xc().undoRedo("redo")})),D.yc(13,"async"),D.wc(),D.lc(14,"svg",30),D.gc(15,"use",33),D.kc(),D.vc(),D.lc(16,"div",6),D.lc(17,"span",7),D.cd(18,"TOOLTIPS.REDO"),D.kc(),D.lc(19,"span",8),D.cd(20),D.kc(),D.kc(),D.kc(),D.kc(),D.kc()}if(2&e){var i=D.xc();D.Sb(2),D.Cc("disabled",!D.zc(3,4,i.sessionHistory.canUndo)),D.Sb(8),D.dd(i.featureList.getFeature("undo").shortcutText),D.Sb(2),D.Cc("disabled",!D.zc(13,6,i.sessionHistory.canRedo)),D.Sb(8),D.dd(i.featureList.getFeature("redo").shortcutText)}}function us(e,t){if(1&e){var n=D.mc();D.lc(0,"div",34),D.lc(1,"button",35),D.tc("mouseover",(function(){return D.Oc(n),D.xc().openShortcutWindow()}))("mouseout",(function(){return D.Oc(n),D.xc().closeShortcutWindow()})),D.wc(),D.lc(2,"svg",16),D.gc(3,"use",36),D.kc(),D.kc(),D.kc()}}var ls=function(){return["InterfaceControlState","edit"]},ps=function(){return{event:"footer.zoom.out.click"}},ds=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}},hs=function(){return{event:"footer.zoom.in.click"}},fs=function(){return["ApplicationIsEmbedded",!1]},gs=function(){function e(e,t,n,i){this.commandService=e,this.state=t,this.sessionHistory=n,this.featureList=i,this.zoomLevels=[{label:"400",level:4},{label:"300",level:3},{label:"200",level:2},{label:"150",level:1.5},{label:"100",level:1},{label:"75",level:.75},{label:"50",level:.5},{label:"25",level:.25}],this.zoomLevelLabel=this.state.changes("DiagramZoomLevel").pipe(Object(Lt.a)((function(e){return Math.floor(100*e)})))}return e.prototype.zoomIn=function(){this.commandService.dispatch(Ln.a.zoomDiagram,this.state.get("CurrentDiagram"),{delta:1.25,toCenter:!0})},e.prototype.zoomOut=function(){this.commandService.dispatch(Ln.a.zoomDiagram,this.state.get("CurrentDiagram"),{delta:.8,toCenter:!0})},e.prototype.updateZoomLevel=function(e){_.Lb.track("footer.zoom.combo.click",{value1Type:"level",value1:""+e}),this.commandService.dispatch(Ln.a.zoomDiagram,this.state.get("CurrentDiagram"),{level:e,toCenter:!0})},e.prototype.openShortcutWindow=function(){this.commandService.dispatch(Qt.showShortcutWindow,{show:!0})},e.prototype.closeShortcutWindow=function(){this.commandService.dispatch(Qt.showShortcutWindow,{show:!1})},e.prototype.undoRedo=function(e){"undo"===e?(_.Lb.track("footer.undo.click"),this.commandService.dispatch(st.a.undoAction)):"redo"===e&&(_.Lb.track("footer.redo.click"),this.commandService.dispatch(st.a.redoAction))},e.prototype.setMouseControlState=function(e){e!==this.state.get("MouseControlState")&&this.state.set("MouseControlState",e)},e.\u0275fac=function(t){return new(t||e)(D.fc(_.B),D.fc(_.Jb),D.fc(en.a),D.fc(Yt.a))},e.\u0275cmp=D.Zb({type:e,selectors:[["diagram-toolbar"]],decls:29,vars:19,consts:[[1,"dt-container","fx-pointer-events-auto"],["class","dt-block",4,"ifState"],[1,"dt-block"],["data-testid","zoom-out-button","tooltip","",1,"dt-zoomout","nu-btn-small","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-substract"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-substract"],[1,"tooltip-content"],["translate","",1,"tooltip-label"],[1,"nu-text-small","tooltip-shortcut"],[1,"dt-dropdown","dt-block-btn"],["data-testid","zoom-percentage","direction","up",3,"settings"],["dropdown",""],["ddbutton","",3,"items"],[1,"dt-dropdown-label"],["dditem","",3,"item",4,"ngFor","ngForOf"],["data-testid","zoom-in-button","tooltip","",1,"dt-zoomin","nu-btn-small","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-plus"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["class","dt-block dt-shortcut-btn",4,"ifState"],["data-testid","select-button","tooltip","",1,"dt-select","nu-btn-small","nu-btn-icon","dt-block-btn",3,"ifStateClass","trackAction","click"],[1,"nu-icon","nu-ic-select"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-select"],["translate","",1,"tooltip-content"],["data-testid","pan-button","tooltip","",1,"dt-move","nu-btn-small","nu-btn-icon","dt-block-btn",3,"ifStateClass","trackAction","click"],[1,"nu-icon","nu-ic-move"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-move"],["dditem","",3,"item"],[1,"dt-dropdown-item",3,"click"],["tooltip","",1,"dt-block-item"],["data-testid","undo-button",1,"dt-select","nu-btn-small","nu-btn-icon","dt-block-btn",3,"disabled","click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-undo"],["data-testid","redo-button","tooltip","",1,"dt-move","nu-btn-small","nu-btn-icon","dt-block-btn",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-redo"],[1,"dt-block","dt-shortcut-btn"],["data-testid","shortcut-button",1,"nu-btn-small","nu-btn-icon","dt-block-btn",3,"mouseover","mouseout"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-keyboard"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,os,14,8,"div",1),D.lc(2,"div",2),D.lc(3,"button",3),D.tc("click",(function(){return t.zoomOut()})),D.wc(),D.lc(4,"svg",4),D.gc(5,"use",5),D.kc(),D.vc(),D.lc(6,"div",6),D.lc(7,"span",7),D.cd(8,"TOOLTIPS.ZOOM_OUT"),D.kc(),D.lc(9,"span",8),D.cd(10),D.kc(),D.kc(),D.kc(),D.lc(11,"div",9),D.lc(12,"abs-dropdown",10,11),D.lc(14,"simple-dropdown-button",12),D.lc(15,"div",13),D.cd(16),D.yc(17,"async"),D.kc(),D.kc(),D.ad(18,ss,3,2,"simple-dropdown-item",14),D.kc(),D.kc(),D.lc(19,"button",15),D.tc("click",(function(){return t.zoomIn()})),D.wc(),D.lc(20,"svg",16),D.gc(21,"use",17),D.kc(),D.vc(),D.lc(22,"div",6),D.lc(23,"span",7),D.cd(24,"TOOLTIPS.ZOOM_IN"),D.kc(),D.lc(25,"span",8),D.cd(26),D.kc(),D.kc(),D.kc(),D.kc(),D.ad(27,cs,21,8,"div",1),D.ad(28,us,4,0,"div",18),D.kc()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(13,ls)),D.Sb(2),D.Cc("trackAction",D.Gc(14,ps)),D.Sb(7),D.dd(t.featureList.getFeature("zoomOut").shortcutText),D.Sb(2),D.Cc("settings",D.Gc(15,ds)),D.Sb(2),D.Cc("items",t.zoomLevels),D.Sb(2),D.ed("",D.zc(17,11,t.zoomLevelLabel),"%"),D.Sb(2),D.Cc("ngForOf",t.zoomLevels),D.Sb(1),D.Cc("trackAction",D.Gc(16,hs)),D.Sb(7),D.dd(t.featureList.getFeature("zoomIn").shortcutText),D.Sb(1),D.Cc("ifState",D.Gc(17,ls)),D.Sb(1),D.Cc("ifState",D.Gc(18,fs)))},directives:[Kn.a,Te.a,Zi.a,Q.a,ha.a,fa.a,F.s,ts.a,ga.a],pipes:[F.b],styles:[".dt-container[_ngcontent-%COMP%]{width:380px;display:flex;position:relative;z-index:2}.dt-block[_ngcontent-%COMP%]{height:32px;border:1px solid #d3d3e7;background-color:#fff;border-radius:4px;margin-left:10px}.dt-dropdown[_ngcontent-%COMP%]  .abs-dropdown-container{float:left}.dt-dropdown-label[_ngcontent-%COMP%]{height:32px;text-align:center;line-height:32px;padding:0 3px;width:70px}.dt-block-btn[_ngcontent-%COMP%]{min-width:25px;height:100%;padding:0 3px;border-radius:0}.dt-block-btn.active[_ngcontent-%COMP%]{border-bottom:2px solid #f6aa00}.dt-block-btn.active[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{color:#04263d}.dt-dropdown-item[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;display:block}.dt-dropdown[_ngcontent-%COMP%]{display:inline-block}.dt-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:90px;text-align:center}.dt-block-item[_ngcontent-%COMP%]{display:inline-block}.dt-shortcut-btn[_ngcontent-%COMP%]{z-index:3}"],changeDetection:0}),e}(),ms=n("+B2w"),vs=["helpwidget"],bs=function(){function e(e,t,n,i){this.modalController=e,this.zendesk=t,this.commandService=n,this.planPermManager=i,this.DEFAULT_SEARCH_TEXT="Creately",this.subs=[],this.helpSearchQuery=new R.a(""),this.searchArticleResult=new R.a([]),this.isFreeOrDemoUser=new R.a(!0),this.isDefaultSearchResult=new R.a(!1)}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.handleHelpSearch().subscribe()),this.subs.push(this.planPermManager.isFreeOrDemoUser().subscribe((function(t){return e.isFreeOrDemoUser.next(t)})))},e.prototype.helpButtonAction=function(e){this.closeHelpWidget(),"contact"===e?(_.Lb.track("helpwidget.buttons.contact.click"),this.zendesk.open()):"search"===e?(_.Lb.track("helpwidget.buttons.zendeskHelpCenter.click"),this.zendesk.helpCenter()):"tour"===e&&(_.Lb.track("helpwidget.buttons.tour.click"),this.startTour())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.onHelpSearchChange=function(){this.isDefaultSearchResult.next(!1),this.searchArticleResult.next([])},e.prototype.closeHelpWidget=function(){var e=this.helpWidget.closeWidget().subscribe();this.subs.push(e)},e.prototype.startTour=function(){this.modalController.show(ms.a)},e.prototype.handleHelpSearch=function(){var e=this;return this.helpSearchQuery.pipe(Object(Pn.a)((function(e){return""!==e})),Object(P.a)((function(t){return e.getHelpSearchResult(t,3)})),Object(A.a)((function(t){return t.length>0&&e.searchArticleResult.next(t),t})),Object(Pn.a)((function(e){return 0===e.length})),Object(P.a)((function(){return e.getHelpSearchResult(e.DEFAULT_SEARCH_TEXT,2)})),Object(A.a)((function(t){e.searchArticleResult.next(t),e.isDefaultSearchResult.next(!0)})))},e.prototype.getHelpSearchResult=function(e,t){return this.commandService.dispatch(Nn.a.helpCenterArticles,{searchQuery:e,numberOfArticle:t}).pipe(Object(Mn.a)(),Object(Lt.a)((function(e){return e&&e.resultData&&e.resultData[0]&&e.resultData[0].results?e.resultData[0].results.map((function(e){return{title:e.title,url:e.html_url}})):[]})))},e.\u0275fac=function(t){return new(t||e)(D.fc(_.gb),D.fc(Rn.B),D.fc(_.B),D.fc(Rn.o))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-box"]],viewQuery:function(e,t){var n;(1&e&&D.Vc(vs,!0),2&e)&&(D.Lc(n=D.uc())&&(t.helpWidget=n.first))},decls:10,vars:15,consts:[[3,"heading"],["helpwidget",""],[3,"submitSearchText","changeHelpSearch"],[3,"searchResult","helpSearchText","isDefaultSearchResult"],[3,"showSupportButton","buttonClicked"]],template:function(e,t){1&e&&(D.lc(0,"help-widget",0,1),D.yc(2,"translate"),D.lc(3,"help-article-search",2),D.tc("submitSearchText",(function(e){return t.helpSearchQuery.next(e)}))("changeHelpSearch",(function(){return t.onHelpSearchChange()})),D.kc(),D.gc(4,"help-search-result",3),D.yc(5,"async"),D.yc(6,"async"),D.yc(7,"async"),D.lc(8,"help-buttons-card",4),D.tc("buttonClicked",(function(e){return t.helpButtonAction(e)})),D.yc(9,"async"),D.kc(),D.kc()),2&e&&(D.Dc("heading",D.zc(2,5,"HELP.HEADING")),D.Sb(4),D.Cc("searchResult",D.zc(5,7,t.searchArticleResult))("helpSearchText",D.zc(6,9,t.helpSearchQuery))("isDefaultSearchResult",D.zc(7,11,t.isDefaultSearchResult)),D.Sb(4),D.Cc("showSupportButton",!D.zc(9,13,t.isFreeOrDemoUser)))},directives:[Ae,Ze,tt,Ye],pipes:[Q.d,F.b],encapsulation:2,changeDetection:0}),e}(),ys=["diagramNameToolTip"];function Cs(e,t){1&e&&D.gc(0,"plan-window")}function Os(e,t){1&e&&D.gc(0,"history-preview-message")}function xs(e,t){1&e&&D.gc(0,"global-search")}function Ss(e,t){1&e&&D.gc(0,"free-hand-toolbar")}function ks(e,t){if(1&e&&(D.gc(0,"storage-exceeded-banner",17),D.yc(1,"async")),2&e){var n=D.xc();D.Cc("isFreePause",D.zc(1,1,n.isFreeUserSuspended))}}function ws(e,t){1&e&&D.gc(0,"email-verification-banner")}function Es(e,t){1&e&&D.gc(0,"app-offline-reload-banner")}function Is(e,t){if(1&e&&(D.jc(0),D.gc(1,"bottom-panel",18),D.ic()),2&e){var n=t.$implicit,i=D.xc();D.Sb(1),D.Xb("fx-hidden",i.selectedBottomPanelId!==n._url),D.Cc("manifest",n)}}function Ts(e,t){1&e&&D.gc(0,"diagram-toolbar")}function _s(e,t){1&e&&D.gc(0,"help-box")}var js=function(){return["ApplicationIsEmbedded",!1]};function Ps(e,t){1&e&&(D.jc(0),D.ad(1,_s,1,0,"help-box",1),D.ic()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(1,js)))}var As=function(){return["ShowPlanWindow",!0]},Ms=function(){return["HistoryPreviewMode",!0]},Ds=function(){function e(e,t,n,i,r,a,o,s,c,u,l,p,d,h,f,g){var m=this;this.state=e,this.errorHandler=t,this.userLocator=n,this.mapper=i,this.viewContainerRef=r,this.menuController=a,this.modalController=o,this.notifierController=s,this.translate=c,this.commandService=u,this.errorReporter=l,this.modelSubManager=p,this.authService=d,this.dataStore=h,this.serviceWorkerRegistry=f,this.ll=g,this.demoFlowDelay=3e3,this.cachingDelay=12e4,this.notificationMessages=new lt.a(this.translate),this.registerCommands(),this.menuController.viewContainerRef=this.viewContainerRef,this.showDemoMessage=new R.a(!1),this.showPaymentFailedMessage=new R.a(!1),this.showFreeUserStorageExceededBanner=new R.a(!1),this.isFreeUserSuspended=new R.a(!1),this.showAppOfflineReloadBanner=new R.a(!1),this.showGlobalSearchWidget=new R.a(!1),this.subs=[],this.blurBackground=new R.a(!1),this.showEmailVerificationBanner=new R.a(!1),this.subs.push(this.listenToModalBlurChanges()),this.setDiagramStates(),this.manifests=this.state.changes("EnabledPlugins").pipe(Object(Lt.a)((function(e){return Object(T.filter)(e,(function(e){return e.panels&&Object(T.some)(e.panels,["position","bottom"])}))})),Object(A.a)((function(e){e.length>0&&(m.selectedBottomPanelId=e[0]._url)})),Object(jn.a)(1))}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(P.a)((function(e){return""===e||"start"===e?Object(L.a)(!1):Object(L.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFreeHandMode",{get:function(){return this.state.changes("MouseControlState").pipe(Object(P.a)((function(e){return e===Xn.b.Pen||e===Xn.b.Highlighter?Object(L.a)(!0):Object(L.a)(!1)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logoutUrl",{get:function(){return _.m.get("COGNITO_LOGOUT_URL")+"?client_id="+_.m.get("COGNITO_CLIENT_ID")+"&logout_uri="+_.m.get("COGNITO_LOGOUT_REDIRECT_URL")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.subs.push(this.handleDemoUser(),this.handleGlobalSearchWidget(),this.showOfflineNotification(),this.showCopyPasteNotification(),this.showOnboarding(),this.handleCanceledSubscriptions(),this.handleTeamUserInvitation(),this.handleAppOfflineReloadNotification(),this.handleFreeUserStorageExceededBanner(),this.handleEmailVerificationBanner(),this.loadGlobalNotifications())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleDemoUserSignIn=function(e){var t=this;window.gravity.client.getCurrentUserPlan().startsWith("free")?(this.modalController.show(Rn.k,{inputs:{page:Rn.j.Plans}}),e&&this.commandService.dispatch(Nn.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe()):e?this.commandService.dispatch(Nn.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe({error:function(e){t.navigateAfterSignIn()},complete:function(){t.navigateAfterSignIn()}}):this.navigateAfterSignIn()},e.prototype.registerCommands=function(){Ln.a.register(this.mapper)},e.prototype.handleDemoUser=function(){var e=this,t=this.state.get("CurrentUser");return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(Pn.a)((function(e){return!!e&&e.status===Rn.A.DEMO})),Object(An.a)(this.demoFlowDelay),Object(K.a)(1),Object(A.a)((function(){return e.showDemoMessage.next(!0)})),Object(Pn.a)((function(e){return e.email.includes(e.id)})),Object(P.a)((function(){return e.authService.showDemoAuthenticationFlow().pipe(Object(A.a)({complete:function(){e.handleDemoUserSignIn(e.state.get("CurrentUser")!==t)}}))}))).subscribe()},e.prototype.handleTeamUserInvitation=function(){var e=this;return this.userLocator.getUserData().pipe(Object(Pn.a)((function(e){return!!e&&e.status===Rn.A.TEAM_CONFIRM})),Object(K.a)(1)).subscribe((function(){e.modalController.show(Rn.s)}))},e.prototype.handleEmailVerificationBanner=function(){var e=this;return this.userLocator.getUserData().pipe(Object(Pn.a)((function(e){return!!e}))).subscribe((function(t){t.emailToConfirm&&t.status!==Rn.A.DEMO?e.showEmailVerificationBanner.next(!0):e.showEmailVerificationBanner.next(!1)}))},e.prototype.handleFreeUserStorageExceededBanner=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(Pn.a)((function(e){return!!e&&e.usageExceeded})),Object(K.a)(1)).subscribe((function(t){t.suspended&&(e.isFreeUserSuspended.next(!0),e.modalController.show(Rn.i)),e.showFreeUserStorageExceededBanner.next(!0)}))},e.prototype.handleGlobalSearchWidget=function(){var e=this;return this.state.changes("GlobalSearch").pipe(Object(Pn.a)((function(e){return!!e&&!!e.state}))).subscribe((function(t){t.state===Bn.c.OPEN?e.showGlobalSearchWidget.next(!0):e.showGlobalSearchWidget.next(!1)}))},e.prototype.handleCanceledSubscriptions=function(){var e=this;return this.dispatchFetchUserSubscriptionData().pipe(Object(Pn.a)((function(e){return!!e})),Object(A.a)((function(t){t.paymentFailedCount>0&&e.showPaymentFailedMessage.next(!0),t.cancelled&&e.modelSubManager.stopAll(!1).subscribe({complete:function(){e.authService.logOut().subscribe({complete:function(){return e.redirect(e.logoutUrl)}})}})}))).subscribe()},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.dispatchFetchUserSubscriptionData=function(){return this.commandService.dispatch(Nn.a.fetchUserSubscriptionData).pipe(Object(Mn.a)(),Object(Lt.a)((function(e){var t,n,i;if(e&&e.resultData[0]){var r=JSON.parse(e.resultData[0]);return null===(i=null===(n=null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.user)||void 0===n?void 0:n.organization)||void 0===i?void 0:i.subscription}return null})))},e.prototype.listenToModalBlurChanges=function(){var e=this;return this.state.changes("ModalBlur").subscribe((function(t){t?e.blurBackground.next(!0):e.blurBackground.next(!1)}))},e.prototype.showOnboarding=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(Pn.a)((function(e){if(!e||e.status===Rn.A.DEMO||!e.preferences)return!1;var t=e.preferences.onboarding_progress,n=e.preferences.onboarding_last_updated;return"complete"!==t&&!(t&&t.startsWith("step")&&n)})),Object(K.a)(1),Object(A.a)((function(){return e.modalController.show(Rn.k,{inputs:{page:Rn.j.Onboarding}})}))).subscribe()},e.prototype.showOfflineNotification=function(){var e=this;return this.state.changes(J.c).pipe(Object(Pn.a)((function(e){return e===J.c.OFFLINE||e===J.c.ONLINE})),Object(Dn.a)()).subscribe((function(t){if(t===J.c.OFFLINE){var n=e.notificationMessages.getNotificationMessage(lt.b.OFFLINE);e.notifierController.show(lt.b.OFFLINE,n.component,n.type,n.options,n.collapsed)}else e.notifierController.hide(lt.b.OFFLINE)}))},e.prototype.showErrorNotification=function(){var e=this;return this.errorHandler.errorStream.pipe(Object(Pn.a)((function(){return e.state.get(J.c)===J.c.ONLINE})),Object(A.a)((function(){var t=e.notificationMessages.getNotificationMessage(lt.b.ERROR,e.sendErrorReport.bind(e));e.notifierController.hide(lt.b.ERROR),e.notifierController.show(lt.b.ERROR,t.component,t.type,t.options,t.collapsed)}))).subscribe()},e.prototype.sendErrorReport=function(){this.errorReporter.submitErrorReport("",!1),this.showErrorReportCompleteNotification()},e.prototype.showErrorReportCompleteNotification=function(){var e=this;setTimeout((function(){e.notifierController.hide(lt.b.ERROR)}),0);var t=this.notificationMessages.getNotificationMessage(lt.b.ERROR_REPORT_COMPLETE);this.notifierController.show(lt.b.ERROR_REPORT_COMPLETE,t.component,t.type,t.options,t.collapsed)},e.prototype.showCopyPasteNotification=function(){var e=this;return this.state.changes("CopyPasteNotifier").pipe(Object(Pn.a)((function(e){return!!e}))).subscribe((function(){var t=e.notificationMessages.getNotificationMessage(lt.b.COPY_PASTE);e.notifierController.show(lt.b.COPY_PASTE,t.component)}))},e.prototype.navigateAfterSignIn=function(){var e=this;this.dataStore.remove(Rn.v,{id:this.state.get("CurrentUser")}).subscribe({complete:function(){e.reload()}})},e.prototype.reload=function(){window.location.reload()},e.prototype.loadGlobalNotifications=function(){var e=this;return this.state.changes("CurrentUser").pipe(Object(P.a)((function(){return e.commandService.dispatch(Yn.getGlobalNotifications)}))).subscribe()},e.prototype.startCaching=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(Pn.a)((function(){return"start"!==e.state.get("CurrentDiagram")&&void 0!==e.state.get("CurrentDiagram")})),Object(K.a)(1),Object(An.a)(this.cachingDelay),Object(A.a)((function(){e.cacheAllWorkspaces(),e.cacheAllProjects()}))).subscribe()},e.prototype.cacheAllWorkspaces=function(){var e=this.serviceWorkerRegistry.fetch("cache-workspaces");if(e&&e.active){var t=JSON.stringify({id:"start-caching",auth:this.authService.token,base:_.m.get("REST_API_BASE_URL")});e.active.postMessage(t)}},e.prototype.cacheAllProjects=function(){var e=this.serviceWorkerRegistry.fetch("cache-projects");if(e&&e.active){var t=JSON.stringify({id:"start-caching",auth:this.authService.token,base:_.m.get("REST_API_BASE_URL")});e.active.postMessage(t)}},e.prototype.listenToServiceWorkerResponse=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){if("workspace-caching-completed"===t.data.message){var n=e.dataStore.getModelStore(ve.j);e.reloadModelStoreCollection(n)}else if("projects-caching-completed"===t.data.message){n=e.dataStore.getModelStore(ve.x);e.reloadModelStoreCollection(n)}}))},e.prototype.reloadModelStoreCollection=function(e){e.reload(),e.reloadStatic()},e.prototype.setDiagramStates=function(){this.state.set("ModalWindow",{show:!1})},e.prototype.handleAppOfflineReloadNotification=function(){var e=this;return this.state.changes(J.c).pipe(Object(Pn.a)((function(e){return e===J.c.OFFLINE||e===J.c.ONLINE}))).subscribe((function(t){localStorage.appReadyForOffline&&!localStorage.appReloadedForOffline&&t===J.c.OFFLINE?e.showAppOfflineReloadBanner.next(!0):e.showAppOfflineReloadBanner.next(!1)}))},e.\u0275fac=function(t){return new(t||e)(D.fc(_.Jb),D.fc(D.s),D.fc(Rn.x),D.fc(_.z),D.fc(D.hb),D.fc(wt.a),D.fc(_.gb),D.fc(_.kb),D.fc(Q.e),D.fc(_.B),D.fc(E.c),D.fc(Fn.d),D.fc(Rn.a),D.fc(Un.b),D.fc(zn.a),D.fc(M.a))},e.\u0275cmp=D.Zb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;(1&e&&D.hd(ys,!0,E.u),2&e)&&(D.Lc(n=D.uc())&&(t.diagramNameToolTip=n.first))},features:[D.Rb([E.u])],decls:36,vars:37,consts:[[3,"demoSignIn"],[4,"ifState"],[1,"container-fluid"],[4,"ngIf"],[1,"diagram-container","fx-span-height-100vh","row"],[1,"col","fx-no-padding"],[1,"fx-pointer-events-none","fx-center-vertical","fx-cover","diagram-inner-container"],[1,"base-left-content-area"],[1,"base-right-content-area"],[3,"showPaymentFailedMessage"],[1,"base-right-diagram-area"],[1,"diagram-viewport","fx-pointer-events-none"],[3,"isFreePause",4,"ngIf"],[1,"diagram-viewport-floating-controls"],[4,"ngFor","ngForOf"],[4,"ifMode"],["name","right-pane"],[3,"isFreePause"],[3,"manifest"]],template:function(e,t){1&e&&(D.lc(0,"demo-message",0),D.tc("demoSignIn",(function(e){return t.handleDemoUserSignIn(e)})),D.kc(),D.ad(1,Cs,1,0,"plan-window",1),D.ad(2,Os,1,0,"history-preview-message",1),D.gc(3,"app-notifier"),D.gc(4,"modal-window-container"),D.lc(5,"div",2),D.yc(6,"async"),D.yc(7,"async"),D.ad(8,xs,1,0,"global-search",3),D.yc(9,"async"),D.lc(10,"div",4),D.lc(11,"div",5),D.gc(12,"diagram-area"),D.kc(),D.lc(13,"div",6),D.lc(14,"div",7),D.gc(15,"router-outlet"),D.kc(),D.lc(16,"div",8),D.gc(17,"header-layout",9),D.yc(18,"async"),D.lc(19,"div",10),D.ad(20,Ss,1,0,"free-hand-toolbar",3),D.yc(21,"async"),D.lc(22,"div",11),D.ad(23,ks,2,3,"storage-exceeded-banner",12),D.yc(24,"async"),D.ad(25,ws,1,0,"email-verification-banner",3),D.yc(26,"async"),D.ad(27,Es,1,0,"app-offline-reload-banner",3),D.yc(28,"async"),D.lc(29,"div",13),D.ad(30,Is,2,3,"ng-container",14),D.yc(31,"async"),D.ad(32,Ts,1,0,"diagram-toolbar",3),D.yc(33,"async"),D.ad(34,Ps,2,2,"ng-container",15),D.kc(),D.kc(),D.gc(35,"router-outlet",16),D.kc(),D.kc(),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(1),D.Cc("ifState",D.Gc(35,As)),D.Sb(1),D.Cc("ifState",D.Gc(36,Ms)),D.Sb(3),D.Xb("nu-overlay-blur",D.zc(6,15,t.blurBackground))("demo-user",D.zc(7,17,t.showDemoMessage)),D.Sb(3),D.Cc("ngIf",D.zc(9,19,t.showGlobalSearchWidget)),D.Sb(9),D.Cc("showPaymentFailedMessage",D.zc(18,21,t.showPaymentFailedMessage)),D.Sb(3),D.Cc("ngIf",D.zc(21,23,t.isFreeHandMode)),D.Sb(3),D.Cc("ngIf",D.zc(24,25,t.showFreeUserStorageExceededBanner)),D.Sb(2),D.Cc("ngIf",D.zc(26,27,t.showEmailVerificationBanner)),D.Sb(2),D.Cc("ngIf",D.zc(28,29,t.showAppOfflineReloadBanner)),D.Sb(3),D.Cc("ngForOf",D.zc(31,31,t.manifests)),D.Sb(2),D.Cc("ngIf",D.zc(33,33,t.appDisabledState)),D.Sb(2),D.Cc("ifMode","default"))},directives:[qn.a,Kn.a,Jn.a,Zn.a,F.t,zi,Oe.i,Ao,F.s,tr.a,Mo.a,Lo,Bn.a,Go,Xo,Jo,Zo,es,gs,bs],pipes:[F.b],styles:[".demo-user[_ngcontent-%COMP%]   .base-left-content-area[_ngcontent-%COMP%], .demo-user[_ngcontent-%COMP%]   .base-right-content-area[_ngcontent-%COMP%]{padding-top:30px}.demo-user[_ngcontent-%COMP%]   .diagram-viewport-floating-controls[_ngcontent-%COMP%]{bottom:40px}.diagram-container[_ngcontent-%COMP%]{position:relative}.free-hand-view[_ngcontent-%COMP%]{position:absolute}.diagram-viewport[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.base-left-content-area[_ngcontent-%COMP%]{height:100%}.base-right-content-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;position:relative}.base-right-diagram-area[_ngcontent-%COMP%]{display:flex;flex:1}.base-disabled-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.4);z-index:3;width:calc(100% - 265px);right:0}.diagram-viewport-floating-controls[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;position:absolute;bottom:10px;width:100%;right:-40px}diagram-toolbar[_ngcontent-%COMP%]{width:380px;display:flex;align-items:flex-end;flex-direction:column}bottom-panel[_ngcontent-%COMP%]{width:100%;overflow:hidden}"],changeDetection:0}),e}(),Rs={cursors:{normal:'<svg xmlns="http://www.w3.org/2000/svg" width="8.85" height="16.12" ><polygon points="8.85 9.02 0 0 0 12.63 2.74 10.25 5.15 16.12 7.62 15.11 5.22 9.24 8.85 9.02"/></svg>',pan:'<svg xmlns="http://www.w3.org/2000/svg" data-ox="7.99" data-oy="8" width="15.99" height="16" ><title>cursors-tails</title><path d="M10.77,12.87l-2.55,3a.33.33,0,0,1-.45,0l-2.55-3c-.1-.12,0-.27.22-.27H7V10.74a1,1,0,0,1,2,0V12.6h1.55C10.75,12.6,10.87,12.75,10.77,12.87Z" style="fill:rgb(21,20,21)"/><path d="M10.55,3.39H9V5.54a1,1,0,0,1-2,0V3.39H5.44c-.2,0-.32-.14-.22-.26l2.55-3a.33.33,0,0,1,.45,0l2.55,3C10.87,3.25,10.75,3.39,10.55,3.39Z" style="fill:rgb(21,20,21)"/><path d="M15.91,8.22l-3,2.55c-.12.1-.27,0-.27-.22V9h-2a1,1,0,0,1,0-2h2V5.45c0-.2.15-.33.27-.23l3,2.55A.35.35,0,0,1,15.91,8.22Z" style="fill:rgb(21,20,21)"/><path d="M6.4,8a1,1,0,0,1-1,1h-2v1.55c0,.2-.15.32-.27.22l-3-2.55a.35.35,0,0,1,0-.45l3-2.55c.12-.1.27,0,.27.23V7h2A1,1,0,0,1,6.4,8Z" style="fill:rgb(21,20,21)"/></svg>',comment:"./assets/cursors/comment.cur",pen:'<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" data-oy="19"><path d="M18.6431 11.8328C18.4431 11.6328 18.1431 11.6328 17.9431 11.8328L16.2431 13.4328C15.8431 11.5328 14.7431 8.83278 12.2431 6.43278C10.5431 4.83278 8.44307 3.73278 6.14307 3.13278L7.64307 1.63278C7.84307 1.43278 7.84307 1.13278 7.64307 0.932775C7.44307 0.732775 7.14307 0.732775 6.94307 0.832775L4.64307 3.13278L0.643066 17.8328C0.643066 18.0328 0.643066 18.2328 0.743066 18.4328L0.943066 18.7328L1.04307 18.8328C1.14307 18.9328 1.34307 18.9328 1.44307 18.9328C1.54307 18.9328 1.64307 18.9328 1.64307 18.9328L16.1431 14.9328L18.5431 12.5328C18.8431 12.3328 18.8431 12.0328 18.6431 11.8328ZM5.44307 3.93278C7.74307 4.43278 9.94307 5.53278 11.6431 7.13278C14.2431 9.53278 15.1431 12.3328 15.4431 14.0328L6.34307 16.5328C6.04307 15.4328 5.44307 14.7328 4.94307 14.2328C4.24307 13.6328 3.44307 13.3328 2.84307 13.2328L5.44307 3.93278ZM1.64307 17.9328L2.64307 14.2328C3.04307 14.3328 3.74307 14.5328 4.34307 15.0328C4.74307 15.3328 5.14307 15.9328 5.44307 16.8328L1.64307 17.9328Z" style="fill:rgb(4,38,61)"/></svg>',highlighter:'<svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" data-oy="20"><path d="M22.5499 11.7998C22.3499 11.5998 22.0499 11.5998 21.7499 11.7998L19.6499 13.8998L8.9499 2.7998L10.8499 0.999805C11.0499 0.799805 11.0499 0.499805 10.8499 0.199805C10.6499 -0.00019531 10.3499 -0.00019531 10.0499 0.199805L7.5499 2.5998L5.1499 11.3998L1.0499 15.4998C0.649897 15.8998 0.449897 16.4998 0.549897 16.9998C0.649897 17.3998 0.949898 17.7998 1.4499 17.8998L8.0499 19.6998C8.1499 19.6998 8.2499 19.6998 8.4499 19.6998C8.8499 19.6998 9.2499 19.4998 9.5499 19.1998L11.2499 17.4998L19.8499 15.0998L22.4499 12.4998C22.7499 12.2998 22.7499 11.9998 22.5499 11.7998ZM8.3499 3.6998L18.6499 14.3998L11.1499 16.4998L6.2499 11.4998L8.3499 3.6998ZM8.9499 18.4998C8.7499 18.6998 8.5499 18.6998 8.4499 18.6998L1.8499 16.8998C1.7499 16.8998 1.7499 16.7998 1.7499 16.7998C1.7499 16.6998 1.7499 16.4998 1.9499 16.2998L5.7499 12.4998L10.4499 17.1998L8.9499 18.4998Z" style="fill:rgb(4,38,61)/></svg>'},tails:{}},Ls=n("3mST"),Fs=n("Fqp3"),Ns=n("Voii"),Bs=n("aC2M"),Us=n("xOLM"),zs=function(e){function t(t,n){var i=e.call(this)||this;return i.state=t,i.collabLocator=n,i.OWNER_PLAN_ERROR="OWNER_PLAN_NOT_LOADED",i.currentUserIsOwner=!1,i.ownerHasPermission=!0,i.ownerIsOnline=!0,i.listenToCollabChanges().subscribe(),i}return Object(w.e)(t,e),t.prototype.getCollabsWithPermissions=function(){var e=this;return this.getCollabs().pipe(Object(Us.a)((function(t){return t.pipe(Object(A.a)((function(t){if(t.message!==e.OWNER_PLAN_ERROR)throw t})),Object(K.a)(3),Object(An.a)(1e3))})))},t.prototype.check=function(e){return!!this.currentUserIsOwner||("view"===this.state.get("InterfaceControlState")||(!!this.ownerHasPermission||!(!this.ownerIsOnline||this.ownerHasPermission)))},t.prototype.listenToCollabChanges=function(){var e=this;return this.getCollabsWithPermissions().pipe(Object(A.a)((function(t){var n=t.find((function(t){return t.role===ve.g.OWNER&&t.id!==e.state.get("CurrentUser")}));if(n){e.currentUserIsOwner=!1;var i=n.plan.permissions[I.r.COLLABORATE_OFFLINE];e.ownerHasPermission=i.allowed,e.ownerIsOnline=n.online}else e.currentUserIsOwner=!0})))},t.prototype.getCollabs=function(){var e=this;return Object(Ei.b)([this.state.changes("CurrentUser"),this.state.changes("CurrentDiagram"),this.state.changes("InterfaceControlState")]).pipe(Object(Pn.a)((function(e){var t=Object(w.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(P.a)((function(){return e.collabLocator.getCollabs()})),Object(A.a)((function(t){var n=t.find((function(t){return t.role===ve.g.OWNER&&t.id!==e.state.get("CurrentUser")}));if(n&&!n.plan)throw new Error(e.OWNER_PLAN_ERROR)})))},t.\u0275fac=function(e){return new(e||t)(D.pc(_.Jb),D.pc(_i.a))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Rn.h),Vs=n("iy5+"),Gs=function(e){function t(t,n,i,r,a,o,s,c,u,l,p,d,h,f,g,m,v){var b=e.call(this,t)||this;return b.state=t,b.initController=n,b.logger=i,b.keyBoardController=r,b.featureList=a,b.cursorGen=o,b.modelSubManager=s,b.router=c,b.routeManager=u,b.translate=l,b.userLocator=p,b.collabLocator=d,b.ll=h,b.planPermManager=f,b.modalController=g,b.collaborateOfflinePermHandler=m,b.appNavConfigInterpreter=v,b.isOfflineCollabDialogDisplayed=!1,b}return Object(w.e)(t,e),t.prototype.canDeactivate=function(e,t,n,i){return this.stopWatchingConnectionChanges(),this.stopWatchingCollabChanges(),this.state.set("SidebarControls",Vs.b.DISABLED),Object(L.a)(!0)},t.prototype.checkUserPauseStatus=function(e){var t=this;return this.userLocator.isUserPaused().pipe(Object(Dn.a)(),Object(Lt.a)((function(n){return!n||(!e.url.endsWith("edit")||(t.router.navigate(["../",t.state.get("CurrentDiagram"),"view"]),!1))})))},t.prototype.canActivate=function(e,t){var n=this;this.logger.debug("BaseRouteResolver resolution started"),this.setFocusTargetState(t.url);var i=e.paramMap.get("id"),r=this.getRouteAction(t.url);return this.state.set("LastDiagramAction",{diagramId:i,action:r}),this.runResolverSequence(t).pipe(Object(A.a)({complete:function(){return n.state.set("SidebarControls",Vs.b.ENABLED)}}))},t.prototype.resolve=function(e,t){return this.setDiagramStates(),this.registerFeatures(),this.keyBoardController.registerFeatures(),this.cursorGen.addCursors(Rs),this.removePreviousRouteFromHistory(t),!0},t.prototype.canActivateForOutcome=function(e){var t=e.outcome,n=t.type,i=t.action;return"plugin"===_.m.get("APP_MODE")?"complete"===n:"complete"===n||!("command"!==n&&"commandEvent"!==n||"Authenticate"!==i||e.outcome.wait)},t.prototype.registerFeatures=function(){this.featureList.register({id:"showShorcutWindow",commandEvent:Qt.showShortcutWindow,label:this.translate.instant("BASE_FEATURE.SHORTCUTS"),shortcuts:[{keySequence:[I.k.F1],action:"keydown"}],data:{show:!0},context:Fs.a.All}),this.featureList.register({id:"hideShorcutWindow",commandEvent:Qt.showShortcutWindow,label:this.translate.instant("BASE_FEATURE.SHORTCUTS"),shortcuts:[{keySequence:[I.k.F1],action:"keyup"}],data:{show:!1},context:Fs.a.All}),this.featureList.register({id:"zoomIn",commandEvent:Ln.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ZOOM_IN"),shortcuts:[{keySequence:[I.k.Meta,I.k.Plus],action:"keydown",repeatOnKeyPress:100},{keySequence:[I.k.Meta,I.k.Add],action:"keydown",repeatOnKeyPress:100},{keySequence:[I.k.Meta,I.k.Plus_FF],action:"keydown",repeatOnKeyPress:100}],data:{delta:1.25,toCenter:!0},context:Fs.a.Canvas}),this.featureList.register({id:"zoomOut",commandEvent:Ln.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ZOOM_OUT"),shortcuts:[{keySequence:[I.k.Meta,I.k.Minus],action:"keydown",repeatOnKeyPress:100},{keySequence:[I.k.Meta,I.k.Subtract],action:"keydown",repeatOnKeyPress:100},{keySequence:[I.k.Meta,I.k.Minus_FF],action:"keydown",repeatOnKeyPress:100}],data:{delta:.8,toCenter:!0},context:Fs.a.Canvas}),this.featureList.register({id:"actualSize",commandEvent:Ln.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ACTUAL_SIZE"),shortcuts:[{keySequence:[I.k.Meta,I.k.Zero],action:"keydown"}],data:{level:1,toCenter:!0},context:Fs.a.Canvas}),this.featureList.register({id:"addComment",commandEvent:Nn.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.ADD_COMMENT"),shortcuts:[{keySequence:[I.k.C],action:"keydown"}],data:{},attachKeyEventToData:!0,context:Fs.a.CanvasNotSelected}),this.featureList.register({id:"freeHandPen",commandEvent:Nn.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.FREE_HAND_PEN"),shortcuts:[{keySequence:[I.k.A],action:"keydown"}],data:{},attachKeyEventToData:!0,context:Fs.a.CanvasNotSelected}),this.featureList.register({id:"freeHandHighlighter",commandEvent:Nn.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.FREE_HAND_HIGHLIGHTER"),shortcuts:[{keySequence:[I.k.H],action:"keydown"}],data:{},attachKeyEventToData:!0,context:Fs.a.CanvasNotSelected}),this.featureList.register({id:"documentSearch",commandEvent:Nn.a.openGlobalSearch,label:this.translate.instant("COMMANDS.DOCUMENT_SEARCH"),shortcuts:[{keySequence:[I.k.Meta,I.k.F]}],data:{scope:Bn.b.DOCUMENT},attachKeyEventToData:!0,context:Fs.a.Canvas})},t.prototype.watchConnectionChanges=function(){this._connectionChangesSub||(this._connectionChangesSub=this.connectionChanges().subscribe())},t.prototype.stopWatchingConnectionChanges=function(){this._connectionChangesSub&&(this._connectionChangesSub.unsubscribe(),this._connectionChangesSub=null)},t.prototype.connectionChanges=function(){var e=this;return this.state.changes(J.c).pipe(Object(Ls.a)(1),Object(P.a)((function(t){return e.onConnectionChange(t)})))},t.prototype.onConnectionChange=function(e){var t=this;return this.logger.debug("BaseRouteResolver onConnectionChange",e),e===J.c.OFFLINE||e===J.c.SLEEP?this.modelSubManager.stopAll(!1):e===J.c.ONLINE?this.modelSubManager.stop(this.state.get("CurrentDiagram"),!1).pipe(Object(P.a)((function(){return t.runConnectionChangeSequence()}))):li.a},t.prototype.runConnectionChangeSequence=function(){var e=this;return this.logger.debug("BaseRoute Connection Change sequence started"),this.startSequence().pipe(Object(A.a)({next:function(t){return e.logger.debug("BaseRoute Connection Change sequence status",t)},complete:function(){return e.logger.debug("BaseRoute Connection Change sequence completed.")}}))},t.prototype.watchCollabChanges=function(){this._collabChangesSub||(this._collabChangesSub=this.listenToCollabChanges().subscribe())},t.prototype.stopWatchingCollabChanges=function(){this._collabChangesSub&&(this._collabChangesSub.unsubscribe(),this._collabChangesSub=null)},t.prototype.watchOfflineCollabChanges=function(){var e=this;this._offlineCollabChangesSub||setTimeout((function(){e._offlineCollabChangesSub=e.listenToOfflineCollabChanges().subscribe()}),3e3)},t.prototype.listenToCollabChanges=function(){var e=this;return Object(Ei.b)([this.state.changes("CurrentUser"),this.state.changes("CurrentDiagram")]).pipe(Object(Pn.a)((function(e){var t=Object(w.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(P.a)((function(t){var n=Object(w.h)(t,2),i=n[0];n[1];return e.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramOnce()})),Object(P.a)((function(t){return e.collabLocator.getCollabs(t.id).pipe(Object(ki.a)()).pipe(Object(A.a)((function(n){var r=Object(w.h)(n,2),a=r[0],o=r[1];e.onCollabChange(i,t,a,o)})))})))})))},t.prototype.listenToOfflineCollabChanges=function(){var e=this;return this.collaborateOfflinePermHandler.getCollabsWithPermissions().pipe(Object(P.a)((function(t){if(!e.planPermManager.check([I.r.COLLABORATE_OFFLINE])){var n=t.find((function(e){return e.role===ve.g.OWNER}));return e.userLocator.getUserInfo(n.id).pipe(Object(A.a)((function(t){var n=Object(w.a)(Object(w.a)({},Ji.a[I.r.COLLABORATE_OFFLINE]),{descriptionParams:{ownerName:t.fullName},buttons:[{type:"ok",text:"BUTTONS.STAY_ON_DOCUMENT",clickHandler:e.redirectHandler.bind(e)}],hideCancelButton:!0,closeClickHandler:e.redirectHandler.bind(e)});e.isOfflineCollabDialogDisplayed||(e.isOfflineCollabDialogDisplayed=!0,e.modalController.show(Rn.t,{inputs:{dialogData:n}}))})))}return e.isOfflineCollabDialogDisplayed?(e.isOfflineCollabDialogDisplayed=!1,Object(L.a)(e.modalController.hide())):li.a})))},t.prototype.redirectHandler=function(){this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},t.prototype.onCollabChange=function(e,t,n,i){if(t.privacy.level===Rn.p.SPECIFIC&&i&&i.length>0){var r=n.find((function(t){return t.id===e})),a=i.find((function(t){return t.id===e}));(!a||r&&r.role!==a.role)&&this.routeManager.lastRoute.endsWith("edit")&&this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])}},t.prototype.setFocusTargetState=function(e){var t,n=e.split("/");"shape"===n[n.length-2]&&n[n.length-1]?t={shapeId:n[n.length-1]}:"group"===n[n.length-2]&&n[n.length-1]&&(t={groupId:n[n.length-1]}),t&&this.state.set("FocusTarget",t)},t.prototype.removePreviousRouteFromHistory=function(e){var t=this.routeManager.lastRoute;t&&t.startsWith("/create?")&&this.routeManager.removeRouteFromHistory(e.url)},t.prototype.setDiagramStates=function(){this.state.set("Selected",[]),this.state.set("InnerShapeSelection",{}),this.state.set("SnapData",{}),this.state.set("SnapToGuides",!1),this.state.set("ShowGuides",!1),this.state.set("ShapeSearchResults",{results:[],searchQuery:""}),this.state.set("ShapeSearchQuery",""),this.state.set("CommentThreadData",{}),this.state.set("WebLinkViewer",{open:!1}),this.state.set("ShapeDataViewer",{open:!1}),this.state.set("ShapelinkTarget",{}),this.state.set("ShowSideBarButtonIndicator",{}),this.state.set("CopyPasteNotifier",!1),this.state.get("RightSidebarPanel")||this.state.set("RightSidebarPanel","none"),this.state.set("SidebarControls",Vs.b.ENABLED),this.state.set("GlobalSearch",{}),this.state.set("GlobalSearchText",{}),this.state.set("HistoryPreviewMode",!1)},t.prototype.runResolverSequence=function(e){var t=this;return this.startSequence().pipe(Object(oi.a)(this.router.events.pipe(Object(Pn.a)((function(e){return e instanceof Oe.b||e instanceof Oe.c})))),Object(Pn.a)((function(e){return t.canActivateForOutcome(e)})),Object(K.a)(1),Object(Lt.a)((function(e){t.logger.debug("BaseRouteResolver sequence status",e),t.setCurrentDiagram(e.input.resourceId),t.hideLoadingScreen(),t.logger.debug("BaseRouteResolver setting current diagram to "+e.input.resourceId)})),Object(A.a)({complete:function(){t.watchConnectionChanges(),t.watchCollabChanges(),t.watchOfflineCollabChanges(),t.logger.debug("BaseRouteResolver route resolution completed.")}}),Object(P.a)((function(){return t.state.get("CurrentUser")?t.checkUserPauseStatus(e):Object(L.a)(!0)})))},t.prototype.startSequence=function(){var e=this.state.get("LastDiagramAction").diagramId,t=this.state.get("LastDiagramAction").action;t=this.appNavConfigInterpreter.receiveQueryParam(t);var n=new _.X(t,e);return this.initController.startSequence("RouteResponsibility",n)},t.\u0275fac=function(e){return new(e||t)(D.pc(_.Jb),D.pc(_.Y),D.pc(_.db),D.pc($t.a),D.pc(Yt.a),D.pc(Qn.a),D.pc(Fn.d),D.pc(Oe.d),D.pc(Bs.a),D.pc(Q.e),D.pc(Rn.x),D.pc(_i.a),D.pc(M.a),D.pc(Rn.o),D.pc(_.gb),D.pc(zs),D.pc(_.o))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Ns.a),Hs=n("Wpmq"),Ws=n("unyx"),Ys=function(e){function t(t,n,i,r){var a=e.call(this,t,n,i)||this;return a.commandMapper=t,a.log=n,a.injector=i,a.dataStore=r,a}return Object(w.e)(t,e),t.prototype.execute=function(e,t,n){var i=this;return this.getChanges(e.toString()).pipe(Object(Pn.a)((function(e){return!!e&&!!e.length})),Object(Lt.a)((function(e){return e.filter((function(e){return!!e}))})),Object(Lt.a)((function(e){return e.sort((function(e,t){return t.clientTime-e.clientTime}))})),Object(Lt.a)((function(e){var t=i.getModifierData(e),n=i.createEventData(e[0].event,t);return{commands:i.getCommandList(t),eventData:n}})),Object(P.a)((function(e){var t=e.commands,r=e.eventData;return i.processCommandList(t,r,void 0,n)})))},t.prototype.getChanges=function(e){var t=this,n=this.dataStore.getModelStore(ve.j);return n.findChanges({"event.eventId":e}).pipe(Object(K.a)(1),Object(P.a)((function(i){return Object(T.isEmpty)(i)?(n=t.dataStore.getModelStore(Ws.a)).findChanges({"event.eventId":e}).pipe(Object(K.a)(1)):Object(L.a)(i)})))},t.prototype.getModifierData=function(e){return e.map((function(e){return{command:e.command,modifier:e.modifier,reverter:e.reverter}}))},t.prototype.createEventData=function(e,t){return{eventId:_.sb.eventId(),eventName:e.eventName,originalEventId:e.eventId,scenario:this.scenario,modifierData:t}},t.prototype.getCommandList=function(e){var t=this,n=new _.Gb;return e.forEach((function(e){var i=t.commandMapper.getCommandByName(e.command);n.add(i)})),n},t.\u0275fac=function(e){return new(e||t)(D.pc(_.z),D.pc(_.db),D.pc(D.C),D.pc(Un.b))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(_.c),Xs=function(e){function t(t,n,i,r){var a=e.call(this,t,n,i,r)||this;return a.commandMapper=t,a.log=n,a.injector=i,a.dataStore=r,a}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"scenario",{get:function(){return _.A.REDO},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(D.pc(_.z),D.pc(_.db),D.pc(D.C),D.pc(Un.b))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Ys),qs=function(e){function t(t,n,i,r){var a=e.call(this,t,n,i,r)||this;return a.commandMapper=t,a.log=n,a.injector=i,a.dataStore=r,a}return Object(w.e)(t,e),Object.defineProperty(t.prototype,"scenario",{get:function(){return _.A.UNDO},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(D.pc(_.z),D.pc(_.db),D.pc(D.C),D.pc(Un.b))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Ys),Ks=function(){function e(e,t){this.logger=e,this.dataStore=t,this.name="DiagramResponsibility"}return e.prototype.checkState=function(e){if(!e.states.diagramRequired)return Object(L.a)(!0);this.logger.debug("DiagramResponsibility checkState");var t=this.dataStore.getModelStore(qi.a),n={id:e.input.resourceId};return Object(Ei.b)(t.findOneRaw(n),t.findOneStatic(n)).pipe(Object(K.a)(1),Object(Lt.a)((function(e){var t=Object(w.h)(e,2),n=t[0],i=t[1];return!!(n&&i&&i.privacy)})))},e.prototype.nextResponsibility=function(e){return e.states.diagramRequired?["DiagramSubscriptionResponsibility"]:[]},e.prototype.result=function(e){if(!e.states.diagramRequired)return{type:"complete"}},e.\u0275fac=function(t){return new(t||e)(D.pc(_.db),D.pc(Un.b))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),Js=function(){function e(e,t){this.logger=e,this.subManager=t,this.name="DiagramSubscriptionResponsibility"}return e.prototype.checkState=function(e){this.logger.debug("DiagramSubscriptionResponsibility checkState");var t=this.subManager.get(e.input.resourceId);return t?Object(L.a)(t.currentStatus):Object(L.a)({})},e.prototype.nextResponsibility=function(e){var t=this.getStates(e);if(t.diagramSubStarted||t.hasDiagram&&(!t.diagramSubErrored||!this.isPermOrAuthError(e)))return["PrivacyResponsibility"]},e.prototype.result=function(e){var t=this.getStates(e);return t.diagramSubErrored?this.getSubscriptionErrorOutcome(e,t):t.diagramSubStarted?void 0:{type:"commandEvent",action:t.isAuthenticated?Nn.a.startDiagramSubscriptionAndDeps:Nn.a.startDiagramSubscription,wait:!t.hasDiagram}},e.prototype.isPermissionError=function(e){var t=e.states.DiagramSubscriptionResponsibility.error;return!!t&&(1202===t.code||1203===t.code)},e.prototype.isAuthenticationError=function(e){var t=e.states.DiagramSubscriptionResponsibility.error;return!!t&&2201===t.code},e.prototype.isPermOrAuthError=function(e){return this.isPermissionError(e)||this.isAuthenticationError(e)},e.prototype.getStates=function(e){var t=e.states.DiagramSubscriptionResponsibility;return{diagramSubStarted:t&&t.subStatus===Fn.f.started,diagramSubErrored:t&&t.subStatus===Fn.f.errored,hasDiagram:!!e.states.DiagramResponsibility,isAuthenticated:0===e.states.AuthResponsibility}},e.prototype.getSubscriptionErrorOutcome=function(e,t){return this.isPermissionError(e)?{type:"route",action:e.input.resourceId+"/"+e.input.action+"-permission-error"}:this.isAuthenticationError(e)?t.isAuthenticated?{type:"commandEvent",action:Nn.a.startDiagramSubscriptionAndDeps,wait:!0}:{type:"command",action:"Authenticate",wait:!0}:t.hasDiagram?void 0:{type:"route",action:e.input.resourceId+"/diagram-error"}},e.\u0275fac=function(t){return new(t||e)(D.pc(_.db),D.pc(Fn.d))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),Zs=n("wx9+"),Qs=n("TZl/"),$s=n("elRR"),ec=n("kgIF"),tc=n("0jHB"),nc=n("z3tU");function ic(e,t){if(1&e&&(D.lc(0,"a",6),D.lc(1,"button",7),D.lc(2,"span",8),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc();D.Cc("routerLink",n.buttonLink),D.Sb(3),D.dd(n.buttonCaption)}}function rc(e,t){if(1&e&&(D.lc(0,"a",9),D.lc(1,"button",7),D.lc(2,"span",8),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc();D.Cc("href",n.buttonLink,D.Rc),D.Sb(3),D.dd(n.buttonCaption)}}var ac=function(e){return{"background-image":e}},oc=function(){function e(e){this.env=e}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"LABELS.OOPS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.PERMISSION_ERROR_EDIT"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"BUTTONS.GOTO_DIAGRAMS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"dark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-dark-200X80.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return this.env.isDesktop?"/redirect/last-edited":"/"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(D.fc(_.F))},e.\u0275cmp=D.Zb({type:e,selectors:[["edit-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],["alt","Creately",1,"logo","fx-floating",3,"src"],[1,"fullscreen-message"],["translate",""],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"nu-btn-med","fullscreen-button"],["translate","",1,"dark-blue"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.gc(1,"img",1),D.lc(2,"div",2),D.lc(3,"h1",3),D.cd(4),D.kc(),D.lc(5,"p",3),D.cd(6),D.kc(),D.kc(),D.lc(7,"div"),D.ad(8,ic,4,2,"a",4),D.ad(9,rc,4,2,"a",5),D.kc(),D.kc()),2&e&&(D.Xb("light","light"===t.screenColor)("hasImage",t.image),D.Cc("ngStyle",D.Hc(10,ac,"url("+t.image+")")),D.Sb(1),D.Cc("src",t.logo,D.Rc),D.Sb(3),D.dd(t.errorHeading),D.Sb(2),D.dd(t.errorMessage),D.Sb(2),D.Cc("ngIf",!t.externalLink),D.Sb(1),D.Cc("ngIf",t.externalLink))},directives:[F.w,Q.a,F.t,Oe.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:20px;flex-direction:column;background-color:#06263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#04263d;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:100px}.fullscreen-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-top:15px;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]:first-of-type{margin-top:30px}.fullscreen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:25px}.fullscreen-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:20px;font-family:lt_bold,Open Sans,sans-serif}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:20px;left:20px;width:120px}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:20px;max-width:400px}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline;font-size:16px}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:50px}"]}),e}();function sc(e,t){if(1&e&&(D.lc(0,"a",6),D.lc(1,"button",7),D.lc(2,"span",8),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc();D.Cc("routerLink",n.buttonLink),D.Sb(3),D.dd(n.buttonCaption)}}function cc(e,t){if(1&e&&(D.lc(0,"a",9),D.lc(1,"button",7),D.lc(2,"span",8),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc();D.Cc("href",n.buttonLink,D.Rc),D.Sb(3),D.dd(n.buttonCaption)}}var uc=function(e){return{"background-image":e}},lc=function(){function e(){}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"LABELS.OOPS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.PERMISSION_ERROR_VIEW"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"BUTTONS.GOTO_DIAGRAMS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"dark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-dark-200X80.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return"/"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["view-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],["alt","Creately",1,"logo","fx-floating",3,"src"],[1,"fullscreen-message"],["translate",""],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"nu-btn-med","fullscreen-button"],["translate","",1,"dark-blue"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.gc(1,"img",1),D.lc(2,"div",2),D.lc(3,"h1",3),D.cd(4),D.kc(),D.lc(5,"p",3),D.cd(6),D.kc(),D.kc(),D.lc(7,"div"),D.ad(8,sc,4,2,"a",4),D.ad(9,cc,4,2,"a",5),D.kc(),D.kc()),2&e&&(D.Xb("light","light"===t.screenColor)("hasImage",t.image),D.Cc("ngStyle",D.Hc(10,uc,"url("+t.image+")")),D.Sb(1),D.Cc("src",t.logo,D.Rc),D.Sb(3),D.dd(t.errorHeading),D.Sb(2),D.dd(t.errorMessage),D.Sb(2),D.Cc("ngIf",!t.externalLink),D.Sb(1),D.Cc("ngIf",t.externalLink))},directives:[F.w,Q.a,F.t,Oe.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:20px;flex-direction:column;background-color:#06263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#04263d;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:100px}.fullscreen-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-top:15px;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]:first-of-type{margin-top:30px}.fullscreen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:25px}.fullscreen-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:20px;font-family:lt_bold,Open Sans,sans-serif}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:20px;left:20px;width:120px}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:20px;max-width:400px}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline;font-size:16px}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:50px}"]}),e}(),pc=n("0itG"),dc=n("53e4"),hc=n("YucH"),fc=n("j1Bk"),gc=n("2ZsA"),mc=n("ujvC"),vc=n("o+Mh"),bc=n("oK6n"),yc=n("aSzn"),Cc=n("Di8k"),Oc=n("yZNT"),xc=n("AaYA");function Sc(e,t){if(1&e&&(D.lc(0,"video",6),D.cd(1," Your browser does not support the video tag. "),D.kc()),2&e){var n=D.xc();D.Cc("src",n.image,D.Rc)}}function kc(e,t){if(1&e&&D.gc(0,"img",7),2&e){var n=D.xc();D.Cc("src",n.image,D.Rc)}}function wc(e,t){1&e&&D.gc(0,"div",8)}var Ec=function(){function e(){this.alignment="left"}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["tour-card"]],inputs:{heading:"heading",description:"description",image:"image",alignment:"alignment"},decls:10,vars:10,consts:[[1,"tour-card-text"],["translate",""],[1,"tour-card-image"],["width","570","autoplay","","loop","",3,"src",4,"ngIf"],["width","500",3,"src",4,"ngIf"],["class","tour-card-image-video-mask",4,"ngIf"],["width","570","autoplay","","loop","",3,"src"],["width","500",3,"src"],[1,"tour-card-image-video-mask"]],template:function(e,t){1&e&&(D.lc(0,"div"),D.lc(1,"div",0),D.lc(2,"h1",1),D.cd(3),D.kc(),D.lc(4,"p",1),D.cd(5),D.kc(),D.kc(),D.lc(6,"div",2),D.ad(7,Sc,2,1,"video",3),D.ad(8,kc,1,1,"img",4),D.ad(9,wc,1,0,"div",5),D.kc(),D.kc()),2&e&&(D.Vb("tour-card ",t.alignment,""),D.Xb("main-screen","center"===t.alignment),D.Sb(3),D.dd(t.heading),D.Sb(2),D.dd(t.description),D.Sb(2),D.Cc("ngIf",!("center"===t.alignment)),D.Sb(1),D.Cc("ngIf","center"===t.alignment),D.Sb(1),D.Cc("ngIf",!("center"===t.alignment)))},directives:[Q.a,F.t],styles:[".tour-card[_ngcontent-%COMP%]{color:#fff;padding:30px 20px 0;height:100%;display:flex;flex-direction:column}.tour-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:5px}.tour-card-image[_ngcontent-%COMP%], .tour-card.center[_ngcontent-%COMP%]{text-align:center}.tour-card-image[_ngcontent-%COMP%]{height:375px;margin-bottom:-2px;position:relative;margin-top:30px}.tour-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.tour-card-text[_ngcontent-%COMP%]{flex:1}.main-screen[_ngcontent-%COMP%]{background-color:#fff}.main-screen[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .main-screen[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#04263d}.tour-card-image-video-mask[_ngcontent-%COMP%]{height:2px;background-color:#fff;width:100%;margin:0 auto;position:absolute;bottom:0;border-top:1px solid #d3d3e7}"],changeDetection:0}),e}();function Ic(e,t){if(1&e){var n=D.mc();D.lc(0,"span",2),D.wc(),D.lc(1,"svg",3),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc().navButtonClicked.next(e.id)})),D.gc(2,"use"),D.kc(),D.kc()}if(2&e){var i=t.$implicit,r=D.xc();D.Sb(1),D.Xb("selected",i.id===r.selected),D.Sb(1),D.Tb("href",r.iconURL(i.paginationSymbol),null,"xlink")}}var Tc=function(){function e(){this.navButtonClicked=new D.t}return e.prototype.iconURL=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["tour-pagination"]],inputs:{cardList:"cardList",selected:"selected"},outputs:{navButtonClicked:"navButtonClicked"},decls:2,vars:1,consts:[[1,"tour-pagination"],["class","pagination-button",4,"ngFor","ngForOf"],[1,"pagination-button"],[1,"nu-icon",3,"click"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Ic,3,3,"span",1),D.kc()),2&e&&(D.Sb(1),D.Cc("ngForOf",t.cardList))},directives:[F.s],styles:[".pagination-button[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.pagination-button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#ffc648}.pagination-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#dcdcdc}.pagination-button[_ngcontent-%COMP%]   svg.selected[_ngcontent-%COMP%]{color:#40b29e}"],changeDetection:0}),e}(),_c=function(e){return{event:e}};function jc(e,t){if(1&e&&(D.lc(0,"button",1),D.tc("click",(function(){return t.$implicit.clickHandler()})),D.cd(1),D.kc()),2&e){var n=t.$implicit;D.Xb("secondary","outlined"===n.style)("primary","primary"===n.style),D.Cc("trackAction",D.Hc(7,_c,n.id)),D.Tb("data-testid",n.testId),D.Sb(1),D.ed(" ",n.label,"\n")}}var Pc=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["tour-buttons"]],inputs:{buttons:"buttons"},decls:1,vars:1,consts:[["class","tour-button nu-btn-med","translate","",3,"trackAction","secondary","primary","click",4,"ngFor","ngForOf"],["translate","",1,"tour-button","nu-btn-med",3,"trackAction","click"]],template:function(e,t){1&e&&D.ad(0,jc,2,9,"button",0),2&e&&D.Cc("ngForOf",t.buttons)},directives:[F.s,Q.a,Zi.a],styles:[".tour-button[_ngcontent-%COMP%]{min-width:100px;padding-left:20px;padding-right:20px}"],changeDetection:0}),e}(),Ac=n("T4Sa"),Mc=n("zd2y"),Dc=n("hh8i"),Rc=n("diDk"),Lc=n("Xpu5"),Fc=n("S9z9"),Nc=n("P4Xx"),Bc=n("Hb7H"),Uc=function(){function e(e,t,n,i,r,a,o,s,c,u,l,p){this.commands=e,this.ll=t,this.stateSvc=n,this.datastore=i,this.datasync=r,this.reporter=a,this.pluginReg=o,this.realtimeState=s,this.defLocator=c,this.random=u,this.ell=l,this.modelSubManager=p,this.frameCountsWithDuration=[],this.frameCountStartTime=0}return e.prototype.initialize=function(){window.Debugger=this,window.Reporter=this.reporter,window.Flags=_.P},e.prototype.initEData=function(){this.defLocator.getDefinition("creately.edata.uml").subscribe(),this.defLocator.getDefinition("creately.edata.bpm").subscribe()},e.prototype.runEDataSub=function(){var e=this.commands.dispatch(Nn.a.startEDataSubscription,{resourceId:this.stateSvc.get("CurrentDiagram")});console.log("--- START EDATASSS ",e)},e.prototype.runEDataProjectSub=function(){var e=this.commands.dispatch(Bc.a.getProjectEData,this.stateSvc.get("CurrentProject"),null);console.log("--- START EDATASSS ",e)},e.prototype.runCreateEData=function(){var e=this;this.commands.dispatch(Hr.a.createEData,this.stateSvc.get("CurrentProject"),{id:this.random.diagramId(),defId:"creately.edata.uml"}).pipe(Object(Mn.a)(),Object(P.a)((function(t){if(t&&t.resultData[0]&&t.resultData[0].model){var n=t.resultData[0].model;return e.commands.dispatch(st.a.addEDataModel,{eDataModelId:n.id})}return li.a}))).subscribe()},e.prototype.loadCustomPlugin=function(e){this.pluginReg.load(e)},e.prototype.logStorageChanges=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_STORAGE_CHANGES",e)},e.prototype.logStateChanges=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_STATE_CHANGES",e)},e.prototype.logAppTracking=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_APP_TRACKING",e)},e.prototype.logCommandProgress=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_COMMAND_PROGRESS",e)},e.prototype.logObserverCounts=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_OBSERVER_COUNTS",e)},e.prototype.logSelectionChanges=function(){this.stateSvc.changes("Selected").subscribe((function(e){return console.log("Debugger: selection:",e)}))},e.prototype.getDiagramId=function(){return this.stateSvc.get("CurrentDiagram")},e.prototype.getSelection=function(){return this.stateSvc.get("Selected")},e.prototype.setSelection=function(e){return this.stateSvc.set("Selected",e)},e.prototype.getGridAreaCanvas=function(){return this.stateSvc.get("GridAreaCanvas")},e.prototype.getDiagramCanvas=function(){return this.stateSvc.get("DiagramCanvas")},e.prototype.getIndicatorCanvas=function(){return this.stateSvc.get("InteractionCanvas")},e.prototype.getDiagramFromDatabase=function(){this.datastore.findOneLatest(qi.a,{id:this.getDiagramId()}).subscribe((function(e){return console.log("Debugger: diagram from database:",e)}))},e.prototype.getDiagramFromLocator=function(e){void 0===e&&(e=!0),this.ll.forCurrent(e).getDiagramOnce().subscribe((function(e){return console.log("Debugger: diagram from locator:",e)}))},e.prototype.getDiagramModelChanges=function(){this.datastore.getModelStore(qi.a).findChanges({modelId:this.getDiagramId()}).pipe(Object(K.a)(1)).subscribe((function(e){return console.log("Debugger: changes from database:",e)}))},e.prototype.addDiagramModelChanges=function(e){this.datasync.applyChanges(qi.a,e).subscribe({complete:function(){return console.log("Debugger: changes added successfully")}})},e.prototype.connectPhoton=function(){},e.prototype.disconnectPhoton=function(){},e.prototype.enablePhotonPreviewSyncEmition=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_PHOTON_PREVIEW_SYNC_EMIT",e)},e.prototype.enablePhotonPreviewSyncReceiver=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_PHOTON_PREVIEW_SYNC_RECEIVE",e)},e.prototype.enablePhotonPointerMove=function(e){void 0===e&&(e=!0),_.P.set("DEBUG_PHOTON_POINTER_MOVE",e)},e.prototype.setRealtimePointerPosition=function(e,t){this.realtimeState.set("pointer",JSON.stringify([e,t]))},e.prototype.setRealtimePointerPositionRandomly=function(e,t,n,i,r){var a=this;void 0===e&&(e=200),void 0===t&&(t=5e3),void 0===n&&(n=500),void 0===i&&(i=250),void 0===r&&(r=100);var o=Date.now(),s=function(){var c=(Date.now()-o)%t/t,u=2*Math.PI*c,l=n+r*Math.cos(u),p=i+r*Math.sin(u);a.realtimeState.set("pointer",JSON.stringify([l,p])),setTimeout(s,e)};s()},e.prototype.dispatchCommandEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.commands).dispatch.apply(e,Object(w.j)(t)).subscribe((function(e){return console.log("Debugger: "+t[0]+":",e)}))},e.prototype.previewCommandEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.commands).preview.apply(e,Object(w.j)(t)).subscribe((function(e){return console.log("Debugger: "+t[0]+":",e)}))},e.prototype.createErrorReport=function(){return this.reporter.createErrorReport()},e.prototype.submitErrorReport=function(){this.reporter.submitErrorReport()},e.prototype.restoreDiagramData=function(e){var t=this.getDiagramId(),n=this.datastore.getModelStore(qi.a);n.findOneRaw({id:t}).pipe(Object(K.a)(1)).subscribe((function(t){n.collection.insert(Object(w.a)(Object(w.a)({},Object(T.cloneDeep)(e.diagram)),{id:t.id,lastChangeId:t.lastChangeId})),n.changeCollection.insert(e.changes.map((function(e){return Object(w.a)(Object(w.a)({},Object(T.cloneDeep)(e)),{modelId:t.id})})))}))},e.prototype.clearLocalData=function(){this.datastore.drop()},e.prototype.selectLikeSamal=function(e,t){var n=this;void 0===e&&(e=1e4),void 0===t&&(t=250),this.ll.forCurrent(!1).getDiagramOnce().subscribe((function(i){var r=Object.keys(i.shapes),a=Date.now(),o=function(){if(!(Date.now()>a+e)){var i=Math.floor(Math.random()*r.length),s=Object(T.sampleSize)(r,i);n.setSelection(s),setTimeout(o,t)}};o()}))},e.prototype.updateTexBounds=function(){this.dispatchCommandEvent("UpdateTextBounds")},e.prototype.startCanvasFPS=function(e){var t=this;void 0===e&&(e=2);var n=function(){if(_.P.get("DEBUG_FRAME_RATE")){if(0!==t.frameCountStartTime){var i=Date.now()-t.frameCountStartTime;t.frameCountsWithDuration.push({count:xi.FRAME_RATE_COUNT,duration:i})}t.frameCountStartTime=Date.now(),xi.FRAME_RATE_COUNT=0,setTimeout(n,1e3*e)}};_.P.set("DEBUG_FRAME_RATE",!0),0===this.frameCountsWithDuration.length&&(n(),console.log("Debugger: fps: Frame rate count started successfully."))},e.prototype.stopCanvasFPS=function(){_.P.set("DEBUG_FRAME_RATE",!1);var e=0,t=0;this.frameCountsWithDuration.forEach((function(n){e+=n.count,t+=n.duration/1e3,console.log("Debugger: fps: "+Math.round(n.count/(n.duration/1e3)))})),console.log("Debugger: average fps: "+Math.round(e/t)),xi.FRAME_RATE_COUNT=0,this.frameCountsWithDuration=[],this.frameCountStartTime=0},e.prototype.createCustomDB=function(e,t){var n=this;this.commands.dispatch(Hr.a.createEData,this.stateSvc.get("CurrentProject"),{id:e,defId:"creately.edata.custom",name:t}).pipe(Object(Mn.a)(),Object(P.a)((function(e){if(e&&e.resultData[0]&&e.resultData[0].model){var t=e.resultData[0].model;return n.commands.dispatch(st.a.addEDataModel,{eDataModelId:t.id})}throw new Error("Faild add the db to the diagram")})),Object(Mn.a)(),Object(P.a)((function(){return n.modelSubManager.start(Dc.a,e)}))).subscribe()},e.prototype.createType=function(e,t){var n=this,i=this.stateSvc.get("Selected");1===i.length&&this.ell.getEDataModel(e).pipe(Object(P.a)((function(r){if(r){var a=_.sb.entityId();return n.commands.dispatch(Lc.a.updateEntityDefs,e,{shapeId:i,entityDefId:a,entityDefName:t})}throw new Error("No edata model found")}))).subscribe()},e.prototype.updateType=function(e){var t=this,n=this.stateSvc.get("Selected");1===n.length&&this.ll.forCurrent(!1).getShapeOnce(n).pipe(Object(A.a)((function(i){if(i.eData&&!Object(T.isEmpty)(i.eData)){var r=Object.keys(i.eData)[0];return t.commands.dispatch(Lc.a.updateEntityDefs,r,{shapeId:n,entityDefId:i.entityDefId,entityDefName:e})}}))).subscribe()},e.prototype.makeTypeEditable=function(e,t,n){this.commands.dispatch(Lc.a.switchTypeEditable,e,{editable:n,entityDefId:t})},e.prototype.removeType=function(e,t){this.commands.dispatch(Lc.a.updateEntityDefs,e,{entityDefId:t,action:"delete"})},e.prototype.renameType=function(e,t,n){this.commands.dispatch(Lc.a.updateEntityDefs,e,{entityDefId:t,entityDefName:n,action:"rename"})},e.prototype.showDropdowns=function(e){void 0===e&&(e="body");var t=document.querySelector("#showDropdownsTempStyle");t||((t=document.createElement("style")).id="showDropdownsTempStyle",document.head.appendChild(t)),t.textContent=e+" ul.abs-dropdown-items-container{ display: block !important }"},e.prototype.deleteEdata=function(e){var t=this;this.ell.getEDataModel(e).pipe(Object(P.a)((function(n){if(!n)return Object(L.a)({});var i=n.getUsedDiagIds().map((function(n){return t.commands.dispatch(st.a.removeEdata,n,{eDataId:e}).pipe(Object(Mn.a)())}));return Object(Nc.a)(Object(w.j)([Object(L.a)({})],i))})),Object(P.a)((function(){return t.commands.dispatch(Bc.a.deleteEData,e,{modelType:Ws.a}).pipe(Object(Mn.a)())}))).subscribe()},e.prototype.hideErrors=function(){_.P.set("DEBUG_ERROR_NOTIFICATIONS",!0)},e.prototype.showErrors=function(){_.P.set("DEBUG_ERROR_NOTIFICATIONS",!1)},e.\u0275fac=function(t){return new(t||e)(D.pc(_.B),D.pc(M.a),D.pc(_.Jb),D.pc(Un.b),D.pc(Un.c),D.pc(Fc.a),D.pc(Hi.a),D.pc(Wi.b),D.pc(tc.a),D.pc(_.sb),D.pc(Rc.a),D.pc(Fn.d))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}();function zc(e,t){if(1&e&&(D.lc(0,"a",6),D.lc(1,"button",7),D.lc(2,"span",8),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc();D.Cc("routerLink",n.buttonLink),D.Sb(3),D.dd(n.buttonCaption)}}function Vc(e,t){if(1&e&&(D.lc(0,"a",9),D.lc(1,"button",7),D.lc(2,"span",8),D.cd(3),D.kc(),D.kc(),D.kc()),2&e){var n=D.xc();D.Cc("href",n.buttonLink,D.Rc),D.Sb(3),D.dd(n.buttonCaption)}}var Gc=function(e){return{"background-image":e}},Hc=function(){function e(){}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_HEADING"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_DESCRIPTION"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_BUTTON"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return _.m.get("PLAN_PAGE_URL")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return"https://creately-google-drive-integration.s3.amazonaws.com/google-drive-success-img-large.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"light"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-white-200X80.svg"},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=D.Zb({type:e,selectors:[["desktop-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],["alt","Creately",1,"logo","fx-floating",3,"src"],[1,"fullscreen-message"],["translate",""],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"nu-btn-med","fullscreen-button"],["translate","",1,"dark-blue"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.gc(1,"img",1),D.lc(2,"div",2),D.lc(3,"h1",3),D.cd(4),D.kc(),D.lc(5,"p",3),D.cd(6),D.kc(),D.kc(),D.lc(7,"div"),D.ad(8,zc,4,2,"a",4),D.ad(9,Vc,4,2,"a",5),D.kc(),D.kc()),2&e&&(D.Xb("light","light"===t.screenColor)("hasImage",t.image),D.Cc("ngStyle",D.Hc(10,Gc,"url("+t.image+")")),D.Sb(1),D.Cc("src",t.logo,D.Rc),D.Sb(3),D.dd(t.errorHeading),D.Sb(2),D.dd(t.errorMessage),D.Sb(2),D.Cc("ngIf",!t.externalLink),D.Sb(1),D.Cc("ngIf",t.externalLink))},directives:[F.w,Q.a,F.t,Oe.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:20px;flex-direction:column;background-color:#06263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#04263d;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:100px}.fullscreen-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-top:15px;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]:first-of-type{margin-top:30px}.fullscreen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:25px}.fullscreen-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:20px;font-family:lt_bold,Open Sans,sans-serif}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:20px;left:20px;width:120px}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:20px;max-width:400px}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline;font-size:16px}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:50px}"]}),e}(),Wc=function(){function e(e){this.data=e,this.name="PluginDocumentResponsibility"}return e.prototype.checkState=function(e){if(!e.states.diagramRequired)return Object(L.a)(!0);var t=this.data.getModelStore(qi.a);return Object(pi.a)(t.removeChanges({modelId:e.input.resourceId})).pipe(Object(ct.a)(!1))},e.prototype.nextResponsibility=function(e){return e.states.diagramRequired?["PluginAuthResponsibility"]:[]},e.prototype.result=function(e){return e.states.diagramRequired?{type:"command",action:"LoadDocument",wait:!e.states.PluginDocumentResponsibility,commandParams:{rid:e.input.resourceId,data:{}}}:{type:"complete"}},e.\u0275fac=function(t){return new(t||e)(D.pc(Un.b))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),Yc=function(){function e(){this.name="PluginAuthResponsibility"}return e.prototype.checkState=function(e){return Object(L.a)(Rn.b.AUTHENTICATED)},e.prototype.nextResponsibility=function(e){return[]},e.prototype.result=function(e){return{type:"complete"}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),Xc=n("A7ZO"),qc=function(){function e(e,t,n){this.loader=e,this.commandService=t,this.state=n,this.intervalDuration=6e4,this.isJobRunning=!1,this.listenToConnectionChanges()}return Object.defineProperty(e.prototype,"isOffline",{get:function(){return!window.navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;if(!this.isJobRunning&&!this.isOffline){this.isJobRunning=!0;var t=function(){setTimeout((function(){return Object(w.c)(e,void 0,void 0,(function(){return Object(w.f)(this,(function(e){switch(e.label){case 0:return[4,this.syncResource()];case 1:return e.sent()&&!this.isOffline?t():this.isJobRunning=!1,[2]}}))}))}),e.intervalDuration)};t()}},e.prototype.listenToConnectionChanges=function(){var e=this;this.state.changes(J.c).pipe(Object(Pn.a)((function(e){return e===J.c.ONLINE})),Object(A.a)((function(){return e.start()}))).subscribe()},e.prototype.syncResource=function(){var e=this;return this.loader.getPendingUploadResources().pipe(Object(K.a)(1),Object(Lt.a)((function(t){if(t.length>0){for(var n=0;n<t.length&&!t[n].id.startsWith(_.m.get("CUSTOM_IMAGE_BASE_URL"));)e.loader.setResourceStatus(t[n].id,I.s.Uploaded),n++;var i=t[n];return i&&i.id.startsWith(_.m.get("CUSTOM_IMAGE_BASE_URL"))&&(i.status?e.uploadResource(i):e.fetchResource(i.id).then((function(t){200===t.status?e.loader.setResourceStatus(i.id,I.s.Uploaded):e.uploadResource(i)}))),!0}return!1}))).toPromise()},e.prototype.fetchResource=function(e){return fetch(e,{method:"HEAD"})},e.prototype.uploadResource=function(e){var t=this.getInputForUpload(e);return this.commandService.dispatch(st.a.uploadImage,t)},e.prototype.getInputForUpload=function(e){var t=e.id.split("/").pop(),n=e.data.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/)[0];return{hash:t,data:e.data,name:"resource",type:n,extension:void 0}},e.\u0275fac=function(t){return new(t||e)(D.pc(_.zb),D.pc(_.B),D.pc(_.Jb))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),Kc=n("dKf+"),Jc=n("1JG0"),Zc=n("16Fa"),Qc=n("LZHD"),$c=function(e){function t(t){var n=e.call(this)||this;return n.injector=t,n}return Object(w.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&this.injector.get(Xi).userCount.value<e.maxUsage},t.\u0275fac=function(e){return new(e||t)(D.pc(D.C))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Rn.h),eu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(w.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&localStorage.googleSearchedCount<=e.maxUsage},t.\u0275fac=function(e){return tu(e||t)},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Rn.h),tu=D.nc(eu),nu=function(e){function t(t,n,i){var r=e.call(this)||this;return r.state=t,r.ll=n,r.collabLocator=i,Object(Ei.b)([r.state.changes("CurrentUser"),r.state.changes("CurrentDiagram")]).pipe(Object(Pn.a)((function(e){var t=Object(w.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(P.a)((function(e){var t=Object(w.h)(e,2),n=(t[0],t[1]);return Object(Be.a)(r.collabLocator.getCollabs(n).pipe(Object(Dn.a)(T.isEqual),Object(A.a)((function(e){var t=e.find((function(e){return e.role===ve.g.OWNER&&e.id!==r.state.get("CurrentUser")}));t&&t.plan?r.ownerUserPermModel=t.plan.permissions[I.r.DIAGRAM_ADD_SHAPES]:r.ownerUserPermModel=null}))),r.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramChanges()})),Object(P.a)((function(){return r.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramOnce().pipe(Object(A.a)((function(e){return r.shapeCount=Object.keys(e.shapes).length})))})))}))))}))).subscribe(),r}return Object(w.e)(t,e),t.prototype.check=function(e){return!!(e.allowed||this.ownerUserPermModel&&this.ownerUserPermModel.allowed)&&(!!(e.maxUsage<0||this.ownerUserPermModel&&this.ownerUserPermModel.maxUsage<0)||this.checkUseExceeded(e,this.ownerUserPermModel))},t.prototype.checkUseExceeded=function(e,t){return!!(e.maxUsage>0&&this.shapeCount<e.maxUsage||t&&t.maxUsage>0&&this.shapeCount<t.maxUsage)},t.\u0275fac=function(e){return new(e||t)(D.pc(_.Jb),D.pc(M.a),D.pc(_i.a))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Rn.h),iu=n("sXdR"),ru=function(){function e(e,t,n){this.realtimeStates=e,this.dcs=t,this.state=n,this.peerMap={},this.previewChangeThrottle=200,this.subs=[]}return e.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("RealtimeConnectionStatus").pipe(Object(Pn.a)((function(e){return e===Wi.a.ONLINE})),Object(K.a)(1),Object(P.a)((function(){return e.state.changes("CurrentDiagram").pipe(Object(P.a)((function(){return Object(Be.a)(e.updateRealtimeStateChanges(),e.listenToRealtimeStates(),e.listenToRemovedPeers())})))}))).subscribe())},e.prototype.listenToRealtimeStates=function(){var t=this;return this.realtimeStates.get(e.KEY_PREVIEW_CHANGES).pipe(Object(A.a)((function(e){if(_.P.get("DEBUG_PHOTON_PREVIEW_SYNC_RECEIVE")){var n=e.peerId;t.peerMap[n]||(t.peerMap[n]=new Dt.a,t.dcs.addPreviewStream(n,t.peerMap[e.peerId])),t.peerMap[n].next(JSON.parse(e.value))}})))},e.prototype.updateRealtimeStateChanges=function(){var t=this;return this.dcs.getPreviewChanges().pipe(Object(iu.lodashThrottle)(this.previewChangeThrottle),Object(A.a)((function(n){_.P.get("DEBUG_PHOTON_PREVIEW_SYNC_EMIT")&&t.realtimeStates.set(e.KEY_PREVIEW_CHANGES,JSON.stringify(n))})))},e.prototype.listenToRemovedPeers=function(){var e=this;return this.realtimeStates.removedPeers().pipe(Object(A.a)((function(t){e.dcs.removePreviewStream(t),e.peerMap[t]&&(e.peerMap[t].complete(),delete e.peerMap[t])})))},e.KEY_PREVIEW_CHANGES="previewchanges",e.\u0275fac=function(t){return new(t||e)(D.pc(Wi.b),D.pc(Kc.a),D.pc(_.Jb))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),au=n("y0dT"),ou=n("i+Vu"),su=n("nIj0"),cu=n("ulve"),uu=n("gcUQ"),lu=n("Cd2c"),pu=n("mFH5"),du=n("OOUj"),hu=n("SBjo"),fu=function(){function e(e,t){this.connection=e,this.commandService=t}return e.prototype.start=function(){this.userUpdateSubscription||(this.userUpdateSubscription=this.listenToUserUpdateMessages().subscribe())},e.prototype.listenToUserUpdateMessages=function(){var e=this;return this.connection.inStream.pipe(Object(Pn.a)((function(e){return"sub"===e.type&&"update"===e.msg&&"User"===e.sub})),Object(P.a)((function(t){return e.commandService.dispatch(Rn.u.updateUserPermission,t.ppld)})))},e.\u0275fac=function(t){return new(t||e)(D.pc(J.g),D.pc(_.B))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),gu=n("nzws"),mu=n("o9on"),vu=n("ZZOX"),bu=n("B5wR"),yu=n("F+Ww"),Cu=n("PIOu"),Ou=n("ccLb"),xu=n("okSW"),Su=n("pWGo"),ku=n("2aGL"),wu=n("EmgI"),Eu=n("4t+C"),Iu=n("QWbt");function Tu(e,t){1&e&&(D.lc(0,"div",8),D.cd(1," GLOBAL_SEARCH.DOCUMENT_SEARCH_NO_RESULTS "),D.kc())}function _u(e,t){1&e&&D.gc(0,"div",18)}function ju(e,t){if(1&e&&(D.lc(0,"div",15),D.ad(1,_u,1,0,"div",16),D.lc(2,"p",17),D.cd(3),D.kc(),D.kc()),2&e){var n=D.xc(),i=n.first,r=n.$implicit;D.Sb(1),D.Cc("ngIf",!i),D.Sb(2),D.dd(r.title)}}function Pu(e,t){if(1&e&&(D.lc(0,"div"),D.lc(1,"p",19),D.cd(2),D.kc(),D.kc()),2&e){var n=D.xc().$implicit;D.Sb(2),D.ed("",n.path,":")}}var Au=function(e){return{"document-item-selection":e}};function Mu(e,t){if(1&e){var n=D.mc();D.lc(0,"div",9),D.ad(1,ju,4,2,"div",10),D.lc(2,"div",11),D.tc("click",(function(){D.Oc(n);var e=t.$implicit;return D.xc(2).panToShape(e.action)})),D.ad(3,Pu,3,1,"div",12),D.lc(4,"p",13),D.gc(5,"span",14),D.kc(),D.kc(),D.kc()}if(2&e){var i=t.$implicit,r=t.index,a=D.xc(2);D.Sb(1),D.Cc("ngIf",a.shouldDisplayDiagramName(i)),D.Sb(1),D.Cc("ngClass",D.Hc(4,Au,r===a.selectedSearchResultsIndex)),D.Sb(1),D.Cc("ngIf",""!==i.path),D.Sb(2),D.Cc("innerHTML",i.text,D.Pc)}}var Du=function(){return{scrollYMarginOffset:1}};function Ru(e,t){if(1&e&&(D.lc(0,"div",2),D.lc(1,"div",3),D.ad(2,Tu,2,0,"div",4),D.kc(),D.lc(3,"perfect-scrollbar",5),D.lc(4,"div",6),D.ad(5,Mu,6,6,"div",7),D.kc(),D.kc(),D.kc()),2&e){var n=t.ngIf;D.Sb(2),D.Cc("ngIf",0===n.length),D.Sb(1),D.Cc("config",D.Gc(3,Du)),D.Sb(2),D.Cc("ngForOf",n)}}var Lu=function(){function e(e,t,n,i,r){this.searchService=e,this.state=t,this.linkService=n,this.translateService=i,this.ref=r,this.searchResults=new R.a([]),this.selectedSearchResultsIndex=-1,this.subs=[],this.lastDiagramId="",this.subs=[]}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("GlobalSearchText").pipe(Object(P.a)((function(t){return t&&t.searchText?(e.resetSelectedItem(),e.doSearch(t.searchText)):Object(L.a)({})}))).subscribe(),this.listenToArrowKeys().subscribe(),this.listenToEnterKey().subscribe())},e.prototype.shouldDisplayDiagramName=function(e){return e.diagramId!==this.lastDiagramId&&(this.lastDiagramId=e.diagramId,!0)},e.prototype.panToShape=function(e){this.linkService.navigate(ve.G.fromUrl(e))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.listenToArrowKeys=function(){var e=this;return Object(Ee.a)(window,"keydown").pipe(Object(Pn.a)((function(e){return e.keyCode===I.k.ArrowDown||e.keyCode===I.k.ArrowUp})),Object(A.a)((function(t){-1===e.selectedSearchResultsIndex?e.searchResults.value.length>0&&e.selectedSearchResultsIndex++:t.keyCode===I.k.ArrowDown?e.navigateToNextItem():t.keyCode===I.k.ArrowUp&&e.navigateToPreviousItem(),e.ref.markForCheck();var n=e.searchResults.value[e.selectedSearchResultsIndex];n&&e.panToShape(n.action)})))},e.prototype.listenToEnterKey=function(){var e=this;return Object(Ee.a)(window,"keydown").pipe(Object(Pn.a)((function(e){return e.keyCode===I.k.Enter})),Object(A.a)((function(t){e.selectedSearchResultsIndex>-1&&e.state.set("GlobalSearch",{state:Bn.c.CLOSE})})))},e.prototype.resetSelectedItem=function(){this.selectedSearchResultsIndex=-1,this.lastDiagramId=""},e.prototype.navigateToNextItem=function(){this.selectedSearchResultsIndex<this.searchResults.value.length-1&&this.selectedSearchResultsIndex++},e.prototype.navigateToPreviousItem=function(){this.selectedSearchResultsIndex>0&&this.selectedSearchResultsIndex--},e.prototype.doSearch=function(e){var t=this;return this.searchService.search(e,["document"],{keys:["text"],limit:10}).pipe(Object(A.a)((function(n){var i=JSON.parse(JSON.stringify(n)),r=t.adjustTextToFocus(i,e),a=t.highlightKeywordsInText(r,e),o=t.updateCurrentDiagramNames(a);t.searchResults.next(o)})))},e.prototype.updateCurrentDiagramNames=function(e){var t=this;return e=e.map((function(e){return e.diagramId===t.state.get("CurrentDiagram")&&(e.title=t.translateService.instant("LABELS.CURRENT_WORKSPACE")),e}))},e.prototype.adjustTextToFocus=function(e,t){var n=this;return e=e.map((function(e){return e.text=n.textAdjuster(e.text,t,7),e}))},e.prototype.textAdjuster=function(e,t,n){var i=e.indexOf(t);if(i>-1){var r=i+t.length,a=e.substring(r,e.length),o=e.substring(0,i).split(" "),s=o.length;if(s>n){for(var c=s-n,u="...",l=c=c>n?n:c;l>0;l--)u=u+o[s-l]+" ";e=u+" "+t+a}}return e},e.prototype.highlightKeywordsInText=function(e,t){var n=new RegExp(t,"gi");return e.map((function(e){return e.text=e.text.replace(n,"<span class='yellow'>"+t+"</span>"),e})),e},e.\u0275fac=function(t){return new(t||e)(D.fc(Oc.a),D.fc(_.Jb),D.fc(oe.a),D.fc(Q.e),D.fc(D.j))},e.\u0275cmp=D.Zb({type:e,selectors:[["document-search"]],decls:3,vars:3,consts:[[1,"fx-pointer-events-auto"],["class","search-results-dropdown-results",4,"ngIf"],[1,"search-results-dropdown-results"],[1,"document-search-result-header"],["translate","",4,"ngIf"],[1,"search-result-scrollbar",3,"config"],[1,"search-result-content"],["class","search-result-shapes",4,"ngFor","ngForOf"],["translate",""],[1,"search-result-shapes"],["class","document-search-title-container",4,"ngIf"],[1,"document-search-item-container",3,"ngClass","click"],[4,"ngIf"],[1,"document-line-item-text"],[3,"innerHTML"],[1,"document-search-title-container"],["class","separator-line",4,"ngIf"],[1,"document-search-title"],[1,"separator-line"],[1,"document-line-item-path"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.ad(1,Ru,6,4,"div",1),D.yc(2,"async"),D.kc()),2&e&&(D.Sb(1),D.Cc("ngIf",D.zc(2,1,t.searchResults)))},directives:[F.t,Ti.b,F.s,Q.a,F.q],pipes:[F.b],styles:[".document-line-item-text[_ngcontent-%COMP%]{display:block;align-items:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-weight:500}.document-line-item-text[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.document-line-item-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:1}.document-line-item-text[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.document-line-item-path[_ngcontent-%COMP%]{padding-right:5px}.document-search-item-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;padding:2px 5px;display:flex;flex-direction:row;justify-content:start}.document-search-item-container[_ngcontent-%COMP%]:hover{background:rgba(81,192,170,.2);border-radius:4px;padding-top:2px;padding-bottom:2px}.separator-line[_ngcontent-%COMP%]{position:absolute;width:600px;height:0;margin-top:0;opacity:1%;border:1px solid #eaeaea}.document-search-title[_ngcontent-%COMP%]{padding-top:10px;font-size:12px;color:#7e7e7e;font-weight:600}.document-item-selection[_ngcontent-%COMP%]{background:rgba(81,192,170,.2);border-radius:4px;padding-top:2px;padding-bottom:2px}.document-search-title-container[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.document-search-result-header[_ngcontent-%COMP%]{margin:5px}"],changeDetection:0}),e}(),Fu=n("zjfJ"),Nu=n("8K1b"),Bu=n("AqVP"),Uu=n("fGyu");function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){Object(Fu.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gu=n("9fIP"),Hu=n("MMYH");function Wu(e){return Array.isArray?Array.isArray(e):"[object Array]"===Qu(e)}function Yu(e){return"string"==typeof e}function Xu(e){return"number"==typeof e}function qu(e){return!0===e||!1===e||function(e){return Ku(e)&&null!==e}(e)&&"[object Boolean]"==Qu(e)}function Ku(e){return"object"==typeof e}function Ju(e){return null!=e}function Zu(e){return!e.trim().length}function Qu(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var $u=function(e){return"Invalid value for key ".concat(e)},el=function(e){return"Pattern length exceeds max of ".concat(e,".")},tl=Object.prototype.hasOwnProperty,nl=function(){function e(t){var n=this;Object(Gu.a)(this,e),this._keys=[],this._keyMap={};var i=0;t.forEach((function(e){var t=il(e);i+=t.weight,n._keys.push(t),n._keyMap[t.id]=t,i+=t.weight})),this._keys.forEach((function(e){e.weight/=i}))}return Object(Hu.a)(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function il(e){var t=null,n=null,i=null,r=1;if(Yu(e)||Wu(e))i=e,t=rl(e),n=al(e);else{if(!tl.call(e,"name"))throw new Error(function(e){return"Missing ".concat(e," property in key")}("name"));var a=e.name;if(i=a,tl.call(e,"weight")&&(r=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(a));t=rl(a),n=al(a)}return{path:t,id:n,weight:r,src:i}}function rl(e){return Wu(e)?e:e.split(".")}function al(e){return Wu(e)?e.join("."):e}var ol={useExtendedSearch:!1,getFn:function(e,t){var n=[],i=!1;return function e(t,r,a){if(Ju(t))if(r[a]){var o=t[r[a]];if(!Ju(o))return;if(a===r.length-1&&(Yu(o)||Xu(o)||qu(o)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(Wu(o)){i=!0;for(var s=0,c=o.length;s<c;s+=1)e(o[s],r,a+1)}else r.length&&e(o,r,a+1)}else n.push(t)}(e,Yu(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1},sl=Vu(Vu(Vu(Vu({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),ol),cl=/[^ ]+/g;function ul(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=new Map,n=Math.pow(10,e);return{get:function(e){var i=e.match(cl).length;if(t.has(i))return t.get(i);var r=1/Math.sqrt(i),a=parseFloat(Math.round(r*n)/n);return t.set(i,a),a},clear:function(){t.clear()}}}var ll=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getFn,i=void 0===n?sl.getFn:n;Object(Gu.a)(this,e),this.norm=ul(3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}return Object(Hu.a)(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach((function(t,n){e._keysMap[t.id]=n}))}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,Yu(this.docs[0])?this.docs.forEach((function(t,n){e._addString(t,n)})):this.docs.forEach((function(t,n){e._addObject(t,n)})),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();Yu(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(Ju(e)&&!Zu(e)){var n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}}},{key:"_addObject",value:function(e,t){var n=this,i={i:t,$:{}};this.keys.forEach((function(t,r){var a=n.getFn(e,t.path);if(Ju(a))if(Wu(a))!function(){for(var e=[],t=[{nestedArrIndex:-1,value:a}];t.length;){var o=t.pop(),s=o.nestedArrIndex,c=o.value;if(Ju(c))if(Yu(c)&&!Zu(c)){var u={v:c,i:s,n:n.norm.get(c)};e.push(u)}else Wu(c)&&c.forEach((function(e,n){t.push({nestedArrIndex:n,value:e})}))}i.$[r]=e}();else if(!Zu(a)){var o={v:a,n:n.norm.get(a)};i.$[r]=o}})),this.records.push(i)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function pl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.getFn,r=void 0===i?sl.getFn:i,a=new ll({getFn:r});return a.setKeys(e.map(il)),a.setSources(t),a.create(),a}function dl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.errors,i=void 0===n?0:n,r=t.currentLocation,a=void 0===r?0:r,o=t.expectedLocation,s=void 0===o?0:o,c=t.distance,u=void 0===c?sl.distance:c,l=t.ignoreLocation,p=void 0===l?sl.ignoreLocation:l,d=i/e.length;if(p)return d;var h=Math.abs(s-a);return u?d+h/u:h?1:d}function hl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sl.minMatchCharLength,n=[],i=-1,r=-1,a=0,o=e.length;a<o;a+=1){var s=e[a];s&&-1===i?i=a:s||-1===i||((r=a-1)-i+1>=t&&n.push([i,r]),i=-1)}return e[a-1]&&a-i>=t&&n.push([i,a-1]),n}var fl=32;function gl(e){for(var t={},n=0,i=e.length;n<i;n+=1){var r=e.charAt(n);t[r]=(t[r]||0)|1<<i-n-1}return t}var ml=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.location,a=void 0===r?sl.location:r,o=i.threshold,s=void 0===o?sl.threshold:o,c=i.distance,u=void 0===c?sl.distance:c,l=i.includeMatches,p=void 0===l?sl.includeMatches:l,d=i.findAllMatches,h=void 0===d?sl.findAllMatches:d,f=i.minMatchCharLength,g=void 0===f?sl.minMatchCharLength:f,m=i.isCaseSensitive,v=void 0===m?sl.isCaseSensitive:m,b=i.ignoreLocation,y=void 0===b?sl.ignoreLocation:b;if(Object(Gu.a)(this,e),this.options={location:a,threshold:s,distance:u,includeMatches:p,findAllMatches:h,minMatchCharLength:g,isCaseSensitive:v,ignoreLocation:y},this.pattern=v?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var C=function(e,t){n.chunks.push({pattern:e,alphabet:gl(e),startIndex:t})},O=this.pattern.length;if(O>fl){for(var x=0,S=O%fl,k=O-S;x<k;)C(this.pattern.substr(x,fl),x),x+=fl;if(S){var w=O-fl;C(this.pattern.substr(w),w)}}else C(this.pattern,0)}}return Object(Hu.a)(e,[{key:"searchIn",value:function(e){var t=this.options,n=t.isCaseSensitive,i=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var r={isMatch:!0,score:0};return i&&(r.indices=[[0,e.length-1]]),r}var a=this.options,o=a.location,s=a.distance,c=a.threshold,u=a.findAllMatches,l=a.minMatchCharLength,p=a.ignoreLocation,d=[],h=0,f=!1;this.chunks.forEach((function(t){var n=t.pattern,r=t.alphabet,a=t.startIndex,g=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.location,a=void 0===r?sl.location:r,o=i.distance,s=void 0===o?sl.distance:o,c=i.threshold,u=void 0===c?sl.threshold:c,l=i.findAllMatches,p=void 0===l?sl.findAllMatches:l,d=i.minMatchCharLength,h=void 0===d?sl.minMatchCharLength:d,f=i.includeMatches,g=void 0===f?sl.includeMatches:f,m=i.ignoreLocation,v=void 0===m?sl.ignoreLocation:m;if(t.length>fl)throw new Error(el(fl));for(var b,y=t.length,C=e.length,O=Math.max(0,Math.min(a,C)),x=u,S=O,k=h>1||g,w=k?Array(C):[];(b=e.indexOf(t,S))>-1;){var E=dl(t,{currentLocation:b,expectedLocation:O,distance:s,ignoreLocation:v});if(x=Math.min(E,x),S=b+y,k)for(var I=0;I<y;)w[b+I]=1,I+=1}S=-1;for(var T=[],_=1,j=y+C,P=1<<y-1,A=0;A<y;A+=1){for(var M=0,D=j;M<D;){dl(t,{errors:A,currentLocation:O+D,expectedLocation:O,distance:s,ignoreLocation:v})<=x?M=D:j=D,D=Math.floor((j-M)/2+M)}j=D;var R=Math.max(1,O-D+1),L=p?C:Math.min(O+D,C)+y,F=Array(L+2);F[L+1]=(1<<A)-1;for(var N=L;N>=R;N-=1){var B=N-1,U=n[e.charAt(B)];if(k&&(w[B]=+!!U),F[N]=(F[N+1]<<1|1)&U,A&&(F[N]|=(T[N+1]|T[N])<<1|1|T[N+1]),F[N]&P&&(_=dl(t,{errors:A,currentLocation:B,expectedLocation:O,distance:s,ignoreLocation:v}))<=x){if(x=_,(S=B)<=O)break;R=Math.max(1,2*O-S)}}if(dl(t,{errors:A+1,currentLocation:O,expectedLocation:O,distance:s,ignoreLocation:v})>x)break;T=F}var z={isMatch:S>=0,score:Math.max(.001,_)};if(k){var V=hl(w,h);V.length?g&&(z.indices=V):z.isMatch=!1}return z}(e,n,r,{location:o+a,distance:s,threshold:c,findAllMatches:u,minMatchCharLength:l,includeMatches:i,ignoreLocation:p}),m=g.isMatch,v=g.score,b=g.indices;m&&(f=!0),h+=v,m&&b&&(d=[].concat(Object(Uu.a)(d),Object(Uu.a)(b)))}));var g={isMatch:f,score:f?h/this.chunks.length:1};return f&&i&&(g.indices=d),g}}]),e}(),vl=function(){function e(t){Object(Gu.a)(this,e),this.pattern=t}return Object(Hu.a)(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return bl(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return bl(e,this.singleRegex)}}]),e}();function bl(e,t){var n=e.match(t);return n?n[1]:null}var yl=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),n}(vl),Cl=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),n}(vl),Ol=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),n}(vl),xl=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),n}(vl),Sl=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),n}(vl),kl=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),n}(vl),wl=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.location,o=void 0===a?sl.location:a,s=r.threshold,c=void 0===s?sl.threshold:s,u=r.distance,l=void 0===u?sl.distance:u,p=r.includeMatches,d=void 0===p?sl.includeMatches:p,h=r.findAllMatches,f=void 0===h?sl.findAllMatches:h,g=r.minMatchCharLength,m=void 0===g?sl.minMatchCharLength:g,v=r.isCaseSensitive,b=void 0===v?sl.isCaseSensitive:v,y=r.ignoreLocation,C=void 0===y?sl.ignoreLocation:y;return Object(Gu.a)(this,n),(i=t.call(this,e))._bitapSearch=new ml(e,{location:o,threshold:c,distance:l,includeMatches:d,findAllMatches:f,minMatchCharLength:m,isCaseSensitive:b,ignoreLocation:C}),i}return Object(Hu.a)(n,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),n}(vl),El=function(e){Object(Nu.a)(n,e);var t=Object(Bu.a)(n);function n(e){return Object(Gu.a)(this,n),t.call(this,e)}return Object(Hu.a)(n,[{key:"search",value:function(e){for(var t,n=0,i=[],r=this.pattern.length;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,i.push([t,n-1]);var a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),n}(vl),Il=[yl,El,Ol,xl,kl,Sl,Cl,wl],Tl=Il.length,_l=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function jl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((function(e){for(var n=e.trim().split(_l).filter((function(e){return e&&!!e.trim()})),i=[],r=0,a=n.length;r<a;r+=1){for(var o=n[r],s=!1,c=-1;!s&&++c<Tl;){var u=Il[c],l=u.isMultiMatch(o);l&&(i.push(new u(l,t)),s=!0)}if(!s)for(c=-1;++c<Tl;){var p=Il[c],d=p.isSingleMatch(o);if(d){i.push(new p(d,t));break}}}return i}))}var Pl=new Set([wl.type,El.type]),Al=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isCaseSensitive,r=void 0===i?sl.isCaseSensitive:i,a=n.includeMatches,o=void 0===a?sl.includeMatches:a,s=n.minMatchCharLength,c=void 0===s?sl.minMatchCharLength:s,u=n.ignoreLocation,l=void 0===u?sl.ignoreLocation:u,p=n.findAllMatches,d=void 0===p?sl.findAllMatches:p,h=n.location,f=void 0===h?sl.location:h,g=n.threshold,m=void 0===g?sl.threshold:g,v=n.distance,b=void 0===v?sl.distance:v;Object(Gu.a)(this,e),this.query=null,this.options={isCaseSensitive:r,includeMatches:o,minMatchCharLength:c,findAllMatches:d,ignoreLocation:l,location:f,threshold:m,distance:b},this.pattern=r?t:t.toLowerCase(),this.query=jl(this.pattern,this.options)}return Object(Hu.a)(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var n=this.options,i=n.includeMatches;e=n.isCaseSensitive?e:e.toLowerCase();for(var r=0,a=[],o=0,s=0,c=t.length;s<c;s+=1){var u=t[s];a.length=0,r=0;for(var l=0,p=u.length;l<p;l+=1){var d=u[l],h=d.search(e),f=h.isMatch,g=h.indices,m=h.score;if(!f){o=0,r=0,a.length=0;break}if(r+=1,o+=m,i){var v=d.constructor.type;Pl.has(v)?a=[].concat(Object(Uu.a)(a),Object(Uu.a)(g)):a.push(g)}}if(r){var b={isMatch:!0,score:o/r};return i&&(b.indices=a),b}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),Ml=[];function Dl(e,t){for(var n=0,i=Ml.length;n<i;n+=1){var r=Ml[n];if(r.condition(e,t))return new r(e,t)}return new ml(e,t)}var Rl="$and",Ll="$or",Fl="$path",Nl="$val",Bl=function(e){return!(!e[Rl]&&!e[Ll])},Ul=function(e){return!!e[Fl]},zl=function(e){return!Wu(e)&&Ku(e)&&!Bl(e)},Vl=function(e){return Object(Fu.a)({},Rl,Object.keys(e).map((function(t){return Object(Fu.a)({},t,e[t])})))};function Gl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.auto,r=void 0===i||i,a=function e(n){var i=Object.keys(n),a=Ul(n);if(!a&&i.length>1&&!Bl(n))return e(Vl(n));if(zl(n)){var o=a?n[Fl]:i[0],s=a?n[Nl]:n[o];if(!Yu(s))throw new Error($u(o));var c={keyId:al(o),pattern:s};return r&&(c.searcher=Dl(s,t)),c}var u={children:[],operator:i[0]};return i.forEach((function(t){var i=n[t];Wu(i)&&i.forEach((function(t){u.children.push(e(t))}))})),u};return Bl(e)||(e=Vl(e)),a(e)}function Hl(e,t){var n=t.ignoreFieldNorm,i=void 0===n?sl.ignoreFieldNorm:n;e.forEach((function(e){var t=1;e.matches.forEach((function(e){var n=e.key,r=e.norm,a=e.score,o=n?n.weight:null;t*=Math.pow(0===a&&o?Number.EPSILON:a,(o||1)*(i?1:r))})),e.score=t}))}function Wl(e,t){var n=e.matches;t.matches=[],Ju(n)&&n.forEach((function(e){if(Ju(e.indices)&&e.indices.length){var n={indices:e.indices,value:e.value};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)}}))}function Yl(e,t){t.score=e.score}function Xl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.includeMatches,r=void 0===i?sl.includeMatches:i,a=n.includeScore,o=void 0===a?sl.includeScore:a,s=[];return r&&s.push(Wl),o&&s.push(Yl),e.map((function(e){var n=e.idx,i={item:t[n],refIndex:n};return s.length&&s.forEach((function(t){t(e,i)})),i}))}var ql=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;Object(Gu.a)(this,e),this.options=Vu(Vu({},sl),n),this.options.useExtendedSearch,this._keyStore=new nl(this.options.keys),this.setCollection(t,i)}return Object(Hu.a)(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof ll))throw new Error("Incorrect 'index' type");this._myIndex=t||pl(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){Ju(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],n=0,i=this._docs.length;n<i;n+=1){var r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,t.push(r))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.limit,i=void 0===n?-1:n,r=this.options,a=r.includeMatches,o=r.includeScore,s=r.shouldSort,c=r.sortFn,u=r.ignoreFieldNorm,l=Yu(e)?Yu(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Hl(l,{ignoreFieldNorm:u}),s&&l.sort(c),Xu(i)&&i>-1&&(l=l.slice(0,i)),Xl(l,this._docs,{includeMatches:a,includeScore:o})}},{key:"_searchStringList",value:function(e){var t=Dl(e,this.options),n=this._myIndex.records,i=[];return n.forEach((function(e){var n=e.v,r=e.i,a=e.n;if(Ju(n)){var o=t.searchIn(n),s=o.isMatch,c=o.score,u=o.indices;s&&i.push({item:n,idx:r,matches:[{score:c,value:n,norm:a,indices:u}]})}})),i}},{key:"_searchLogical",value:function(e){var t=this,n=Gl(e,this.options),i=this._myIndex.records,r={},a=[];return i.forEach((function(e){var i=e.$,o=e.i;if(Ju(i)){var s=function e(n,i,r){if(!n.children){var a=n.keyId,o=n.searcher,s=t._findMatches({key:t._keyStore.get(a),value:t._myIndex.getValueForItemAtKeyId(i,a),searcher:o});return s&&s.length?[{idx:r,item:i,matches:s}]:[]}switch(n.operator){case Rl:for(var c=[],u=0,l=n.children.length;u<l;u+=1){var p=e(n.children[u],i,r);if(!p.length)return[];c.push.apply(c,Object(Uu.a)(p))}return c;case Ll:for(var d=[],h=0,f=n.children.length;h<f;h+=1){var g=e(n.children[h],i,r);if(g.length){d.push.apply(d,Object(Uu.a)(g));break}}return d}}(n,i,o);s.length&&(r[o]||(r[o]={idx:o,item:i,matches:[]},a.push(r[o])),s.forEach((function(e){var t,n=e.matches;(t=r[o].matches).push.apply(t,Object(Uu.a)(n))})))}})),a}},{key:"_searchObjectList",value:function(e){var t=this,n=Dl(e,this.options),i=this._myIndex,r=i.keys,a=i.records,o=[];return a.forEach((function(e){var i=e.$,a=e.i;if(Ju(i)){var s=[];r.forEach((function(e,r){s.push.apply(s,Object(Uu.a)(t._findMatches({key:e,value:i[r],searcher:n})))})),s.length&&o.push({idx:a,item:i,matches:s})}})),o}},{key:"_findMatches",value:function(e){var t=e.key,n=e.value,i=e.searcher;if(!Ju(n))return[];var r=[];if(Wu(n))n.forEach((function(e){var n=e.v,a=e.i,o=e.n;if(Ju(n)){var s=i.searchIn(n),c=s.isMatch,u=s.score,l=s.indices;c&&r.push({score:u,key:t,value:n,idx:a,norm:o,indices:l})}}));else{var a=n.v,o=n.n,s=i.searchIn(a),c=s.isMatch,u=s.score,l=s.indices;c&&r.push({score:u,key:t,value:a,norm:o,indices:l})}return r}}]),e}();ql.version="6.4.6",ql.createIndex=pl,ql.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getFn,i=void 0===n?sl.getFn:n,r=e.keys,a=e.records,o=new ll({getFn:i});return o.setKeys(r),o.setIndexRecords(a),o},ql.config=sl,ql.parseQuery=Gl,function(){Ml.push.apply(Ml,arguments)}(Al);var Kl=ql,Jl=function(){function e(){}return e.prototype.prepareCollection=function(e,t,n){var i={includeScore:!0,shouldSort:!0,threshold:.4,ignoreFieldNorm:!0,ignoreLocation:!0,keys:t,useExtendedSearch:!0};if(n){var r=Kl.parseIndex(n);this.fuseIndex=new Kl(e,i,r)}else this.fuseIndex=new Kl(e,i)},e.prototype.addCollection=function(e){var t=this;e.forEach((function(e){t.addDocument(e)}))},e.prototype.addDocument=function(e){this.fuseIndex.add(e)},e.prototype.removeDocument=function(e){this.fuseIndex.remove(e)},e.prototype.getIndexSize=function(){return this.fuseIndex?this.fuseIndex.getIndex().size():0},e.prototype.searchCollection=function(e,t){return this.fuseIndex?this.fuseIndex.search(e,t):[]},e}(),Zl=n("ioBB"),Ql=function(){function e(e,t,n,i,r){this.definitionLocator=e,this.datastore=t,this.ll=n,this.state=i,this.workerRegistry=r,this.fuseModel=new Jl,this.delayLoadingColection=3e3,this.type="document",this.workerRegistry.register("document-search","./document-search-web.worker"),this.documentSearchWorker=this.workerRegistry.fetch("document-search"),this.watchOnCollectionChanges(),this.listenToWorkerMessage(),this.isServiceWorkerSupported&&this.listenToWorkspaceCachingServiceWorker()}return Object.defineProperty(e.prototype,"isServiceWorkerSupported",{get:function(){return"serviceWorker"in navigator},enumerable:!1,configurable:!0}),e.prototype.search=function(e,t){var n=this.fuseModel.searchCollection(e,t);n=n.map((function(e){return e.item.score=e.score,e.item}));var i=this.sortItemsByProperty(n,["diagramId","score"]),r=this.bringGivenDiagramsToTop(i,this.state.get("CurrentDiagram"));return Object(L.a)(r)},e.prototype.listenToWorkspaceCachingServiceWorker=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){"workspace-caching-completed"===t.data.message&&setTimeout((function(){e.loadAllCollections()}),e.delayLoadingColection)}))},e.prototype.listenToWorkerMessage=function(){var e=this;this.documentSearchWorker.onmessage=function(t){var n=t.data;"loaded-collection"===n.message?e.prepareFuseCollection(JSON.parse(n.fuse)):"remove-document"===n.message?e.removeFuseDocument(n.documentId):"add-collection"===n.message&&(e.fuseModel.getIndexSize()>0?e.addFuseCollection(n.collection):e.prepareFuseCollection({fuseIndex:null,collection:n.collection}))}},e.prototype.removeFuseDocument=function(e){this.fuseModel.removeDocument((function(t){return t.id===e}))},e.prototype.addFuseCollection=function(e){e.forEach((function(e){e.action=_.m.get("APP_URL")+"/diagram/"+e.diagramId+"/edit/shape/"+e.shapeId})),e&&e.length>0&&this.fuseModel.addCollection(e)},e.prototype.prepareFuseCollection=function(e){e&&(e.collection.forEach((function(e){e.action=_.m.get("APP_URL")+"/diagram/"+e.diagramId+"/edit/shape/"+e.shapeId})),this.fuseModel.prepareCollection(e.collection,["text"],e.fuseIndex))},e.prototype.loadAllCollections=function(){this.documentSearchWorker.postMessage({message:"start-load-collection",defs:this.definitionLocator.getCachedDefs()})},e.prototype.watchOnCollectionChanges=function(){var e=this;this.datastore.watch(qi.a,{}).pipe(Object(A.a)((function(t){0===e.fuseModel.getIndexSize()&&e.loadAllCollections(),e.documentSearchWorker.postMessage({message:"update-collection-changes",collection:t,defs:e.definitionLocator.getCachedDefs()})}))).subscribe()},e.prototype.sortItemsByProperty=function(e,t,n){return void 0===n&&(n="~"),e.sort((function(e,i){var r=t.reduce((function(t,i){return t+n+e[i]}),""),a=t.reduce((function(e,t){return e+n+i[t]}),"");return r.localeCompare(a)}))},e.prototype.bringGivenDiagramsToTop=function(e,t){var n=e.filter((function(e){return e.diagramId===t})),i=e.filter((function(e){return e.diagramId!==t}));return Object(w.j)(n,i)},e.\u0275fac=function(t){return new(t||e)(D.pc(tc.a),D.pc(Un.b),D.pc(M.a),D.pc(_.Jb),D.pc(Zl.a))},e.\u0275prov=D.bc({token:e,factory:e.\u0275fac}),e}(),$l=function(e){function t(t,n){var i=e.call(this)||this;return i.state=t,i.ll=n,Object(Ei.b)([i.state.changes("CurrentUser"),i.state.changes("CurrentDiagram")]).pipe(Object(Pn.a)((function(e){var t=Object(w.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(P.a)((function(){return i.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramChanges()})),Object(P.a)((function(){return i.ll.forCurrentObserver(!1).pipe(Object(P.a)((function(e){return e.getDiagramOnce().pipe(Object(A.a)((function(e){i.imageCount=Object.values(e.shapes).filter((function(e){return e.type===I.u.Image})).length})))})))})))}))).subscribe(),i}return Object(w.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&this.imageCount<e.maxUsage},t.\u0275fac=function(e){return new(e||t)(D.pc(_.Jb),D.pc(M.a))},t.\u0275prov=D.bc({token:t,factory:t.\u0275fac}),t}(Rn.h),ep=n("XRvk"),tp=n("xcrX"),np=n("wuOO"),ip=n("J8oI"),rp=n("c6sW"),ap=n("RrMq"),op=n("VT3A"),sp=n("Ax/4"),cp=n("CSUU"),up=n("RTAa"),lp=function(){return{event:"notification.panel.markRead.click"}};function pp(e,t){if(1&e){var n=D.mc();D.lc(0,"div",11),D.tc("click",(function(){return D.Oc(n),D.xc().markAsRead()})),D.lc(1,"span",12),D.cd(2,"TOOLTIPS.NOTIFICATION.MARK_AS_READ"),D.kc(),D.wc(),D.lc(3,"svg",13),D.gc(4,"use",14),D.kc(),D.lc(5,"svg",15),D.gc(6,"use",16),D.kc(),D.kc()}2&e&&D.Cc("trackAction",D.Gc(1,lp))}var dp=function(e){return{cursor:e}},hp=function(){function e(e,t,n,i,r){this.translateService=e,this.commandService=t,this.stateService=n,this.modelSubManager=i,this.diagramNavigation=r}return Object.defineProperty(e.prototype,"actorName",{get:function(){var e,t;return(null===(e=this.notification.actorInfo)||void 0===e?void 0:e.fullName)||(null===(t=this.notification.actorInfo)||void 0===t?void 0:t.email)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRead",{get:function(){return this.notification.seen},enumerable:!1,configurable:!0}),e.prototype.markAsRead=function(){this.commandService.dispatch(Yn.markGlobalNotificationRead,{notificationIds:[this.notification._id]})},e.prototype.openReferingResource=function(){this.notification.seen||this.markAsRead(),this.canNavigateToResource()&&("DIAGRAM"===this.notification.resourceType?this.navToSelectedDiagram(this.notification.resourceId):"PROJECT"===this.notification.resourceType&&this.openFolderpanel(this.notification.resourceId))},e.prototype.canNavigateToResource=function(){return!this.notification.key.endsWith(".delete")},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.stateService.get("CurrentDiagram");"start"!==n?n===e?this.stateService.get("InterfaceControlState")===Xn.a.Edit&&this.stateService.set("SelectedLeftPanel","shapes"):this.modelSubManager.stop(this.stateService.get("CurrentDiagram"),!0).pipe(Object(K.a)(1),Object(A.a)((function(){return t.navigateToDiagram(e)}))).subscribe():this.navigateToDiagram(e)},e.prototype.openFolderpanel=function(e){this.stateService.set("SelectedLeftPanel","folders"),this.stateService.set("FolderPanelSelectedTab","diagrams"),this.stateService.set("FolderPanelSelectedProject",e)},e.prototype.navigateToDiagram=function(e){var t=this.stateService.get("InterfaceControlState")===Xn.a.View?"view":"edit";this.diagramNavigation.navigateToDiagram(e,t)},e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e),D.fc(_.B),D.fc(_.Jb),D.fc(Fn.d),D.fc(up.a))},e.\u0275cmp=D.Zb({type:e,selectors:[["notification-list-item"]],inputs:{notification:"notification"},decls:15,vars:18,consts:[[1,"notification-list-item-container","user-img-show-indicator",3,"click"],[1,"notification-list-item-user-image"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],[1,"nu-icon","nu-icon-med","nu-ic-notification-action"],[1,"notification-list-item-inner",3,"ngStyle"],[1,"notification-list-item-notification-row"],[1,"notification-list-item-notification-email","fx-ellipsis","grey","nu-text-xsmall"],["class","notification-list-item-is-read","tooltip","","placement","bottom",3,"trackAction","click",4,"ngIf"],[1,"notification-list-item-notification-text-row"],[1,"notification-list-item-notification-text","nu-text-small",3,"innerHTML"],[1,"notification-list-item-notification-time","fx-ellipsis","grey"],["tooltip","","placement","bottom",1,"notification-list-item-is-read",3,"trackAction","click"],["translate","",1,"tooltip-content"],[1,"nu-icon","nu-icon-xsmall","nu-ic-ellipse"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-ellipse"],[1,"nu-icon","nu-icon-xsmall","nu-ic-notification-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notification-tick"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.tc("click",(function(){return t.openReferingResource()})),D.lc(1,"div",1),D.gc(2,"user-image",2),D.wc(),D.lc(3,"svg",3),D.gc(4,"use"),D.kc(),D.kc(),D.vc(),D.lc(5,"div",4),D.lc(6,"div",5),D.lc(7,"p",6),D.cd(8),D.kc(),D.ad(9,pp,7,2,"div",7),D.kc(),D.lc(10,"div",8),D.gc(11,"p",9),D.yc(12,"safeHTML"),D.lc(13,"p",10),D.cd(14),D.kc(),D.kc(),D.kc(),D.kc()),2&e&&(D.Xb("notification-list-item-container-seen",!t.isRead),D.Sb(2),D.Cc("hasImage",t.notification.actorInfo.hasImage)("imagePath",t.notification.actorInfo.image)("userColor",t.notification.actorInfo.getColor())("userInitials",t.notification.actorInfo.initial)("userRegistered",!0)("userOnlineStatus",!0),D.Sb(2),D.Tb("href",t.notification.actionSVG,null,"xlink"),D.Sb(1),D.Cc("ngStyle",D.Hc(16,dp,t.canNavigateToResource()?"pointer":"default")),D.Sb(3),D.dd(t.actorName),D.Sb(1),D.Cc("ngIf",!t.isRead),D.Sb(2),D.Cc("innerHTML",D.zc(12,14,t.notification.translatedContentHTML),D.Pc),D.Sb(3),D.dd(t.notification.formatedTime))},directives:[Pi.a,F.w,F.t,Te.a,Zi.a,Q.a],pipes:[Pr.a],styles:[".notification-list-item-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1px;padding-left:10px}.notification-list-item-container-seen[_ngcontent-%COMP%]{background:#f6f8fa}.notification-list-item-inner[_ngcontent-%COMP%]{flex:1}.notification-list-item-notification-text[_ngcontent-%COMP%]{line-height:17px;max-width:260px;font-family:lt_regular,Open Sans,sans-serif;font-size:14px}.notification-list-item-notification-email[_ngcontent-%COMP%]{line-height:14px;max-width:280px}.notification-list-item-notification-time[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:12px;line-height:14px;font-family:lt_regular,Open Sans,sans-serif;width:66px;text-align:right}.notification-list-item-user-image[_ngcontent-%COMP%]{margin-right:15px;position:relative}.notification-list-item-remove[_ngcontent-%COMP%]{margin-right:15px;margin-left:55px}.notification-list-item-dropdown[_ngcontent-%COMP%]  .dropdown-container{min-width:100px}.notification-list-item-owner[_ngcontent-%COMP%]{width:138px}.notification-list-item-notification-row[_ngcontent-%COMP%]{align-items:center;padding-top:17px;padding-bottom:5px}.notification-list-item-notification-row[_ngcontent-%COMP%], .notification-list-item-notification-text-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;padding-right:10px}.notification-list-item-notification-text-row[_ngcontent-%COMP%]{align-items:baseline;padding-bottom:17px;overflow-wrap:break-word}.notification-list-item-is-read[_ngcontent-%COMP%]{height:14px}.notification-list-item-is-read[_ngcontent-%COMP%]   .nu-ic-notification-tick[_ngcontent-%COMP%], .notification-list-item-is-read[_ngcontent-%COMP%]:hover   .nu-ic-ellipse[_ngcontent-%COMP%]{display:none}.notification-list-item-is-read[_ngcontent-%COMP%]:hover   .nu-ic-notification-tick[_ngcontent-%COMP%]{display:block}.nu-ic-notification-action[_ngcontent-%COMP%]{position:absolute;top:10px;left:15px}"]}),e}(),fp=n("AM7v"),gp=n("u7ZA"),mp=n("u80+"),vp=n("I4UX"),bp=n("nWGD"),yp=n("aYRE"),Cp=n("7n9Q"),Op=n("/ege"),xp=n("bq/2"),Sp=n("eaE7"),kp=n("BJDd"),wp=n("hb43"),Ep=n("UfOR"),Ip=n("S8c2"),Tp=n("fdBj"),_p=n("LX6Z"),jp=n("6uE6"),Pp=n("Ownj"),Ap=n("Y4mt"),Mp=n("rPyh"),Dp=n("sIsI"),Rp=n("nmkj"),Lp=n("OlX0"),Fp=n("igS9"),Np=n("zEy6"),Bp=n("0Ohc"),Up=n("am3J"),zp=n("+ZK7"),Vp=n("vd2+"),Gp=n("HF29"),Hp=n("QVgP"),Wp=n("qtZD"),Yp=n("bMav"),Xp=n("T4H+"),qp=n("NvYU"),Kp=n("lQIu");function Jp(e,t){if(1&e){var n=D.mc();D.lc(0,"button",6),D.tc("click",(function(){D.Oc(n);var e=t.$implicit,i=D.xc();return i.selected.next(e.rating),i.expandCard=!0})),D.yc(1,"async"),D.yc(2,"async"),D.gc(3,"img",7),D.cd(4),D.yc(5,"async"),D.kc()}if(2&e){var i=t.$implicit,r=D.xc();D.Xb("selected",D.zc(1,7,r.selected)==i.rating)("has-selected",D.zc(2,9,r.selected)),D.Sb(3),D.Ec("src","./assets/images/emoticons/",i.url,"",D.Rc),D.Dc("width",i.size),D.Sb(1),D.ed(" ",D.zc(5,11,r.selectedRating)," ")}}var Zp=function(){function e(e){this.translate=e,this.expandCard=!1,this.emotions=[{url:"love.svg",rating:5,size:47},{url:"happy.svg",rating:4,size:47},{url:"meh.svg",rating:3,size:47},{url:"disappointed.svg",rating:2,size:47},{url:"dislike.svg",rating:1,size:49}],this.selected=new R.a(void 0)}return Object.defineProperty(e.prototype,"userRating",{set:function(e){e!==this.selected.value&&this.selected.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportUrl",{get:function(){return Me.a.get("ZENDESK_CONTACT_US_URL")},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(D.fc(Q.e))},e.\u0275cmp=D.Zb({type:e,selectors:[["help-card-emoticon-rating"]],inputs:{userRating:"userRating"},outputs:{selected:"selected"},decls:10,vars:10,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"emoticon-container","fx-margin-bottom-20","fx-margin-top-20"],["class","emoticon-button fx-button fx-icon",3,"selected","has-selected","click",4,"ngFor","ngForOf"],[1,"emoticon-link","fx-center"],["target","_blank",1,"primary",3,"href"],[1,"emoticon-button","fx-button","fx-icon",3,"click"],[3,"src","width"]],template:function(e,t){1&e&&(D.lc(0,"div",0),D.lc(1,"h2",1),D.cd(2),D.yc(3,"async"),D.kc(),D.lc(4,"div",2),D.ad(5,Jp,6,13,"button",3),D.kc(),D.lc(6,"div",4),D.lc(7,"a",5),D.cd(8),D.yc(9,"async"),D.kc(),D.kc(),D.kc()),2&e&&(D.Sb(2),D.dd(D.zc(3,6,t.translate.get("HELP.EXP_SO_FAR"))),D.Sb(3),D.Cc("ngForOf",t.emotions),D.Sb(1),D.Xb("show-link",t.expandCard),D.Sb(1),D.Dc("href",t.supportUrl,D.Rc),D.Sb(1),D.ed(" ",D.zc(9,8,t.translate.get("HELP.TELL_US"))," "))},directives:[F.s],pipes:[F.b],styles:['.emoticon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;height:50px}.emoticon-button[_ngcontent-%COMP%]{transform:scale(1);transition:transform .3s ease-in-out,opacity .3s ease-in-out;position:relative}.emoticon-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:1}.emoticon-button.has-selected[_ngcontent-%COMP%]{opacity:.5}.emoticon-button.selected[_ngcontent-%COMP%]{opacity:1}.emoticon-button.selected[_ngcontent-%COMP%]:before{background-image:url(/assets/images/emoticons/selected.svg);content:" ";height:18px;width:18px;display:block;position:absolute;bottom:0;right:0}.emoticon-link[_ngcontent-%COMP%]{transition:height .3s cubic-bezier(.68,-.55,.265,1.55);height:0;line-height:30px;overflow:hidden}.emoticon-link.show-link[_ngcontent-%COMP%]{height:30px}'],changeDetection:0}),e}(),Qp=n("52aJ"),$p=n("8RvG"),ed=n("WpxP"),td=n("s1Pg"),nd=n("1GLe"),id=n("qvOF"),rd=n("E5oP"),ad=n("H0K4"),od=function(){function e(){}return e.match=function(e){if(e.length>0){var t=e[0].path;if(t.startsWith("edit")||t.startsWith("dashboard"))return{consumed:e}}return null},e}(),sd=[{path:"edit-permission-error",component:oc,canActivate:[Wt.a]},{path:"view-permission-error",component:lc,canActivate:[Wt.a]},{path:"desktop-permission-error",component:Hc,canActivate:[Wt.a]},{path:"new/project/:project",canActivate:[gu.a],component:Ds},{path:"",runGuardsAndResolvers:"always",component:Ds,canDeactivate:[Gs],canActivate:[Gs],resolve:[Gs],children:[{path:"view",loadChildren:function(){return Promise.all([n.e(1),n.e(30)]).then(n.bind(null,"SDYM")).then((function(e){return e.ViewerModule}))}},{matcher:od.match,loadChildren:function(){return Promise.all([n.e(1),n.e(8)]).then(n.bind(null,"C7fj")).then((function(e){return e.EditorModule}))}},{path:"",redirectTo:"view",pathMatch:"full"},{path:"",outlet:"right-pane",component:Vs.a},{outlet:"weblinks-viewer",component:ae,path:""},{outlet:"shape-data-viewer",component:z,path:""}]}],cd=function(){function e(e,t,n,i,r,a,o,s,c,u,l,p,d,h,f,g,m,v,b,y,C,O){this.mapper=e,this.realtime=t,this.ll=n,this.ell=i,this.defLocator=r,this.imageLoader=a,this.pluginReg=o,this.offlineSync=d,this.realtimeState=h,this.planPermManager=f,this.injector=g,this.realtimeDataSync=m,this.edata=v,this.searchService=b,this.documentSearchProvider=y,this.userPermissionUpdateService=C,this.serviceWorkerRegistry=O,this.ll.initialize(),this.ell.initialize(),Nn.a.register(this.mapper),this.loadBundledDefinitions(),Qt.register(this.mapper),Yn.register(this.mapper),this.initializeFactories(r,a),this.realtime.start(),this.pluginReg.initialize(),p.initialize(),this.offlineSync.start(),this.realtimeState.initialize(),this.realtimeDataSync.initialize(),this.edata.initialize(),this.registerHandlers(),mu.a.register(this.mapper),this.searchService.register(y),this.userPermissionUpdateService.start(),this.registerServiceWorkers(),this.cacheSpecificFilesForOffline(),this.defLocator.prepareShapesLatestVersion(),this.listenToOfflineCacheServiceWorker()}return e.prototype.initializeFactories=function(e,t){nt.x.instance.registerDefinitionLocator(e),nt.A.instance.registerDefinitionLocator(e),nt.g.instance.registerDefinitionLocator(e),nt.r.instance.registerResourceLoader(t),nt.l.instance.registerDefinitionLocator(e),Cu.a.instance.registerDefinitionLocator(e),Ou.a.instance.registerDefinitionLocator(e)},e.prototype.loadBundledDefinitions=function(){var e=this;nt.J.forEach((function(t){return e.defLocator.cacheSourceFile(t,t.name)})),nt.I.forEach((function(t){return e.defLocator.cacheDefinition(t)}))},e.prototype.registerHandlers=function(){this.planPermManager.registerHandler(I.r.CREATELY_GOOGLE_SEARCH,this.injector.get(eu)),this.planPermManager.registerHandler(I.r.CREATELY_VIDEO_CONFERENCE,this.injector.get($c)),this.planPermManager.registerHandler(I.r.DIAGRAM_ADD_SHAPES,this.injector.get(nu)),this.planPermManager.registerHandler(I.r.COLLABORATE_OFFLINE,this.injector.get(zs)),this.planPermManager.registerHandler(I.r.DIAGRAM_IMPORT_IMAGE,this.injector.get($l))},e.prototype.cacheSpecificFilesForOffline=function(){fetch(_.m.get("GRAVITY_LIBRARY_URL")),fetch(_.m.get("RESOURCE_LOCATION")+_.m.get("SHAPE_RESOURCE_BASE")+"creately.basic.rasterimage.1.json"),fetch(_.m.get("RESOURCE_LOCATION")+_.m.get("SHAPE_RESOURCE_BASE")+"creately.basic.freehand.1.json"),fetch(_.m.get("RESOURCE_LOCATION")+"diagram/def/block.js")},e.prototype.registerServiceWorkers=function(){this.serviceWorkerRegistry.register("cache-workspaces","service-workers/cache-workspaces/cache-all-workspaces-sw.js","service-workers/cache-workspaces/"),this.serviceWorkerRegistry.register("cache-projects","service-workers/cache-projects/cache-all-projects-sw.js","service-workers/cache-projects/"),this.serviceWorkerRegistry.register("offline-cache","ngsw-worker.js","/diagram/",{shouldSendMessage:!0,message:{action:"start-listening"}})},e.prototype.listenToOfflineCacheServiceWorker=function(){navigator.serviceWorker.addEventListener("message",(function(e){"ngsw-cache-completed"===e.data.message&&(localStorage.appReadyForOffline=!0)}))},e.\u0275mod=D.dc({type:e}),e.\u0275inj=D.cc({factory:function(t){return new(t||e)(D.pc(_.z),D.pc(J.h),D.pc(M.a),D.pc(Rc.a),D.pc(tc.a),D.pc(_.W),D.pc(Hi.a),D.pc(nt.C),D.pc(ec.a),D.pc(bu.a),D.pc(Qs.a),D.pc(Uc),D.pc(qc),D.pc(Wi.b),D.pc(Rn.o),D.pc(D.C),D.pc(ru),D.pc(ou.a),D.pc(Oc.a),D.pc(Ql),D.pc(fu),D.pc(zn.a))},providers:[sn.a,mt.a,gt.a,ft.a,dt.a,ht.a,ou.a,M.a,Rc.a,tp.a,ve.w,_i.a,Zs.a,tc.a,ec.a,bu.a,Gs,gu.a,j.a,Hs.a,nc.a,wt.a,kt.a,_.Y,ve.t,Ks,{provide:"DiagramResponsibility",useExisting:Ks},Wc,{provide:"PluginDocumentResponsibility",useExisting:Wc},Yc,{provide:"PluginAuthResponsibility",useExisting:Yc},Js,{provide:"DiagramSubscriptionResponsibility",useExisting:Js},$t.a,Mt.a,Cc.a,Iu.a,W.a,bt.a,nn.a,rn.a,xt.a,Ct.a,mc.a,gc.a,se.a,de.a,np.a,ip.a,yc.a,yt.a,cn.a,Ce.a,on.a,Ot.a,St.a,an.a,gp.a,nt.C,{provide:nt.a,useExisting:tc.a},{provide:"UndoScenario",useClass:qs},{provide:"RedoScenario",useClass:Xs},vt.a,{provide:"GridService",useClass:ri.a},en.a,$s.a,{provide:"ShapeBounds",useClass:Et},{provide:"SelectionScaleSnap",useClass:ue},{provide:"SelectionMoveSnap",useClass:ce},At.a,s.a,a.a,o.a,rt.a,at.a,tn.a,q.a,Y.a,pe.a,fe.a,he.a,it.a,sp.a,ep.a,r.a,ve.n,vp.a,le.a,X.a,cp.a,Qn.a,Qs.a,pt,{provide:"ImageFileReceiver",useExisting:pt},ot.a,bc.a,be.a,ye.a,Ql,Oc.a,zn.a,Zl.a,Mc.a,me.a,rp.a,fp.a,Hi.a,Uc,qc,_.o,Kc.a,yu.a,Zc.a,Jc.a,Wi.b,ru,Xi,eu,$c,oe.a,nu,du.a,hu.a,wu.a,Eu.a,fu,zs,$l,c.a,bp.a,yp.a,mp.a,Ki.a,Gn.a,Ua],imports:[[F.c,J.e,_.Q,_.S,nt.p,Oe.h.forChild(sd),Q.c,E.o,Xc.a,ke,ve.o,xe.b,su.m,Se.g.forRoot(),Rn.g,cu.b,uu.i,pu.i,y.g,C.b,O.e,x.b,su.C,lu.c]]}),e}();D.Sc(Bn.a,[F.q,F.r,F.s,F.t,F.A,F.w,F.x,F.y,F.z,F.u,F.v,Kn.a,ts.a,Zi.a,Op.a,Oe.i,Oe.e,Oe.g,Oe.f,Oe.j,Q.a,xp.a,Sp.a,kp.a,Te.a,wp.a,Ep.a,Ip.a,Tp.a,_p.a,jp.a,Pp.a,Ap.a,Mp.a,Dp.a,Rp.a,Lp.a,er.a,Fp.a,Np.a,Zn.a,Bp.a,Up.a,Jr.a,Ke.a,ha.a,zp.a,Pi.a,ga.a,fa.a,Vp.a,Ti.b,Ti.c,Gp.a,Hp.a,Wp.a,Sr.a,Yp.a,Jn.a,Xp.a,nr.a,qp.a,tr.a,Kp.b,da,Ae,Zp,De,Le,Ne,Ve,He,Ye,Xe,qe.a,Ze,tt,hr.a,fr.a,br.a,Qp.a,$p.a,ed.a,xe.a,su.I,su.x,su.H,su.d,su.y,su.B,su.a,su.E,su.F,su.A,su.s,su.t,su.D,su.o,su.n,su.z,su.b,su.e,su.v,su.w,su.u,Se.b,Se.a,qn.a,$i,td.a,nd.a,Ho.a,Mo.a,cu.a,cu.d,cu.c,id.a,pu.k,pu.j,rd.b,uu.a,uu.b,uu.f,uu.g,uu.h,uu.j,uu.k,uu.m,uu.p,uu.n,uu.c,uu.d,uu.o,uu.l,uu.e,y.d,y.a,y.c,y.e,y.b,y.f,C.a,O.b,O.c,O.f,O.g,O.h,O.i,O.j,x.a,x.c,x.d,x.g,x.h,x.f,x.e,su.i,su.k,su.j,su.l,su.f,ad.b,ad.c,lu.b,lu.d,Ds,wi,zi,ci,yi,gs,Go,Ci,Ka,Lo,Va,Na,_n.a,In.a,Vs.a,pc.a,Ac.a,dc.a,hc.a,un.a,ln.a,xc.a,Qc.a,Tt.a,It.a,lr,Xo,Zo,Bn.a,Lu,_t.a,jt.a,Jt,Kt,zt,Vt.a,ge.a,vr,Or,ve.B,ve.u,ve.z,Gr,ve.I,Wr.c,Cr,lc,oc,Hc,fc.a,bn.a,Sn.a,kn.a,wn.a,En.a,Cn.a,yn.a,xn.a,On.a,vu.a,dn.a,gn.a,mn.a,hn.a,fn.a,vn.a,Ht,bs,pn.a,au.a,Tn.a,vc.a,Gt.a,Pt.a,Ao,es,ms.a,Ec,Tc,Pc,ji.a,Ni,ae,Ui,H.b,xu.a,G.a,V.b,l.a,z,u.a,ap.a,op.a,S.a,i.a,k.a,Su.a,ku.a,b.a,v.a,m.a,g.a,Cp.a,f.a,d.a,p.a,h.a,jr,pa,Kr,hp,Qr,Jo],[F.b,F.G,F.p,F.k,F.E,F.g,F.C,F.F,F.d,F.f,F.i,F.j,F.l,Q.d,Pr.b,Pr.a,Se.h]),D.Sc(ve.u,[F.q,F.r,F.s,F.t,F.A,F.w,F.x,F.y,F.z,F.u,F.v,Kn.a,ts.a,Zi.a,Op.a,Oe.i,Oe.e,Oe.g,Oe.f,Oe.j,Q.a,xp.a,Sp.a,kp.a,Te.a,wp.a,Ep.a,Ip.a,Tp.a,_p.a,jp.a,Pp.a,Ap.a,Mp.a,Dp.a,Rp.a,Lp.a,er.a,Fp.a,Np.a,Zn.a,Bp.a,Up.a,Jr.a,Ke.a,ha.a,zp.a,Pi.a,ga.a,fa.a,Vp.a,Ti.b,Ti.c,Gp.a,Hp.a,Wp.a,Sr.a,Yp.a,Jn.a,Xp.a,nr.a,qp.a,tr.a,Kp.b,da,Ae,Zp,De,Le,Ne,Ve,He,Ye,Xe,qe.a,Ze,tt,hr.a,fr.a,br.a,Qp.a,$p.a,ed.a,xe.a,su.I,su.x,su.H,su.d,su.y,su.B,su.a,su.E,su.F,su.A,su.s,su.t,su.D,su.o,su.n,su.z,su.b,su.e,su.v,su.w,su.u,Se.b,Se.a,qn.a,$i,td.a,nd.a,Ho.a,Mo.a,cu.a,cu.d,cu.c,id.a,pu.k,pu.j,rd.b,uu.a,uu.b,uu.f,uu.g,uu.h,uu.j,uu.k,uu.m,uu.p,uu.n,uu.c,uu.d,uu.o,uu.l,uu.e,y.d,y.a,y.c,y.e,y.b,y.f,C.a,O.b,O.c,O.f,O.g,O.h,O.i,O.j,x.a,x.c,x.d,x.g,x.h,x.f,x.e,su.i,su.k,su.j,su.l,su.f,ad.b,ad.c,lu.b,lu.d,Ds,wi,zi,ci,yi,gs,Go,Ci,Ka,Lo,Va,Na,_n.a,In.a,Vs.a,pc.a,Ac.a,dc.a,hc.a,un.a,ln.a,xc.a,Qc.a,Tt.a,It.a,lr,Xo,Zo,Bn.a,Lu,_t.a,jt.a,Jt,Kt,zt,Vt.a,ge.a,vr,Or,ve.B,ve.u,ve.z,Gr,ve.I,Wr.c,Cr,lc,oc,Hc,fc.a,bn.a,Sn.a,kn.a,wn.a,En.a,Cn.a,yn.a,xn.a,On.a,vu.a,dn.a,gn.a,mn.a,hn.a,fn.a,vn.a,Ht,bs,pn.a,au.a,Tn.a,vc.a,Gt.a,Pt.a,Ao,es,ms.a,Ec,Tc,Pc,ji.a,Ni,ae,Ui,H.b,xu.a,G.a,V.b,l.a,z,u.a,ap.a,op.a,S.a,i.a,k.a,Su.a,ku.a,b.a,v.a,m.a,g.a,Cp.a,f.a,d.a,p.a,h.a,jr,pa,Kr,hp,Qr,Jo],[F.b,F.G,F.p,F.k,F.E,F.g,F.C,F.F,F.d,F.f,F.i,F.j,F.l,Q.d,Pr.b,Pr.a,Se.h]),D.Sc(ve.I,[F.q,F.r,F.s,F.t,F.A,F.w,F.x,F.y,F.z,F.u,F.v,Kn.a,ts.a,Zi.a,Op.a,Oe.i,Oe.e,Oe.g,Oe.f,Oe.j,Q.a,xp.a,Sp.a,kp.a,Te.a,wp.a,Ep.a,Ip.a,Tp.a,_p.a,jp.a,Pp.a,Ap.a,Mp.a,Dp.a,Rp.a,Lp.a,er.a,Fp.a,Np.a,Zn.a,Bp.a,Up.a,Jr.a,Ke.a,ha.a,zp.a,Pi.a,ga.a,fa.a,Vp.a,Ti.b,Ti.c,Gp.a,Hp.a,Wp.a,Sr.a,Yp.a,Jn.a,Xp.a,nr.a,qp.a,tr.a,Kp.b,da,Ae,Zp,De,Le,Ne,Ve,He,Ye,Xe,qe.a,Ze,tt,hr.a,fr.a,br.a,Qp.a,$p.a,ed.a,xe.a,su.I,su.x,su.H,su.d,su.y,su.B,su.a,su.E,su.F,su.A,su.s,su.t,su.D,su.o,su.n,su.z,su.b,su.e,su.v,su.w,su.u,Se.b,Se.a,qn.a,$i,td.a,nd.a,Ho.a,Mo.a,cu.a,cu.d,cu.c,id.a,pu.k,pu.j,rd.b,uu.a,uu.b,uu.f,uu.g,uu.h,uu.j,uu.k,uu.m,uu.p,uu.n,uu.c,uu.d,uu.o,uu.l,uu.e,y.d,y.a,y.c,y.e,y.b,y.f,C.a,O.b,O.c,O.f,O.g,O.h,O.i,O.j,x.a,x.c,x.d,x.g,x.h,x.f,x.e,su.i,su.k,su.j,su.l,su.f,ad.b,ad.c,lu.b,lu.d,Ds,wi,zi,ci,yi,gs,Go,Ci,Ka,Lo,Va,Na,_n.a,In.a,Vs.a,pc.a,Ac.a,dc.a,hc.a,un.a,ln.a,xc.a,Qc.a,Tt.a,It.a,lr,Xo,Zo,Bn.a,Lu,_t.a,jt.a,Jt,Kt,zt,Vt.a,ge.a,vr,Or,ve.B,ve.u,ve.z,Gr,ve.I,Wr.c,Cr,lc,oc,Hc,fc.a,bn.a,Sn.a,kn.a,wn.a,En.a,Cn.a,yn.a,xn.a,On.a,vu.a,dn.a,gn.a,mn.a,hn.a,fn.a,vn.a,Ht,bs,pn.a,au.a,Tn.a,vc.a,Gt.a,Pt.a,Ao,es,ms.a,Ec,Tc,Pc,ji.a,Ni,ae,Ui,H.b,xu.a,G.a,V.b,l.a,z,u.a,ap.a,op.a,S.a,i.a,k.a,Su.a,ku.a,b.a,v.a,m.a,g.a,Cp.a,f.a,d.a,p.a,h.a,jr,pa,Kr,hp,Qr,Jo],[F.b,F.G,F.p,F.k,F.E,F.g,F.C,F.F,F.d,F.f,F.i,F.j,F.l,Q.d,Pr.b,Pr.a,Se.h]),D.Sc(ms.a,[F.q,F.r,F.s,F.t,F.A,F.w,F.x,F.y,F.z,F.u,F.v,Kn.a,ts.a,Zi.a,Op.a,Oe.i,Oe.e,Oe.g,Oe.f,Oe.j,Q.a,xp.a,Sp.a,kp.a,Te.a,wp.a,Ep.a,Ip.a,Tp.a,_p.a,jp.a,Pp.a,Ap.a,Mp.a,Dp.a,Rp.a,Lp.a,er.a,Fp.a,Np.a,Zn.a,Bp.a,Up.a,Jr.a,Ke.a,ha.a,zp.a,Pi.a,ga.a,fa.a,Vp.a,Ti.b,Ti.c,Gp.a,Hp.a,Wp.a,Sr.a,Yp.a,Jn.a,Xp.a,nr.a,qp.a,tr.a,Kp.b,da,Ae,Zp,De,Le,Ne,Ve,He,Ye,Xe,qe.a,Ze,tt,hr.a,fr.a,br.a,Qp.a,$p.a,ed.a,xe.a,su.I,su.x,su.H,su.d,su.y,su.B,su.a,su.E,su.F,su.A,su.s,su.t,su.D,su.o,su.n,su.z,su.b,su.e,su.v,su.w,su.u,Se.b,Se.a,qn.a,$i,td.a,nd.a,Ho.a,Mo.a,cu.a,cu.d,cu.c,id.a,pu.k,pu.j,rd.b,uu.a,uu.b,uu.f,uu.g,uu.h,uu.j,uu.k,uu.m,uu.p,uu.n,uu.c,uu.d,uu.o,uu.l,uu.e,y.d,y.a,y.c,y.e,y.b,y.f,C.a,O.b,O.c,O.f,O.g,O.h,O.i,O.j,x.a,x.c,x.d,x.g,x.h,x.f,x.e,su.i,su.k,su.j,su.l,su.f,ad.b,ad.c,lu.b,lu.d,Ds,wi,zi,ci,yi,gs,Go,Ci,Ka,Lo,Va,Na,_n.a,In.a,Vs.a,pc.a,Ac.a,dc.a,hc.a,un.a,ln.a,xc.a,Qc.a,Tt.a,It.a,lr,Xo,Zo,Bn.a,Lu,_t.a,jt.a,Jt,Kt,zt,Vt.a,ge.a,vr,Or,ve.B,ve.u,ve.z,Gr,ve.I,Wr.c,Cr,lc,oc,Hc,fc.a,bn.a,Sn.a,kn.a,wn.a,En.a,Cn.a,yn.a,xn.a,On.a,vu.a,dn.a,gn.a,mn.a,hn.a,fn.a,vn.a,Ht,bs,pn.a,au.a,Tn.a,vc.a,Gt.a,Pt.a,Ao,es,ms.a,Ec,Tc,Pc,ji.a,Ni,ae,Ui,H.b,xu.a,G.a,V.b,l.a,z,u.a,ap.a,op.a,S.a,i.a,k.a,Su.a,ku.a,b.a,v.a,m.a,g.a,Cp.a,f.a,d.a,p.a,h.a,jr,pa,Kr,hp,Qr,Jo],[F.b,F.G,F.p,F.k,F.E,F.g,F.C,F.F,F.d,F.f,F.i,F.j,F.l,Q.d,Pr.b,Pr.a,Se.h]),D.Sc(H.b,[F.q,F.r,F.s,F.t,F.A,F.w,F.x,F.y,F.z,F.u,F.v,Kn.a,ts.a,Zi.a,Op.a,Oe.i,Oe.e,Oe.g,Oe.f,Oe.j,Q.a,xp.a,Sp.a,kp.a,Te.a,wp.a,Ep.a,Ip.a,Tp.a,_p.a,jp.a,Pp.a,Ap.a,Mp.a,Dp.a,Rp.a,Lp.a,er.a,Fp.a,Np.a,Zn.a,Bp.a,Up.a,Jr.a,Ke.a,ha.a,zp.a,Pi.a,ga.a,fa.a,Vp.a,Ti.b,Ti.c,Gp.a,Hp.a,Wp.a,Sr.a,Yp.a,Jn.a,Xp.a,nr.a,qp.a,tr.a,Kp.b,da,Ae,Zp,De,Le,Ne,Ve,He,Ye,Xe,qe.a,Ze,tt,hr.a,fr.a,br.a,Qp.a,$p.a,ed.a,xe.a,su.I,su.x,su.H,su.d,su.y,su.B,su.a,su.E,su.F,su.A,su.s,su.t,su.D,su.o,su.n,su.z,su.b,su.e,su.v,su.w,su.u,Se.b,Se.a,qn.a,$i,td.a,nd.a,Ho.a,Mo.a,cu.a,cu.d,cu.c,id.a,pu.k,pu.j,rd.b,uu.a,uu.b,uu.f,uu.g,uu.h,uu.j,uu.k,uu.m,uu.p,uu.n,uu.c,uu.d,uu.o,uu.l,uu.e,y.d,y.a,y.c,y.e,y.b,y.f,C.a,O.b,O.c,O.f,O.g,O.h,O.i,O.j,x.a,x.c,x.d,x.g,x.h,x.f,x.e,su.i,su.k,su.j,su.l,su.f,ad.b,ad.c,lu.b,lu.d,Ds,wi,zi,ci,yi,gs,Go,Ci,Ka,Lo,Va,Na,_n.a,In.a,Vs.a,pc.a,Ac.a,dc.a,hc.a,un.a,ln.a,xc.a,Qc.a,Tt.a,It.a,lr,Xo,Zo,Bn.a,Lu,_t.a,jt.a,Jt,Kt,zt,Vt.a,ge.a,vr,Or,ve.B,ve.u,ve.z,Gr,ve.I,Wr.c,Cr,lc,oc,Hc,fc.a,bn.a,Sn.a,kn.a,wn.a,En.a,Cn.a,yn.a,xn.a,On.a,vu.a,dn.a,gn.a,mn.a,hn.a,fn.a,vn.a,Ht,bs,pn.a,au.a,Tn.a,vc.a,Gt.a,Pt.a,Ao,es,ms.a,Ec,Tc,Pc,ji.a,Ni,ae,Ui,H.b,xu.a,G.a,V.b,l.a,z,u.a,ap.a,op.a,S.a,i.a,k.a,Su.a,ku.a,b.a,v.a,m.a,g.a,Cp.a,f.a,d.a,p.a,h.a,jr,pa,Kr,hp,Qr,Jo],[F.b,F.G,F.p,F.k,F.E,F.g,F.C,F.F,F.d,F.f,F.i,F.j,F.l,Q.d,Pr.b,Pr.a,Se.h]),D.Sc(Kr,[F.q,F.r,F.s,F.t,F.A,F.w,F.x,F.y,F.z,F.u,F.v,Kn.a,ts.a,Zi.a,Op.a,Oe.i,Oe.e,Oe.g,Oe.f,Oe.j,Q.a,xp.a,Sp.a,kp.a,Te.a,wp.a,Ep.a,Ip.a,Tp.a,_p.a,jp.a,Pp.a,Ap.a,Mp.a,Dp.a,Rp.a,Lp.a,er.a,Fp.a,Np.a,Zn.a,Bp.a,Up.a,Jr.a,Ke.a,ha.a,zp.a,Pi.a,ga.a,fa.a,Vp.a,Ti.b,Ti.c,Gp.a,Hp.a,Wp.a,Sr.a,Yp.a,Jn.a,Xp.a,nr.a,qp.a,tr.a,Kp.b,da,Ae,Zp,De,Le,Ne,Ve,He,Ye,Xe,qe.a,Ze,tt,hr.a,fr.a,br.a,Qp.a,$p.a,ed.a,xe.a,su.I,su.x,su.H,su.d,su.y,su.B,su.a,su.E,su.F,su.A,su.s,su.t,su.D,su.o,su.n,su.z,su.b,su.e,su.v,su.w,su.u,Se.b,Se.a,qn.a,$i,td.a,nd.a,Ho.a,Mo.a,cu.a,cu.d,cu.c,id.a,pu.k,pu.j,rd.b,uu.a,uu.b,uu.f,uu.g,uu.h,uu.j,uu.k,uu.m,uu.p,uu.n,uu.c,uu.d,uu.o,uu.l,uu.e,y.d,y.a,y.c,y.e,y.b,y.f,C.a,O.b,O.c,O.f,O.g,O.h,O.i,O.j,x.a,x.c,x.d,x.g,x.h,x.f,x.e,su.i,su.k,su.j,su.l,su.f,ad.b,ad.c,lu.b,lu.d,Ds,wi,zi,ci,yi,gs,Go,Ci,Ka,Lo,Va,Na,_n.a,In.a,Vs.a,pc.a,Ac.a,dc.a,hc.a,un.a,ln.a,xc.a,Qc.a,Tt.a,It.a,lr,Xo,Zo,Bn.a,Lu,_t.a,jt.a,Jt,Kt,zt,Vt.a,ge.a,vr,Or,ve.B,ve.u,ve.z,Gr,ve.I,Wr.c,Cr,lc,oc,Hc,fc.a,bn.a,Sn.a,kn.a,wn.a,En.a,Cn.a,yn.a,xn.a,On.a,vu.a,dn.a,gn.a,mn.a,hn.a,fn.a,vn.a,Ht,bs,pn.a,au.a,Tn.a,vc.a,Gt.a,Pt.a,Ao,es,ms.a,Ec,Tc,Pc,ji.a,Ni,ae,Ui,H.b,xu.a,G.a,V.b,l.a,z,u.a,ap.a,op.a,S.a,i.a,k.a,Su.a,ku.a,b.a,v.a,m.a,g.a,Cp.a,f.a,d.a,p.a,h.a,jr,pa,Kr,hp,Qr,Jo],[F.b,F.G,F.p,F.k,F.E,F.g,F.C,F.F,F.d,F.f,F.i,F.j,F.l,Q.d,Pr.b,Pr.a,Se.h])},O6K7:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var i,r=n("D57K"),a=n("MvFr");!function(e){e.CreateComment="create-comment"}(i||(i={}));var o=function(e){function t(t,n){var i=e.call(this,t,n,!0,!0)||this;return i.relatedShape=null,i.setRelatedShape(n),i}return Object(r.e)(t,e),t.prototype.getShapeId=function(){return this.relatedShape?this.relatedShape.name:null},t.prototype.getPosition=function(){return{x:this.relatedMouseEvent.stageX,y:this.relatedMouseEvent.stageY}},t}(a.a)},OOUj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),r=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),u=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(n){var r,a,o=t.state.get("Selected"),s=!1;try{for(var c=Object(i.k)(o),u=c.next();!u.done;u=c.next()){var l=u.value;if(!n.shapes[l].isLocked){s=!1;break}s=!0}}catch(p){r={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return"lockShape"===e?!s:"unlockShape"===e&&s})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.prototype.getApplyData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(u.pc(s.a),u.pc(a.Jb),u.pc(r.a))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},PGgW:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("D57K"),r=n("hSRu"),a=n("EM62"),o=n("pYIu"),s=n("tG6W"),c=n("2kYt"),u=n("Mb5J");function l(e,t){if(1&e&&a.gc(0,"toolbar-list-dropdown-item",4),2&e){var n=t.$implicit;a.Cc("item",n)}}var p=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return h(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-list-dropdown"]],features:[a.Pb],decls:7,vars:12,consts:[[3,"settings"],["dd",""],["ddbutton","",3,"props","items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.lc(0,"div"),a.lc(1,"abs-dropdown",0,1),a.gc(3,"toolbar-dropdown-button",2),a.yc(4,"async"),a.ad(5,l,1,1,"toolbar-list-dropdown-item",3),a.yc(6,"async"),a.kc(),a.kc()),2&e){var n,i;a.Vb("ftb-item ftb-item-",t.dropdownType,""),a.Sb(1),a.Cc("settings",a.Gc(11,p)),a.Sb(2),a.Cc("props",t.props)("items",null==(n=a.zc(4,7,t._data))?null:n.value),a.Sb(2),a.Cc("ngForOf",null==(i=a.zc(6,9,t._data))?null:i.value)}},directives:[o.a,s.a,c.s,u.a],pipes:[c.b],styles:["toolbar-list-dropdown-item[_ngcontent-%COMP%]{display:block}toolbar-list-dropdown-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),t}(r.a),h=a.nc(d)},QCJn:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("D57K"),r=n("hSRu"),a=n("EM62"),o=n("2kYt"),s=n("pYIu"),c=n("XLk1"),u=n("uXwy");function l(e,t){if(1&e&&(a.lc(0,"label"),a.cd(1),a.kc()),2&e){var n=a.xc();a.Sb(1),a.dd(null==n.props?null:n.props.label)}}function p(e,t){if(1&e&&a.gc(0,"sidebar-list-dropdown-item",7),2&e){var n=t.$implicit;a.Cc("item",n)}}function d(e,t){if(1&e&&a.gc(0,"sidebar-list-dropdown-item",8),2&e){var n=t.$implicit;a.Cc("item",n)}}var h=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return g(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["sidebar-input-list-dropdown"]],features:[a.Pb],decls:12,vars:19,consts:[[4,"ngIf"],["maxHeight","200px",1,"dropdown-item",3,"autoPosition","settings"],["dd",""],["ddbutton","",3,"readOnly","validation","items","inputChanged"],["class","fx-margin-bottom-10 custom-option","dditem","",3,"item",4,"ngFor","ngForOf"],["dditem",""],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10","custom-option",3,"item"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.ad(0,l,2,1,"label",0),a.lc(1,"abs-dropdown",1,2),a.lc(3,"sidebar-dropdown-input",3),a.tc("inputChanged",(function(e){return t.change.next(e)})),a.yc(4,"async"),a.yc(5,"async"),a.yc(6,"async"),a.kc(),a.ad(7,p,1,1,"sidebar-list-dropdown-item",4),a.yc(8,"async"),a.gc(9,"hr",5),a.ad(10,d,1,1,"sidebar-list-dropdown-item",6),a.yc(11,"async"),a.kc()),2&e){var n,i,r;a.Cc("ngIf",null==t.props?null:t.props.label),a.Sb(1),a.Cc("autoPosition",!1)("settings",a.Gc(18,h)),a.Sb(2),a.Cc("readOnly",null==(n=a.zc(4,8,t._data))?null:n.readOnly)("validation",null==(i=a.zc(5,10,t._data))?null:i.validation)("items",null==(r=a.zc(6,12,t._data))?null:r.value),a.Sb(4),a.Cc("ngForOf",a.zc(8,14,t.customItems)),a.Sb(3),a.Cc("ngForOf",a.zc(11,16,t.defaultItems))}},directives:[o.t,s.a,c.a,o.s,u.a],pipes:[o.b],styles:[".custom-option[_ngcontent-%COMP%]  li:last-child{border-bottom:1px solid #dcdcdc}.shape-search-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:195px;padding-top:15px}.shape-search-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container .ps-content{padding:0}.shape-search-browse-more-btn[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t}(r.a),g=a.nc(f)},QuwQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginCommands=void 0,function(e){e.pluginInit="creately:plugin:init",e.pluginUnload="creately:plugin:unload"}(t.PluginCommands||(t.PluginCommands={}))},RMc3:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("D57K"),r=n("5xGT"),a=n("C05f"),o=n("ZTXN"),s=n("g6G6"),c=n("HM3f"),u=n("ROBh"),l=n("Lrfq"),p=n("i7Dj"),d=n("Ohay"),h=n("TLy2"),f=n("YtkY"),g=n("xVbo"),m=n("wqq/"),v=n("QoSw"),b=n("c7W3"),y=n("cOhl"),C=(n("w5Uk"),n("EM62")),O=n("s2Ay"),x=n("2kYt"),S=n("crdX"),k=n("/g0E"),w=n("ZhQg");function E(e,t){1&e&&C.gc(0,"div",3)}function I(e,t){if(1&e&&(C.lc(0,"div",10),C.lc(1,"label",11),C.cd(2),C.kc(),C.kc()),2&e){var n=C.xc().$implicit;C.Sb(2),C.dd(n.title)}}function T(e,t){if(1&e){var n=C.mc();C.lc(0,"styling-tile",15),C.tc("mouseenter",(function(){C.Oc(n);var e=C.xc().$implicit;return C.xc(3).previewTileStyles(e)}))("click",(function(){C.Oc(n);var e=C.xc().$implicit;return C.xc(3).setTileStyles(e)})),C.yc(1,"async"),C.kc()}if(2&e){var i=C.xc().$implicit,r=C.xc(3);C.Xb("selected",i.styleId===C.zc(1,3,r.selectedStyleId)),C.Cc("data",i)}}function _(e,t){if(1&e){var n=C.mc();C.lc(0,"line-styling-tile",16),C.tc("mouseenter",(function(){C.Oc(n);var e=C.xc().$implicit;return C.xc(3).previewTileStyles(e)}))("click",(function(){C.Oc(n);var e=C.xc().$implicit;return C.xc(3).setTileStyles(e)})),C.yc(1,"async"),C.kc()}if(2&e){var i=C.xc().$implicit,r=C.xc(3);C.Xb("selected",i.styleId===C.zc(1,3,r.selectedStyleId)),C.Cc("data",i)}}function j(e,t){if(1&e&&(C.lc(0,"div",12),C.yc(1,"async"),C.ad(2,T,2,5,"styling-tile",13),C.yc(3,"async"),C.ad(4,_,2,5,"line-styling-tile",14),C.yc(5,"async"),C.kc()),2&e){var n=C.xc(3);C.Xb("style-line","connector"==C.zc(1,4,n.tileStyles).type),C.Sb(2),C.Cc("ngIf","anything"==C.zc(3,6,n.tileStyles).type),C.Sb(2),C.Cc("ngIf","connector"==C.zc(5,8,n.tileStyles).type)}}function P(e,t){if(1&e&&(C.lc(0,"div",7),C.ad(1,I,3,1,"div",8),C.ad(2,j,6,10,"div",9),C.kc()),2&e){var n=t.$implicit;C.Sb(1),C.Cc("ngIf",n.title&&""!==n.title),C.Sb(1),C.Cc("ngForOf",n.styles)}}function A(e,t){if(1&e){var n=C.mc();C.lc(0,"div",4),C.tc("mouseleave",(function(){return C.Oc(n),C.xc().resetTilePreview()})),C.lc(1,"h1",5),C.cd(2,"PANEL_HEADINGS.STYLES"),C.kc(),C.ad(3,P,3,2,"div",6),C.yc(4,"async"),C.kc()}if(2&e){var i=C.xc();C.Sb(3),C.Cc("ngForOf",C.zc(4,1,i.tileStyles).palettes)}}var M=function(){function e(e,t,n,i,r){var s=this;this.loader=e,this.state=t,this.ll=n,this.commandService=i,this.translate=r,this.previewState=!1,this.shapesSelected=new a.a([]),this.subs=[],this.styleChange=new o.a,this.selectedStyleId=this.getSelectedStyleID().pipe(Object(l.a)(1),Object(p.a)());var c=this.selectedUnlockedShapes().pipe(Object(d.a)()).subscribe((function(e){s.shapesSelected.next(e)}));this.subs.push(c)}return Object.defineProperty(e,"openForContextAware",{get:function(){return"atLeastOne"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"style"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"styles"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translate.instant("TOOLTIPS.DIAGRAM_STYLE")},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){r.Lb.track("right.styles.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){r.Lb.track("right.styles.panel.click",{value1Type:"status",value1:"close"})},e.prototype.ngOnInit=function(){this.tileStyles=this.getStylePalette()},e.prototype.previewTileStyles=function(e){this.previewState=!0,this.commandService.dispatch(b.a.resetDiagramPreview),delete e.lineThickness,this.commandService.preview(b.a.applyShapeStyle,{style:e,format:{"*":this.getTextFormat(e.textColor)},reset:!1})},e.prototype.setTileStyles=function(e){var t=this;r.Lb.track("right.styles.swatch.click",{value1Type:"styleId",value1:e.styleId}),delete e.lineThickness,this.commandService.dispatch(b.a.applyShapeStyle,{style:e,format:{"*":this.getTextFormat(e.textColor)},reset:!1}).subscribe((function(n){n.status&&"RunExecutionStep"===n.stepName&&"completed"===n.stepStatus&&t.styleChange.next(e.styleId)}))},e.prototype.resetTilePreview=function(){this.previewState&&(this.commandService.dispatch(b.a.resetDiagramPreview),this.previewState=!1)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.selectedUnlockedShapes=function(){var e=this;return this.state.changes("Selected").pipe(Object(h.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(h.a)((function(e){return e.getDiagramOnce().pipe(Object(f.a)((function(e){var n=[];return t.forEach((function(t){var i=e.shapes[t];i.isLocked||n.push(i.id)})),n})))})))})))},e.prototype.getSelectedStyleID=function(){var e=this;return Object(s.a)(this.shapesSelected.pipe(Object(h.a)((function(t){return e.getDistinctShapeStyles(t).pipe(Object(f.a)((function(t){if(1===t.length&&e.loader.getStyle(t[0]))return t[0]})))}))),this.styleChange)},e.prototype.getDistinctShapeStyles=function(e){var t=this;return e&&e.length>0?c.b.apply(void 0,Object(i.j)(e.map((function(e){return t.ll.forCurrentObserver(!1).pipe(Object(h.a)((function(t){return t.getShapeOnce(e)})))})))).pipe(Object(f.a)((function(e){return e.reduce((function(e,t){if(t&&t.style){var n=t.style.styleId;e.includes(n)||e.push(n)}return e}),[])}))):Object(u.a)([])},e.prototype.getPaletteType=function(){var e=this;return this.shapesSelected.pipe(Object(h.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(h.a)((function(e){return e.getDiagramOnce().pipe(Object(f.a)((function(e){var n=e.getShapeTypes(t);return n&&1===n.length&&"connector"===n[0]?"connector":"anything"})),Object(d.a)())})))})))},e.prototype.getStylePalette=function(){var e=this;return this.getPaletteType().pipe(Object(h.a)((function(t){return"connector"===t?e.loader.getLinePalattes().pipe(Object(g.a)((function(e){return!!e})),Object(f.a)((function(e){return{type:"connector",palettes:e}}))):e.loader.getPalattes().pipe(Object(g.a)((function(e){return!!e})),Object(f.a)((function(e){return{type:"anything",palettes:e}})))})),Object(m.a)(1))},e.prototype.getTextFormat=function(e){return{indexStart:0,indexEnd:void 0,styles:{color:e}}},e.\u0275fac=function(t){return new(t||e)(C.fc(y.a),C.fc(r.Jb),C.fc(v.a),C.fc(r.B),C.fc(O.e))},e.\u0275cmp=C.Zb({type:e,selectors:[["styling-panel"]],decls:5,vars:6,consts:[["class","panel-overlay fx-cover style-panel-overlay",4,"ngIf"],[1,"sidebar-scrollbar"],["class","style-panel panel-container",3,"mouseleave",4,"ngIf"],[1,"panel-overlay","fx-cover","style-panel-overlay"],[1,"style-panel","panel-container",3,"mouseleave"],["translate","",1,"panel-heading"],["class","palette-container panel-item",4,"ngFor","ngForOf"],[1,"palette-container","panel-item"],["class","fx-margin-bottom-5",4,"ngIf"],["class","style-tile-container",3,"style-line",4,"ngFor","ngForOf"],[1,"fx-margin-bottom-5"],["translate",""],[1,"style-tile-container"],["svgType","rect",3,"selected","data","mouseenter","click",4,"ngIf"],[3,"selected","data","mouseenter","click",4,"ngIf"],["svgType","rect",3,"data","mouseenter","click"],[3,"data","mouseenter","click"]],template:function(e,t){1&e&&(C.ad(0,E,1,0,"div",0),C.yc(1,"async"),C.lc(2,"perfect-scrollbar",1),C.ad(3,A,5,3,"div",2),C.yc(4,"async"),C.kc()),2&e&&(C.Cc("ngIf",0===C.zc(1,2,t.shapesSelected).length),C.Sb(3),C.Cc("ngIf",C.zc(4,4,t.tileStyles)))},directives:[x.t,S.b,O.a,x.s,k.a,w.a],pipes:[x.b],styles:[".palette-container[_ngcontent-%COMP%]{margin-bottom:20px}.palette-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]     .style-tile{border:2px solid #ffc648}.style-tile-container[_ngcontent-%COMP%]{width:calc(100% / 4);display:inline-block;margin-bottom:10px;cursor:pointer}.style-tile-container.style-line[_ngcontent-%COMP%]{width:calc(100% / 2)}.style-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);z-index:1}"],changeDetection:0}),e}()},Rl48:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},RrMq:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var i=n("D57K"),r=n("4y1S"),a=n("5xGT"),o=n("tLVu"),s=n("okSW"),c=n("c7W3"),u=n("2DR2"),l=n("xVbo"),p=n("Ohay"),d=n("8j5Y"),h=n("TLy2"),f=n("Lrfq"),g=n("J+dc"),m=n("YtkY"),v=n("QoSw"),b=n("C05f"),y=n("ROBh"),C=n("HM3f"),O=n("diDk"),x=n("/jjY"),S=n("EePP"),k=n("0jHB"),w=n("X0jn"),E=n("EM62"),I=n("s2Ay"),T=n("uIWG"),_=n("2kYt"),j=n("+ZK7"),P=n("VT3A"),A=n("pTJA"),M=["tabsCmp"];function D(e,t){1&e&&(E.lc(0,"div",13),E.gc(1,"entity-type-manage"),E.kc())}var R=function(){function e(e,t,n,i,r,a,o,s,c){this.translate=e,this.ll=t,this.ell=n,this.userLocator=i,this.defLocator=r,this.commandService=a,this.elementRef=o,this.state=s,this.permManager=c,this.hasCustomDbPermission=!1,this.tabs=new b.a([]),this.shapeName=new b.a({value:""}),this.hasCustomDbPermission=this.permManager.check([w.r.CUSTOM_DATABASES])}return e.prototype.init=function(){this.elementRef.nativeElement.hidden=!1,this.initObservable||(this.initObservable=this.initComponent()),this.mainSub=this.initObservable.connect()},e.prototype.unsubscribe=function(){this.state.set("CommentThreadData",{visible:!1}),this.tabsCmp.clearAll(),this.mainSub&&this.mainSub.unsubscribe()},e.prototype.initComponent=function(){var e=this;return this.state.changes("Selected").pipe(Object(l.a)((function(e){return 1===e.length})),Object(p.a)(),Object(d.a)((function(t){e.state.set("CommentThreadData",{}),e.shapeId=t[0],e.tabsCmp.clearAll()})),Object(h.a)((function(t){return e.generateTabs(t[0]).pipe(Object(d.a)((function(t){e.tabs.next(t)})))})),Object(f.a)())},e.prototype.allShapeData=function(e){var t=[];for(var n in e){var i={name:this.ll.forDiagram(n,!1).getDiagramName().pipe(Object(g.a)(1)),count:0,shapes:[],shapesMap:{}};for(var r in t.push(i),e[n])i.shapesMap[e[n][r]]||(i.shapesMap[e[n][r]]=[]),i.shapes.push({docId:n,shapeId:r,name:this.linkShapeName(e[n][r]),link:"shape/"+r}),i.count++,i.shapesMap[e[n][r]].push({docId:n,shapeId:r,name:this.linkShapeName(e[n][r]),link:"shape/"+r})}return t},e.prototype.labelChanged=function(e){var t=this.shapeName.value;"defName"===t.type?this.commandService.dispatch(c.a.renameShape,{shapeId:this.shapeId,name:e}):this.commandService.dispatch(c.a.applyText,{shapeId:this.shapeId,textId:t.id,content:[Object(i.a)(Object(i.a)({},t.format),{text:e})]})},e.prototype.getTabs=function(e,t,n){return[this.getInfoTab(e,t,n),this.getSettingsTab(e,t),this.getAttachmentsTab(e,t)]},e.prototype.generateTabs=function(e,t){var n,r=this,a=(t?this.ll.forDiagram(t,!1).getDiagramModel():this.ll.forCurrentObserver(!1).pipe(Object(h.a)((function(e){return e.getDiagramModel()})))).pipe(Object(h.a)((function(t){return r.enitityEditable(t,e).pipe(Object(m.a)((function(e){return{model:t,entityEditable:e}})))})),Object(m.a)((function(t){var n=r.getPanelNameData(t.model.shapes[e]);return n.value!==r.shapeName.value.value&&r.shapeName.next(n),r.getTabs(t.model,e,t.entityEditable).filter((function(e){return!!e}))}))),o=(t?this.ll.forDiagram(t,!1).getShapeModel(e):this.ll.forCurrentObserver(!1).pipe(Object(h.a)((function(t){return t.getShapeModel(e)})))).pipe(Object(h.a)((function(e){if(e.eData){var t=Object.keys(e.eData);return n=t[0],r.ell.getEntityOnce(t[0],e.eData[t[0]])}return Object(y.a)([])})),Object(m.a)((function(e){return e instanceof x.a?[r.getLinksTab(n,e.id,e.getDisplayLinks(),r.allShapeData(e.shapes))]:[]})));return Object(C.b)([a,o]).pipe(Object(m.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return Object(i.j)(n,r)})))},e.prototype.getPanelNameData=function(e){return e.primaryTextModel&&e.primaryTextModel.plainText?{value:e.primaryTextModel.plainText,type:"textModel",id:e.primaryTextModel.id,format:e.primaryTextModel.content[0],shapeType:e.name}:{value:e.name,shapeType:e.name,type:"defName"}},e.prototype.getInfoTab=function(e,t,n){var i=this,r=e.shapes[t],a=e.getShapeDataItems(t);return{id:"info",label:this.translate.instant("SHAPE_DATA.TABS.INFO.LABEL"),content:{type:u.b,inputs:{context:"right.data.info",entityEditable:n,dataItems:a,onChange:function(t){return i.onShapeDataItemChange(e.id,t,r)}}}}},e.prototype.enitityEditable=function(e,t){var n=e.shapes[t];return n.eDataId&&n.entityDefId?this.ell.getEData(n.eDataId).pipe(Object(g.a)(1),Object(h.a)((function(e){return e.getEDataModel().pipe(Object(g.a)(1),Object(m.a)((function(e){if(e&&e.customEntityDefs[n.entityDefId])return e.customEntityDefs[n.entityDefId].editable})))}))):Object(y.a)(!1)},e.prototype.getEntityTab=function(e,t){var n=this;return{id:"entity",label:e,content:{type:u.b,inputs:{isEntity:!0,dataItems:t,onChange:function(e){return n.onEntityDataItemChange(e)}}}}},e.prototype.getSettingsTab=function(e,t){var n=this,i=e.getShapeDataItems(t);return{id:"settings",label:'<svg width="24" style="zoom: 80%; position: absolute; margin-left: -12px; margin-top: -6px;" width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 8.666c-1.838 0-3.333 1.496-3.333 3.334s1.495 3.333 3.333 3.333 3.333-1.495 3.333-3.333-1.495-3.334-3.333-3.334m0 7.667c-2.39 0-4.333-1.943-4.333-4.333s1.943-4.334 4.333-4.334 4.333 1.944 4.333 4.334c0 2.39-1.943 4.333-4.333 4.333m-1.193 6.667h2.386c.379-1.104.668-2.451 2.107-3.05 1.496-.617 2.666.196 3.635.672l1.686-1.688c-.508-1.047-1.266-2.199-.669-3.641.567-1.369 1.739-1.663 3.048-2.099v-2.388c-1.235-.421-2.471-.708-3.047-2.098-.572-1.38.057-2.395.669-3.643l-1.687-1.686c-1.117.547-2.221 1.257-3.642.668-1.374-.571-1.656-1.734-2.1-3.047h-2.386c-.424 1.231-.704 2.468-2.099 3.046-.365.153-.718.226-1.077.226-.843 0-1.539-.392-2.566-.893l-1.687 1.686c.574 1.175 1.251 2.237.669 3.643-.571 1.375-1.734 1.654-3.047 2.098v2.388c1.226.418 2.468.705 3.047 2.098.581 1.403-.075 2.432-.669 3.643l1.687 1.687c1.45-.725 2.355-1.204 3.642-.669 1.378.572 1.655 1.738 2.1 3.047m3.094 1h-3.803c-.681-1.918-.785-2.713-1.773-3.123-1.005-.419-1.731.132-3.466.952l-2.689-2.689c.873-1.837 1.367-2.465.953-3.465-.412-.991-1.192-1.087-3.123-1.773v-3.804c1.906-.678 2.712-.782 3.123-1.773.411-.991-.071-1.613-.953-3.466l2.689-2.688c1.741.828 2.466 1.365 3.465.953.992-.412 1.082-1.185 1.775-3.124h3.802c.682 1.918.788 2.714 1.774 3.123 1.001.416 1.709-.119 3.467-.952l2.687 2.688c-.878 1.847-1.361 2.477-.952 3.465.411.992 1.192 1.087 3.123 1.774v3.805c-1.906.677-2.713.782-3.124 1.773-.403.975.044 1.561.954 3.464l-2.688 2.689c-1.728-.82-2.467-1.37-3.456-.955-.988.41-1.08 1.146-1.785 3.126"/></svg>',content:{type:S.b,inputs:{context:"right.data.settings.dataField",dataItems:i,onChange:function(i){return n.onShapeDataItemChange(e.id,i,e.shapes[t])}}},buttonAlignment:"right"}},e.prototype.getAttachmentsTab=function(e,t){if(e.shapes[t].attachmentIds.length>0){var n=e.shapes[t].attachmentIds.map((function(t){return e.attachments[t]}));return{id:"attachments",label:this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.LABEL"),content:{type:o.a,inputs:{shapeAttachments:n}}}}},e.prototype.getLinksTab=function(e,t,n,i){return{id:"links",label:"Links",content:{type:s.a,inputs:{eDataId:e,entityId:t,links:n,shapes:i}},buttonAlignment:"left"}},e.prototype.linkShapeName=function(e){return this.defLocator.getDefinition(e).pipe(Object(m.a)((function(e){return e.name})))},e.prototype.onShapeDataItemChange=function(e,t,n){var i,r,a=this.shapeId;if(t.data&&(t.data.labelEditable||t.id===u.a)&&(t.data.isPublic=!0),a){if(t.data&&t.data.__sakota__&&!t.data.__sakota__.hasChanges())return;this.commandService.dispatch(c.a.changeShapeDataItems,e,((i={})[a]=((r={})[t.id]=t.data,r),i))}},e.prototype.onEntityDataItemChange=function(e){this.shapeId},e.\u0275fac=function(t){return new(t||e)(E.fc(I.e),E.fc(v.a),E.fc(O.a),E.fc(r.x),E.fc(k.a),E.fc(a.B),E.fc(E.r),E.fc(a.Jb),E.fc(r.o))},e.\u0275cmp=E.Zb({type:e,selectors:[["shape-data-editor"]],viewQuery:function(e,t){var n;(1&e&&E.hd(M,!0,a.k),2&e)&&(E.Lc(n=E.uc())&&(t.tabsCmp=n.first))},decls:16,vars:5,consts:[[1,"shape-data-editor-container"],[1,"shape-data-editor-tabs-section"],[1,"shape-data-editor-header","fx-margin-bottom-15"],[1,"shape-data-editor-header-title"],[3,"value","click","changedText"],["editableLabel",""],["class","shape-data-editor-buttons-group",4,"ngIf"],[1,"shape-data-editor-tabs"],["context","right.data",3,"tabs"],["tabsCmp",""],[1,"shape-data-editor-comments-section"],["translate","",1,"shape-data-editor-comments-header"],[1,"shape-data-editor-comments-threadview"],[1,"shape-data-editor-buttons-group"]],template:function(e,t){1&e&&(E.lc(0,"div",0),E.lc(1,"div",1),E.lc(2,"div",2),E.lc(3,"div",3),E.lc(4,"editable-label",4,5),E.tc("click",(function(e){return e.target.focus()}))("changedText",(function(e){return t.labelChanged(e)})),E.yc(6,"async"),E.kc(),E.kc(),E.ad(7,D,2,0,"div",6),E.kc(),E.lc(8,"div",7),E.gc(9,"abs-tab",8,9),E.kc(),E.kc(),E.lc(11,"div",10),E.lc(12,"div",11),E.cd(13,"SHAPE_DATA.COMMENTS.TITLE"),E.kc(),E.gc(14,"div",12),E.gc(15,"shape-data-editor-comments"),E.kc(),E.kc()),2&e&&(E.Sb(4),E.Cc("value",E.zc(6,3,t.shapeName).value),E.Sb(3),E.Cc("ngIf",t.hasCustomDbPermission&&"home"!==t.state.get("CurrentProject")),E.Sb(2),E.Cc("tabs",t.tabs))},directives:[T.a,_.t,j.a,I.a,P.a,A.a],pipes:[_.b],styles:[".shape-data-editor-tabs[_ngcontent-%COMP%]{height:calc(100% - 55px);overflow:hidden}.shape-data-editor-buttons-group[_ngcontent-%COMP%]{position:absolute;right:0;top:20px}abs-tab[_ngcontent-%COMP%]{display:block;height:100%}.shape-data-editor-overlay[_ngcontent-%COMP%]{z-index:100;background-color:hsla(0,0%,40.8%,.8)}.shape-data-editor-container[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;position:relative}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:focus, .shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:hover{background-color:#fff}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label{margin-right:12px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-view{position:relative!important;top:0;left:0;z-index:1000;transform:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-container{position:relative;z-index:2;background:unset;border:unset;box-shadow:unset;border-radius:unset;width:100%;transform:unset}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input-user{display:none}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input{border-top:unset!important;margin-top:-16px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input.main-comment-input{position:absolute;bottom:8px;left:10px;width:220px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area{padding-left:15px;padding-right:0;max-height:650px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu{display:block;top:2px;right:-8px}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu .menu-content{top:22px!important;right:-10px!important;width:133px!important;padding:9px 15px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area comment-thread-item:first-child{display:none!important}.shape-data-editor-container[_ngcontent-%COMP%]  .simple-dd-item-container{margin:6px 0}.shape-data-editor-header[_ngcontent-%COMP%]{position:relative;padding-left:20px;padding-right:20px;padding-top:20px;font-size:18px}.shape-data-editor-header[_ngcontent-%COMP%]  .editable-label{font-size:18px}.shape-data-editor-header[_ngcontent-%COMP%]  .abs-tab-header{margin-right:10px}.shape-data-editor-header-title[_ngcontent-%COMP%]{width:80%}.shape-data-editor-tabs[_ngcontent-%COMP%]  .abs-tab-header{margin-right:10px}.shape-data-editor-copy-options[_ngcontent-%COMP%]{position:absolute;right:-15px;top:46px;width:50px}.shape-data-editor-copy-options-header[_ngcontent-%COMP%]{font-size:12px;line-height:20px;color:#7e7e7e}.shape-data-editor-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.shape-data-editor-icon-container[_ngcontent-%COMP%]{width:100px;margin-right:15px;border-radius:4px 0 0 4px}.shape-data-editor-icon-container.neutral[_ngcontent-%COMP%]{background-color:#40b29e}.shape-data-editor-icon-container.warning[_ngcontent-%COMP%]{background-color:#ffc648}.shape-data-editor-icon-container.success[_ngcontent-%COMP%]{background-color:#61a15e}.shape-data-editor-icon-container.error[_ngcontent-%COMP%]{background-color:#f36c67}.shape-data-editor-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.shape-data-editor-content-text[_ngcontent-%COMP%]{flex:1}.shape-data-editor-button-container[_ngcontent-%COMP%]{text-align:right}.shape-data-editor-close-btn[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute}.shape-data-editor-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}.shape-data-editor-comments-section[_ngcontent-%COMP%]{float:right;width:300px;height:100%;background:#f6f6f9}.shape-data-editor-comments-section[_ngcontent-%COMP%]  perfect-scrollbar{height:calc(100% - 50px)}.shape-data-editor-tabs-section[_ngcontent-%COMP%]{float:left;width:550px;height:100%}.shape-data-editor-comments-header[_ngcontent-%COMP%]{font-size:16px;margin:20px 10px 10px}[_nghost-%COMP%]  .mat-form-field{width:100%}[_nghost-%COMP%]  .mat-input-element{caret-color:unset!important}[_nghost-%COMP%]  .mat-form-field-underline, [_nghost-%COMP%]  span.mat-form-field-ripple{display:none}[_nghost-%COMP%]  .mat-form-field-infix{padding:4px;margin-top:-10px}[_nghost-%COMP%]  .mat-form-field-wrapper{padding-bottom:2px!important}[_nghost-%COMP%]  .mat-ripple-element{display:none!important}"],changeDetection:0}),e}()},SBjo:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),r=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),u=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(e){var n,r,a=t.state.get("Selected"),o=!0;try{for(var s=Object(i.k)(a),c=s.next();!c.done;c=s.next()){var u=c.value;if(!e.shapes[u].isLocked){o=!1;break}}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!o})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.prototype.getApplyData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(u.pc(s.a),u.pc(a.Jb),u.pc(r.a))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},SKSx:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n("D57K"),r=n("h1tj"),a=n("X0jn"),o=n("C0rp"),s=function(e){function t(t,n,i,r,a,o){var s=e.call(this)||this;return s.value=t,s.text=n,s.width=a,s.height=o,s.graphics.clear(),s.graphics.beginFill("rgba(0,0,0,0.01)"),s.graphics.drawRect(0,0,s.width,s.height),s.graphics.endFill(),s.x=i,s.y=r,s}return Object(i.e)(t,e),t.prototype.getCursor=function(e){return{cursor:"pointer",tail:null,type:"css"}},t}(r.Shape),c=function(e){function t(t,n){var i=e.call(this)||this;i.text=t,i.origin=n;var r=o.document(a.c);return r.load(t.content),r.width(t.width),r.getLinksData().forEach((function(e){var t=new s(e.value,e.text,e.x,e.y,e.width,e.height);i.addChild(t)})),i}return Object(i.e)(t,e),t.prototype.destroy=function(){},t}(r.Container)},STWM:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("5xGT"),r=n("6Oco"),a=n("CSUU"),o=n("Oggp"),s=n("19Zn"),c=n("EM62"),u=function(){function e(e){this.smartContainerSvc=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"ContainerChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges(),i=e.__sakota__.getTarget();if(n.$set)return this.containerXChange(e,n),this.containerYChange(e,n),this.containerZIndexChage(e,n),this.containerAngleChange(e,n),this.containerAnyChange(e,n),this.containerScaleChange(e,n),this.containerIdentifierChange(e,n,i),this.reScaleToDateFit(e,n,t),Object(r.b)()},e.prototype.containerXChange=function(t,n){for(var i in n.$set){e.regexX.lastIndex=0;var r=e.regexX.exec(i);if(r){var a=r[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.containerScaleChange=function(t,n){for(var i in n.$set){e.regexScaleX.lastIndex=0;var r=e.regexScaleX.exec(i)||e.regexScaleY.exec(i);if(r){var a=r[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.reScaleToDateFit=function(t,n,i){if("Execute"===i)for(var r in n.$set){e.regexScaleX.lastIndex=0;var a=e.regexScaleX.exec(r)||e.regexScaleY.exec(r);if(a){var c=a[1],u=t.shapes[c];if(!(!u.isContainer||u.containerContexts.length<1||u.containerContexts.length>0&&u.containerContexts[0]!==s.B.XWithWidth)){var l=u.data.startDate.value,p=u.data.endDate.value,d=Object(o.a)(p,l),h=Math.floor(u.drawWidth/d)*d;u.scaleX=h/u.defaultBounds.width}}}},e.prototype.containerIdentifierChange=function(t,n,i){var r=this,a=function(a){e.regexDataChanges.lastIndex=0;var o=e.regexDataChanges.exec(a);if(!o)return"continue";if(/data.identifier.value/.test(a)){var s=o[1],c=n.$set[a],u=i.shapes[s].data.identifier.value,l=t.shapes[s];Object.keys(l.children).forEach((function(e){var n=t.shapes[e];r.smartContainerSvc.changeTheIdentifier(t,n,u,c)}))}};for(var o in n.$set)a(o)},e.prototype.containerYChange=function(t,n){for(var i in n.$set){e.regexY.lastIndex=0;var r=e.regexY.exec(i);if(r){var a=r[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.containerAngleChange=function(t,n){for(var i in n.$set){e.regexAngle.lastIndex=0;var r=e.regexAngle.exec(i);if(r){var a=r[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.updateTransform=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length)for(var n in t.children){var r=e.shapes[n];if(r&&!r.isConnector()){var a=t.children[n].relativeX,o=t.children[n].relativeY,s=t.children[n].relativeAngle,c={x:{value:a,type:"fixed-start"},y:{value:o,type:"fixed-start"}},u=i.ob.onRect(c,t.defaultBounds,t.transform),l=t.angle+s;r.angle!==l&&(r.angle=l),r.x!==u.x&&(r.x=u.x),r.y!==u.y&&(r.y=u.y),this.updateTransform(e,r)}}},e.prototype.containerZIndexChage=function(t,n){for(var i in n.$set){e.regexZindex.lastIndex=0;var r=e.regexZindex.exec(i);if(r){var a=r[1],o=t.shapes[a];this.updateZIndex(t,o)}}},e.prototype.updateZIndex=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length){var n=function(n){var r=e.shapes[n];if(r){var a=t.children[r.id].relativeZIndex,o=t.zIndex+1+a;r.zIndex!==o&&(r.zIndex=o),(r.connectors||[]).forEach((function(t){e.shapes[t.connector.id].zIndex!==o&&(e.shapes[t.connector.id].zIndex=o)})),i.updateZIndex(e,r)}},i=this;for(var r in t.children)n(r)}},e.prototype.containerAnyChange=function(t,n){var i=new Set;for(var r in n.$set){e.regexAny.lastIndex=0;var a=e.regexAny.exec(r);if(a){var o=a[1],s=t.shapes[o];i.has(o)||this.callContainerChangeHook(t,s),i.add(o)}}},e.prototype.callContainerChangeHook=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length)for(var n in t.children){var i=e.shapes[n];i&&(i.containerChange&&i.containerChange(i,e.shapes[i.containerId]),this.callContainerChangeHook(e,i))}},e.regexX=/shapes\.([^\.]+)\.x/g,e.regexY=/shapes\.([^\.]+)\.y/g,e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexScaleY=/shapes\.([^\.]+)\.scaleY/g,e.regexZindex=/shapes\.([^\.]+)\.zIndex/g,e.regexAngle=/shapes\.([^\.]+)\.angle/g,e.regexAny=/shapes\.([^\.]+)\./g,e.regexDataChanges=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.\u0275fac=function(t){return new(t||e)(c.pc(a.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},T4Sa:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var i=n("D57K"),r=n("EM62"),a=n("3+4Q"),o=n("5xGT"),s=n("qMyy"),c=n("yn08"),u=n("C05f"),l=n("ZTXN"),p=n("KTx3"),d=n("HM3f"),h=n("ROBh"),f=n("mWib"),g=n("8j5Y"),m=n("Ohay"),v=n("YtkY"),b=n("kuMc"),y=n("J+dc"),C=n("TLy2"),O=n("xVbo"),x=n("X0jn"),S=n("hX56"),k=n("4y1S"),w=n("nsO7"),E=n("ljsB"),I=n("QoSw"),T=n("lu3Q"),_=n("sXdR"),j=n("s2Ay"),P=n("crdX"),A=n("2kYt"),M=n("ZFuN"),D=n("K0+f"),R=n("nT0V"),L=["cancelButton"],F=["container"];function N(e,t){1&e&&(r.lc(0,"div",14),r.lc(1,"span",15),r.cd(2,"MESSAGES.NO_COMMENTS"),r.kc(),r.kc())}function B(e,t){1&e&&(r.lc(0,"div",16),r.gc(1,"img",17),r.lc(2,"span",18),r.cd(3,"MESSAGES.COMMENTS_TIP_1"),r.kc(),r.lc(4,"span",19),r.cd(5,"MESSAGES.COMMENTS_TIP_2"),r.kc(),r.kc())}function U(e,t){if(1&e){var n=r.mc();r.lc(0,"div",22),r.lc(1,"comment-thread-item",23),r.tc("click",(function(){r.Oc(n);var e=t.$implicit;return r.xc(2).handleCommentItemClick(e.parentComment)})),r.kc(),r.kc()}if(2&e){var i=t.$implicit;r.Xb("active",i.selected),r.Sb(1),r.Cc("comment",i.latestComment)("commenter",i.threadCommenter)("threadCommentor",i.previousThreadCommenter)("threadCount",i.commentCount)("showControls",!1)}}function z(e,t){if(1&e&&(r.lc(0,"div",20),r.ad(1,U,2,7,"div",21),r.kc()),2&e){var n=t.ngIf;r.Sb(1),r.Cc("ngForOf",n)}}function V(e,t){if(1&e&&(r.lc(0,"div",27),r.lc(1,"label"),r.cd(2),r.yc(3,"async"),r.kc(),r.kc()),2&e){var n=r.xc(2);r.Sb(2),r.ed(" ",r.zc(3,1,n.resolvedLabel)," ")}}function G(e,t){if(1&e){var n=r.mc();r.lc(0,"div",28),r.lc(1,"comment-thread-item",29),r.tc("click",(function(){r.Oc(n);var e=t.$implicit;return r.xc(2).handleCommentItemClick(e.parentComment)})),r.kc(),r.kc()}if(2&e){var i=t.$implicit;r.Sb(1),r.Cc("comment",i.latestComment)("commenter",i.threadCommenter)("threadCommentor",i.previousThreadCommenter)("resolvedCommentor",i.resolvedCommentor)("threadCount",i.commentCount)("showControls",!1)}}function H(e,t){if(1&e&&(r.lc(0,"div",24),r.ad(1,V,4,3,"div",25),r.ad(2,G,2,6,"div",26),r.kc()),2&e){var n=t.ngIf;r.Sb(1),r.Cc("ngIf",n.length>0),r.Sb(1),r.Cc("ngForOf",n)}}var W=function(e){return{"fx-hidden":e}},Y=function(e){return{cursor:e}},X=function(e){return{value1:e}},q=function(e){return{event:"right.comment.indicator.toggle",data:e}},K=function(){function e(e,t,n,i,r,a,o){this.commands=e,this.state=t,this.datastore=n,this.userLocator=i,this.translateService=r,this.ll=a,this.cursorGen=o,this.toggleEnabled=new u.a(!1),this.toggleCommandHandler=new l.a,this.intervalDuration=3e3,this.toggleThrottle=400,this.isCommentMode=new u.a(!1),this.buttonCursor=new l.a,this.subs=[],this.init()}return Object.defineProperty(e,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"diagramcomments"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"comment"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translateService.instant("TOOLTIPS.DIAGRAM_COMMENTS")},enumerable:!1,configurable:!0}),e.prototype.handleCommentToggle=function(e){this.toggleCommandHandler.next(e)},e.prototype.handleToggleChange=function(){var e=this;return this.toggleCommandHandler.pipe(Object(f.a)(this.toggleThrottle),Object(_.lodashThrottle)(this.toggleThrottle,{leading:!1,trailing:!0}),Object(g.a)((function(t){e.commands.dispatch(k.u.updateUserPreference,{preferenceName:"show_comment_indicator",value:t})})))},e.prototype.handleCommentItemClick=function(e){var t=this;o.Lb.track("right.comment.show",{value1Type:"trigger",value1:"panel"}),this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(g.a)((function(n){n.shapes&&n.shapes[e.shapeId]?t.commands.dispatch(E.a.focusToPoint,{shapeIds:[e.shapeId],coordinates:e.locOnDiagram}):t.commands.dispatch(E.a.focusToPoint,{shapeIds:null,coordinates:e.locOnDiagram})}))).subscribe();var n={visible:!0,threadId:e.id,comments:[e]};this.state.set("CommentThreadData",n)},e.prototype.getCommentToggleState=function(){var e=this;return this.userLocator.getCommentToggleState().pipe(Object(m.a)(),Object(v.a)((function(t){e.toggleEnabled.next(t)})))},e.prototype.onActive=function(){o.Lb.track("right.comments.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){o.Lb.track("right.comments.panel.click",{value1Type:"status",value1:"close"}),this.toggleAddCommentMode(!1)},e.prototype.handleAddButtonClick=function(){var e=this;Object(p.a)(this.cancelButton.nativeElement,"mouseover").pipe(Object(g.a)((function(e){return e.stopPropagation()})),Object(b.a)(Object(p.a)(this.container.nativeElement,"mouseover").pipe(Object(g.a)((function(){return e.buttonCursor.next(e.getButtonCursor())}))))).subscribe(),o.Lb.track("right.comment.add.click",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!0)},e.prototype.handleCancelButtonClick=function(){o.Lb.track("right.comment.cancel",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!1)},e.prototype.toggleAddCommentMode=function(e){var t;t=e?{state:c.b.Comment}:{state:c.b.Normal},this.isCommentMode.next(e),this.commands.dispatch(s.a.changeMouseControlState,null,t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.init=function(){var e=this;this.subs.push(this.getHideHelpMessageInteraction().subscribe((function(){return e.isCommentMode.next(!1)})),this.state.changes("CurrentDiagram").pipe(Object(g.a)((function(t){e.diagramId=t,e.unresolvedComments=e.getUnresolvedComments(),e.resolvedComments=e.getResolvedComments(),e.showDefaultMessage=e.shouldShowDefaultMessage(),e.resolvedLabel=e.getResolvedLabel()}))).subscribe(),this.checkForNewComments().subscribe(),this.getCommentToggleState().subscribe(),this.handleToggleChange().subscribe(),this.handleCancelKeyboardEvent().subscribe(),this.state.changes("CurrentInteractionHandler").pipe(Object(m.a)((function(e,t){return e.type===t.type})),Object(g.a)((function(t){var n=t.injector.get(t.type).defaultCursor;e.buttonCursor.next(e.getButtonCursor(n))}))).subscribe())},e.prototype.getButtonCursor=function(e){return e&&"cur"===e.type&&"comment"===e.cursor?this.cursorGen.getCursorIcon(e):"pointer"},e.prototype.updateSelectedProperty=function(e){var t=this;return this.state.changes("CommentThreadData").pipe(Object(v.a)((function(n){return n.visible?e.map((function(e){return e.parentComment.id===n.threadId?(e.selected=!0,t.startMarkSeenByTimer(e.parentComment)):e.selected=!1,e})):e.map((function(e){return e.selected=!1,e}))})))},e.prototype.startMarkSeenByTimer=function(e){var t=this;setTimeout((function(){return Object(i.c)(t,void 0,void 0,(function(){return Object(i.f)(this,(function(t){return this.markSeenBy(e),[2]}))}))}),this.intervalDuration)},e.prototype.markSeenBy=function(e){var t=this;this.datastore.find(a.a,{diagramId:this.diagramId,parentId:e.id}).pipe(Object(y.a)(1),Object(g.a)((function(n){var i=[];t.shouldAddSeenBy(e)&&i.push(e.id),n.forEach((function(e){t.shouldAddSeenBy(e)&&i.push(e.id)})),i.length>0&&t.commands.dispatch(s.a.markCommentSeen,{commentIds:i,userId:t.state.get("CurrentUser")})}))).subscribe()},e.prototype.shouldAddSeenBy=function(e){var t=this.state.get("CurrentUser");return e.userId!==t&&!e.seenBy.includes(t)},e.prototype.checkForNewComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,$or:[{resolved:null},{resolved:!1}]}).pipe(Object(g.a)((function(t){for(var n=!1,i=0;i<t.length;i++)if(t[i].isNew(e.state.get("CurrentUser"))){n=!0;break}e.state.set("ShowSideBarButtonIndicator",{id:e.id,show:n})})))},e.prototype.shouldShowDefaultMessage=function(){return Object(d.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(v.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return 0===n.length&&0===r.length})))},e.prototype.getResolvedComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,parentId:null,resolved:{$exists:!0}}).pipe(Object(C.a)((function(t){return e.getCommentList(t)})),Object(C.a)((function(t){return t.length>0?e.updateCommentWithResolvedUser(t):Object(h.a)([])})))},e.prototype.updateCommentWithResolvedUser=function(e){var t=this;return d.b.apply(void 0,Object(i.j)(e.map((function(e){return t.userLocator.getUserInfo(e.parentComment.resolvedBy).pipe(Object(O.a)((function(e){return!!e})),Object(y.a)(1),Object(v.a)((function(t){return e.resolvedCommentor=t,e})))}))))},e.prototype.getUnresolvedComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]}]}).pipe(Object(C.a)((function(t){return e.getCommentList(t)})),Object(C.a)((function(t){return e.updateSelectedProperty(t)})))},e.prototype.getCommentList=function(e){var t=this;return e&&e.length>0?d.b.apply(void 0,Object(i.j)(e.map((function(e){return t.getCommentItem(e)})))).pipe(Object(v.a)((function(e){return e=e.filter((function(e){return!e.latestComment.deleted})),Object(w.orderBy)(e,["lastUpdatedTime"],["desc"])}))):Object(h.a)([])},e.prototype.getCommentItem=function(e){var t=this;return this.datastore.find(a.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:e.id},{sort:{lastUpdated:1}}).pipe(Object(C.a)((function(n){n.unshift(e);var r=t.getCommenterIds(n,2);return d.b.apply(void 0,Object(i.j)(r.map((function(e){return t.userLocator.getUserInfo(e).pipe(Object(O.a)((function(e){return!!e})),Object(y.a)(1))})))).pipe(Object(v.a)((function(i){return t.buildCommentItem(i[i.length-1],i[i.length-2],n.length,e,n[n.length-1],n[n.length-1].lastUpdated)})))})))},e.prototype.buildCommentItem=function(e,t,n,i,r,a){var o={threadCommenter:e,commentCount:n,latestComment:r,parentComment:i,lastUpdatedTime:a,selected:!1};return r.parentId||(r.parentId=null),t&&(o.previousThreadCommenter=t),o},e.prototype.getCommenterIds=function(e,t){var n,r,a=[];try{for(var o=Object(i.k)(e),s=o.next();!s.done;s=o.next()){var c=s.value;if(a.includes(c.userId)||a.push(c.userId),a.length>=t)break}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},e.prototype.handleCancelKeyboardEvent=function(){var e=this;return Object(p.a)(window,"keydown").pipe(Object(O.a)((function(e){return e.keyCode===x.k.Escape})),Object(g.a)((function(){o.Lb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),e.toggleAddCommentMode(!1)})))},e.prototype.getHideHelpMessageInteraction=function(){return this.state.changes("MouseControlState").pipe(Object(O.a)((function(e){return e!==c.b.Comment})))},e.prototype.getResolvedLabel=function(){var e=this;return this.resolvedComments.pipe(Object(C.a)((function(t){return e.translate("COMMENTS.LABELS.RESOLVED",{noOfThreads:t.length})})))},e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(y.a)(1))},e.\u0275fac=function(t){return new(t||e)(r.fc(o.B),r.fc(o.Jb),r.fc(S.b),r.fc(k.x),r.fc(j.e),r.fc(I.a),r.fc(T.a))},e.\u0275cmp=r.Zb({type:e,selectors:[["comments-panel"]],viewQuery:function(e,t){var n;(1&e&&(r.hd(L,!0,r.r),r.hd(F,!0,r.r)),2&e)&&(r.Lc(n=r.uc())&&(t.cancelButton=n.first),r.Lc(n=r.uc())&&(t.container=n.first))},inputs:{threads:"threads"},decls:30,vars:47,consts:[[1,"comments-panel-container"],["container",""],[1,"panel-heading","comments-panel-padding"],["translate","",1,"fx-flex-expand"],[1,"panel-header-buttons","fx-margin-top-5","fx-margin-bottom-10","comments-panel-padding"],["data-testid","add-comment-button","translate","",1,"nu-btn-med","primary","fx-span-width","fx-no-margin",3,"ngClass","ngStyle","click"],["translate","",1,"nu-btn-med","crimson","fx-span-width","fx-no-margin",3,"ngClass","ngStyle","click"],["cancelButton",""],[1,"comment-panel-toggle-button-container"],["data-testid","comment-show-toggle",3,"label","checked","trackAction","change"],["class","comments-panel-padding comments-panel-default-msg",4,"ngIf"],["class","comments-panel-padding comments-panel-help-msg fx-margin-top-20 fx-margin-bottom-10",4,"ngIf"],["class","comments-panel-comments-container unresolved-comments",4,"ngIf"],["class","comments-panel-comments-container resolved-comments",4,"ngIf"],[1,"comments-panel-padding","comments-panel-default-msg"],["translate","",1,"grey"],[1,"comments-panel-padding","comments-panel-help-msg","fx-margin-top-20","fx-margin-bottom-10"],["src","./assets/images/comments-panel/comment.svg",1,"comments-panel-help-image","fx-margin-bottom-10"],["translate","",1,"grey","fx-block","fx-margin-bottom-20"],["translate","",1,"grey","fx-block"],[1,"comments-panel-comments-container","unresolved-comments"],["class","comments-panel-comment-item unresolved-comment",3,"active",4,"ngFor","ngForOf"],[1,"comments-panel-comment-item","unresolved-comment"],[3,"comment","commenter","threadCommentor","threadCount","showControls","click"],[1,"comments-panel-comments-container","resolved-comments"],["class","comments-panel-padding fx-margin-bottom-10",4,"ngIf"],["class","comments-panel-comment-item resolved-comment",4,"ngFor","ngForOf"],[1,"comments-panel-padding","fx-margin-bottom-10"],[1,"comments-panel-comment-item","resolved-comment"],[3,"comment","commenter","threadCommentor","resolvedCommentor","threadCount","showControls","click"]],template:function(e,t){1&e&&(r.lc(0,"perfect-scrollbar"),r.lc(1,"div",0,1),r.lc(3,"div",2),r.lc(4,"h2",3),r.cd(5,"PANEL_HEADINGS.COMMENTS"),r.kc(),r.kc(),r.lc(6,"div",4),r.lc(7,"button",5),r.tc("click",(function(){return t.handleAddButtonClick()})),r.yc(8,"async"),r.yc(9,"async"),r.cd(10," COMMENTS.BUTTONS.ADD_COMMENT "),r.kc(),r.lc(11,"button",6,7),r.tc("click",(function(){return t.handleCancelButtonClick()})),r.yc(13,"async"),r.yc(14,"async"),r.cd(15," BUTTONS.CANCEL "),r.kc(),r.kc(),r.lc(16,"div",8),r.lc(17,"toggle-button",9),r.tc("change",(function(e){return t.handleCommentToggle(e)})),r.yc(18,"translate"),r.yc(19,"async"),r.yc(20,"async"),r.kc(),r.kc(),r.ad(21,N,3,0,"div",10),r.yc(22,"async"),r.yc(23,"async"),r.ad(24,B,6,0,"div",11),r.yc(25,"async"),r.ad(26,z,2,1,"div",12),r.yc(27,"async"),r.ad(28,H,3,2,"div",13),r.yc(29,"async"),r.kc(),r.kc()),2&e&&(r.Sb(7),r.Cc("ngClass",r.Hc(35,W,r.zc(8,11,t.isCommentMode)))("ngStyle",r.Hc(37,Y,r.zc(9,13,t.buttonCursor))),r.Sb(4),r.Cc("ngClass",r.Hc(39,W,!r.zc(13,15,t.isCommentMode)))("ngStyle",r.Hc(41,Y,r.zc(14,17,t.buttonCursor))),r.Sb(6),r.Dc("label",r.zc(18,19,"LABELS.COMMENT_TOGGLE")),r.Cc("checked",r.zc(19,21,t.toggleEnabled))("trackAction",r.Hc(45,q,r.Hc(43,X,r.zc(20,23,t.toggleCommandHandler)))),r.Sb(4),r.Cc("ngIf",r.zc(22,25,t.showDefaultMessage)&&!r.zc(23,27,t.isCommentMode)),r.Sb(3),r.Cc("ngIf",r.zc(25,29,t.isCommentMode)),r.Sb(2),r.Cc("ngIf",r.zc(27,31,t.unresolvedComments)),r.Sb(2),r.Cc("ngIf",r.zc(29,33,t.resolvedComments)))},directives:[P.b,j.a,A.q,A.w,M.a,D.a,A.t,A.s,R.a],pipes:[A.b,j.d],styles:[".panel-heading[_ngcontent-%COMP%]{margin-bottom:10px}.comments-panel-comment-item[_ngcontent-%COMP%], .comments-panel-padding[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.comments-panel-container[_ngcontent-%COMP%]{width:215px;height:100%}.comments-panel-default-msg[_ngcontent-%COMP%]{line-height:20px}.comments-panel-default-msg[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-bottom:-3px}.comments-panel-comment-item[_ngcontent-%COMP%]{margin-bottom:5px;cursor:pointer}.comments-panel-comment-item[_ngcontent-%COMP%]:hover{background-color:#f2f5fb}.comments-panel-comment-item[_ngcontent-%COMP%]  .cti{padding-left:0;padding-right:0}.comments-panel-comment-item[_ngcontent-%COMP%]  .cti *{cursor:pointer}.comments-panel-comment-item.active[_ngcontent-%COMP%]{background-color:#f2f5fb}.resolved-comment[_ngcontent-%COMP%]  .cti *{color:#9aa0a9}.resolved-comment[_ngcontent-%COMP%]  .user-img-container.active .user-img-inner:after{background:hsla(0,0%,100%,.7)!important}.comments-panel-comments-container[_ngcontent-%COMP%]{margin-bottom:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-bottom:15px;margin-top:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]  label{line-height:18px}.comments-panel-help-image[_ngcontent-%COMP%]{max-width:100%}.comments-panel-help-msg[_ngcontent-%COMP%]{line-height:20px}.comments-panel-help-msg[_ngcontent-%COMP%]   .fx-block[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),e}()},TQyE:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("mWib"),r=n("ZTXN"),a=n("C05f"),o=n("6Oco"),s=(n("Cupj"),n("nsO7")),c=n("EM62"),u=n("/YfA"),l=n("2kYt"),p=["colorpicker"];function d(e,t){1&e&&(c.lc(0,"div",4),c.cd(1,"-"),c.kc())}var h=function(){function e(){this._change=new r.a,this._isDiffColor=new a.a(!1),this._label=new a.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.pipe(Object(i.a)(100))},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=Object(s.clone)(e),void 0!==this._data.params&&(this._data.params.isDiffColor?(this._data.value="#FFFFFF",this._isDiffColor.next(!0)):this._isDiffColor.next(!1))},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.colorpicker.nativeElement.style.backgroundColor=this._data.value,this._label.next(this._props.label)},e.prototype.applyAnimated=function(){return this.apply(),o.a},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Zb({type:e,selectors:[["nu-color-picker"]],viewQuery:function(e,t){var n;(1&e&&c.Vc(p,!0),2&e)&&(c.Lc(n=c.uc())&&(t.colorpicker=n.first))},decls:8,vars:14,consts:[[1,"colorpicker-container"],[1,"colorpicker-button","fx-center-all",3,"colorPicker","cpPosition","cpOpenOnHover","cpUseRootViewContainer","colorPickerChange"],["colorpicker",""],["class","colorpicker-empty gray",4,"ngIf"],[1,"colorpicker-empty","gray"]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"div",1,2),c.tc("colorPickerChange",(function(e){return t._data.value=e}))("colorPickerChange",(function(e){return t._change.next({value:e})})),c.ad(3,d,2,0,"div",3),c.yc(4,"async"),c.kc(),c.lc(5,"label"),c.cd(6),c.yc(7,"async"),c.kc(),c.kc()),2&e&&(c.Sb(1),c.Xc("top","0px")("left","0px"),c.Cc("colorPicker",t._data.value)("cpPosition","left-top")("cpOpenOnHover",!0)("cpUseRootViewContainer",!0),c.Sb(2),c.Cc("ngIf",c.zc(4,10,t._isDiffColor)),c.Sb(3),c.dd(c.zc(7,12,t._label)))},directives:[u.a,l.t],pipes:[l.b],styles:[".colorpicker-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.colorpicker-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:10px}.colorpicker-button[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:25px;border:1px solid #d3d3e7;cursor:pointer}.colorpicker-button[_ngcontent-%COMP%]:hover{border:1px solid #ffc648}.colorpicker-empty[_ngcontent-%COMP%]{font-weight:bolder;font-size:larger}.colorpicker-empty.gray[_ngcontent-%COMP%]{color:#939fab}"],changeDetection:0}),e}()},VT3A:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n("D57K"),r=n("nsO7"),a=n("T4Sa"),o=n("qMyy"),s=n("3+4Q"),c=n("lu3Q"),u=n("QoSw"),l=n("5xGT"),p=n("C05f"),d=n("HM3f"),h=n("ROBh"),f=n("8j5Y"),g=n("TLy2"),m=n("YtkY"),v=n("Ohay"),b=n("xVbo"),y=n("J+dc"),C=n("hX56"),O=n("4y1S"),x=n("EM62"),S=n("s2Ay"),k=n("crdX"),w=n("2kYt"),E=n("Wrqg"),I=n("nT0V");function T(e,t){1&e&&(x.lc(0,"div",8),x.cd(1,"SHAPE_DATA.COMMENTS.NO_COMMENTS"),x.kc())}function _(e,t){if(1&e){var n=x.mc();x.lc(0,"comment-thread-item",13),x.tc("itemClicked",(function(){x.Oc(n);var e=x.xc().$implicit;return x.xc(2).handleCommentItemClick(e.parentComment)}))("replyClicked",(function(){x.Oc(n);var e=x.xc().$implicit;return x.xc(2).handleCommentItemClick(e.parentComment)})),x.kc()}if(2&e){var i=x.xc().$implicit;x.Cc("comment",i.latestComment)("commenter",i.threadCommenter)("threadCommentor",i.previousThreadCommenter)("threadCount",i.commentCount)("showControls",!0)("showReplayControl",!0)}}function j(e,t){if(1&e){var n=x.mc();x.lc(0,"comment-thread-item",13),x.tc("itemClicked",(function(){x.Oc(n);var e=x.xc().$implicit;return x.xc(2).handleCommentItemClick(e.parentComment)}))("replyClicked",(function(){x.Oc(n);var e=x.xc().$implicit;return x.xc(2).handleCommentItemClick(e.parentComment)})),x.kc()}if(2&e){var i=x.xc().$implicit;x.Cc("comment",i.parentComment)("commenter",i.threadCommenter)("threadCommentor",i.previousThreadCommenter)("threadCount",i.commentCount)("showControls",!0)("showReplayControl",!0)}}function P(e,t){if(1&e&&(x.lc(0,"div",11),x.ad(1,_,1,6,"comment-thread-item",12),x.ad(2,j,1,6,"comment-thread-item",12),x.kc()),2&e){var n=t.$implicit,i=x.xc(2);x.Xb("active",n.selected),x.Tb("data-thread-id",null==n||null==n.parentComment?null:n.parentComment.id),x.Sb(1),x.Cc("ngIf",!i.isThreadOpen(n.parentComment.id)),x.Sb(1),x.Cc("ngIf",i.isThreadOpen(n.parentComment.id))}}function A(e,t){if(1&e&&(x.lc(0,"div",9),x.ad(1,P,3,5,"div",10),x.kc()),2&e){var n=t.ngIf;x.Sb(1),x.Cc("ngForOf",n)}}function M(e,t){if(1&e&&(x.lc(0,"div",17),x.lc(1,"label"),x.cd(2),x.yc(3,"async"),x.kc(),x.kc()),2&e){var n=x.xc(2);x.Sb(2),x.ed(" ",x.zc(3,1,n.resolvedLabel)," ")}}function D(e,t){if(1&e){var n=x.mc();x.lc(0,"div",18),x.lc(1,"comment-thread-item",19),x.tc("click",(function(){x.Oc(n);var e=t.$implicit;return x.xc(2).handleCommentItemClick(e.parentComment)})),x.kc(),x.kc()}if(2&e){var i=t.$implicit;x.Tb("data-thread-id",null==i||null==i.parentComment?null:i.parentComment.id),x.Sb(1),x.Cc("comment",i.latestComment)("commenter",i.threadCommenter)("threadCommentor",i.previousThreadCommenter)("resolvedCommentor",i.resolvedCommentor)("threadCount",i.commentCount)("showControls",!1)}}function R(e,t){if(1&e&&(x.lc(0,"div",14),x.ad(1,M,4,3,"div",15),x.ad(2,D,2,7,"div",16),x.kc()),2&e){var n=t.ngIf;x.Sb(1),x.Cc("ngIf",n.length>0),x.Sb(1),x.Cc("ngForOf",n)}}var L=function(){return["Enter"]},F=function(e){function t(t,n,i,r,a,o,s){var c=e.call(this,t,n,i,r,a,o,s)||this;return c.commands=t,c.state=n,c.datastore=i,c.userLocator=r,c.translateService=a,c.ll=o,c.cursorGen=s,c.parentSelectorPrefix=".shape-data-editor-comments-comment-item",c.noComments=new p.a(!0),c}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"shapeId",{get:function(){return this.state.get("Selected")[0]},enumerable:!1,configurable:!0}),t.prototype.isThreadOpen=function(e){var t=this.state.get("CommentThreadData");return t.visible&&t.threadId===e},t.prototype.addNewComment=function(e){if(e=e.trim()){var t=l.sb.commentId();this.commands.dispatch(o.a.addComment,{comment:{id:t,comment:e,shapeId:this.shapeId},close:!0})}},t.prototype.handleCommentItemClick=function(e){var t=this.state.get("CommentThreadData"),n={visible:!0,threadId:e.id,comments:[e],parentSelector:this.parentSelectorPrefix+'[data-thread-id="'+e.id+'"]'};t.parentSelector===n.parentSelector&&(n.visible=!t.visible),this.state.set("CommentThreadData",n)},t.prototype.init=function(){var e=this;this.subs=[],this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(f.a)((function(t){e.diagramId=t,e.unresolvedComments=e.getShapeDataEditorOpen().pipe(Object(g.a)((function(){return e.getUnresolvedComments()}))),e.resolvedComments=e.getShapeDataEditorOpen().pipe(Object(g.a)((function(){return e.getResolvedComments()}))),e.resolvedLabel=e.getShapeDataEditorOpen().pipe(Object(g.a)((function(){return e.getResolvedLabel()})))}))).subscribe()),this.noCommentsSubscribe()},t.prototype.noCommentsSubscribe=function(){var e=this;this.subs.push(Object(d.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(m.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return n&&n.length>0||r&&r.length>0})),Object(v.a)()).subscribe((function(t){e.noComments.next(!t)})))},t.prototype.getResolvedComments=function(){var e=this;return this.datastore.find(s.a,{diagramId:this.diagramId,shapeId:this.shapeId,parentId:null,resolved:{$exists:!0}}).pipe(Object(g.a)((function(t){return e.getCommentList(t)})),Object(g.a)((function(t){return t.length>0?e.updateCommentWithResolvedUser(t):Object(h.a)([])})))},t.prototype.getUnresolvedComments=function(){var e=this;return this.datastore.find(s.a,{diagramId:this.diagramId,shapeId:this.shapeId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]}]}).pipe(Object(g.a)((function(t){return e.getCommentList(t)})),Object(g.a)((function(t){return e.updateSelectedProperty(t)})))},t.prototype.getShapeDataEditorOpen=function(){var e=this;return this.state.changes("Selected").pipe(Object(b.a)((function(e){return 1===e.length})),Object(g.a)((function(){return e.state.changes("CommentThreadData").pipe(Object(b.a)((function(e){return!e.visible})))})))},t.prototype.getCommentList=function(e){var t=this;return(e=Object(r.orderBy)(e,["lastUpdatedTime"],["asc"]))&&e.length>0?d.b.apply(void 0,Object(i.j)(e.map((function(e){return t.getCommentItem(e)})))).pipe(Object(m.a)((function(e){return e=e.filter((function(e){return!e.latestComment.deleted}))}))):Object(h.a)([])},t.prototype.getCommentItem=function(e){var t=this;return this.datastore.find(s.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:e.id},{sort:{lastUpdated:1}}).pipe(Object(y.a)(1),Object(g.a)((function(n){n.unshift(e);var r=t.getCommenterIds(n,2);return d.b.apply(void 0,Object(i.j)(r.map((function(e){return t.userLocator.getUserInfo(e).pipe(Object(b.a)((function(e){return!!e})),Object(y.a)(1))})))).pipe(Object(m.a)((function(i){return t.buildCommentItem(i[i.length-1],i[i.length-2],n.length,e,n[n.length-1],n[n.length-1].lastUpdated)})))})))},t.\u0275fac=function(e){return new(e||t)(x.fc(l.B),x.fc(l.Jb),x.fc(C.b),x.fc(O.x),x.fc(S.e),x.fc(u.a),x.fc(c.a))},t.\u0275cmp=x.Zb({type:t,selectors:[["shape-data-editor-comments"]],features:[x.Pb],decls:13,vars:19,consts:[[1,"shape-data-editor-comments-container"],["container",""],["class","shape-data-editor-comments-no-comments","translate","",4,"ngIf"],["class","shape-data-editor-comments-comments-container unresolved-comments",4,"ngIf"],["class","shape-data-editor-comments-comments-container resolved-comments",4,"ngIf"],[1,"comment-thread-input","main-comment-input"],[1,"comment-thread-input-box"],[3,"placeholder","clearOnSubmit","submitOnCode","submitOnBlur","multiLined","autoFocus","submit"],["translate","",1,"shape-data-editor-comments-no-comments"],[1,"shape-data-editor-comments-comments-container","unresolved-comments"],["class","shape-data-editor-comments-comment-item unresolved-comment",3,"active",4,"ngFor","ngForOf"],[1,"shape-data-editor-comments-comment-item","unresolved-comment"],[3,"comment","commenter","threadCommentor","threadCount","showControls","showReplayControl","itemClicked","replyClicked",4,"ngIf"],[3,"comment","commenter","threadCommentor","threadCount","showControls","showReplayControl","itemClicked","replyClicked"],[1,"shape-data-editor-comments-comments-container","resolved-comments"],["class","shape-data-editor-comments-padding fx-margin-bottom-10",4,"ngIf"],["class","shape-data-editor-comments-comment-item resolved-comment",4,"ngFor","ngForOf"],[1,"shape-data-editor-comments-padding","fx-margin-bottom-10"],[1,"shape-data-editor-comments-comment-item","resolved-comment"],[3,"comment","commenter","threadCommentor","resolvedCommentor","threadCount","showControls","click"]],template:function(e,t){1&e&&(x.lc(0,"perfect-scrollbar"),x.lc(1,"div",0,1),x.ad(3,T,2,0,"div",2),x.yc(4,"async"),x.ad(5,A,2,1,"div",3),x.yc(6,"async"),x.ad(7,R,3,2,"div",4),x.yc(8,"async"),x.lc(9,"div",5),x.lc(10,"div",6),x.lc(11,"text-input",7),x.tc("submit",(function(e){return t.addNewComment(e)})),x.yc(12,"translate"),x.kc(),x.kc(),x.kc(),x.kc(),x.kc()),2&e&&(x.Sb(3),x.Cc("ngIf",x.zc(4,10,t.noComments)),x.Sb(2),x.Cc("ngIf",x.zc(6,12,t.unresolvedComments)),x.Sb(2),x.Cc("ngIf",x.zc(8,14,t.resolvedComments)),x.Sb(4),x.Dc("placeholder",x.zc(12,16,"PLACEHOLDERS.COMMENT")),x.Cc("clearOnSubmit",!0)("submitOnCode",x.Gc(18,L))("submitOnBlur",!0)("submitOnBlur",!0)("multiLined",!0)("autoFocus",!0))},directives:[k.b,w.t,E.a,S.a,w.s,I.a],pipes:[w.b,S.d],styles:[".panel-heading[_ngcontent-%COMP%]{margin-bottom:10px}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%], .shape-data-editor-comments-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.shape-data-editor-comments-container[_ngcontent-%COMP%]{width:255px;height:100%}.shape-data-editor-comments-no-comments[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:14px;line-height:20px;color:#6a7172;margin-left:10px}.shape-data-editor-comments-default-msg[_ngcontent-%COMP%]{line-height:20px}.shape-data-editor-comments-default-msg[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-bottom:-3px}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]{margin-bottom:5px;cursor:pointer}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]:hover{background-color:#f2f5fb}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]  .cti{padding-left:0;padding-right:0}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]  .cti *{cursor:pointer}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]  comment-thread-item{margin-bottom:5px;cursor:pointer;background:#fff;border:.5px solid #c3c3de;box-sizing:border-box;box-shadow:0 2px 2px rgba(195,195,222,.25);border-radius:3px;position:relative;display:block;padding:2px 6px}.shape-data-editor-comments-comment-item.active[_ngcontent-%COMP%]{background-color:#f2f5fb}.resolved-comment[_ngcontent-%COMP%]  .cti *{color:#9aa0a9}.resolved-comment[_ngcontent-%COMP%]  .user-img-container.active .user-img-inner:after{background:hsla(0,0%,100%,.7)!important}.shape-data-editor-comments-comments-container[_ngcontent-%COMP%]{margin-bottom:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-bottom:15px;margin-top:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]  label{line-height:18px}.shape-data-editor-comments-help-image[_ngcontent-%COMP%]{max-width:100%}.shape-data-editor-comments-help-msg[_ngcontent-%COMP%]{line-height:20px}.shape-data-editor-comments-help-msg[_ngcontent-%COMP%]   .fx-block[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(a.a)},W0Mc:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),r=n("5xGT"),a=n("nsO7"),o=n("blAi"),s=n("EM62"),c=function(){function e(){this.gpBottomId="BRZfYLOPiRa",this.gpLeftId="pbnadF9Wirq",this.gpRightId="P9d4172UDLb",this.gpTopId="0FUuJlNPewl"}return Object.defineProperty(e,"SHAPE_TEXT_PADDING",{get:function(){return 10},enumerable:!1,configurable:!0}),e.prototype.reconnect=function(e,t,n){var i=this,r=t.shapes[e],a=this.getConnectorEndpoints(r,n),o=a.map((function(e){return i.getConnectedShape(e,t)}));return this.reconnectEndpoints(r,a,o)},e.prototype.reconnectEndpoints=function(e,t,n){var r=this,a=Object(i.h)(t,2),o=a[0],s=a[1];return n.some((function(e){return!e}))||!o.shapeId||o.gluepointLocked||!s.shapeId||s.gluepointLocked?t.map((function(e,t){return e.shapeId?e:r.clearEndpointGluepoint(e)})).map((function(e,t){var i=!(!n[t]||!n[t].gluepoints[e.gluepointId]);return e.shapeId&&n[t]&&e.gluepointId&&i&&e.gluepointLocked?r.setEndpointPosition(e,n[t]):e})).map((function(i,a){var o=!(!n[a]||!n[a].gluepoints[i.gluepointId]);if(i.shapeId&&n[a]&&(!i.gluepointLocked||!o)){var s=t[0===a?1:0],c=0===a?"from":"to";return r.setEndpointGluepoint(e,i,s,n[a],c)}return i})):this.selectClosestGluepointPair(e,t,n)},e.prototype.selectClosestGluepointPair=function(t,n,a){var o=this,s=Object(i.h)(n,2),c=s[0],u=s[1],l=Object(i.h)(a,2),p=l[0],d=l[1],h=e.SHAPE_TEXT_PADDING,f=p.getAvailableGluepoints([t.id],"from"),g=p.getStickyGluePoints(c.gluepointId);f.push.apply(f,Object(i.j)(g));var m=d.getAvailableGluepoints([t.id],"to"),v=d.getStickyGluePoints(u.gluepointId);m.push.apply(m,Object(i.j)(v));var b=p.primaryTextModel,y=d.primaryTextModel;b&&(f=f.filter((function(e){return!e.id.startsWith(o.getLowPriorityStickyGP(b))}))),y&&(m=m.filter((function(e){return!e.id.startsWith(o.getLowPriorityStickyGP(y))})));for(var C,O=f.map((function(e){return o.getGluepointPosition(e,p)})),x=m.map((function(e){return o.getGluepointPosition(e,d)})),S=1/0,k=0;k<f.length;++k){var w=f[k],E=O[k],I=r.mb.from(E),T=Object.keys(d.texts);if(!(d.texts&&1===T.length&&d.texts[T[0]]&&d.texts[T[0]].isPositionable()?d.getBoundsWithTexts().pad(h).toPolygon().isInside(E):d.bounds.pad(h).toPolygon().isInside(E))||p===d)for(var _=0;_<m.length;++_){var j=m[_];if(c.shapeId!==u.shapeId||w.id!==j.id){var P=x[_],A=I.distanceTo(P),M=Object.keys(p.texts),D=void 0;D=p.texts&&1===M.length&&p.texts[M[0]]&&p.texts[M[0]].isPositionable()?p.getBoundsWithTexts().pad(h).toPolygon().isInside(P):p.bounds.pad(h).toPolygon().isInside(P),A<S&&(!D||c.shapeId===u.shapeId)&&(C=[w,j],S=A)}}}return C&&C.length>0?(c.gluepointId=C[0].id.split("-stickyGP")[0],c.gluepointLocked=!1,u.gluepointId=C[1].id.split("-stickyGP")[0],u.gluepointLocked=!1,[this.setEndpointPosition(c,p),this.setEndpointPosition(u,d)]):n},e.prototype.getLowPriorityStickyGP=function(e){return e.x<0&&"fixed-end"===e.xType&&(!e.yType||"relative"===e.yType)&&.5===e.y?this.gpRightId.concat("-stickyGP"):e.x<0&&"fixed-start"===e.xType&&(!e.yType||"relative"===e.yType)&&.5===e.y?this.gpLeftId.concat("-stickyGP"):e.y<0&&"fixed-start"===e.yType&&(!e.xType||"relative"===e.xType)&&.5===e.x?this.gpTopId.concat("-stickyGP"):e.y<0&&"fixed-end"===e.yType&&(!e.xType||"relative"===e.xType)&&.5===e.x?this.gpBottomId.concat("-stickyGP"):void 0},e.prototype.getGluepointPosition=function(e,t){return o.a.getPosition(e,t.defaultBounds,t.transform)},e.prototype.getConnectorEndpoints=function(e,t){var n,r,o=e.getPoints(),s=[o[0],Object(a.last)(o)],c=function(e){var t=s.findIndex((function(t){return e.id===t.id}));s[t]=Object(i.a)(Object(i.a)({},s[t]),e)};try{for(var u=Object(i.k)(t),l=u.next();!l.done;l=u.next()){c(l.value)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return Object(a.cloneDeep)(s)},e.prototype.getConnectedShape=function(e,t){return e.shapeId?t.shapes[e.shapeId]:null},e.prototype.setEndpointPosition=function(e,t){var n=t.getGluepointPosition(e.gluepointId);return e.x=n.x,e.y=n.y,e},e.prototype.setEndpointGluepoint=function(e,t,n,i,r){var a=i.getAvailableGluepointsByPos(n,[e.id],r),o=t.shapeId===n.shapeId?a.filter((function(e){return e.gluepoint.id!==n.gluepointId})):a;return o.length>0&&(t.gluepointId=o[0].gluepoint.id,t.gluepointLocked=!1),this.setEndpointPosition(t,i)},e.prototype.clearEndpointGluepoint=function(e){return e.shapeId=null,e.gluepointId=null,e.gluepointLocked=null,e},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},X5Q9:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("C05f"),r=n("ZTXN"),a=n("6Oco"),o=n("ROBh"),s=(n("Cupj"),n("NNJu")),c=n("EM62"),u=n("pYIu"),l=n("tG6W"),p=n("2kYt"),d=n("vdZD");function h(e,t){if(1&e&&c.gc(0,"toolbar-shape-style-dropdown-item",11),2&e){var n=t.$implicit;c.Cc("isSelected",n.selected)("item",n.style)}}function f(e,t){if(1&e&&(c.lc(0,"div",9),c.ad(1,h,1,2,"toolbar-shape-style-dropdown-item",10),c.yc(2,"async"),c.kc()),2&e){var n=c.xc();c.Sb(1),c.Cc("ngForOf",c.zc(2,1,n._data).documentStyles)}}function g(e,t){if(1&e){var n=c.mc();c.lc(0,"div",12),c.tc("click",(function(){c.Oc(n);var e=t.$implicit;return c.xc().handleOnclickIcon(e.id)}))("mouseenter",(function(){c.Oc(n);var e=t.$implicit;return c.xc().handleOnclickIcon(e.id)})),c.yc(1,"async"),c.wc(),c.lc(2,"svg",13),c.gc(3,"use"),c.kc(),c.kc()}if(2&e){var i=t.$implicit,r=c.xc();c.Xb("selected",i.id===c.zc(1,3,r.getStyleType())),c.Sb(3),c.Tb("href",r.getIconHref(i.icon),null,"xlink")}}function m(e,t){if(1&e&&c.gc(0,"toolbar-shape-style-dropdown-item",16),2&e){var n=t.$implicit;c.Cc("item",n)}}function v(e,t){if(1&e&&(c.lc(0,"div",14),c.ad(1,m,1,1,"toolbar-shape-style-dropdown-item",15),c.yc(2,"async"),c.kc()),2&e){var n=c.xc();c.Sb(1),c.Cc("ngForOf",c.zc(2,1,n.styles))}}var b=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,delayToDrop:100}},y=function(){function e(){this._data=new i.a(null),this.styleType=new i.a(null),this.styles=new i.a(null),this.change=new r.a}return e.prototype.ngAfterViewInit=function(){var e=this;this.absDropdown.changed.subscribe((function(t){var n=e.data.documentStyles.find((function(e){return e.style.id===t[0]}));if(n)delete n.style.lineThickness,e.change.next(n.style);else{var i=e.styles.getValue().find((function(e){return e.id===t[0]}));delete i.lineThickness,e.change.next(i)}}))},e.prototype.setData=function(e){this.data=e,this._data.next(e),this.styles.next(this.data.palettes[0].palette.styles),this.styleType.next(null)},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(a.b)()},e.prototype.setProperties=function(e){this.props=e},e.prototype.getIconHref=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.prototype.handleOnclickIcon=function(e){this.styleType.next(e),this.styles.next(this.data.palettes.find((function(t){return t.id===e})).palette.styles)},e.prototype.getStyleType=function(){return this.styleType.getValue()||2!==this.data.palettes.length?this.styleType.getValue()||3!==this.data.palettes.length?this.styleType:Object(o.a)("fillColor"):Object(o.a)("lineColor")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Zb({type:e,selectors:[["toolbar-shape-style-dropdown"]],viewQuery:function(e,t){var n;(1&e&&c.hd(s.b,!0),2&e)&&(c.Lc(n=c.uc())&&(t.absDropdown=n.first))},decls:13,vars:12,consts:[[1,"ftb-item","tss-dd-container"],[3,"settings"],["dd",""],["ddbutton","",3,"props"],["dditem",""],["class","tss-dd-styles-container tss-dd-custom",4,"ngIf"],[1,"tss-dd-tab-header"],["class","tss-dd-tab-icon",3,"selected","click","mouseenter",4,"ngFor","ngForOf"],["class","tss-dd-styles-container",4,"ngIf"],[1,"tss-dd-styles-container","tss-dd-custom"],[3,"isSelected","item",4,"ngFor","ngForOf"],[3,"isSelected","item"],[1,"tss-dd-tab-icon",3,"click","mouseenter"],[1,"nu-icon","xmedium-grey"],[1,"tss-dd-styles-container"],[3,"item",4,"ngFor","ngForOf"],[3,"item"]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"abs-dropdown",1,2),c.gc(3,"toolbar-dropdown-button",3),c.lc(4,"div",4),c.ad(5,f,3,3,"div",5),c.yc(6,"async"),c.gc(7,"hr"),c.lc(8,"div",6),c.ad(9,g,4,5,"div",7),c.yc(10,"async"),c.kc(),c.ad(11,v,3,3,"div",8),c.yc(12,"async"),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(1),c.Cc("settings",c.Gc(11,b)),c.Sb(2),c.Cc("props",t.props),c.Sb(2),c.Cc("ngIf",c.zc(6,5,t._data).documentStyles),c.Sb(4),c.Cc("ngForOf",c.zc(10,7,t._data).palettes),c.Sb(2),c.Cc("ngIf",c.zc(12,9,t.styles)))},directives:[u.a,l.a,p.t,p.s,d.a],pipes:[p.b],styles:[".tss-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:230px}.tss-dd-container[_ngcontent-%COMP%]  .ps-content{padding:0}.tss-dd-styles-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-left:10px;padding-right:10px;padding-bottom:10px}.tss-dd-styles-container[_ngcontent-%COMP%]  .tss-dd-item-container, .tss-dd-tab-icon[_ngcontent-%COMP%]{display:inline-block}.tss-dd-tab-icon[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.tss-dd-tab-icon.selected[_ngcontent-%COMP%]{border-bottom:2px solid #ffc648}.tss-dd-tab-icon.selected[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .tss-dd-tab-icon.selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#aaa}.tss-dd-tab-header[_ngcontent-%COMP%]{margin-bottom:10px}.tss-dd-tab-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px}.tss-dd-custom[_ngcontent-%COMP%]{margin-bottom:10px;border-bottom:1px solid #d3d3e7;padding-bottom:5px;padding-top:10px}"],changeDetection:0}),e}()},XLk1:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),r=n("ZTXN"),a=n("NNJu"),o=n("EM62"),s=n("19Zn"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.validation={},n.inputChanged=new r.a,n}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this.item?this.item.buttonLabel:" - "},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.dataItem=s.j.instance.create({type:this.validation.type,validationRules:this.validation.rules})},t.prototype.handleChange=function(e,t){if(!this.dataItem||null===this.dataItem.validate(e)){var n=this.items.find((function(t){return t.label===e}));n?this.inputChanged.next({value:n.value,takeFocus:t}):this.inputChanged.next({value:e,takeFocus:t})}},t.\u0275fac=function(e){return new(e||t)(o.fc(o.r))},t.\u0275cmp=o.Zb({type:t,selectors:[["sidebar-dropdown-input"]],inputs:{readOnly:"readOnly",validation:"validation"},outputs:{inputChanged:"inputChanged"},features:[o.Rb([{provide:a.j,useExisting:Object(o.lb)((function(){return t}))}]),o.Pb],decls:4,vars:3,consts:[[1,"sidebar-dd-button-container","nu-dropdown-container"],[1,"dropdown-selection","text-input",3,"value","focusout","input"],["inputElement",""],["src","./assets/icon-hovers/arrow-down-extra-small-thin.svg",1,"nu-dropdown-arrow"]],template:function(e,t){1&e&&(o.lc(0,"a",0),o.lc(1,"input",1,2),o.tc("focusout",(function(e){return t.handleChange(e.target.value,!0)}))("input",(function(e){return t.handleChange(e.target.value,!1)})),o.kc(),o.gc(3,"img",3),o.kc()),2&e&&(o.Sb(1),o.Xb("uneditable",t.readOnly),o.Cc("value",t.inputValue))},styles:[".nu-dropdown-arrow[_ngcontent-%COMP%] { margin-top: 5px; }"]}),t}(a.j)},XRvk:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("D57K"),r=n("6Oco"),a=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"DataDefCodeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t,n,a=e.__sakota__.getChanges(),o=this.modifiedDataDef(a);try{for(var s=Object(i.k)(o),c=s.next();!c.done;c=s.next()){var u=c.value;this.processShape(e,u)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return Object(r.b)()},e.prototype.processShape=function(e,t){Object.values(e.shapes).forEach((function(n){n.dataSetId===t&&n&&n.dataChange&&n.dataChange(n,e)}))},e.prototype.modifiedDataDef=function(t){var n,r,a=[];try{for(var o=Object(i.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var u in t[c]){e.regexDataDefs.lastIndex=0;var l=e.regexDataDefs.exec(u);if(l){var p=l[1];-1===a.indexOf(p)&&a.push(p)}}}}catch(d){n={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},e.regexDataDefs=/dataDefs\.([^\.]+)\./g,e}()},XfZi:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("19Zn"),r=n("nsO7"),a=n("6Oco"),o=n("X0jn"),s=n("C0rp"),c=n("EM62"),u=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeBoundsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX","scaleY"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges();if(t.$set)return this.shapeScaleChange(e,t),this.shapeTextsValueChange(e,t),Object(a.b)()},e.prototype.shapeTextsValueChange=function(t,n){var a=this,s=function(n){e.regexTexts.lastIndex=0;var s=e.regexTexts.exec(n);if(!s)return"continue";var c=s[1],u=t.shapes[c],l=(u.transformSettings||{}).fixAspectRatio;if(u.isConnector()||l)return"continue";Object(r.forEach)(u.texts,(function(e,t){var n=u.texts[t];if(!i.G.isInside(n))return!1;if(u.isAutoResizeable()){if(!u.autoResizeHeight&&u.bounds.height<=n.height+2*o.A&&(u.autoResizeHeight=!0),u.autoResizeWidth){var r=Math.max(n.width+2*o.z,u.userSetWidth),s=a.roundUpToNearest10px(r)/u.defaultBounds.width;u.scaleX!==s&&(u.scaleX=s)}if(u.autoResizeHeight){var c=Math.max(n.height+2*o.A,u.userSetHeight),l=a.roundUpToNearest10px(c)/u.defaultBounds.height;u.scaleY!==l&&(u.scaleY=l)}}if(u.autoResizeToMinTextWidth){var p=n.minWidth+2*o.z;p>u.bounds.width&&(u.scaleX=a.roundUpToNearest10px(p)/u.defaultBounds.width)}}))};for(var c in n.$set)s(c)},e.prototype.roundUpToNearest10px=function(e){return 10*Math.ceil(e/10)},e.prototype.setTextMinWidth=function(e){if(!e.minWidth&&""!==e.plainText){var t=s.bounds(e.content,1e4,o.c).minWidth;e.minWidth=t}},e.prototype.shapeScaleChange=function(t,n){var a=this,s=function(n){e.regexScale.lastIndex=0;var s=e.regexScale.exec(n);if(!s)return"continue";var c=s[2]?s[2]:s[4],u=t.shapes[c],l=(u.transformSettings||{}).fixAspectRatio;if(u.isConnector()||l)return"continue";Object(r.forEach)(u.texts,(function(e,t){var n=u.texts[t];if(!i.G.isInside(n))return!1;a.setTextMinWidth(n);var r=n.minWidth+2*o.z;u.autoResizeToMinTextWidth&&r>u.bounds.width&&(u.scaleX=a.roundUpToNearest10px(r)/u.defaultBounds.width);var s=n.height+2*o.z;u.autoResizeHeight&&s>u.bounds.height&&(u.scaleY=a.roundUpToNearest10px(s)/u.defaultBounds.height)}))};for(var c in n.$set)s(c)},e.regexScale=/(shapes\.([^\.]+)\.scaleX)|(shapes\.([^\.]+)\.scaleY)/g,e.regexTexts=/shapes\.([^\.]+)\.texts\.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},YsaH:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("C05f"),r=function(){function e(){this.limitCount=0,this.collabHover=new i.a(null)}return e.prototype.getCollabTrackingId=function(e,t){return t.collab?t.collab.id:"collabCount"},e.prototype.getCollabViews=function(e,t){var n=[],i=0,r=!1,a=e.length+1,o=e.sort((function(e,t){return e.online===t.online?0:e.online?-1:1}));if(this.limitCount>0&&this.limitCount<o.length){var s=o.splice(this.limitCount,o.length),c=s.length>100?99:s.length;n.push({index:a+1,position:0,remainingCount:c})}for(var u=0;u<o.length;u++){var l=o[u];i+=l.online||r?35:20,a-=1,n.push({position:i,index:a,collab:l}),r=l.id===t}return n},e}()},YucH:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("5xGT"),r=n("ZTXN"),a=n("C05f"),o=n("EM62"),s=n("2kYt"),c=n("s2Ay"),u=n("uIWG");function l(e,t){1&e&&o.gc(0,"div",14)}function p(e,t){if(1&e){var n=o.mc();o.lc(0,"editable-label",15),o.tc("changedText",(function(e){return o.Oc(n),o.xc().nameChanged(e)})),o.kc()}if(2&e){var i=o.xc();o.Cc("value",i.getDisplayText())("focus",!0)("selectAll",!0)("readonly",!1)}}function d(e,t){if(1&e&&(o.lc(0,"label",16),o.cd(1),o.kc()),2&e){var n=o.xc();o.Sb(1),o.dd(n.getDisplayText())}}function h(e,t){1&e&&(o.lc(0,"label",17),o.cd(1,"HISTORY_PANEL.LABELS.CURRENT"),o.kc())}function f(e,t){if(1&e&&(o.lc(0,"li",21),o.cd(1),o.kc()),2&e){var n=t.$implicit;o.Sb(1),o.dd(n.fullName)}}var g=function(e){return{moreCount:e}};function m(e,t){if(1&e&&o.gc(0,"li",22),2&e){var n=o.xc(2);o.Cc("translate","HISTORY_PANEL.LABELS.MORE_USERS")("translateParams",o.Hc(2,g,n.hiddenUserCount()))}}function v(e,t){if(1&e&&(o.lc(0,"ul",18),o.ad(1,f,2,1,"li",19),o.ad(2,m,1,4,"li",20),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("ngForOf",n.users),o.Sb(1),o.Cc("ngIf",n.hiddenUserCount()>1)}}function b(e,t){if(1&e){var n=o.mc();o.lc(0,"a",12),o.tc("click",(function(){return o.Oc(n),o.xc().restore.next(!0)})),o.cd(1,"HISTORY_PANEL.LABELS.RESTORE"),o.kc()}}var y=function(e){return{active:e}},C=function(){function e(){this.active=!1,this.currentVersion=!1,this.createCopy=new r.a,this.restore=new r.a,this.preview=new r.a,this.renamed=new r.a,this.renaming=new a.a(!1)}return Object.defineProperty(e.prototype,"users",{get:function(){return this.historyItem.users?this.historyItem.users.length>4?this.historyItem.users.slice(0,3):this.historyItem.users:[]},enumerable:!1,configurable:!0}),e.prototype.hiddenUserCount=function(){return this.historyItem.users?this.historyItem.users.length-3:0},e.prototype.getDisplayText=function(){return this.historyItem.name||new Date(this.historyItem.ts).toLocaleTimeString()},e.prototype.nameChanged=function(e){var t=this;""!==e&&e!==this.getDisplayText()?this.renamed.next({name:e,complete:function(){return t.renaming.next(!1)}}):this.renaming.next(!1)},e.prototype.startRenaming=function(){var e=this.renaming.getValue();this.renaming.next(!e),e||i.Lb.track("right.history.timestampActions.rename.click",{value1Type:"snapshotId",value1:this.historyItem.lastChangeId})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["history-item"]],inputs:{historyItem:"historyItem",active:"active",currentVersion:"currentVersion",restoreEnabled:"restoreEnabled"},outputs:{createCopy:"createCopy",restore:"restore",preview:"preview",renamed:"renamed"},decls:20,vars:11,consts:[[1,"history-item",3,"ngClass"],[1,"item-container"],["class","active-indicator",4,"ngIf"],[1,"history-item-content",3,"click"],[3,"value","focus","selectAll","readonly","changedText",4,"ngIf","ngIfElse"],["historyItemLabel",""],["class","nu2-caption-5","translate","",4,"ngIf"],["class","user-list",4,"ngIf"],[1,"actions-menu"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"menu-content"],["translate","",1,"dark-blue",3,"click"],["class","dark-blue","translate","",3,"click",4,"ngIf"],[1,"active-indicator"],[3,"value","focus","selectAll","readonly","changedText"],[1,"nu2-caption-3"],["translate","",1,"nu2-caption-5"],[1,"user-list"],["class","nu2-caption-6",4,"ngFor","ngForOf"],["class","nu2-caption-6",3,"translate","translateParams",4,"ngIf"],[1,"nu2-caption-6"],[1,"nu2-caption-6",3,"translate","translateParams"]],template:function(e,t){if(1&e&&(o.lc(0,"div",0),o.lc(1,"div",1),o.ad(2,l,1,0,"div",2),o.lc(3,"div",3),o.tc("click",(function(){return t.preview.next(!0)})),o.ad(4,p,1,4,"editable-label",4),o.yc(5,"async"),o.ad(6,d,2,1,"ng-template",null,5,o.bd),o.ad(8,h,2,0,"label",6),o.ad(9,v,3,2,"ul",7),o.kc(),o.kc(),o.lc(10,"div",8),o.lc(11,"a"),o.wc(),o.lc(12,"svg",9),o.gc(13,"use",10),o.kc(),o.kc(),o.vc(),o.lc(14,"div",11),o.lc(15,"a",12),o.tc("click",(function(){return t.createCopy.next(!0)})),o.cd(16,"HISTORY_PANEL.LABELS.CREATE_COPY"),o.kc(),o.lc(17,"a",12),o.tc("click",(function(){return t.startRenaming()})),o.cd(18,"HISTORY_PANEL.LABELS.RENAME"),o.kc(),o.ad(19,b,2,0,"a",13),o.kc(),o.kc(),o.kc()),2&e){var n=o.Mc(7);o.Cc("ngClass",o.Hc(9,y,t.active)),o.Sb(2),o.Cc("ngIf",t.active),o.Sb(2),o.Cc("ngIf",o.zc(5,7,t.renaming))("ngIfElse",n),o.Sb(4),o.Cc("ngIf",t.currentVersion),o.Sb(1),o.Cc("ngIf",t.users.length>0),o.Sb(10),o.Cc("ngIf",t.restoreEnabled)}},directives:[s.q,s.t,c.a,u.a,s.s],pipes:[s.b],styles:[".history-item[_ngcontent-%COMP%]{padding:5px 0;position:relative;min-height:60px}.history-item[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.history-item[_ngcontent-%COMP%]:hover   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-3[_ngcontent-%COMP%]{color:#29947f}.history-item[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.history-item[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .active-indicator[_ngcontent-%COMP%]{padding:1px;margin-right:8px;background:#51c0aa}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]{height:100%;padding-left:10px;display:flex;flex-direction:column;width:100%}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-3[_ngcontent-%COMP%]{color:rgba(38,55,59,.7)}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-5[_ngcontent-%COMP%]{color:rgba(20,40,46,.8)}.history-item[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]   .nu2-caption-6[_ngcontent-%COMP%]{color:rgba(61,66,66,.6)}.history-item.active[_ngcontent-%COMP%]   .history-item-content[_ngcontent-%COMP%]{padding-left:0}.actions-menu[_ngcontent-%COMP%]{position:absolute;top:0;right:40px}.actions-menu[_ngcontent-%COMP%]   .menu-content[_ngcontent-%COMP%]{display:none;position:absolute;z-index:10;top:25px;right:0;width:128px;border:1px solid #d3d3e7;padding:15px;border-radius:4px;background:#fff}.actions-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]{display:block}.actions-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.actions-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),e}()},ZC55:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("D57K"),r=n("QoSw"),a=n("B5wR"),o=n("kjSZ"),s=n("5xGT"),c=n("iim9"),u=n("J+dc"),l=n("YtkY"),p=n("TLy2"),d=n("Ohay"),h=n("C05f"),f=n("6qzS"),g=n("nsO7"),m=n("EM62"),v=n("s2Ay"),b=function(e){function t(t){var n=e.call(this)||this;return n.translateService=t,n}return Object(i.e)(t,e),t.prototype.getFilterNoItemsFoundText=function(){return this.translateService.instant("LABELS.NO_LIBRARY_SEARCH_RESULTS")},t.\u0275fac=function(e){return new(e||t)(m.pc(v.e))},t.\u0275prov=m.bc({token:t,factory:t.\u0275fac}),t}(o.e),y=n("4y1S"),C=n("diDk"),O=n("Wrqg"),x=n("crdX"),S=n("2kYt"),k=n("nIj0"),w=["window"],E=["windowInner"],I=["treeView"];function T(e,t){if(1&e){var n=m.mc();m.lc(0,"i",23),m.tc("click",(function(){return m.Oc(n),(0,m.xc().onCollapseExpand)()})),m.gc(1,"img",24),m.kc()}if(2&e){var i=m.xc().item;m.Xb("fa-caret-right",i.collapsed)("fa-caret-down",!i.collapsed)}}function _(e,t){if(1&e){var n=m.mc();m.lc(0,"div",15),m.ad(1,T,2,4,"i",16),m.lc(2,"div",17),m.lc(3,"input",18),m.tc("ngModelChange",(function(e){return m.Oc(n),t.item.checked=e}))("ngModelChange",(function(){return(0,t.onCheckedChange)()})),m.kc(),m.lc(4,"span",19),m.gc(5,"img",20),m.kc(),m.lc(6,"label",21),m.tc("click",(function(){var e=t.item,n=t.onCheckedChange,i=t.onCollapseExpand;return!e.disableItemCheck&&(e.checked=!e.checked),!e.disableChildrenCheck&&n(),i()})),m.lc(7,"div",22),m.cd(8),m.kc(),m.kc(),m.kc(),m.kc()}if(2&e){var i=t.item;m.Sb(1),m.Cc("ngIf",i.children),m.Sb(2),m.Cc("ngModel",i.checked)("disabled",i.disabled)("indeterminate",i.indeterminate),m.Sb(5),m.dd(i.text)}}var j=function(e){function t(t,n,i,r,a){var s=e.call(this)||this;return s.state=t,s.modalController=n,s.planPermManager=i,s.ell=r,s.ll=a,s.config=o.c.create({hasAllCheckBox:!1,hasFilter:!1,hasCollapseExpand:!1,decoupleChildFromParent:!1,maxHeight:2e3}),s.customDBtitle="Custom Databases",s.subs=[],s.items=new h.a([]),s.libraryList=new f.a,s}return Object(i.e)(t,e),t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){var e=this,t=this.showWindow(this.container,this.containerInner).subscribe();this.state.changes("CurrentLibraries").pipe(Object(u.a)(1),Object(l.a)((function(t){e.createTreeView(t.map((function(e){return e.id})))}))).subscribe(),this.subs.push(t)},t.prototype.onFilterChange=function(e){this.treeView.onFilterTextChange(e)},t.prototype.onSelectionChange=function(e){var t=Object(g.uniq)(e),n=this.state.get("CurrentLibraries"),i=[];t.forEach((function(e){var t=n.find((function(t){return t.id===e}));t?i.push(t):i.push({id:e,type:c.c.Static,status:"loading"})})),this.state.set("CurrentLibraries",i)},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.createTreeView=function(e){var t=this,n=this.getCustomDatabases().subscribe((function(n){var i=[];if(t.libraryList.getAllShapeLibraries().forEach((function(n){var r=[],a=!0;t.libraryList.getLibrariesInGroup(n).map((function(n){r.push({text:n.label,value:n.id,checked:t.isLibrarySelected(n.id,e)}),a=a?!t.isLibrarySelected(n.id,e):a}));var s=new o.f({text:n,value:n,children:r,collapsed:a,disableChildrenCheck:!0});s.correctChecked(),i.push(s)})),!Object(g.isEmpty)(n)){var r=new o.f({text:t.customDBtitle,value:t.customDBtitle,children:n.map((function(n){return{text:n.label,value:n.id,checked:t.isLibrarySelected(n.id,e)}})),collapsed:!1,disableChildrenCheck:!0});r.correctChecked(),i.push(r)}t.items.next(i)}));this.subs.push(n)},t.prototype.getCustomDatabases=function(){var e=this;return this.ll.forCurrent(!1).getDiagramEData().pipe(Object(p.a)((function(t){return e.ell.currentEDataModels().pipe(Object(l.a)((function(e){return(t||[]).map((function(t){return e.find((function(e){return e.id===t}))}))})))})),Object(d.a)((function(e,t){var n=e.map((function(e){return Object.keys(e.customEntityDefs||{})})),i=t.map((function(e){return Object.keys(e.customEntityDefs||{})}));return Object(g.isEqual)(n,i)})),Object(l.a)((function(t){var n=[];return t.filter((function(e){return e&&e.defId===a.a.customEdataDefId&&!Object(g.isEmpty)(e.getActiveCustomEntityDefs())})).forEach((function(t){n.push({id:c.b+t.id,label:t.name,groups:[e.customDBtitle]})})),n})))},t.prototype.isLibrarySelected=function(e,t){return t&&t.includes(e)},t.\u0275fac=function(e){return new(e||t)(m.fc(s.Jb),m.fc(s.gb),m.fc(y.o),m.fc(C.a),m.fc(r.a))},t.\u0275cmp=m.Zb({type:t,selectors:[["temp-add-libs-menu"]],viewQuery:function(e,t){var n;(1&e&&(m.Vc(w,!0),m.Vc(E,!0),m.Vc(I,!0)),2&e)&&(m.Lc(n=m.uc())&&(t.container=n.first),m.Lc(n=m.uc())&&(t.containerInner=n.first),m.Lc(n=m.uc())&&(t.treeView=n.first))},features:[m.Rb([o.g,{provide:o.d,useClass:b}]),m.Pb],decls:20,vars:11,consts:[["itemTemplate",""],[1,"lib-browser-container","modal-window-container","fx-cover","fx-center-all",3,"click"],["window",""],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate",""],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"lib-browser-filter"],["icon","search-thin",3,"showClearButton","emitForInputChange","placeholder","debounce","updateText"],[1,"lib-browser-treeview"],[3,"config","items","itemTemplate","selectedChange"],["treeView",""],[1,"form-inline","row-item"],["aria-hidden","true","class","fa treeview-arrow",3,"fa-caret-right","fa-caret-down","click",4,"ngIf"],[1,"form-check","form-input-wrapper"],["type","checkbox",1,"form-check-input",3,"ngModel","disabled","indeterminate","ngModelChange"],[1,"form-custom-checkbox"],["src","./assets/images/decoratives/tick.svg","width","18",1,"form-custom-checkbox-tick"],[1,"form-check-label",3,"click"],[1,"library-name"],["aria-hidden","true",1,"fa","treeview-arrow",3,"click"],["src","./assets/images/decoratives/expand-arrow.svg","width","18"]],template:function(e,t){if(1&e&&(m.ad(0,_,9,5,"ng-template",null,0,m.bd),m.lc(2,"div",1,2),m.tc("click",(function(e){return t.closeOnOverlayClick(e)})),m.lc(4,"div",3,4),m.lc(6,"div",5),m.lc(7,"h1",6),m.cd(8,"LABELS.BROWSE_SHAPES"),m.kc(),m.lc(9,"button",7),m.tc("click",(function(){return t.closeWindow()})),m.wc(),m.lc(10,"svg",8),m.gc(11,"use",9),m.kc(),m.kc(),m.kc(),m.vc(),m.lc(12,"div",10),m.lc(13,"text-input",11),m.tc("updateText",(function(e){return t.onFilterChange(e)})),m.yc(14,"translate"),m.kc(),m.kc(),m.lc(15,"div",12),m.lc(16,"perfect-scrollbar"),m.lc(17,"ngx-treeview",13,14),m.tc("selectedChange",(function(e){return t.onSelectionChange(e)})),m.yc(19,"async"),m.kc(),m.kc(),m.kc(),m.kc(),m.kc()),2&e){var n=m.Mc(1);m.Sb(13),m.Dc("placeholder",m.zc(14,7,"PLACEHOLDERS.SHAPE_ADD_SEARCH")),m.Cc("showClearButton",!0)("emitForInputChange",!0)("debounce",100),m.Sb(4),m.Cc("config",t.config)("items",m.zc(19,9,t.items))("itemTemplate",n)}},directives:[v.a,O.a,x.b,o.b,S.t,k.a,k.s,k.v],pipes:[v.d,S.b],styles:[".lib-browser-container[_ngcontent-%COMP%]  .treeview-item{margin-bottom:20px}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container .row-item .fa.treeview-arrow{margin-right:10px;transition:transform .25s ease;transform-origin:center;width:13px;height:13px}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container .row-item .fa.treeview-arrow img{width:15px}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container .row-item .fa.treeview-arrow.fa-caret-right{transform:rotate(-90deg)}.lib-browser-container[_ngcontent-%COMP%]  .form-check, .lib-browser-container[_ngcontent-%COMP%]  .form-inline{display:flex;align-items:center;position:relative;height:20px}.lib-browser-container[_ngcontent-%COMP%]  .form-check-label{margin-left:10px}.lib-browser-container[_ngcontent-%COMP%]  .form-inline{white-space:normal;color:#7e7e7e}.lib-browser-container[_ngcontent-%COMP%]  .form-inline input, .lib-browser-container[_ngcontent-%COMP%]  .form-inline label{cursor:pointer}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container>ngx-treeview-item>.treeview-item>.form-inline{color:#04263d;margin-bottom:10px}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container>ngx-treeview-item>.treeview-item>.form-inline .form-check-input, .lib-browser-container[_ngcontent-%COMP%]  .treeview-container>ngx-treeview-item>.treeview-item>.form-inline .form-custom-checkbox{display:none}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container>ngx-treeview-item>.treeview-item>.form-inline .form-check-label{padding-left:0;display:flex}.lib-browser-container[_ngcontent-%COMP%]  .treeview-container>ngx-treeview-item>.treeview-item>.form-inline label{margin:0}.lib-browser-container[_ngcontent-%COMP%]  .form-custom-checkbox-tick{display:none}.lib-browser-container[_ngcontent-%COMP%]  .form-check input:checked~.form-custom-checkbox .form-custom-checkbox-tick{display:block}.lib-browser-container[_ngcontent-%COMP%]  .form-check.restricted:hover .form-check-label{color:#04263d}.lib-browser-container[_ngcontent-%COMP%]  .premium-label{color:#f6aa00;font-size:12px;padding:2px 7px;border:1px solid #f6aa00;border-radius:10px;margin-left:10px;margin-top:-3px}.lib-browser-container[_ngcontent-%COMP%]  .premium-label .nu-icon{color:#f6aa00;width:12px;height:12px;margin-right:2px}.modal-window-inner[_ngcontent-%COMP%]{width:450px;height:90%;max-height:700px}.modal-window-heading[_ngcontent-%COMP%]{text-align:center}.lib-browser-treeview[_ngcontent-%COMP%]{padding:15px 0;height:calc(100% - 80px)}"],changeDetection:0}),t}(s.nb)},ZZOX:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("D57K"),r=n("NNJu"),a=n("5xGT"),o=n("C05f"),s=n("o9on"),c=n("EM62"),u=n("s2Ay"),l=n("crdX"),p=n("2kYt"),d=n("qtZD"),h=["window"],f=["windowInner"];function g(e,t){if(1&e){var n=c.mc();c.lc(0,"nu-check-box",28),c.tc("valueChanged",(function(e){return c.Oc(n),c.xc().toggleSelect(e)})),c.kc()}if(2&e){var i=t.$implicit;c.Dc("label",i.name),c.Dc("value",i.id),c.Cc("checked",i.checked)}}var m=function(e){function t(t,n,i){var r=e.call(this)||this;return r.modalController=t,r.commandService=n,r.translate=i,r.allFolderId="all",r.allFolderName="All Folders",r.subs=[],r.folderList=new o.a(null),r.selectedFolders=new o.a(0),r.showImportStartMessage=new o.a(!1),r}return Object(i.e)(t,e),t.prototype.ngOnInit=function(){var e=this,t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t),this.commandService.dispatch(s.a.getClassicProjects,{callBack:function(t){e.populateProjects(t)}})},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.toggleSelect=function(e){var t=this,n=this.folderList.value;e.value===this.allFolderId?e.checked?n.forEach((function(e){e.checked=!0})):n.forEach((function(e){e.checked=!1})):e.checked?n.filter((function(t){return t.id===e.value})).forEach((function(e){e.checked=!0})):n.filter((function(n){return n.id===e.value||n.id===t.allFolderId})).forEach((function(e){e.checked=!1}));var i=n.filter((function(e){return e.id!==t.allFolderId&&e.checked})).length;this.selectedFolders.next(i)},t.prototype.startImport=function(){var e=this,t=this.folderList.value.filter((function(t){return t.id!==e.allFolderId&&t.checked})).map((function(e){return e.id}));this.commandService.dispatch(s.a.importClassicProjects,{rid:t.join(",")}),this.showImportStartMessage.next(!0)},t.prototype.populateProjects=function(e){var t=[{id:this.allFolderId,name:this.allFolderName,checked:!1}],n=e.map((function(e){return{id:e.id,name:e.name,checked:!1}}));t.push.apply(t,Object(i.j)(n)),this.folderList.next(t)},t.\u0275fac=function(e){return new(e||t)(c.fc(a.gb),c.fc(a.B),c.fc(u.e))},t.\u0275cmp=c.Zb({type:t,selectors:[["classic-import-dialog"]],viewQuery:function(e,t){var n;(1&e&&(c.Vc(h,!0),c.Vc(f,!0)),2&e)&&(c.Lc(n=c.uc())&&(t.container=n.first),c.Lc(n=c.uc())&&(t.containerInner=n.first))},features:[c.Pb],decls:45,vars:16,consts:[[1,"classic-import-container","modal-window-container","fx-cover","fx-center-all",3,"click"],["window",""],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate",""],["translate","",1,"classic-import-beta-tag"],[1,"nu-btn-small","nu-btn-icon",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"classic-import-screen-1"],[1,"classic-import-content"],["translate","",1,"grey","fx-margin-bottom-15"],[1,"classic-import-scrollable"],[1,"classic-import-projectlist","fx-margin-bottom-20"],[3,"label","value","checked","valueChanged",4,"ngFor","ngForOf"],[1,"classic-import-footer"],[1,"classic-import-footer-folder-num"],["translate","",1,"nu-btn-med","primary",3,"disabled","click"],["translate","",1,"nu-btn-med","secondary",3,"click"],[1,"classic-import-screen-2"],["translate","",1,"grey"],[1,"classic-import-footer","primary"],[1,"spinner-container"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[3,"label","value","checked","valueChanged"]],template:function(e,t){1&e&&(c.lc(0,"div",0,1),c.tc("click",(function(e){return t.closeOnOverlayClick(e)})),c.lc(2,"div",2,3),c.yc(4,"async"),c.lc(5,"div",4),c.lc(6,"h1",5),c.cd(7,"CLASSIC_IMPORT.TEXT.HEADER "),c.lc(8,"label",6),c.cd(9,"LABELS.BETA"),c.kc(),c.kc(),c.lc(10,"button",7),c.tc("click",(function(){return t.closeWindow()})),c.wc(),c.lc(11,"svg",8),c.gc(12,"use",9),c.kc(),c.kc(),c.kc(),c.vc(),c.lc(13,"div",10),c.lc(14,"div",11),c.lc(15,"p",12),c.cd(16," CLASSIC_IMPORT.TEXT.SELECT_FOLDER "),c.kc(),c.lc(17,"div",13),c.lc(18,"perfect-scrollbar"),c.lc(19,"div",14),c.ad(20,g,1,3,"nu-check-box",15),c.yc(21,"async"),c.kc(),c.kc(),c.kc(),c.kc(),c.lc(22,"div",16),c.lc(23,"div",17),c.cd(24),c.yc(25,"async"),c.yc(26,"translate"),c.kc(),c.lc(27,"div"),c.lc(28,"button",18),c.tc("click",(function(){return t.startImport()})),c.yc(29,"async"),c.cd(30,"CLASSIC_IMPORT.BUTTON.IMPORT"),c.kc(),c.lc(31,"button",19),c.tc("click",(function(){return t.closeWindow()})),c.cd(32,"CLASSIC_IMPORT.BUTTON.CANCEL"),c.kc(),c.kc(),c.kc(),c.kc(),c.lc(33,"div",20),c.lc(34,"div",11),c.lc(35,"p",21),c.cd(36," CLASSIC_IMPORT.TEXT.IMPORT_PROGRESS "),c.gc(37,"br"),c.cd(38," CLASSIC_IMPORT.TEXT.CLOSE_DIALOG "),c.kc(),c.lc(39,"div",22),c.lc(40,"div",23),c.lc(41,"div",24),c.gc(42,"div",25),c.gc(43,"div",26),c.gc(44,"div",27),c.kc(),c.kc(),c.kc(),c.kc(),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(2),c.Xb("screen-2",c.zc(4,6,t.showImportStartMessage)),c.Sb(18),c.Cc("ngForOf",c.zc(21,8,t.folderList)),c.Sb(4),c.fd(" ",c.zc(25,10,t.selectedFolders)," ",c.zc(26,12,"CLASSIC_IMPORT.TEXT.SELECTED_FOLDERS")," "),c.Sb(4),c.Cc("disabled",!c.zc(29,14,t.selectedFolders)))},directives:[u.a,l.b,p.s,d.a],pipes:[p.b,u.d],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.modal-window-inner[_ngcontent-%COMP%]{height:80%;max-height:660px;width:460px}.modal-window-inner.screen-2[_ngcontent-%COMP%]{height:250px}.modal-window-inner.screen-2[_ngcontent-%COMP%]   .classic-import-screen-1[_ngcontent-%COMP%]{display:none}.modal-window-inner.screen-2[_ngcontent-%COMP%]   .classic-import-screen-2[_ngcontent-%COMP%]{display:block}.classic-import-content[_ngcontent-%COMP%]{height:calc(100% - 40px)}.classic-import-scrollable[_ngcontent-%COMP%]{margin-top:5px;height:calc(100% - 70px)}.classic-import-footer[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:5px}.classic-import-footer-folder-num[_ngcontent-%COMP%]{flex:1;margin-top:5px}.classic-import-screen-1[_ngcontent-%COMP%]{height:calc(100% - 70px)}.classic-import-screen-2[_ngcontent-%COMP%]{display:none}.classic-import-screen-2[_ngcontent-%COMP%]   .classic-import-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:55px;width:100%}.classic-import-screen-2[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{margin:0 auto}.classic-import-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ced9e3;color:#4dbfab;border-radius:2px;font-size:11px;position:absolute;margin-top:3px;margin-left:5px}"],changeDetection:0}),t}(r.q)},ZhQg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("DL1I");var i=n("X0jn"),r=n("EM62"),a=n("2kYt"),o=function(){function e(){}return Object.defineProperty(e.prototype,"tileStyles",{get:function(){return{fill:"#FFFFFF","fill-opacity":this.data.fillAlpha,stroke:this.data.lineColor,"stroke-opacity":this.data.lineAlpha,"stroke-width":i.b,"stroke-dasharray":this.data.lineStyle,"stroke-linecap":"round","stroke-miterlimit":10,"stroke-linejoin":"round"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyles",{get:function(){return{"font-size":16,fill:this.data.textColor,"font-weight":"normal","font-style":"normal","text-decoration":"none"}},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["line-styling-tile"]],inputs:{data:"data"},decls:6,vars:2,consts:[[1,"line-style-tile-wrapper","style-tile"],["xmlns","http://www.w3.org/2000/svg","width","66","height","15.22","viewBox","0 0 66 15.22"],["x1","0.5","y1","7.61","x2","65.5","y2","7.61",3,"ngStyle"],["x","20.5","y","0.11","width","25","height","15",2,"fill","white"],["transform","translate(25.31 11.72)",3,"ngStyle"]],template:function(e,t){1&e&&(r.lc(0,"div",0),r.wc(),r.lc(1,"svg",1),r.gc(2,"line",2),r.gc(3,"rect",3),r.lc(4,"text",4),r.cd(5,"Aa"),r.kc(),r.kc(),r.kc()),2&e&&(r.Sb(2),r.Cc("ngStyle",t.tileStyles),r.Sb(2),r.Cc("ngStyle",t.fontStyles))},directives:[a.w],styles:[".style-tile[_ngcontent-%COMP%]{border:2px solid #fff;border-radius:4px}.line-style-tile-wrapper[_ngcontent-%COMP%]{height:25px;width:80px;text-align:center;line-height:27px}"],changeDetection:0}),e}()},ZyLw:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("EM62"),r=function(){function e(){this._textStyles=[],this.createTextStyles()}return e.prototype.createTextStyles=function(){this._textStyles=[{size:10},{size:13},{size:10,bold:!0},{size:13,bold:!0},{size:10,font:"open_sansitalic"},{size:13,font:"open_sansitalic"},{size:10,font:"courier_prime"},{size:10,font:"lt-hairline",bold:!0},{size:22,font:"champagne"},{size:13,font:"indie"},{size:18,font:"indie"},{size:12,font:"open_sanscondensed"},{size:14,font:"open_sanscondensed"},{size:10,font:"playfair"},{size:12,font:"bree"},{size:13,font:"bree"},{size:18,font:"bebas"},{size:10,font:"montserrat"},{size:10,font:"raleway"},{size:12,font:"spartan"},{size:12,font:"droid_serifregular"},{size:12,font:"abhaya_libreregular"},{size:12,font:"gandhi_serifregular"}]},e.prototype.getTextStyles=function(){return this._textStyles},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.bc({token:e,factory:e.\u0275fac}),e}()},aSB4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ROBh"),r=n("5xGT"),a=n("SBw3"),o=n("EM62"),s=function(){function e(e,t){this.state=e,this.featureList=t}return e.prototype.getFeatureData=function(e){var t=this.featureList.getFeature(e);return Object(i.a)(t)},e.prototype.getApplyData=function(e){return Object(i.a)({connectorIds:[this.state.get("Selected")[0]]})},e.\u0275fac=function(t){return new(t||e)(o.pc(r.Jb),o.pc(a.a))},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},aSzn:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i=n("D57K"),r=n("EM62"),a=n("5xGT"),o=n("X0jn"),s=n("nsO7"),c=n("g6G6"),u=n("ROBh"),l=n("P4Xx"),p=n("6Oco"),d=n("TLy2"),h=n("YtkY"),f=n("jIqt"),g=n("mWib"),m=n("8j5Y"),v=n("xVbo"),b=n("BwBJ"),y=n("Ohay"),C=n("7SLS"),O=n("3mST"),x=n("w1VY"),S=n("QoSw"),k=n("flPR"),w=n("SBw3"),E=n("0fSw"),I=n("IGWl"),T=n("PGgW"),_=n("X5Q9"),j=n("eIBf"),P=n("s9Xn"),A=function(e){function t(t,n,i,r,a,o,s){var c=e.call(this,r)||this;return c.injector=t,c.commandService=n,c.featureList=i,c.state=r,c.ll=a,c.toolbarManager=o,c.coordinate=s,c.modelChangeDebounce=100,c.subs=[],c}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarManager.get("contextual-toolbar")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.listenToChanges().pipe(Object(d.a)((function(t){return e.getItemsForContextChange(t)})),Object(h.a)((function(t){return e.updateShowMethod(t)})),Object(d.a)((function(t){return e.handleContextChange(t)}))).subscribe(),this.toolbar.change.subscribe((function(t){return e.handleToolbarChange(t)})))},t.prototype.destroy=function(){this.toolbar&&this.toolbar.hide().subscribe(),this.subs.forEach((function(e){e.unsubscribe()}))},t.prototype.listenToChanges=function(){var e=this;return this.listenToContextChange().pipe(Object(d.a)((function(t){return e.isShowAction(t.action)?Object(c.a)(e.listenToModelChange(),e.listenToGroupChanges()).pipe(Object(f.a)(t),Object(g.a)(e.modelChangeDebounce)):Object(u.a)(t)})))},t.prototype.listenToContextChange=function(){var e=this;return this.duringSelection().pipe(Object(d.a)((function(t){var n;return"show"===t.action?Object(c.a)(e.duringSelectionInteraction({action:"quickshow"},{action:"quickhide"}).pipe(Object(m.a)((function(t){return n=!e.isShowAction(t.action)}))),e.duringTextEdit({action:"show"},{action:"hide"}).pipe(Object(m.a)((function(t){return n=!e.isShowAction(t.action)}))),e.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(v.a)((function(){return!n})))):Object(u.a)(t)})),Object(b.a)(1),Object(y.a)(s.isEqual))},t.prototype.listenToGroupChanges=function(){return this.locator.getDiagramChanges().pipe(Object(v.a)((function(e){return a.hb.hasChanges(e.modifier,"groups")})),Object(C.a)({action:"show"}))},t.prototype.checkSelectedShapesHasUnlocked=function(){var e=this;return this.state.changes("Selected").pipe(Object(y.a)(s.isEqual),Object(d.a)((function(t){return e.locator.getDiagramOnce().pipe(Object(h.a)((function(e){var n,r;try{for(var a=Object(i.k)(t),o=a.next();!o.done;o=a.next()){var s=o.value;if(!e.shapes[s].isLocked)return!0}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1})))})))},t.prototype.listenToModelChange=function(){var e=this,t=this.state.get("Selected").map((function(t){return e.locator.getShapeModel(t).pipe(Object(O.a)(1),Object(C.a)({action:"quickshow"}))}));return c.a.apply(void 0,Object(i.j)(t))},t.prototype.duringSelection=function(){return this.checkSelectedShapesHasUnlocked().pipe(Object(h.a)((function(e){return e?{action:"show"}:{action:"hide"}})))},t.prototype.getItemsForContextChange=function(e){return this.isShowAction(e.action)?this.getToolbarItems().pipe(Object(h.a)((function(t){return e.items=t,e}))):Object(u.a)(e)},t.prototype.handleContextChange=function(e){var t=this;switch(e.action){case"show":case"quickshow":return this.setToolbarItems(e.items).pipe(Object(d.a)((function(){return t.positionToolbar()})),Object(d.a)((function(){return t.toolbar.show()})));case"reshow":return this.setToolbarItems(e.items).pipe(Object(d.a)((function(){return t.toolbar.hide()})),Object(d.a)((function(){return t.positionToolbar()})),Object(d.a)((function(){return t.toolbar.show()})));case"hide":case"quickhide":return this.toolbar.hide()}return Object(u.a)({})},t.prototype.isShowAction=function(e){return"show"===e||"reshow"===e||"quickshow"===e},t.prototype.updateShowMethod=function(e){if(this.isShowAction(e.action)){if(!e.items||e.items&&0===e.items.length)return e.action="hide",e;"show"===e.action&&(e.action="reshow")}return e},t.prototype.setToolbarItems=function(e){var t=this,n=this.toolbar.itemIds,r=e?e.map((function(e){return e.featureId})):[],a=[];return n.filter((function(e){return-1===r.indexOf(e)})).forEach((function(e){t.toolbar.removeItem(e)})),n.filter((function(e){return r.indexOf(e)>-1})).forEach((function(n){var i=Object(s.find)(e,{featureId:n});a.push(t.updateToolbarItem(i))})),r.forEach((function(i,r){if(-1===n.indexOf(i)){var o=Object(s.find)(e,{featureId:i});a.push(t.addToolbarItem(o,r))}})),a.length>0?l.a.apply(void 0,Object(i.j)(a)):Object(u.a)({})},t.prototype.addToolbarItem=function(e,t){var n=this,i=this.featureList.getFeature(e.featureId),r=this.getUIControlType(i.dataType,e.visibility?e.visibility.level:null),a=e.visibility?e.visibility.level:null;return this.getItemDataAndProperties(i,e.data).pipe(Object(h.a)((function(i){var o=i.data,s=i.controlProps;n.toolbar.addItem(e.featureId,r,o,s,t,a)})))},t.prototype.updateToolbarItem=function(e){var t=this,n=this.featureList.getFeature(e.featureId);return this.getItemDataAndProperties(n,e.data).pipe(Object(h.a)((function(n){var i=n.data,r=n.controlProps;t.toolbar.updateItem(e.featureId,i,r)})))},t.prototype.positionToolbar=function(){var e=this;return this.locator.getDiagramOnce().pipe(Object(h.a)((function(t){var n=e.state.get("Selected"),i=t.getBounds(n),r=e.coordinate.x(i.x)+e.coordinate.width(i.width)/2,a=e.coordinate.y(i.y);a-=e.isPlusCreateAvailable(t,n)||e.checkTransformAngle(t,n)?30:15,e.toolbar.position({x:r,y:a},"bottomcenter")})))},t.prototype.handleToolbarChange=function(e){var t=this,n=this.featureList.getFeature(e.id);if(n.transformer){this.handleFeatureTrack(n,e.data);var i=this.injector.get(n.transformer),r=Object(a.Sb)((function(e){return t.commandService.dispatch(n.commandEvent,e)}));i.getApplyData(n.id,e.data).subscribe(r)}else{var o=a.s.mergeInstances({},this.getCommandData(e.id),e.data);this.commandService.dispatch(n.commandEvent,o)}},t.prototype.handleFeatureTrack=function(e,t){if(e.label&&t&&t.label){var n={value1:t.label.trim()?t.label:t.id};t.subLabel&&(n.value2=t.subLabel),a.Lb.track("canvas.toolbar."+e.label.replace(/\s/g,"")+".change",n)}},t.prototype.getCommandData=function(e){var t={},n=this.toolbar.getItem(e);return n&&n.data&&(n.data.dataItemId&&(t.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(t.alterFunction=n.data.alterFunction)),t},t.prototype.getToolbarItems=function(){var e=this,t=this.state.get("Selected");return t.length?(1===t.length?this.getToolbarItemsForSingleShape(t[0]):this.getToolbarItemsForMultiShape(t)).pipe(Object(h.a)((function(t){var n=e.state.get("InnerShapeSelection");return Object.keys(n).length>0?t.filter((function(e){return"openShapelinkEditor"!==e.featureId})):t})),Object(d.a)((function(t){var n;return n=t.map((function(t){return e.isFeatureEnabled(t.featureId)})),l.a.apply(void 0,Object(i.j)(n)).pipe(Object(h.a)((function(e){return t.filter((function(t,n){return e[n]}))})))}))):Object(u.a)([])},t.prototype.isFeatureEnabled=function(e){var t=this.featureList.getFeature(e);if(t.transformer){var n=this.injector.get(t.transformer);if(n.isEnabled)return n.isEnabled(t.id)}return Object(u.a)(!0)},t.prototype.getToolbarItemsForSingleShape=function(e){return this.locator.getShapeOnce(e).pipe(Object(v.a)((function(e){return null!==e})),Object(h.a)((function(e){return e.getContextualToolbarItems()})))},t.prototype.getToolbarItemsForMultiShape=function(e){return this.locator.getDiagramOnce().pipe(Object(h.a)((function(t){var n=Object(s.filter)(t.shapes,(function(t){return e.includes(t.id)}));if(t.sameType(e)){var r=n.map((function(e){return e.getContextualToolbarItemsForSameType()}));return s.intersectionBy.apply(void 0,Object(i.j)(r,["featureId"]))}r=n.map((function(e){return e.getContextualToolbarItemsForMultipleTypes()}));return s.intersectionBy.apply(void 0,Object(i.j)(r,["featureId"]))})))},t.prototype.getToolbarItemsForTextEdit=function(e){return Object(p.b)()},t.prototype.getItemDataAndProperties=function(e,t){var n=this.getUIControlProperties(e);if(e.transformer){var i=this.injector.get(e.transformer);return(i.transformProperties?i.transformProperties(e.id,n):Object(u.a)(n)).pipe(Object(d.a)((function(n){return i.getFeatureData(e.id,t).pipe(Object(h.a)((function(e){return{data:e,controlProps:n}})))})))}if(t){var r=a.s.mergeInstances({},e.data,t);return Object(u.a)({data:r,controlProps:n})}return Object(u.a)({data:e.data,controlProps:n})},t.prototype.getUIControlProperties=function(e){return{id:e.id,icon:e.icon,label:e.label,tooltip:e.tooltip,updateToolbarIcon:e.updateToolbarIcon}},t.prototype.getUIControlType=function(e,t){if(void 0===t&&(t="primary"),"secondary"===t)return j.a;if(!e||e===o.d.BINARY)return I.a;if(e===o.d.OPTION_IMAGES||e===o.d.OPTION_LIST)return T.a;if(e===o.d.CUSTOM_STYLE_PALETTES)return _.a;if(e===o.d.GRID_IMAGES)return P.a;throw new Error("A contextual toolbar UI control is not available for "+e)},t.prototype.createAddSource=function(){return Object(p.b)()},t.prototype.createRemoveSource=function(){return Object(p.b)()},t.prototype.createChangeSource=function(){return Object(p.b)()},t.prototype.isPlusCreateAvailable=function(e,t){return!(1!==t.length||!e.shapes[t[0]]||!e.shapes[t[0]].create)},t.prototype.checkTransformAngle=function(e,t){if(1===t.length&&!e.shapes[t[0]].isConnector()){var n=e.shapes[t[0]].transform.angle;if(n>85||n<-175)return!0}return!1},t.\u0275fac=function(e){return new(e||t)(r.pc(r.C),r.pc(a.B),r.pc(w.a),r.pc(a.Jb),r.pc(S.a),r.pc(E.a),r.pc(x.a))},t.\u0275prov=r.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(k.a)(),Object(i.g)("design:paramtypes",[r.C,a.B,w.a,a.Jb,S.a,E.a,x.a])],t)}(k.b);Object.defineProperty(A,"name",{value:"ContextualToolbarHandler"})},aYRE:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("D57K"),r=n("5xGT"),a=n("X0jn"),o=n("nsO7"),s=n("J+dc"),c=n("xVbo"),u=n("TLy2"),l=n("c7W3"),p=n("nWGD"),d=n("Jzy8"),h=n("EM62"),f=n("s2Ay"),g=function(){function e(e,t,n,i){this.commandService=e,this.taskLocator=t,this.state=n,this.translate=i}return e.prototype.addTask=function(e,t,n,i,r,s){var c={};if(c.id=e,c.roleId=t,c.roles=Object(o.map)(r,(function(e){return{userId:e.userId,lastUpdated:Date.now()}})),c.title=this.getTextFromShape(i)||this.translate.instant("LABELS.UNTITLED_TASK"),c.shapeId=i.id,c.diagramId=n.id,c.folderId=n.project,i.eData){var u=Object.keys(i.eData);u.length>0&&(c.edataId=u[0],c.entityId=i.eData[c.edataId])}return"creately.card.datasource"===i.defId&&(c.sourceId="github"),c.creatorId=this.state.get("CurrentUser"),c.status=d.L.Active,Object(o.filter)(s,(function(e){return e.roleBound&&e.roleId===t})).forEach((function(e){e.systemType===a.y.DueDate?c.dueDate=i.data[e.id].value:e.systemType===a.y.EstimateHrs?c.estimateHrs=i.data[e.id].value:e.systemType===a.y.EstimatePts&&(c.estimatePts=i.data[e.id].value)})),this.commandService.dispatch(l.a.addTask,{task:c}),c},e.prototype.removeTask=function(e){this.state.set("CurrentSidebarTask",""),this.commandService.dispatch(l.a.removeTask,e,{taskId:e})},e.prototype.updateTaskTitle=function(e,t){var n={title:t};this.commandService.dispatch(l.a.updateTask,e,{task:{$set:n}})},e.prototype.updateTaskStatus=function(e,t){this.updateTask(e,t,a.y.Status)},e.prototype.markComplete=function(e,t){var n=this;void 0===t&&(t=!0);var i=this.state.get("CurrentUser");return this.taskLocator.getTask(e).pipe(Object(s.a)(1),Object(c.a)((function(e){return!!e})),Object(u.a)((function(r){var a={$set:{}};a.$set.roles=Object(o.cloneDeep)(r.roles);var s=Object(o.find)(a.$set.roles,(function(e){return e.userId===i}));return s&&(s.isComplete=t),t?(r.anyComplete||0===a.$set.roles.filter((function(e){return!e.isComplete})).length)&&(a.$set.completed=Date.now(),a.$set.completedBy=i,a.$set.status=d.L.Completed):r.anyComplete&&!a.$set.roles.filter((function(e){return!e.isComplete})).length||(a.$unset={},a.$unset.completed=!0,a.$unset.completedBy=!0,r.status===d.L.Completed&&(a.$set.status=d.L.Active)),n.commandService.dispatch(l.a.updateTask,e,{task:a})}))).subscribe()},e.prototype.updateTask=function(e,t,n){if(n===a.y.Status&&t===d.L.Completed)return this.markComplete(e,!0);var i={};return t?(i.$set={},this.mapChangeToTask(i.$set,t,n)):(i.$unset={},this.mapChangeToTask(i.$unset,!0,n)),this.commandService.dispatch(l.a.updateTask,e,{task:i})},e.prototype.getTextFromShape=function(e){return e.primaryTextModel?e.primaryTextModel.plainText:e.previewText||this.extractPlainText(e)},e.prototype.extractPlainText=function(e){var t,n,r=Object(o.toArray)(e.texts).find((function(e){return!!e})),a="";if(r)try{for(var s=Object(i.k)(r.content),c=s.next();!c.done;c=s.next()){a+=c.value.text}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a.trim()},e.prototype.mapChangeToTask=function(e,t,n){e&&(n===a.y.Role?e.roles=null==t?void 0:t.people.map((function(e){return{userId:e.id,lastUpdated:Date.now()}})):n===a.y.DueDate?e.dueDate=t:n===a.y.EstimateHrs?e.estimateHrs=t:n===a.y.EstimatePts?e.estimatePts=t:n===a.y.Status&&(e.status=t))},e.\u0275fac=function(t){return new(t||e)(h.pc(r.B),h.pc(p.a),h.pc(r.Jb),h.pc(f.e))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},bnd4:function(e,t,n){!function(e){e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,n){if(!(this instanceof r))return new r(t,n);var a=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=n||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=x.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(u)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),k(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){_(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return T(n,"Cannot write after close. Assign an onready handler.");if(null===t)return _(n);"object"==typeof t&&(t=t.toString());var r=0,a="";for(;a=N(t,r++),n.c=a,a;)switch(n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++),n.state){case x.BEGIN:if(n.state=x.BEGIN_WHITESPACE,"\ufeff"===a)continue;F(n,a);continue;case x.BEGIN_WHITESPACE:F(n,a);continue;case x.TEXT:if(n.sawRoot&&!n.closedRoot){for(var o=r-1;a&&"<"!==a&&"&"!==a;)(a=N(t,r++))&&n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(o,r-1)}"<"!==a||n.sawRoot&&n.closedRoot&&!n.strict?(f(a)||n.sawRoot&&!n.closedRoot||j(n,"Text data outside of root node."),"&"===a?n.state=x.TEXT_ENTITY:n.textNode+=a):(n.state=x.OPEN_WAKA,n.startTagPosition=n.position);continue;case x.SCRIPT:"<"===a?n.state=x.SCRIPT_ENDING:n.script+=a;continue;case x.SCRIPT_ENDING:"/"===a?n.state=x.CLOSE_TAG:(n.script+="<"+a,n.state=x.SCRIPT);continue;case x.OPEN_WAKA:if("!"===a)n.state=x.SGML_DECL,n.sgmlDecl="";else if(f(a));else if(v(l,a))n.state=x.OPEN_TAG,n.tagName=a;else if("/"===a)n.state=x.CLOSE_TAG,n.tagName="";else if("?"===a)n.state=x.PROC_INST,n.procInstName=n.procInstBody="";else{if(j(n,"Unencoded <"),n.startTagPosition+1<n.position){var s=n.position-n.startTagPosition;a=new Array(s).join(" ")+a}n.textNode+="<"+a,n.state=x.TEXT}continue;case x.SGML_DECL:"[CDATA["===(n.sgmlDecl+a).toUpperCase()?(w(n,"onopencdata"),n.state=x.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+a==="--"?(n.state=x.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+a).toUpperCase()?(n.state=x.DOCTYPE,(n.doctype||n.sawRoot)&&j(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===a?(w(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=x.TEXT):g(a)?(n.state=x.SGML_DECL_QUOTED,n.sgmlDecl+=a):n.sgmlDecl+=a;continue;case x.SGML_DECL_QUOTED:a===n.q&&(n.state=x.SGML_DECL,n.q=""),n.sgmlDecl+=a;continue;case x.DOCTYPE:">"===a?(n.state=x.TEXT,w(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=a,"["===a?n.state=x.DOCTYPE_DTD:g(a)&&(n.state=x.DOCTYPE_QUOTED,n.q=a));continue;case x.DOCTYPE_QUOTED:n.doctype+=a,a===n.q&&(n.q="",n.state=x.DOCTYPE);continue;case x.DOCTYPE_DTD:n.doctype+=a,"]"===a?n.state=x.DOCTYPE:g(a)&&(n.state=x.DOCTYPE_DTD_QUOTED,n.q=a);continue;case x.DOCTYPE_DTD_QUOTED:n.doctype+=a,a===n.q&&(n.state=x.DOCTYPE_DTD,n.q="");continue;case x.COMMENT:"-"===a?n.state=x.COMMENT_ENDING:n.comment+=a;continue;case x.COMMENT_ENDING:"-"===a?(n.state=x.COMMENT_ENDED,n.comment=I(n.opt,n.comment),n.comment&&w(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+a,n.state=x.COMMENT);continue;case x.COMMENT_ENDED:">"!==a?(j(n,"Malformed comment"),n.comment+="--"+a,n.state=x.COMMENT):n.state=x.TEXT;continue;case x.CDATA:"]"===a?n.state=x.CDATA_ENDING:n.cdata+=a;continue;case x.CDATA_ENDING:"]"===a?n.state=x.CDATA_ENDING_2:(n.cdata+="]"+a,n.state=x.CDATA);continue;case x.CDATA_ENDING_2:">"===a?(n.cdata&&w(n,"oncdata",n.cdata),w(n,"onclosecdata"),n.cdata="",n.state=x.TEXT):"]"===a?n.cdata+="]":(n.cdata+="]]"+a,n.state=x.CDATA);continue;case x.PROC_INST:"?"===a?n.state=x.PROC_INST_ENDING:f(a)?n.state=x.PROC_INST_BODY:n.procInstName+=a;continue;case x.PROC_INST_BODY:if(!n.procInstBody&&f(a))continue;"?"===a?n.state=x.PROC_INST_ENDING:n.procInstBody+=a;continue;case x.PROC_INST_ENDING:">"===a?(w(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=x.TEXT):(n.procInstBody+="?"+a,n.state=x.PROC_INST_BODY);continue;case x.OPEN_TAG:v(p,a)?n.tagName+=a:(P(n),">"===a?D(n):"/"===a?n.state=x.OPEN_TAG_SLASH:(f(a)||j(n,"Invalid character in tag name"),n.state=x.ATTRIB));continue;case x.OPEN_TAG_SLASH:">"===a?(D(n,!0),R(n)):(j(n,"Forward-slash in opening tag not followed by >"),n.state=x.ATTRIB);continue;case x.ATTRIB:if(f(a))continue;">"===a?D(n):"/"===a?n.state=x.OPEN_TAG_SLASH:v(l,a)?(n.attribName=a,n.attribValue="",n.state=x.ATTRIB_NAME):j(n,"Invalid attribute name");continue;case x.ATTRIB_NAME:"="===a?n.state=x.ATTRIB_VALUE:">"===a?(j(n,"Attribute without value"),n.attribValue=n.attribName,M(n),D(n)):f(a)?n.state=x.ATTRIB_NAME_SAW_WHITE:v(p,a)?n.attribName+=a:j(n,"Invalid attribute name");continue;case x.ATTRIB_NAME_SAW_WHITE:if("="===a)n.state=x.ATTRIB_VALUE;else{if(f(a))continue;j(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",w(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===a?D(n):v(l,a)?(n.attribName=a,n.state=x.ATTRIB_NAME):(j(n,"Invalid attribute name"),n.state=x.ATTRIB)}continue;case x.ATTRIB_VALUE:if(f(a))continue;g(a)?(n.q=a,n.state=x.ATTRIB_VALUE_QUOTED):(j(n,"Unquoted attribute value"),n.state=x.ATTRIB_VALUE_UNQUOTED,n.attribValue=a);continue;case x.ATTRIB_VALUE_QUOTED:if(a!==n.q){"&"===a?n.state=x.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=a;continue}M(n),n.q="",n.state=x.ATTRIB_VALUE_CLOSED;continue;case x.ATTRIB_VALUE_CLOSED:f(a)?n.state=x.ATTRIB:">"===a?D(n):"/"===a?n.state=x.OPEN_TAG_SLASH:v(l,a)?(j(n,"No whitespace between attributes"),n.attribName=a,n.attribValue="",n.state=x.ATTRIB_NAME):j(n,"Invalid attribute name");continue;case x.ATTRIB_VALUE_UNQUOTED:if(!m(a)){"&"===a?n.state=x.ATTRIB_VALUE_ENTITY_U:n.attribValue+=a;continue}M(n),">"===a?D(n):n.state=x.ATTRIB;continue;case x.CLOSE_TAG:if(n.tagName)">"===a?R(n):v(p,a)?n.tagName+=a:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=x.SCRIPT):(f(a)||j(n,"Invalid tagname in closing tag"),n.state=x.CLOSE_TAG_SAW_WHITE);else{if(f(a))continue;b(l,a)?n.script?(n.script+="</"+a,n.state=x.SCRIPT):j(n,"Invalid tagname in closing tag."):n.tagName=a}continue;case x.CLOSE_TAG_SAW_WHITE:if(f(a))continue;">"===a?R(n):j(n,"Invalid characters in closing tag");continue;case x.TEXT_ENTITY:case x.ATTRIB_VALUE_ENTITY_Q:case x.ATTRIB_VALUE_ENTITY_U:var c,u;switch(n.state){case x.TEXT_ENTITY:c=x.TEXT,u="textNode";break;case x.ATTRIB_VALUE_ENTITY_Q:c=x.ATTRIB_VALUE_QUOTED,u="attribValue";break;case x.ATTRIB_VALUE_ENTITY_U:c=x.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===a?(n[u]+=L(n),n.entity="",n.state=c):v(n.entity.length?h:d,a)?n.entity+=a:(j(n,"Invalid character in entity name"),n[u]+="&"+n.entity+a,n.entity="",n.state=c);continue;default:throw new Error(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,a=0,o=i.length;a<o;a++){var s=t[i[a]].length;if(s>n)switch(i[a]){case"textNode":E(t);break;case"cdata":w(t,"oncdata",t.cdata),t.cdata="";break;case"script":w(t,"onscript",t.script),t.script="";break;default:T(t,"Max buffer length exceeded: "+i[a])}r=Math.max(r,s)}var c=e.MAX_BUFFER_LENGTH-r;t.bufferCheckPosition=c+t.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;E(e=this),""!==e.cdata&&(w(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(w(e,"onscript",e.script),e.script="")}};try{t=n(!function(){var e=new Error("Cannot find module 'stream'");throw e.code="MODULE_NOT_FOUND",e}()).Stream}catch(B){t=function(){}}var a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,n){if(!(this instanceof o))return new o(e,n);t.apply(this),this._parser=new r(e,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(e){i.emit("error",e),i._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i._parser["on"+e]=t,t;i.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n("4j/0").StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,n){var i=this;return i._parser["on"+e]||-1===a.indexOf(e)||(i._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),t.prototype.on.call(i,e,n)};var s="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",u={xml:s,xmlns:c},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function m(e){return">"===e||f(e)}function v(e,t){return e.test(t)}function b(e,t){return!v(e,t)}var y,C,O,x=0;for(var S in e.STATE={BEGIN:x++,BEGIN_WHITESPACE:x++,TEXT:x++,TEXT_ENTITY:x++,OPEN_WAKA:x++,SGML_DECL:x++,SGML_DECL_QUOTED:x++,DOCTYPE:x++,DOCTYPE_QUOTED:x++,DOCTYPE_DTD:x++,DOCTYPE_DTD_QUOTED:x++,COMMENT_STARTING:x++,COMMENT:x++,COMMENT_ENDING:x++,COMMENT_ENDED:x++,CDATA:x++,CDATA_ENDING:x++,CDATA_ENDING_2:x++,PROC_INST:x++,PROC_INST_BODY:x++,PROC_INST_ENDING:x++,OPEN_TAG:x++,OPEN_TAG_SLASH:x++,ATTRIB:x++,ATTRIB_NAME:x++,ATTRIB_NAME_SAW_WHITE:x++,ATTRIB_VALUE:x++,ATTRIB_VALUE_QUOTED:x++,ATTRIB_VALUE_CLOSED:x++,ATTRIB_VALUE_UNQUOTED:x++,ATTRIB_VALUE_ENTITY_Q:x++,ATTRIB_VALUE_ENTITY_U:x++,CLOSE_TAG:x++,CLOSE_TAG_SAW_WHITE:x++,SCRIPT:x++,SCRIPT_ENDING:x++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],i="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=i})),e.STATE)e.STATE[e.STATE[S]]=S;function k(e,t,n){e[t]&&e[t](n)}function w(e,t,n){e.textNode&&E(e),k(e,t,n)}function E(e){e.textNode=I(e.opt,e.textNode),e.textNode&&k(e,"ontext",e.textNode),e.textNode=""}function I(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function T(e,t){return E(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,k(e,"onerror",t),e}function _(e){return e.sawRoot&&!e.closedRoot&&j(e,"Unclosed root tag"),e.state!==x.BEGIN&&e.state!==x.BEGIN_WHITESPACE&&e.state!==x.TEXT&&T(e,"Unexpected end"),E(e),e.c="",e.closed=!0,k(e,"onend"),r.call(e,e.strict,e.opt),e}function j(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&T(e,t)}function P(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,w(e,"onopentagstart",n)}function A(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],r=n[1];return t&&"xmlns"===e&&(i="xmlns",r=""),{prefix:i,local:r}}function M(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=A(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==s)j(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==c)j(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var r=e.tag,a=e.tags[e.tags.length-1]||e;r.ns===a.ns&&(r.ns=Object.create(a.ns)),r.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,w(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function D(e,t){if(e.opt.xmlns){var n=e.tag,i=A(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(j(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){w(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],c=s[0],u=s[1],l=A(c,!0),p=l.prefix,d=l.local,h=""===p?"":n.ns[p]||"",f={name:c,value:u,prefix:p,local:d,uri:h};p&&"xmlns"!==p&&!h&&(j(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[c]=f,w(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),w(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=x.TEXT:e.state=x.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function R(e){if(!e.tagName)return j(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=x.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=x.SCRIPT);w(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--;){if(e.tags[t].name===i)break;j(e,"Unexpected close tag")}if(t<0)return j(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=x.TEXT);e.tagName=n;for(var r=e.tags.length;r-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,w(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==c.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];w(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=x.TEXT}function L(e){var t,n=e.entity,i=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),r=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),r=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||r.toLowerCase()!==n?(j(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function F(e,t){"<"===t?(e.state=x.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(j(e,"Non-whitespace before first tag."),e.textNode=t,e.state=x.TEXT)}function N(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}x=e.STATE,String.fromCodePoint||(y=String.fromCharCode,C=Math.floor,O=function(){var e,t,n=16384,i=[],r=-1,a=arguments.length;if(!a)return"";for(var o="";++r<a;){var s=Number(arguments[r]);if(!isFinite(s)||s<0||s>1114111||C(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?i.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,i.push(e,t)),(r+1===a||i.length>n)&&(o+=y.apply(null,i),i.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:O,configurable:!0,writable:!0}):String.fromCodePoint=O)}(t)},c3EF:function(e,t,n){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},c6sW:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("C5+t"),a=n("5xGT"),o=n("xnGY"),s=n("i9xl"),c=n("6Oco"),u=n("P4Xx"),l=n("J+dc"),p=n("TLy2"),d=n("EM62"),h=function(e){function t(t,n,i,r,a){var o=e.call(this,t)||this;return o.logger=t,o.messageFactory=n,o.authentication=i,o.commandService=r,o.neutrinoConnection=a,o}return Object(i.e)(t,e),t.prototype.startSubscription=function(e){var t=this;return this.logger.debug("SubscriptionService: starting subscription: "+e.resourceId),Object(s.a)((function(){return e.getLatestSyncedTime().pipe(Object(l.a)(1))})).pipe(Object(p.a)((function(n){return t.sendSubStartRequest(e,n)})),Object(p.a)((function(n){return t.handleSubStartResponse(e,n)})))},t.prototype.closeSubscription=function(e){return this.logger.debug("SubscriptionService: closing subscription: "+e.resourceId),this.sendSubEndRequest(e)},t.prototype.sendSubStartRequest=function(e,t){var n=this.messageFactory.createSubscriptionMessage("start",e.subscription,e.resourceId);return n.authToken=this.authentication.token,n.payload=t?{latestTaskTimestamp:t}:{},this.neutrinoConnection.send(n)},t.prototype.sendSubEndRequest=function(e){var t=this.messageFactory.createSubscriptionMessage("end",e.subscription,e.resourceId);return t.authToken=this.authentication.token,t.payload={},this.neutrinoConnection.send(t)},t.prototype.handleSubStartResponse=function(e,t){var n=t.ppld,i=[];if(n.tasks){var r={type:e.modelType,data:{model:n.tasks}};i.push(this.commandService.collab("SubStoreModels",t.rid,null,r))}return i.length?Object(u.a)(i):Object(c.b)()},t.\u0275fac=function(e){return new(e||t)(d.pc(a.db),d.pc(r.f),d.pc(r.a),d.pc(a.B),d.pc(r.g))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t}(o.c)},cOhl:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("D57K"),r=n("5xGT"),a=n("X0jn"),o=n("C05f"),s=n("g6G6"),c=n("TLy2"),u=n("xVbo"),l=n("YtkY"),p=n("8j5Y"),d=n("QoSw"),h=n("bNPW"),f=function(){function e(e,t,n){this.name=e,this.styles=t,this.title=n}return Object.defineProperty(e.prototype,"paletteId",{get:function(){return(this.name+JSON.stringify(this.styles)).replace(/['"]+/g,"")},enumerable:!1,configurable:!0}),e}(),g=n("DL1I"),m=n("EM62"),v=function(){function e(e){this.ll=e,this._documentPalette=new f("document",[],"PANEL_HEADINGS.DOCUMENT_STYLES"),this._documentLinePalettes=new f("document-line",[],"PANEL_HEADINGS.DOCUMENT_STYLES"),this._palettes=new o.a([]),this._linePalettes=new o.a([]),this.subs=[],this._palettes.getValue().push(this._documentPalette),this._linePalettes.getValue().push(this._documentLinePalettes),this.createPalettes(),this.subs.push(this.getDocumentShapeStyles().subscribe())}return e.prototype.getDocumentPalette=function(){return this._documentPalette},e.prototype.getDocumentLinePalette=function(){return this._documentLinePalettes},e.prototype.getPalattes=function(){return this._palettes},e.prototype.getLinePalattes=function(){return this._linePalettes},e.prototype.createPalettes=function(){this._palettes.getValue().push(this.createMetroPalette()),this._palettes.getValue().push(this.createMetroLinedPalette()),this._palettes.getValue().push(this.createModernMashPalette()),this._palettes.getValue().push(this.createLightPalette()),this._palettes.getValue().push(this.createOutlinedPalette()),this._palettes.getValue().push(this.createDottedPalette()),this._palettes.getValue().push(this.createRetroGradientsPalette()),this._palettes.getValue().push(this.createOfficePalette()),this._palettes.getValue().push(this.createPastelPalette()),this._palettes.getValue().push(this.createTriadPalette()),this._palettes.getValue().push(this.createVintageGradientsPalette()),this._linePalettes.getValue().push(this.createLinesMetroLinedPalette()),this._linePalettes.getValue().push(this.createLinesDottedPalette())},e.prototype.createMetroPalette=function(){var e=[new g.a(2,"#023350",[0,0],1,"#37627A",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#062F44",[0,0],1,"#325364",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#2F8CAE",[0,0],1,"#83C4DC",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#0979A7",[0,0],1,"#5FB2D4",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#54A5AE",[0,0],1,"#6FCFDA",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#2EA3B0",[0,0],1,"#5CCEDB",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#749032",[0,0],1,"#B1C585",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#63712D",[0,0],1,"#9AAC51",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#2F7939",[0,0],1,"#55AA61",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#1F5927",[0,0],1,"#41834A",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#BF9841",[0,0],1,"#F0D18D",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#BB881A",[0,0],1,"#FEBE32",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#4B0C23",[0,0],1,"#A4617A",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#530920",[0,0],1,"#83304A",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#843138",[0,0],1,"#E0626C",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#65171B",[0,0],1,"#CA454D",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#AD6520",[0,0],1,"#F8A85C",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#AC5116",[0,0],1,"#FA8A42",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#B25E72",[0,0],1,"#FA9AB1",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#AE2647",[0,0],1,"#FC6A8D",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#995BA4",[0,0],1,"#D88CE4",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#4D1357",[0,0],1,"#B963C8",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#B9B6B8",[0,0],1,"#E9E4E8",a.i.Solid,void 0,1,"#606060"),new g.a(2,"#585757",[0,0],1,"#BEB4B4",a.i.Solid,void 0,1,"#ffffff"),new g.a(2,"#000000",[0,0],1,"#4D4C4C",a.i.Solid,void 0,1,"#ffffff")];return new f("metro",e,"PANEL_HEADINGS.CREATELY_STYLES")},e.prototype.createMetroLinedPalette=function(){var e=[new g.a(2,"#054F7A",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#054F7A"),new g.a(2,"#08415F",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#08415F"),new g.a(2,"#36ABD6",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#36ABD6"),new g.a(2,"#0995CE",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#0995CE"),new g.a(2,"#63C9D5",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#63C9D5"),new g.a(2,"#34BDCC",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#34BDCC"),new g.a(2,"#92B73E",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#92B73E"),new g.a(2,"#8DA13B",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#8DA13B"),new g.a(2,"#43A047",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#43A047"),new g.a(2,"#2E7D32",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#2E7D32"),new g.a(2,"#F5C457",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#F5C457"),new g.a(2,"#F2AF1D",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#F2AF1D"),new g.a(2,"#83153D",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#83153D"),new g.a(2,"#700C2B",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#700C2B"),new g.a(2,"#D94753",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#D94753"),new g.a(2,"#C0232C",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#C0232C"),new g.a(2,"#F68C27",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#F68C27"),new g.a(2,"#F47421",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#F47421"),new g.a(2,"#ED809A",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#ED809A"),new g.a(2,"#FA4772",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#FA4772"),new g.a(2,"#CC7ADA",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#CC7ADA"),new g.a(2,"#AD3CC1",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#AD3CC1"),new g.a(2,"#E9E4E8",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#606060"),new g.a(2,"#8B8B8B",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#8B8B8B"),new g.a(2,"#2F2F2F",[0,0],1,"#ffffff",a.i.Solid,void 0,1,"#2F2F2F")];return new f("metro-lined",e)},e.prototype.createLightPalette=function(){var e=[new g.a(2,"#EC4A42",[0,0],1,"#FFF1F0",a.i.Solid,void 0,1,"#EC4A42"),new g.a(2,"#FDA906",[0,0],1,"#FFF4DF",a.i.Solid,void 0,1,"#FDA906"),new g.a(2,"#DEB307",[0,0],1,"#FFF6D0",a.i.Solid,void 0,1,"#DEB307"),new g.a(2,"#71BF85",[0,0],1,"#E2FFEA",a.i.Solid,void 0,1,"#71BF85"),new g.a(2,"#2BBC9E",[0,0],1,"#DBFFF8",a.i.Solid,void 0,1,"#2BBC9E"),new g.a(2,"#2D94E4",[0,0],1,"#D8EBFA",a.i.Solid,void 0,1,"#2D94E4"),new g.a(2,"#A275CD",[0,0],1,"#F2E4FF",a.i.Solid,void 0,1,"#A275CD"),new g.a(2,"#BAA88C",[0,0],1,"#FFF6E8",a.i.Solid,void 0,1,"#BAA88C"),new g.a(2,"#CD8B6A",[0,0],1,"#FFEAE0",a.i.Solid,void 0,1,"#CD8B6A"),new g.a(2,"#3D5C83",[0,0],1,"#E3EFFF",a.i.Solid,void 0,1,"#3D5C83"),new g.a(2,"#B2B3B3",[0,0],1,"#F3F3F3",a.i.Solid,void 0,1,"#B2B3B3"),new g.a(2,"#FFE365",[0,0],1,"#FAF6DF",a.i.Solid,void 0,1,"#FFE365")];return new f("light",e)},e.prototype.createOutlinedPalette=function(){var e=[new g.a(2,"#5B0902",[0,0],1,"#EC4A42",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#865903",[0,0],1,"#FDA906",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#995417",[0,0],1,"#FF8C27",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#9E8319",[0,0],1,"#F7CA18",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#417C50",[0,0],1,"#71BF85",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#1C7764",[0,0],1,"#2BBC9E",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#7B8B02",[0,0],1,"#B4CB00",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#145384",[0,0],1,"#2D94E4",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#62477D",[0,0],1,"#A275CD",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#7A6A50",[0,0],1,"#BAA88C",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#834729",[0,0],1,"#CD8B6A",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#516263",[0,0],1,"#94A5A6",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#3E606D",[0,0],1,"#8ED2EB",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#7D5740",[0,0],1,"#F8B48C",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#1C2E44",[0,0],1,"#3D5C83",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#022048",[0,0],1,"#004291",a.i.Solid,void 0,1,"#FFFFFF")];return new f("outlined",e)},e.prototype.createDottedPalette=function(){var e=[new g.a(2,"#054F7A",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#054F7A"),new g.a(2,"#08415F",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#08415F"),new g.a(2,"#36ABD6",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#36ABD6"),new g.a(2,"#0995CE",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#0995CE"),new g.a(2,"#63C9D5",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#63C9D5"),new g.a(2,"#34BDCC",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#34BDCC"),new g.a(2,"#92B73E",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#92B73E"),new g.a(2,"#8DA13B",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#8DA13B"),new g.a(2,"#43A047",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#43A047"),new g.a(2,"#2E7D32",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#2E7D32"),new g.a(2,"#F5C457",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#F5C457"),new g.a(2,"#F2AF1D",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#F2AF1D"),new g.a(2,"#83153D",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#83153D"),new g.a(2,"#700C2B",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#700C2B"),new g.a(2,"#D94753",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#D94753"),new g.a(2,"#C0232C",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#C0232C"),new g.a(2,"#F68C27",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#F68C27"),new g.a(2,"#F47421",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#F47421"),new g.a(2,"#ED809A",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#ED809A"),new g.a(2,"#FA4772",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#FA4772"),new g.a(2,"#CC7ADA",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#CC7ADA"),new g.a(2,"#AD3CC1",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#AD3CC1"),new g.a(2,"#E9E4E8",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#606060"),new g.a(2,"#8B8B8B",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#8B8B8B"),new g.a(2,"#2F2F2F",[3,3],1,"#ffffff",a.i.Solid,void 0,1,"#2F2F2F")];return new f("dotted",e)},e.prototype.createOfficePalette=function(){var e=[new g.a(2,"#0067A0",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#0067A0"),new g.a(2,"#BC2621",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#BC2621"),new g.a(2,"#FF8C27",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#FF8C27"),new g.a(2,"#359B4F",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#359B4F"),new g.a(2,"#AD1A98",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#AD1A98"),new g.a(2,"#AD613B",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#AD613B"),new g.a(2,"#3D5C83",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#3D5C83"),new g.a(2,"#7E8C8D",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#7E8C8D"),new g.a(2,"#8C9B15",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#8C9B15"),new g.a(2,"#23A087",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#23A087"),new g.a(2,"#BBA88A",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#BBA88A"),new g.a(2,"#F7CA18",[0,0],1,"#F2F2F2",a.i.Solid,void 0,1,"#F7CA18")];return new f("office",e)},e.prototype.createPastelPalette=function(){var e=[new g.a(2,"#D58186",[0,0],1,"#EC9FA4",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#6E56AB",[0,0],1,"#9988C4",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#62B7E2",[0,0],1,"#8FD1F3",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#6F8FCD",[0,0],1,"#93ADE1",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#B7C56D",[0,0],1,"#D6E298",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#75B777",[0,0],1,"#96CB97",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#DEB56C",[0,0],1,"#F7CE84",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#D38256",[0,0],1,"#EA9E76",a.i.Solid,void 0,1,"#FFFFFF")];return new f("pastel",e)},e.prototype.createTriadPalette=function(){var e=[new g.a(2,"#355085",[0,0],1,"#FC7563",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#1D8DDB",[0,0],1,"#FDA906",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#9466B0",[0,0],1,"#F5D76E",a.i.Solid,void 0,1,"#9466B0"),new g.a(2,"#866B3E",[0,0],1,"#96C300",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#EA6C00",[0,0],1,"#CEEAD9",a.i.Solid,void 0,1,"#EA6C00"),new g.a(2,"#A606BB",[0,0],1,"#FFCE42",a.i.Solid,void 0,1,"#A606BB"),new g.a(2,"#C96A73",[0,0],1,"#71BF85",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#EA8C75",[0,0],1,"#1C355A",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#DE424D",[0,0],1,"#1053B2",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#4E4E4E",[0,0],1,"#FFE637",a.i.Solid,void 0,1,"#4E4E4E"),new g.a(2,"#FFAB00",[0,0],1,"#A274D0",a.i.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#DE424D",[0,0],1,"#F7D865",a.i.Solid,void 0,1,"#395B84")];return new f("triad",e)},e.prototype.createModernMashPalette=function(){var e=[new g.a(2,"#3D9E53",[0,0],1,void 0,a.i.LinearGradient,{colors:["#46B4B9","#52C36C"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#8235D0",[0,0],1,void 0,a.i.LinearGradient,{colors:["#8317DB","#E05F64"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#F29A53",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FDDE7B","#F0867F"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#5C96D8",[0,0],1,void 0,a.i.LinearGradient,{colors:["#3EE6DD","#5D7BF1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#BA1027",[0,0],1,void 0,a.i.LinearGradient,{colors:["#D172D3","#E63B63"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#8839CC",[0,0],1,void 0,a.i.LinearGradient,{colors:["#E430CB","#658FF1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#4496A5",[0,0],1,void 0,a.i.LinearGradient,{colors:["#4AB8A4","#658FF1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#F8831D",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FACB00","#F04D43","#FACB00"],ratios:[0,.5,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff")];return new f("modern-mash",e)},e.prototype.createRetroGradientsPalette=function(){var e=[new g.a(2,"#EC4A42",[0,0],1,void 0,a.i.LinearGradient,{colors:["#F78177","#EC4A42"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#C43731",[0,0],1,void 0,a.i.LinearGradient,{colors:["#E4685F","#C43731"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#FDA906",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFD40E","#FDA906"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#FF8C27",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFC050","#FF8C27"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#F7CA18",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FCE735","#F7CA18"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#71BF85",[0,0],1,void 0,a.i.LinearGradient,{colors:["#A9E1BB","#71BF85"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#359B4F",[0,0],1,void 0,a.i.LinearGradient,{colors:["#5EBA76","#359B4F"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#2BBC9E",[0,0],1,void 0,a.i.LinearGradient,{colors:["#56DFCD","#2BBC9E"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#23A087",[0,0],1,void 0,a.i.LinearGradient,{colors:["#49CEBC","#23A087"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#B4CB00",[0,0],1,void 0,a.i.LinearGradient,{colors:["#DBE700","#B4CB00"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#8C9B15",[0,0],1,void 0,a.i.LinearGradient,{colors:["#C0CB2E","#8C9B15"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#2D94E4",[0,0],1,void 0,a.i.LinearGradient,{colors:["#59C6F3","#2D94E4"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#004291",[0,0],1,void 0,a.i.LinearGradient,{colors:["#5C8FCC","#004291"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#A275CD",[0,0],1,void 0,a.i.LinearGradient,{colors:["#CFADE8","#A275CD"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#AD1A98",[0,0],1,void 0,a.i.LinearGradient,{colors:["#DE61CC","#AD1A98"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#BAA88C",[0,0],1,void 0,a.i.LinearGradient,{colors:["#DED3C0","#BAA88C"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#AD613B",[0,0],1,void 0,a.i.LinearGradient,{colors:["#D69A6D","#AD613B"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#3D5C83",[0,0],1,void 0,a.i.LinearGradient,{colors:["#7095B9","#3D5C83"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#354860",[0,0],1,void 0,a.i.LinearGradient,{colors:["#657E99","#354860"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#7E8C8D",[0,0],1,void 0,a.i.LinearGradient,{colors:["#B5C0C1","#7E8C8D"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff")];return new f("retro-gradients",e)},e.prototype.createVintageGradientsPalette=function(){var e=[new g.a(2,"#EC4A42",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#FFB3AF"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#EC4A42"),new g.a(2,"#FDA906",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#FFDB96"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#FDA906"),new g.a(2,"#FF8C27",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#FFC898"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#FF8C27"),new g.a(2,"#F7CA18",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#FFE684"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#F7CA18"),new g.a(2,"#71BF85",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#A4E1B4"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#71BF85"),new g.a(2,"#359B4F",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#72D98C"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#359B4F"),new g.a(2,"#2BBC9E",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#6AE4CB"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#2BBC9E"),new g.a(2,"#B4CB00",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#DEED6A"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#B4CB00"),new g.a(2,"#8C9B15",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#C2CE64"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#8C9B15"),new g.a(2,"#2D94E4",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#98C6EA"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#2D94E4"),new g.a(2,"#004291",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#84ACDD"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#004291"),new g.a(2,"#A275CD",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#C9ABE7"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#A275CD"),new g.a(2,"#AD1A98",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#E1A6D8"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#AD1A98"),new g.a(2,"#FFADAC",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#FFE0E1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#FFADAC"),new g.a(2,"#BAA88C",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#D5CBBA"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#BAA88C"),new g.a(2,"#AD613B",[0,0],1,void 0,a.i.LinearGradient,{colors:["#FFFFFF","#D9AC96"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#AD613B")];return new f("vintage-gradients",e)},e.prototype.createLinesMetroLinedPalette=function(){var e=[new h.a(2,"#C43731",[0,0],1),new h.a(2,"#FF8C27",[0,0],1),new h.a(2,"#F7CA18",[0,0],1),new h.a(2,"#359B4F",[0,0],1),new h.a(2,"#2BBC9E",[0,0],1),new h.a(2,"#23A087",[0,0],1),new h.a(2,"#B4CB00",[0,0],1),new h.a(2,"#8C9B15",[0,0],1),new h.a(2,"#2D94E4",[0,0],1),new h.a(2,"#004291",[0,0],1),new h.a(2,"#A275CD",[0,0],1),new h.a(2,"#AD1A98",[0,0],1),new h.a(2,"#D4C6B2",[0,0],1),new h.a(2,"#BAA88C",[0,0],1),new h.a(2,"#354860",[0,0],1),new h.a(2,"#BCC3C6",[0,0],1)];return new f("lines-metro-lined",e,"PANEL_HEADINGS.CREATELY_STYLES")},e.prototype.createLinesDottedPalette=function(){var e=[new h.a(2,"#C43731",[3,3],1),new h.a(2,"#FF8C27",[3,3],1),new h.a(2,"#F7CA18",[3,3],1),new h.a(2,"#359B4F",[3,3],1),new h.a(2,"#2BBC9E",[3,3],1),new h.a(2,"#23A087",[3,3],1),new h.a(2,"#B4CB00",[3,3],1),new h.a(2,"#8C9B15",[3,3],1),new h.a(2,"#2D94E4",[3,3],1),new h.a(2,"#004291",[3,3],1),new h.a(2,"#A275CD",[3,3],1),new h.a(2,"#AD1A98",[3,3],1),new h.a(2,"#BAA88C",[3,3],1),new h.a(2,"#AD613B",[3,3],1),new h.a(2,"#3D5C83",[3,3],1),new h.a(2,"#7E8C8D",[3,3],1)];return new f("lines-dotted",e)},e.prototype.getPalatte=function(e){return this._palettes.getValue().find((function(t){return t.paletteId===e}))},e.prototype.getPalatteByName=function(e){return this._palettes.getValue().find((function(t){return t.name===e}))},e.prototype.getStyle=function(e){var t,n,r=this._palettes.getValue().concat(this._linePalettes.getValue());try{for(var a=Object(i.k)(r),o=a.next();!o.done;o=a.next()){var s=o.value.styles.find((function(t){return t.styleId===e}));if(s)return s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.getDiagramDistinctStyles=function(e){var t=[],n=[];return e.forEach((function(e){if(e.style){var i=e.previewTextModel;i&&(e.style.textColor=i.content[0].color),n.includes(e.style.styleId)||(n.push(e.style.styleId),t.push(e.style))}})),t},e.prototype.getDocumentChanges=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(c.a)((function(t){return Object(s.a)(t.getDiagramOnce(),t.getDiagramChanges().pipe(Object(u.a)((function(t){return e.hasStyleChanges(t)})),Object(l.a)((function(e){return e.model}))))})))},e.prototype.hasStyleChanges=function(e){if(e.added&&e.added.length)return!0;if(e.split.shapes&&Object.keys(e.split.shapes).length)for(var t in e.split.shapes)if(e.split.shapes.hasOwnProperty(t)){if(e.modifier.$unset&&e.modifier.$unset["shapes."+t])return!0;var n=e.split.shapes[t];if(r.hb.hasChanges(n,"style"))return!0;if(r.hb.hasChanges(n,"texts"))return!0}return!1},e.prototype.getDocumentShapeStyles=function(){var e=this;return this.getDocumentChanges().pipe(Object(p.a)((function(t){var n=t.getShapes([a.u.Basic]);n=n.filter((function(e){return e.isStyleEnabledShape()}));var i=e.getDiagramDistinctStyles(n);e._documentPalette.styles=i,e._palettes.next(e._palettes.getValue());var r=t.getShapes([a.u.Connector]);e._documentLinePalettes.styles=e.getDiagramDistinctStyles(r),e._linePalettes.next(e._linePalettes.getValue())})))},e.\u0275fac=function(t){return new(t||e)(m.pc(d.a))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},cs9O:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("D57K"),r=n("X0jn"),a=function(e){function t(t,n){var i=e.call(this,t,n)||this;if(n!==r.u.Basic&&n!==r.u.Dynamic&&n!==r.u.Image&&n!==r.u.Freehand&&n!==r.u.EData)throw new Error("ShapeDisplayView cannot be created with "+n+" shape type.");return i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"isShapeView",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnectorView",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t}(n("deqJ").a)},dFmy:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("19Zn"),r=n("YtkY"),a=n("xVbo"),o=n("J+dc"),s=n("SBw3"),c=n("5xGT"),u=n("ROBh"),l=n("QoSw"),p=n("EM62"),d=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n,this.toogleableStyles=["bold","italic","underline","strikeout","align"],this.sanSerifFonts=["arial","helvetica","sans-serif"],this.serifFonts=["Times New Roman","Courier New","Courier","Georgia","serif"],this.textFormatter=new i.F}return e.prototype.getFeatureData=function(e,t){var n=this,i=this.featureList.getFeature(e),a=this.state.get("Selected"),o=this.state.get("InnerShapeSelection");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(e){var r=e.getCommonTextStyles(a,o),s=n.getUIData(i.data,t,r);return s.validation=i.data.validation,s.readOnly=i.data.readOnly,s})))},e.prototype.getApplyData=function(e,t){var n=this.featureList.getFeature(e),i={};this.toogleableStyles.includes(n.data.style)?i[n.data.style]=n.data.value:i[n.data.style]=t.value;var s={format:{"*":{indexStart:0,styles:i}}};return this.state.get("EditingText").open?this.state.changes("EditingText").pipe(Object(a.a)((function(e){return!e.open})),Object(o.a)(1),Object(r.a)((function(){return s}))):Object(u.a)(s)},e.prototype.getUIData=function(e,t,n){if("align"===e.style)t.value=n.align===e.value;else if("font"===e.style){var i=n[e.style];this.sanSerifFonts.includes(i)?i="sans_serif":this.serifFonts.includes(i)&&(i="serif"),t=this.updateOptionData(t,i)}else t=this.updateOptionData(t,n[e.style])||{value:n[e.style]};return t},e.prototype.updateOptionData=function(e,t){if(e&&e.data){var n=e.data;n.forEach((function(e){return e.selected=!1}));var i=n.find((function(e){return""+e.id==""+t}));if(i||void 0===t)i&&(i.selected=!0);else{var r=n.find((function(e){return e.custom}));r?(r.id=t,r.label=t,r.buttonLabel=t,r.value=t,r.selected=!0):n.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}return{value:n}}},e.\u0275fac=function(t){return new(t||e)(p.pc(l.a),p.pc(c.Jb),p.pc(s.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},deqJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("D57K"),r=n("h1tj"),a=function(e){function t(t,n){var i=e.call(this)||this;return i._type=n,i.name=t,i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return null},t.prototype.convertToCursorDrawable=function(e){var t=this;e.getCursor=function(e){return t.getCursor(e)}},t}(r.Container)},eIBf:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("C05f"),a=n("IGWl"),o=n("EM62"),s=n("2kYt"),c=n("g5Ym");function u(e,t){if(1&e&&(o.wc(),o.lc(0,"svg",7),o.gc(1,"use"),o.kc()),2&e){var n=o.xc().ngIf;o.Sb(1),o.Tb("href",n,null,"xlink")}}function l(e,t){if(1&e&&o.gc(0,"static-image",8),2&e){var n=o.xc().ngIf;o.Cc("enableHover",!0)("value",n)("width",70)("height",20)}}function p(e,t){if(1&e){var n=o.mc();o.lc(0,"button",3,4),o.tc("click",(function(){o.Oc(n);var e=o.xc();return e._change.next(e._data)})),o.ad(2,u,2,1,"svg",5),o.ad(3,l,1,4,"static-image",6),o.kc()}if(2&e){var i=t.ngIf;o.Sb(2),o.Cc("ngIf",i),o.Sb(1),o.Cc("ngIf",i)}}function d(e,t){if(1&e){var n=o.mc();o.lc(0,"a",9),o.tc("click",(function(){o.Oc(n);var e=o.xc();return e._change.next(e._data)})),o.cd(1),o.yc(2,"async"),o.kc()}if(2&e){var i=o.xc();o.Sb(1),o.ed(" ",o.zc(2,1,i.labelSource)," ")}}var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelSource=new r.a(""),t}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this._props?this._props.label:null},enumerable:!1,configurable:!0}),t.prototype.apply=function(){e.prototype.apply.call(this),this._props.label&&this.labelSource.next(this._props.label)},t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=o.Zb({type:t,selectors:[["rich-button"]],features:[o.Pb],decls:4,vars:4,consts:[[1,"rich-button-container"],["class","nu-btn-icon",3,"click",4,"ngIf"],["class","toolbar-dd-item-label",3,"click",4,"ngIf"],[1,"nu-btn-icon",3,"click"],["btn",""],["class","nu-icon nu-ic-text",4,"ngIf"],["type","svg",3,"enableHover","value","width","height",4,"ngIf"],[1,"nu-icon","nu-ic-text"],["type","svg",3,"enableHover","value","width","height"],[1,"toolbar-dd-item-label",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.ad(1,p,4,2,"button",1),o.yc(2,"async"),o.ad(3,d,3,3,"a",2),o.kc()),2&e&&(o.Sb(1),o.Cc("ngIf",o.zc(2,2,t.iconSource)),o.Sb(2),o.Cc("ngIf",t.label))},directives:[s.t,c.a],pipes:[s.b],styles:[""],changeDetection:0}),t}(a.a),f=o.nc(h)},eJth:function(e,t,n){e.exports=n.p+"0.f806b1a0ff04cd71478e.worker.js"},elRR:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("D57K"),r=n("SKSx"),a=n("Wpmq"),o=n("8j5Y"),s=n("4e/d"),c=n("Wg7D"),u=n("jIqt"),l=n("YtkY"),p=n("Ohay"),d=n("KTx3"),h=n("6Oco"),f=n("g6G6"),g=n("5xGT"),m=n("LLEj"),v=n("sXdR"),b=n("7zx0"),y=n("EM62"),C=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n)||this;return o.commandService=t,o.vToDcoordinate=n,o.state=i,o.postmsg=r,o.realtimeStates=a,o.pointerThrottle=120,o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:"move",tail:null,type:"css"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,i){var r=this,a=e.prototype.initialize.call(this,t,n,i),c=this.getStageDrag(n).pipe(Object(o.a)((function(e){return r.updatePan(e.nativeEvent.movementX,e.nativeEvent.movementY)}))),u=this.getStageMouseDown(t).pipe(Object(o.a)((function(e){r.hideComments()}))),l=this.getShapeTouch().pipe(Object(o.a)((function(e){r.postmsg.sendToParent("shape:touch",{shapeId:e.currentTarget.name})}))),p=this.interactionCanvas.canvas,m=Object(d.a)(p,"mousemove").pipe(Object(v.lodashThrottle)(this.pointerThrottle,{leading:!0,trailing:!0}),Object(o.a)((function(e){if(g.P.get("DEBUG_PHOTON_POINTER_MOVE")){var t=r.vToDcoordinate.x(e.x),n=r.vToDcoordinate.y(e.y),i=JSON.stringify([t,n]);r.realtimeStates.set("pointer",i)}})),Object(s.a)((function(e){return Object(h.b)()})));return Object(f.a)(a,l,c,u,m)},t.prototype.getCursor=function(){var e=this;return this.pointerMove().pipe(Object(c.a)(100),Object(u.a)({x:this.interactionCanvas.getMouseX(),y:this.interactionCanvas.getMouseY()}),Object(l.a)((function(t){var n=e.getObjectsUnderPoint(t).filter((function(e){return e instanceof r.b}));return e.getCursorByContext(n,[])})),Object(p.a)((function(e,t){return e.cursor===t.cursor&&e.tail===t.tail})))},t.prototype.getStageMouseDown=function(e){return Object(d.a)(e,"stagemousedown")},t.prototype.hideComments=function(){this.state.set("CommentThreadData",{visible:!1})},t.prototype.shapeTouched=function(e){},t.\u0275fac=function(e){return new(e||t)(y.pc(g.B),y.pc(a.a),y.pc(g.Jb),y.pc(g.pb),y.pc(b.b))},t.\u0275prov=y.bc({token:t,factory:t.\u0275fac}),t}(m.a);Object.defineProperty(C,"name",{value:"ViewerInteractionHandler"})},euU2:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("5xGT"),r=n("ROBh"),a=n("YtkY"),o=n("QoSw"),s=n("SBw3"),c=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(a.a)((function(n){var i=n.isShapeInGroup(n.filterShapeIdsByLockedState(t,!1));return"groupShapes"===e&&n.filterShapeIdsByLockedState(t,!1).length>1?!i:"ungroupShapes"===e&&i})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(r.a)(t)},e.prototype.getApplyData=function(e,t){return Object(r.a)({})},e.\u0275fac=function(t){return new(t||e)(c.pc(o.a),c.pc(i.Jb),c.pc(s.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},"fRR/":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("yZNT");var i=n("GoAz"),r=n("XWWj"),a=n("6qzS"),o=n("J+dc"),s=n("YtkY"),c=n("EM62"),u=function(){function e(){this.subLibraryList=[],this.type="libs",this.loadAllSubLibraries()}return e.prototype.search=function(e,t){return Object(i.a)(Object(r.goAsync)(e,this.subLibraryList,t)).pipe(Object(o.a)(1),Object(s.a)((function(e){return e.map((function(e){return{id:e.obj.id,title:e.obj.label,type:"libs",score:e.score}}))})))},e.prototype.loadAllSubLibraries=function(){var e=this,t=this.createLibraryList();t.getAllGroups().forEach((function(n){t.getLibrariesInGroup(n).map((function(t){e.subLibraryList.push({id:t.id,label:t.label,groups:[]})}))}))},e.prototype.createLibraryList=function(){return new a.a},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},flPR:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return O}));var i=n("D57K"),r=n("5xGT"),a=n("KTx3"),o=n("GoAz"),s=n("ROBh"),c=n("g6G6"),u=n("wk5G"),l=n("CfqY"),p=n("7SLS"),d=n("J+dc"),h=n("YtkY"),f=n("3mST"),g=n("Wg7D"),m=n("TLy2"),v=n("5uDM"),b=n("BwBJ"),y=n("jIqt");function C(){return function(e){}}var O=function(){function e(e){this.state=e,this.subs=[]}return e.prototype.add=function(){var e=this.createAddSource().pipe(Object(l.a)());return this.subs.push(e.connect()),e},e.prototype.remove=function(){var e=this.createRemoveSource().pipe(Object(l.a)());return this.subs.push(e.connect()),e},e.prototype.change=function(){var e=this.createChangeSource().pipe(Object(l.a)());return this.subs.push(e.connect()),e},e.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.indicatorLayer=void 0},e.prototype.duringInteractions=function(e,t){return Object(c.a)(this.duringSelectionInteraction(e,t),this.duringPan(e,t),this.duringTextEdit(e,t))},e.prototype.duringSelectionInteraction=function(e,t){return Object(c.a)(Object(a.a)(this.indicatorLayer,u.b.interactionStart).pipe(Object(p.a)(t)),Object(c.a)(Object(a.a)(this.indicatorLayer,u.b.interactionEnd),Object(a.a)(this.indicatorLayer,u.b.interactionCancel)).pipe(Object(p.a)(e)))},e.prototype.duringSelectionInteractionInProgress=function(e,t){return Object(c.a)(Object(a.a)(this.indicatorLayer,u.b.interaction).pipe(Object(d.a)(1),Object(p.a)(t)),Object(c.a)(Object(a.a)(this.indicatorLayer,u.b.interactionEnd),Object(a.a)(this.indicatorLayer,u.b.interactionCancel)).pipe(Object(p.a)(e)))},e.prototype.duringTextEdit=function(e,t){return this.state.changes("EditingText").pipe(Object(h.a)((function(n){return!1===n.open?e:t})))},e.prototype.duringPan=function(e,t){return this.state.changes("DiagramPan").pipe(Object(f.a)(1)).pipe(Object(g.a)(200),Object(m.a)((function(){return Object(o.a)([e]).pipe(Object(v.a)((function(e){return Object(s.a)(e).pipe(Object(b.a)(200),Object(y.a)(t))})))})))},e.prototype.duringPanMouseControlState=function(e,t){return this.state.changes("MouseControlState").pipe(Object(h.a)((function(n){return"pan"===n?t:e})))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.e)(t,e)}(r.Jb)},fxI9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentCommands=t.DocumentEvents=void 0,function(e){e.documentLoad="document:load",e.documentData="document:data"}(t.DocumentEvents||(t.DocumentEvents={})),function(e){e.documentDataSubscribe="document:data:subscribe",e.documentModify="document:modify"}(t.DocumentCommands||(t.DocumentCommands={}))},hKez:function(e,t,n){var i=n("GmLw"),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),a(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},hSRu:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("YtkY"),r=n("C05f"),a=n("6Oco"),o=n("ZTXN"),s=n("NNJu"),c=n("/AMt"),u=n("EM62"),l=function(){function e(){this._data=new r.a(null),this.change=new o.a}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownType",{get:function(){var e=Object(c.a)(this.data.value).find((function(e){return e.selected}));return e?e.buttonIcon?"icon":"text":this.props.icon?"icon":"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(i.a)((function(e){return e.value.filter((function(e){return!e.custom}))})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customItems",{get:function(){return this._data.pipe(Object(i.a)((function(e){return e.value.filter((function(e){return e.custom}))})))},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.data=e},e.prototype.setProperties=function(e){this.props=e},e.prototype.ngAfterViewInit=function(){var e=this;this.sub=this.absDropdown.changed.subscribe((function(t){var n=Object(c.a)(e.data.value).find((function(e){return e.id===t[0]}));e.change.next(n)}))},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e.prototype.select=function(e){},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=u.ac({type:e,viewQuery:function(e,t){var n;(1&e&&u.hd(s.b,!0),2&e)&&(u.Lc(n=u.uc())&&(t.absDropdown=n.first))}}),e}()},"i+Vu":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n("D57K"),r=n("iim9"),a=n("gZOS"),o=n("K5wl"),s=n("5xGT"),c=n("6Oco"),u=n("P4Xx"),l=n("g6G6"),p=n("ROBh"),d=n("J+dc"),h=n("TLy2"),f=n("xVbo"),g=n("Ohay"),m=n("8j5Y"),v=n("YtkY"),b=n("QoSw"),y=n("nsO7"),C=n("c7W3"),O=n("Xpu5"),x=n("diDk"),S=n("X0jn"),k=n("Jzy8"),w=n("d8/r"),E=n("2zi3"),I=n("4y1S"),T=n("EM62"),_=function(){function e(e,t,n,i,r,a,o){this.state=e,this.ll=t,this.commandService=n,this.ell=i,this.serviceWorkerRegistry=r,this.syncEDataChangesSerivce=a,this.authService=o,this.projectEDataModels={}}return e.prototype.initialize=function(){this.listenToDiagramChange().subscribe(),this.startListeningToDiagramChangeForCaching().subscribe(),this.listenToProjectChange().subscribe()},e.prototype.getEdataForCurrentDiagram=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(d.a)(1),Object(h.a)((function(t){return t.getDiagramEData().pipe(Object(d.a)(1),Object(h.a)((function(t){return t?Object(u.a)(t.map((function(t){return e.ell.getEData(t).pipe(Object(h.a)((function(e){return e.getEDataModelOnce()})))}))):c.a})))})))},e.prototype.updateShapeLibrary=function(e){var t=this,n=Object(i.j)(this.state.get("CurrentLibraries")),a=r.b;n.filter((function(e){return e.id.includes(a)})).map((function(e){return e.id.split(a)[1]})).filter((function(t){return!e.find((function(e){return e===t}))})).forEach((function(e){var i=n.findIndex((function(t){return t.id===a+e}));i>-1&&(n.splice(i,1),t.state.set("CurrentLibraries",n))}))},e.prototype.listenToDiagramChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(f.a)((function(e){return Boolean(e)})),Object(g.a)(),Object(h.a)((function(t){return e.onDiagramChange(t)})))},e.prototype.listenToProjectChange=function(){var e=this;return this.state.changes("CurrentProject").pipe(Object(f.a)((function(e){return Boolean(e)})),Object(g.a)(),Object(m.a)((function(t){return e.onProjectChange(t)})))},e.prototype.onDiagramChange=function(e){return this.listenToDiagramEDataChanges(e)},e.prototype.startListeningToDiagramChangeForCaching=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(f.a)((function(e){return Boolean(e)&&"start"!==e})),Object(d.a)(1),Object(h.a)((function(){return e.startListeningToEDataForCaching()})))},e.prototype.startListeningToEDataForCaching=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(d.a)(1),Object(h.a)((function(t){return t.getDiagramEData().pipe(Object(f.a)((function(e){return!!e})),Object(d.a)(1),Object(m.a)((function(){e.cacheAllEData()})))})))},e.prototype.cacheAllEData=function(){var e=this.serviceWorkerRegistry.fetch("cache-edata");if(e&&e.active){var t=JSON.stringify({id:"start-caching",auth:this.authService.token,base:s.m.get("REST_API_BASE_URL")});e.active.postMessage(t)}},e.prototype.onProjectChange=function(e){"home"!==e&&this.commandService.dispatch(k.v.getProjectEData,e,null)},e.prototype.listenToDiagramEDataChanges=function(e){var t=this;return this.ll.forCurrentObserver(!1).pipe(Object(d.a)(1),Object(h.a)((function(n){var r=n.getDiagramEData().pipe(Object(h.a)((function(e){if(!e)return c.a;t.updateShapeLibrary(e);var n=[];return e.forEach((function(e){var i=t.ell.getEData(e).pipe(Object(h.a)((function(e){return e.getEDataModel().pipe(Object(m.a)((function(e){t.projectEDataModels[e.id]=e,t.state.set("projectEDataModels",t.projectEDataModels)})))})));n.push(i)})),l.a.apply(void 0,Object(i.j)(n))}))),a=n.getDiagramLinkChanges().pipe(Object(h.a)((function(e){return t.updateConnectorLink(t.state.get("CurrentDiagram"),e.connector,e.modifier,!1,e.fromShape,e.toShape)}))),o=n.getDiagramModel().pipe(Object(g.a)((function(e,n){return Object(y.isEqual)(t.currentEDataIds,n.eData)})),Object(h.a)((function(n){return n.eData?t.currentEDataIds=Object(i.j)(n.eData):t.currentEDataIds=void 0,t.listenToEntityChanges(n.eData,e)})));return Object(l.a)(o,a,r)})))},e.prototype.listenToEntityChanges=function(e,t){var n=this;if(e){var r=[c.a];return e.forEach((function(e){var i=n.ell.getEData(e).pipe(Object(h.a)((function(e){return e.getEDataChangesWithCurrent().pipe(Object(h.a)((function(e){var i=e.modifier;return n.getDocumentChangeModel(t).pipe(Object(h.a)((function(r){var o=a.Sakota.create(Object(y.cloneDeep)(e.model));return o.__sakota__.mergeChanges(i),n.syncEDataChangesSerivce.syncEdataChanges([o],[r]),n.commandService.dispatch(C.a.applyModifierDocument,t,{modifier:r.__sakota__.getChanges()})})))})))})));r.push(i)})),l.a.apply(void 0,Object(i.j)(r))}return c.a},e.prototype.getDocumentChangeModel=function(e){return this.ll.forDiagram(e,!1).getDiagramOnce().pipe(Object(v.a)((function(e){return a.Sakota.create(Object(y.cloneDeep)(e))})))},e.prototype.addEDataRefToShape=function(e,t,n,i){return this.commandService.dispatch(C.a.addEDataRefToShape,{shapeId:e.id,eDataId:t,entityId:n,isSet:i})},e.prototype.updateConnectorLink=function(e,t,n,r,a,o,u){var p=this;if(void 0===u&&(u=!1),!u&&n.$set&&0===Object.keys(n.$set).filter((function(e){return/defId/.test(e)})).length)return c.a;a||(t&&t.fromEndpoint&&t.fromEndpoint.shape?a=t.fromEndpoint.shape:s.db.error("malformed link update request",t.id)),o||(t&&t.toEndpoint&&t.toEndpoint.shape?o=t.toEndpoint.shape:s.db.error("malformed link update request",t.id)),t.handshake&&!n.$unset||(r=!1);var d=[];if(a.eData&&o.eData){var h=function(n){var i=a.eData[n],s=function(s){var c=o.eData[s],u=f.getMatchingHandshake(n,i,s,c,t.handshake).pipe(Object(m.a)((function(u){p.commandService.dispatch(O.a.updateEntityLinks,n,{diagramId:e,fromEntityId:i,toEDataId:s,toEntityId:c,type:S.g.CONNECTOR_BI,isSet:r,handshake:u,connectorId:t.id,connectorDefId:t.defId,shapeId:o.id}),p.commandService.dispatch(O.a.updateEntityLinks,s,{diagramId:e,fromEntityId:c,toEDataId:n,toEntityId:i,type:S.g.CONNECTOR_BI,isSet:r,handshake:u,connectorId:t.id,connectorDefId:t.defId,shapeId:a.id})})));d.push(u)};for(var c in o.eData)s(c)},f=this;for(var g in a.eData)h(g)}else{var v=a.eData?a:o;if(!v.eData)return c.a;var b=a.eData?o:a;for(var g in v.eData){var y=v.eData[g],C=this.getIdentifier(b);this.addEDataRefToShape(b,g,y,r),this.commandService.dispatch(O.a.updateEntityLinks,g,{diagramId:e,fromEntityId:y,type:S.g.REFERENCE,isSet:r,handshake:w.b.handshake[0],connectorId:t.id,connectorDefId:t.defId,shapeId:b.id,shapeDefId:b.defId,identifier:C})}}return d.length?l.a.apply(void 0,Object(i.j)(d)):c.a},e.prototype.getIdentifier=function(e){if(e.primaryTextModel&&e.primaryTextModel.plainText)return e.primaryTextModel.plainText},e.prototype.getMatchingHandshake=function(e,t,n,i,r){return Object(u.a)({fromEntity:this.ell.getEntityOnce(e,t),toEntity:this.ell.getEntityOnce(n,i)}).pipe(Object(h.a)((function(e){if(e.fromEntity&&e.toEntity&&r){var t=e.fromEntity.getDef().ports,n=e.toEntity.getDef().ports;if(t&&n)for(var i=Object.keys(t),a=Object.keys(n),o=0;o<r.length;o++)if(i.indexOf(r[o])>-1&&a.indexOf(r[o])>-1)return Object(p.a)(r[o])}return Object(p.a)(void 0)})))},e.\u0275fac=function(t){return new(t||e)(T.pc(s.Jb),T.pc(b.a),T.pc(s.B),T.pc(x.a),T.pc(E.a),T.pc(o.a),T.pc(I.a))},e.\u0275prov=T.bc({token:e,factory:e.\u0275fac}),e}()},i9EC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConferenceCommands=t.ConferenceEvents=void 0,function(e){e.conferenceConnectionSuccess="creately:conference:connnectionSuccess",e.conferenceStarted="creately:conference:started",e.conferenceError="creately:conference:error",e.conferenceDisconected="creately:conference:disconnected",e.conferenceUserListChanged="creately:conference:userListChanged"}(t.ConferenceEvents||(t.ConferenceEvents={})),function(e){e.conferenceStart="creately:conference:start",e.conferenceStop="creately:conference:stop",e.conferenceMuteAudio="creately:conference:muteAudio",e.conferenceMuteVideo="creately:conference:muteVideo",e.conferenceRequestFocus="creately:conference:requestFocus"}(t.ConferenceCommands||(t.ConferenceCommands={}))},iRGy:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("5xGT"),r=n("X0jn"),a=n("nsO7"),o=n("6Oco"),s=n("EM62"),c=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"GluepointsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set||n.$unset)return this.shapeChange(e,n,t),Object(o.b)()},e.prototype.displaceDefaultGluePoints=function(t,n){if(n.gluepoints[e.gpBottomId]&&t.y<0&&"fixed-end"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x)(i=n.gluepoints[e.gpBottomId]).yType=t.yType,i.y=-1*(t.height+2*r.z);else if(n.gluepoints[e.gpTopId]&&t.y<0&&"fixed-start"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x){(i=n.gluepoints[e.gpTopId]).yType=t.yType,i.y=-1*(t.height+2*r.z)}if(n.gluepoints[e.gpLeftId]&&t.x<0&&"fixed-start"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y)(i=n.gluepoints[e.gpLeftId]).xType=t.xType,i.x=-1*(t.width+2*r.z);else if(n.gluepoints[e.gpRightId]&&t.x<0&&"fixed-end"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y){var i;(i=n.gluepoints[e.gpRightId]).xType=t.xType,i.x=-1*(t.width+2*r.z)}},e.prototype.displaceDefaultStickyGluePoints=function(t,n){if(n.stickyGluePoints[e.gpBottomId]&&t.y<0&&"fixed-end"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x)(i=n.stickyGluePoints[e.gpBottomId].slice()).map((function(e){e.yType=t.yType,e.y=-1*(t.height+2*r.z)})),n.stickyGluePoints[e.gpBottomId]=i;else if(n.stickyGluePoints[e.gpTopId]&&t.y<0&&"fixed-start"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x){(i=n.stickyGluePoints[e.gpTopId].slice()).map((function(e){e.yType=t.yType,e.y=-1*(t.height+2*r.z)})),n.stickyGluePoints[e.gpTopId]=i}if(n.stickyGluePoints[e.gpLeftId]&&t.x<0&&"fixed-start"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y)(i=n.stickyGluePoints[e.gpLeftId].slice()).map((function(e){e.xType=t.xType,e.x=-1*(t.width+2*r.z)})),n.stickyGluePoints[e.gpLeftId]=i;else if(n.stickyGluePoints[e.gpRightId]&&t.x<0&&"fixed-end"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y){var i;(i=n.stickyGluePoints[e.gpRightId].slice()).map((function(e){e.xType=t.xType,e.x=-1*(t.width+2*r.z)})),n.stickyGluePoints[e.gpRightId]=i}},e.prototype.shapeChange=function(t,n,r){var o=this,s=new Set,c=function(n){e.regexTexts.lastIndex=0;var c=e.regexTexts.exec(n);if(!c)return"continue";var l=c[1],p=t.shapes[l];if(p.isConnector())return"continue";s.has(l)||(u.resetAllDefaultGluePoints(p),r===i.A.EXECUTE&&u.resetAllDefaultStickyGluePoints(p),p.hasAnyText&&!Object(a.isEmpty)(p.gluepoints)&&Object(a.forEach)(p.texts,(function(e,t){var n=p.texts[t];n.plainText&&(o.displaceDefaultGluePoints(n,p),r===i.A.EXECUTE&&o.displaceDefaultStickyGluePoints(n,p))}))),s.add(l)},u=this;for(var l in n.$set||n.$unset)c(l)},e.prototype.resetAllDefaultGluePoints=function(t){var n=t.gluepoints[e.gpBottomId];n&&(n.yType&&"relative"!==n.yType&&(n.yType="relative"),1!==n.y&&(n.y=1));var i=t.gluepoints[e.gpTopId];i&&(i.yType&&"relative"!==i.yType&&(i.yType="relative"),0!==i.y&&(i.y=0));var r=t.gluepoints[e.gpLeftId];r&&(r.xType&&"relative"!==r.xType&&(r.xType="relative"),0!==r.x&&(r.x=0));var a=t.gluepoints[e.gpRightId];a&&(a.xType&&"relative"!==a.xType&&(a.xType="relative"),1!==a.x&&(a.x=1))},e.prototype.resetAllDefaultStickyGluePoints=function(t){if(t.stickyGluePoints[e.gpBottomId]){var n=t.stickyGluePoints[e.gpBottomId].slice();n.map((function(e){e.yType&&"relative"!==e.yType&&(e.yType="relative"),1!==e.y&&(e.y=1)})),t.stickyGluePoints[e.gpBottomId]=n}if(t.stickyGluePoints[e.gpTopId]){var i=t.stickyGluePoints[e.gpTopId].slice();i.map((function(e){e.yType&&"relative"!==e.yType&&(e.yType="relative"),0!==e.y&&(e.y=0)})),t.stickyGluePoints[e.gpTopId]=i}if(t.stickyGluePoints[e.gpLeftId]){var r=t.stickyGluePoints[e.gpLeftId].slice();r.map((function(e){e.xType&&"relative"!==e.xType&&(e.xType="relative"),0!==e.x&&(e.x=0)})),t.stickyGluePoints[e.gpLeftId]=r}if(t.stickyGluePoints[e.gpRightId]){var a=t.stickyGluePoints[e.gpRightId].slice();a.map((function(e){e.xType&&"relative"!==e.xType&&(e.xType="relative"),1!==e.x&&(e.x=1)})),t.stickyGluePoints[e.gpRightId]=a}},e.gpBottomId="BRZfYLOPiRa",e.gpLeftId="pbnadF9Wirq",e.gpRightId="P9d4172UDLb",e.gpTopId="0FUuJlNPewl",e.regexTexts=/shapes\.([^\.]+)\.texts/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},iV8b:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("EM62"),r=n("s2Ay"),a=function(){function e(e){this.translate=e,this.documentStatusMap={none:{label:"NO_STATUS",id:"none",bgColor:"transparent",textColor:"black",selected:!1},draft:{label:"DRAFT",id:"draft",bgColor:"#BABABA",textColor:"white",selected:!1},"in-progress":{label:"IN_PROGRESS",id:"in-progress",bgColor:"#657FB5",textColor:"white",selected:!1},"in-review":{label:"IN_REVIEW",id:"in-review",bgColor:"#FFC648",textColor:"white",selected:!1},approved:{label:"APPROVED",id:"approved",bgColor:"#51C0AA",textColor:"white",selected:!1},final:{label:"FINAL",id:"final",bgColor:"#415A71",textColor:"white",selected:!1},archived:{label:"ARCHIVED",id:"archived",bgColor:"#F05252",textColor:"white",selected:!1}}}return e.prototype.getDocumentStatus=function(e){var t=this.documentStatusMap[e]||this.documentStatusMap.none;return{id:t.id,label:this.translate.instant("LABELS.DOCUMENT_STATUS."+t.label),bgColor:t.bgColor,textColor:t.textColor}},e.prototype.getAllStatuses=function(){var e=this;return Object.values(this.documentStatusMap).map((function(t){return{id:t.id,label:e.translate.instant("LABELS.DOCUMENT_STATUS."+t.label),bgColor:t.bgColor,textColor:t.textColor}}))},e.\u0275fac=function(t){return new(t||e)(i.pc(r.e))},e.\u0275prov=i.bc({token:e,factory:e.\u0275fac}),e}()},iesc:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("D57K"),r=n("EM62"),a=n("5xGT"),o=n("NNJu"),s=n("ZTXN"),c=n("6Oco"),u=n("g6G6"),l=n("GoAz"),p=n("KTx3"),d=n("ROBh"),h=n("YtkY"),f=n("3lSR"),g=n("8j5Y"),m=n("BwBJ"),v=n("TLy2"),b=n("vRBZ"),y=["buttonContainer"],C=["sidePanel"],O=["indicator"],x=["itemContainer"],S=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.componentFactoryResolver=t,r.stateSvc=n,r.injector=i,r.indicatorHeight=48,r.panelWidth=215,r.buttonContainerWidth=50,r.openByIndexDelay=100,r.items=new Array,r.resetOperations(),r.clickSubscriptions={},r.panelActivated=new s.a,r}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"itemIds",{get:function(){return this.items.map((function(e){return e.id}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSelected",{get:function(){return void 0!==this.activeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this.activeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){var e=this;return this.latestItems.findIndex((function(t){return t.id===e.activeId}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){var e=this,t=this.items.find((function(t){return t.id===e.activeId}));if(t)return t.panel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemContainerHeight",{get:function(){return this.itemContainer.element.nativeElement.getBoundingClientRect().height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"latestItems",{get:function(){var e=this;return this.items.filter((function(t){return!e.operations.remove.includes(t.id)}))},enumerable:!1,configurable:!0}),t.prototype.add=function(e,t,n){var i=this.createPanel(e,n),r=this.createButton(i.instance),a=this.createItem(i.instance.id,r,i);return void 0===t&&(t=this.items.length+Object.keys(this.operations.add).length),this.operations.add[t]=a,this},t.prototype.updatePanelFeatures=function(e){var t=this.items.find((function(t){return t.id===e.id}));t||(t=Object.values(this.operations.add).find((function(t){return t.id===e.id}))),t&&t.panel.instance.features&&t.panel.instance.features.next(e.features)},t.prototype.removeById=function(e){return this.operations.remove.push(e),this},t.prototype.removeByIndex=function(e){return this.removeById(this.items[e].id),this},t.prototype.addSpace=function(e,t){return this},t.prototype.removeSpace=function(e){return this},t.prototype.apply=function(e){var t=this,n=[];n.push.apply(n,Object(i.j)(this.insertItems())),n.push.apply(n,Object(i.j)(this.removeItems()));var r=Object(c.b)();return e&&this.isSelected&&this.selectedId!==e&&(this.panelActivated.next({id:e,data:"default"}),r=this.open(e)),Object(u.a)(Object(l.a)(n).pipe(Object(h.a)((function(e){return e.start()})),Object(f.a)()),r).pipe(Object(g.a)({complete:function(){t.clearItems(),t.resetOperations()}}))},t.prototype.createPanel=function(e,t){var n=this.makeComponent(e);return this.setInputs(n.instance,t),n},t.prototype.findIndex=function(e){},t.prototype.open=function(e){var t=0;return void 0!==e&&(t=this.latestItems.findIndex((function(t){return t.id===e}))),t<0?Object(c.b)():(this.stateSvc.set("RightSidebarPanel",o.s.Opening),this.stateSvc.set("RightSidebarPanel",this.latestItems[t].id),this.openByIndex(t))},t.prototype.openByIndex=function(e){var t=this;if(this.selectedIndex===e)return Object(c.b)();if(e>=this.latestItems.length)return this.close();var n=this.latestItems[e].panel;if(n.instance.onActive(),this.isSelected){var i=this.selected,r=e<this.selectedIndex;return this.insertPanel(n,r),Object(u.a)(this.slideOutPanel(i,!r),this.slideInPanel(n,!r),this.slideSelectionBar()).pipe(Object(g.a)({complete:function(){t.detachPanel(i)}}),Object(m.a)(this.openByIndexDelay),Object(g.a)({complete:function(){i.instance.onInactive()}}),Object(v.a)((function(){return t.switchBetweenSidePanels(i.instance,n.instance).start()})))}return this.insertPanel(n),Object(u.a)(this.toggleSidePanel(!1,n.instance.width).start(),this.toggleIndicator().start())},t.prototype.close=function(){var e=this;return this.activeId?(this.stateSvc.set("RightSidebarPanel",o.s.Closing),Object(u.a)(this.toggleSidePanel(!0).start(),this.toggleIndicator(!0).start()).pipe(Object(g.a)({complete:function(){e.selected.instance.onInactive(),e.detachPanel(e.selected),e.activeId=void 0,e.stateSvc.set("RightSidebarPanel",o.s.None)}}))):Object(c.b)()},t.prototype.setButtonIndicator=function(e,t){var n=this.items.findIndex((function(t){return t.id===e}));n>-1&&this.items[n].button.instance.setIndicator(t)},t.prototype.resetOperations=function(){this.operations={add:{},space:{},remove:[]}},t.prototype.insertItems=function(){var e=[],t=this.operations.add;for(var n in this.selectedIndex>-1&&this.slideSelectionBar(this.selectedIndex),t)t.hasOwnProperty(n)&&e.push.apply(e,Object(i.j)(this.insertItemAt(t[n],Number(n))));return e},t.prototype.removeItems=function(){var e=this,t=[];return this.selectedIndex>-1&&this.slideSelectionBar(this.selectedIndex),this.operations.remove.forEach((function(n){return t.push.apply(t,Object(i.j)(e.removeItemById(n)))})),t},t.prototype.createButton=function(e){var t={id:e.id,icon:e.icon,tooltip:e.tooltip},n=this.makeComponent(b.a);return this.setInputs(n.instance,t),this.listenToButtonClick(n),n},t.prototype.createItem=function(e,t,n){return{id:e,button:t,panel:n}},t.prototype.listenToButtonClick=function(e){var t=this,n=Object(p.a)(e.location.nativeElement,"click").subscribe((function(){return t.clickHandler(e.instance)}));this.clickSubscriptions[e.instance.id]=n},t.prototype.clickHandler=function(e){this.selectedId===e.id?this.close().subscribe():(this.panelActivated.next({id:e.id,data:"sidebarButton"}),this.open(e.id).subscribe())},t.prototype.insertItemAt=function(e,t){return this.items.splice(t,0,e),this.insert(this.buttonContainer,e.button,t),[e.button.instance.toggleZoom()]},t.prototype.insertSpaceAt=function(e,t){},t.prototype.insertPanel=function(e,t){void 0===t&&(t=!1),!0===t?this.insert(this.itemContainer,e,0):this.insert(this.itemContainer,e),this.activeId=e.instance.id},t.prototype.slideOutPanel=function(e,t){void 0===t&&(t=!1);var n=this.itemContainerHeight;return!0===t&&(n*=-1),this.slidePanel(0,n,e.location.nativeElement)},t.prototype.slideInPanel=function(e,t){void 0===t&&(t=!1);var n=this.itemContainerHeight;return!1===t&&(n*=-1),this.slidePanel(n,0,e.location.nativeElement)},t.prototype.removeItemById=function(e){return[this.items.find((function(t){return t.id===e})).button.instance.toggleZoom(!0)]},t.prototype.removePanel=function(e){e.location.nativeElement.removeAttribute("style"),this.remove(this.itemContainer,e)},t.prototype.detachPanel=function(e){e.location.nativeElement.removeAttribute("style"),this.detachComponent(this.itemContainer,e)},t.prototype.clearItems=function(){var e=this;this.operations.remove.forEach((function(t){var n=e.items.find((function(e){return e.id===t}));n.panel.instance.disableAutoOpen&&e.panelActivated.next({id:t,data:"remove"}),e.removeButton(n.button),e.removePanel(n.panel);var i=e.items.findIndex((function(e){return e.id===t}));e.items.splice(i,1)}))},t.prototype.removeButton=function(e){this.clickSubscriptions[e.instance.id].unsubscribe(),this.remove(this.buttonContainer,e)},t.prototype.slidePanel=function(e,t,n){return Object(d.a)(n)},t.prototype.toggleSidePanel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=this.panelWidth);var n={width:this.buttonContainerWidth+"px"},i={width:Number(t+this.buttonContainerWidth)+"px"},r=n,a=i;!0===e&&(r=i,a=n);var s=new o.e({from:r,to:a,transitionProperty:"width",duration:300,easing:"ease-in-out"});return s.element=this.sidePanel.nativeElement,s},t.prototype.switchBetweenSidePanels=function(e,t){var n={width:Number((e.width||this.panelWidth)+this.buttonContainerWidth)+"px"},i={width:Number((t.width||this.panelWidth)+this.buttonContainerWidth)+"px"},r=new o.e({from:n,to:i,transitionProperty:"width",duration:300,easing:"ease-in-out"});return r.element=this.sidePanel.nativeElement,r},t.prototype.toggleIndicator=function(e){void 0===e&&(e=!1);var t=this.selectedIndex*this.indicatorHeight,n={opacity:"1",top:t+"px"},i={opacity:"0",top:t+"px"},r=i,a=n;!0===e&&(r=n,a=i);var s=new o.e({from:r,to:a,transitionProperty:"opacity",duration:300,easing:"ease-in-out"});return s.element=this.indicator.nativeElement,s},t.prototype.slideSelectionBar=function(e){var t=this.indicator.nativeElement;void 0===e&&(e=this.selectedIndex);var n=e*this.indicatorHeight;return t.style.top=n+"px",Object(d.a)(t)},t.\u0275fac=function(e){return new(e||t)(r.fc(r.m),r.fc(a.Jb),r.fc(r.C))},t.\u0275cmp=r.Zb({type:t,selectors:[["sidebar"]],viewQuery:function(e,t){var n;(1&e&&(r.hd(y,!0,r.hb),r.hd(C,!0),r.hd(O,!0),r.hd(x,!0,r.hb)),2&e)&&(r.Lc(n=r.uc())&&(t.buttonContainer=n.first),r.Lc(n=r.uc())&&(t.sidePanel=n.first),r.Lc(n=r.uc())&&(t.indicator=n.first),r.Lc(n=r.uc())&&(t.itemContainer=n.first))},features:[r.Pb],decls:13,vars:0,consts:[[1,"sidebar","fx-pointer-events-auto","fx-span-height-100vh","white"],["sidePanel",""],[1,"sidebar-buttons"],[1,"sidebar-buttons-container"],[1,"sidebar-buttons-container-inner"],[2,"position","relative"],[1,"sidebar-btn-indicator"],["indicator",""],["buttonContainer",""],[1,"sidebar-container"],["itemContainer",""]],template:function(e,t){1&e&&(r.lc(0,"div",0,1),r.lc(2,"div",2),r.lc(3,"div",3),r.lc(4,"div",4),r.lc(5,"div",5),r.gc(6,"div",6,7),r.gc(8,"div",null,8),r.kc(),r.kc(),r.kc(),r.kc(),r.lc(10,"div",9),r.gc(11,"div",null,10),r.kc(),r.kc())},styles:[".sidebar[_ngcontent-%COMP%]{background:rgba(255,0,0,0);pointer-events:none;width:50px;position:relative;height:calc(100vh - 50px);will-change:width;z-index:2}.sidebar-buttons[_ngcontent-%COMP%], .sidebar-buttons-container[_ngcontent-%COMP%]{pointer-events:none!important}.sidebar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}.sidebar-container[_ngcontent-%COMP%]{height:inherit;width:100%;float:right;overflow:hidden;position:absolute;left:50px;top:0;background-color:#fff}.sidebar-buttons[_ngcontent-%COMP%]{height:inherit;width:50px;border-right:1px solid #d3d3e7;display:inline-block;background-color:rgba(255,0,0,0)}.sidebar-buttons[_ngcontent-%COMP%]   .fx-icon[_ngcontent-%COMP%]{height:33px;display:block}.sidebar-container[_ngcontent-%COMP%]    >*{position:absolute;height:100%;width:100%}.sidebar-container[_ngcontent-%COMP%]     .ps-content{height:100%}.sidebar-buttons-container[_ngcontent-%COMP%]{height:inherit;display:flex;flex-direction:column;justify-content:center}.sidebar-buttons-container-inner[_ngcontent-%COMP%]{position:relative;background:#fff;border:.5px solid #c3c3de;box-sizing:border-box;box-shadow:0 2px 2px rgba(195,195,222,.25);border-radius:5px 0 0 5px;border-right:0}.sidebar-btn-indicator[_ngcontent-%COMP%]{background-color:#f6aa00;width:2px;height:30px;position:absolute;z-index:1;opacity:0;top:0}.sidebar-buttons-container[_ngcontent-%COMP%]     sidebar-button{display:block;margin-right:5px;padding-bottom:5px;padding-top:5px}.sidebar-buttons-container[_ngcontent-%COMP%]     sidebar-button button{will-change:transform}"],changeDetection:0}),t}(o.l)},ioBB:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var i=n("5xGT"),r=n("EM62"),a=function(){function t(){this.workers={}}return Object.defineProperty(t.prototype,"isWebWorkerSupported",{get:function(){return"undefined"!=typeof Worker},enumerable:!1,configurable:!0}),t.prototype.register=function(t,n){this.fetch(t)||(this.isWebWorkerSupported?this.workers[t]=new Worker(e,void 0):i.db.warning("This browser does not support web workers"))},t.prototype.fetch=function(e){return this.workers[e]},t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.bc({token:t,factory:t.\u0275fac}),t}()}).call(this,n("eJth"))},"iy5+":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return w}));var i,r=n("D57K"),a=n("5xGT"),o=n("nsO7"),s=n("ROBh"),c=n("6Oco"),u=n("HM3f"),l=n("TLy2"),p=n("YtkY"),d=n("5uDM"),h=n("J+dc"),f=n("8j5Y"),g=n("xVbo"),m=n("mWib"),v=n("Ohay"),b=n("QoSw"),y=n("iesc"),C=n("oyCe"),O=n("wkcE"),x=n("Jzy8"),S=n("EM62"),k=["sb"];!function(e){e.ENABLED="enabled",e.DISABLED="disabled"}(i||(i={}));var w=function(){function e(e,t,n){this.ll=e,this.collabLocator=t,this.state=n,this.panelsStack=[]}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.subs=[],this.updatePanelStack(),this.state.changes("InterfaceControlState").pipe(Object(l.a)((function(t){return"edit"===t?e.selectionChanged():Object(s.a)([{id:"diagraminfo",features:[]}])})),Object(l.a)((function(t){return e.getPanelsBasedOnRole().pipe(Object(p.a)((function(e){return t.concat(e)})))}))).pipe(Object(d.a)((function(t){var n=t.map((function(e){return e.id}));e.removePanels(n),e.addPanels(t),e.updatePanels(t);var i=e.getDefaultPanelId(n);return e.sideBar.apply(i)}))).subscribe();var t=this.listenForSideBarButtonIndicatorChanges().subscribe();this.subs.push(t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getPanelsBasedOnRole=function(){var e=this;return this.state.changes("CurrentUser").pipe(Object(l.a)((function(t){if(t){var n=e.state.get("CurrentDiagram");if(n)return e.collabLocator.getCollabsSortedIgnoringOnline(n).pipe(Object(l.a)((function(t){var n=t.find((function(t){return t.id===e.state.get("CurrentUser")}));return e.getPrivacyLevel().pipe(Object(p.a)((function(e){return e&&e.level>=3||void 0!==n&&n.roleSortOrderWithoutOnline<x.F.UNREG_EDITOR?!!n&&n.isRegistered&&[x.g.OWNER,x.g.EDITOR].includes(n.role)?[{id:"diagramcomments",features:[]},{id:"historyPanel",features:[{featureId:"RESTORE",data:{enabled:!0}}]}]:[{id:"diagramcomments",features:[]}]:[]})))})))}return Object(s.a)([])})))},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(h.a)(1),Object(p.a)((function(e){return e.privacy})))},e.prototype.updatePanelStack=function(){var e=this;this.sideBar.panelActivated.pipe(Object(f.a)((function(t){if("remove"===t.data){var n=e.panelsStack.indexOf(t.id);n>-1&&e.panelsStack.splice(n,1)}})),Object(g.a)((function(e){return"sidebarButton"===e.data}))).subscribe((function(t){var n=e.panelsStack.indexOf(t.id);n>-1&&e.panelsStack.splice(n,1),e.panelsStack.unshift(t.id)}))},e.prototype.getDefaultPanelId=function(e){return this.panelsStack.find((function(t){return e.findIndex((function(e){return e===t}))>-1}))||e[0]},e.prototype.selectionChanged=function(){var e=this;return this.state.changes("Selected").pipe(Object(m.a)(100),Object(l.a)((function(t){if(!t||!t.length)return e.getPanelsForDiagram();var n=t.slice();return 1===n.length?e.getPanelsForSingleShape(n[0]):e.getPanelsForMultiShape(n)})))},e.prototype.getPanelsForDiagram=function(){return this.state.get("CurrentDiagram")?this.ll.forCurrentObserver(!1).pipe(Object(l.a)((function(e){return e.getDiagramOnce().pipe(Object(p.a)((function(e){return e.getSidebarPanels()})))}))):Object(c.b)()},e.prototype.getPanelsForSingleShape=function(e){return this.locator.getShapeModel(e).pipe(Object(p.a)((function(e){return e.getSidebarPanels()})),Object(v.a)(o.isEqual))},e.prototype.getPanelsForMultiShape=function(e){var t=this,n=e.map((function(e){return t.locator.getShapeModel(e)}));return u.b.apply(void 0,Object(r.j)(n)).pipe(Object(m.a)(100),Object(p.a)((function(e){return C.a.sameType(e)?e.map((function(e){return e.getSidebarPanelsForSameType()})):e.map((function(e){return e.getSidebarPanelsForMultiTypes()}))})),Object(v.a)(o.isEqual),Object(p.a)((function(e){var n={},i=e.map((function(e){return e.map((function(e){return n[e.id]=e,e.id}))})),r=t.getLeastPanels(i).map((function(e){return n[e.id]=e,e.id})),a=i.reduce((function(e,t){return Object(o.intersection)(e,t)}));return Object(o.union)(a,r).map((function(e){return n[e]}))})))},e.prototype.getLeastPanels=function(e){var t=this;return o.union.apply(void 0,Object(r.j)(e)).filter((function(e){var n=t.getPanelType(e);return!!n&&"atLeastOne"===n.openForContextAware})).map((function(e){return{id:e,features:{}}}))},e.prototype.removePanels=function(e){var t=this;this.sideBar.itemIds.filter((function(t){return-1===e.indexOf(t)})).forEach((function(e){return t.sideBar.removeById(e)}))},e.prototype.addPanels=function(e){var t=this;e.forEach((function(e,n){if(-1===t.sideBar.itemIds.indexOf(e.id)){var i=t.getPanelType(e.id);i&&t.sideBar.add(i,n)}}))},e.prototype.updatePanels=function(e){var t=this;e.forEach((function(e,n){t.sideBar.updatePanelFeatures(e)}))},e.prototype.getPanelType=function(e){return this.state.get("AvialableSideBarPanels")[e]},e.prototype.listenForSideBarButtonIndicatorChanges=function(){var e=this;return this.state.changes("ShowSideBarButtonIndicator").pipe(Object(g.a)((function(e){return!!e})),Object(f.a)((function(t){e.sideBar.setButtonIndicator(t.id,t.show)})))},e.\u0275fac=function(t){return new(t||e)(S.fc(b.a),S.fc(O.a),S.fc(a.Jb))},e.\u0275cmp=S.Zb({type:e,selectors:[["sidebar-container"]],viewQuery:function(e,t){var n;(1&e&&S.Vc(k,!0),2&e)&&(S.Lc(n=S.uc())&&(t.sideBar=n.first))},decls:2,vars:0,consts:[["sb",""]],template:function(e,t){1&e&&S.gc(0,"sidebar",null,0)},directives:[y.a],encapsulation:2,changeDetection:0}),e}()},"izw+":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("D57K"),r=n("QoSw"),a=n("nsO7"),o=n("wx9+"),s=n("8a+/"),c=n("YtkY"),u=n("J+dc"),l=n("5xGT"),p=n("ROBh"),d=n("P4Xx"),h=n("EM62"),f=n("s2Ay"),g=function(){function e(e,t,n,i,r){this.state=e,this.ll=t,this.shapeBoundsLocator=n,this.viewport=i,this.translate=r}return e.prototype.getFeatureData=function(e,t){return Object(p.a)(t)},e.prototype.transformProperties=function(e,t){var n=this,i=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(c.a)((function(e){var r=Object(a.values)(e.shapes).filter((function(e){return!e.isConnector()&&i.includes(e.id)})).every((function(e){return e.isContainer}));return t.label=r?n.translate.instant("COMMANDS.UNDO_CONTAINERIZING"):n.translate.instant("COMMANDS.CONTAINERIZE"),t})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(c.a)((function(e){return!!t.find((function(t){return e.shapes[t].isContainerable}))})))},e.prototype.getApplyData=function(e,t){var n=this,r=this.state.get("Selected");return Object(d.a)(this.ll.forCurrent(!1).getDiagramOnce(),this.viewport.getShapeModels(r).pipe(Object(u.a)(1))).pipe(Object(c.a)((function(e){var t=Object(i.h)(e,2),r=t[0],o=t[1],s=Object(a.values)(o).filter((function(e){return!e.isConnector()&&e.isContainerable&&!e.isContainer})),c={containerData:{},childrenData:{}};return s.length?n.containerize(r,s,c):n.decontainerize(o,c),c})))},e.prototype.containerize=function(e,t,n){var i=this;t.forEach((function(t){var r=t.bounds;i.shapeBoundsLocator.search(r.left,r.right,r.top,r.bottom,[t.id],!0).filter((function(n){return!!(n.zIndex>=t.zIndex)&&(e.shapes[n.id].containerId||null)===(e.shapes[t.id].containerId||null)})).forEach((function(e){n.childrenData[e.id]={action:"enter",containerId:t.id}})),n.containerData[t.id]={isContainer:!0}}))},e.prototype.decontainerize=function(e,t){Object(a.values)(e).filter((function(e){return!e.isConnector()&&e.isContainerable&&e.isContainer})).forEach((function(e){for(var n in e.children)t.childrenData[n]={action:"leave",containerId:e.id};t.containerData[e.id]={isContainer:!1}}))},e.\u0275fac=function(t){return new(t||e)(h.pc(l.Jb),h.pc(r.a),h.pc(s.a),h.pc(o.a),h.pc(f.e))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},j1Bk:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("EM62"),r=n("2kYt");function a(e,t){if(1&e&&(i.lc(0,"span",7),i.wc(),i.lc(1,"svg",8),i.gc(2,"use"),i.kc(),i.kc()),2&e){var n=i.xc(2);i.Sb(2),i.Tb("href",n.subTextIconHref,null,"xlink")}}function o(e,t){if(1&e&&(i.lc(0,"label",5),i.ad(1,a,3,1,"span",6),i.cd(2),i.kc()),2&e){var n=i.xc();i.Sb(1),i.Cc("ngIf",n.subTextIcon),i.Sb(1),i.ed(" ",n.subText," ")}}var s=function(){function e(){this.icon="generic",this.reverse=!1}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/common/panels/diagram-type-icons/"+this.icon+".svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subTextIconHref",{get:function(){return"./assets/icons/symbol-defs.svg#"+this.subTextIcon},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["panel-icon-header"]],inputs:{icon:"icon",reverse:"reverse",mainText:"mainText",subText:"subText",subTextIcon:"subTextIcon"},decls:6,vars:4,consts:[[1,"panel-item"],[1,"panel-icon-header","fx-center-vertical"],[1,"panel-icon-header-text"],["class","sub",4,"ngIf"],[1,"main"],[1,"sub"],["class","lock-icon",4,"ngIf"],[1,"lock-icon"],[1,"nu-icon","nu-icon-xsmall"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.lc(1,"div",1),i.lc(2,"div",2),i.ad(3,o,3,2,"label",3),i.lc(4,"h2",4),i.cd(5),i.kc(),i.kc(),i.kc(),i.kc()),2&e&&(i.Sb(2),i.Xb("reverse",t.reverse),i.Sb(1),i.Cc("ngIf",t.subText),i.Sb(2),i.dd(t.mainText))},directives:[r.t],styles:[".panel-icon-header[_ngcontent-%COMP%]{padding-top:15px}.panel-icon-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;margin-right:15px;margin-top:-5px;pointer-events:none}.panel-icon-header-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.panel-icon-header-text[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-size:16px;order:1;margin-bottom:5px}.panel-icon-header-text[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:12px;color:#7e7e7e;order:2}.panel-icon-header-text[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top}.panel-icon-header-text.reverse[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{order:2}.panel-icon-header-text.reverse[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{order:1;margin-bottom:5px}"],changeDetection:0}),e}()},jw4I:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("EM62"),r=n("2kYt"),a=function(){function e(){}return e.prototype.ngAfterViewInit=function(){document.querySelector("."+this.styleID).innerHTML=this.styleSpan},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["text-styling-tile"]],inputs:{styleSpan:"styleSpan",styleID:"styleID",style:"style"},decls:5,vars:1,consts:[[1,"text-style-tile-container","fx-no-selection"],[1,"tick"],[1,"nu-icon","nu-ic-tick-thin"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[1,"fx-ellipsis",3,"ngClass"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.lc(1,"div",1),i.wc(),i.lc(2,"svg",2),i.gc(3,"use",3),i.kc(),i.kc(),i.vc(),i.gc(4,"div",4),i.kc()),2&e&&(i.Sb(4),i.Cc("ngClass",t.styleID))},directives:[r.q],styles:[".text-style-tile-container[_ngcontent-%COMP%]{text-align:center;border-radius:4px;border:1px solid #d3d3e7;color:#04263d;margin-bottom:20px;height:40px;line-height:30px;padding:5px 10px;cursor:pointer}.text-style-tile-container[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{width:0;visibility:hidden;float:left;transition:width .3s ease-in-out;height:25px}.text-style-tile-container[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:opacity .1s ease-in-out;opacity:0}.text-style-tile-container.selected[_ngcontent-%COMP%]{border:1px solid #ffc648}.text-style-tile-container.selected[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{width:25px;visibility:visible}.text-style-tile-container.selected[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1;transition-delay:.2s}.text-style-tile-container[_ngcontent-%COMP%]:hover{border:1px solid #ffc648}"],changeDetection:0}),e}()},k0Sg:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("nsO7"),r=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("YtkY"),c=n("QoSw"),u=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this,r=this.featureList.getFeature(e);return t.params={readOnly:r.data.readOnly,isDiffColor:!1},"lineStyle"===r.data.style?(t.data.forEach((function(e){e.buttonIcon=n.getDrawableIcon(e.value,60,20),e.itemIcon=n.getDrawableIcon(e.value,50,20),e.selected=Object(i.isEqual)(t.value,e.value)})),Object(o.a)({value:t.data})):("lineThickness"===r.data.style&&(t.value=t.value+"px"),"fillColor"===r.data.style||"lineColor"===r.data.style?this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){return n.getColorMismatch(e,t,r.data.style)}))):Object(o.a)(t))},e.prototype.getApplyData=function(e,t){var n=this.featureList.getFeature(e);"lineThickness"===n.data.style&&(t.value=parseInt(t.value,10));var i={};return i[n.data.style]=t.value,"colorFill"===e&&(i.fillStyle="solid"),Object(o.a)({style:i})},e.prototype.getColorMismatch=function(e,t,n){var i=this.state.get("Selected"),r=[],a=!1;i.forEach((function(t){var i=e.getShape(t);switch(n){case"fillColor":r.push(i.style.fillColor);break;case"lineColor":r.push(i.style.lineColor)}}));for(var o=1;o<r.length;o++)if(r[o-1]!==r[o]){a=!0;break}return a&&(t.params.isDiffColor=!0),t},e.prototype.getDrawableIcon=function(e,t,n){return{type:"canvas",value:function(i,r){i.setStrokeDash(e),i.beginStroke("grey"),i.moveTo(0,n/2),i.lineTo(t,n/2),i.endStroke()},width:t,height:n}},e.\u0275fac=function(t){return new(t||e)(u.pc(c.a),u.pc(a.Jb),u.pc(r.a))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},kWt5:function(e,t,n){},kgBD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserCommands=void 0,function(e){e.userSetToken="user:setToken"}(t.UserCommands||(t.UserCommands={}))},kjSZ:function(e,t,n){"use strict";n.d(t,"g",(function(){return X})),n.d(t,"b",(function(){return H})),n.d(t,"h",(function(){return Y})),n.d(t,"f",(function(){return x})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return W}));var i,r=n("EM62"),a=n("nIj0"),o=n("2kYt"),s=n("nsO7"),c=function(){function e(){this.internalOpen=!1,this.openChange=new r.t}return Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.internalOpen},enumerable:!0,configurable:!0}),e.prototype.onKeyupEsc=function(){this.close()},e.prototype.onDocumentClick=function(e){2===e.button||this.isEventFromToggle(e)||this.close()},e.prototype.open=function(){this.internalOpen||(this.internalOpen=!0,this.openChange.emit(!0))},e.prototype.close=function(){this.internalOpen&&(this.internalOpen=!1,this.openChange.emit(!1))},e.prototype.toggle=function(){this.isOpen?this.close():this.open()},e.prototype.isEventFromToggle=function(e){return!Object(s.isNil)(this.toggleElement)&&this.toggleElement.contains(e.target)},e.propDecorators={internalOpen:[{type:r.D,args:["open"]}],openChange:[{type:r.O}],isOpen:[{type:r.v,args:["class.show"]}],onKeyupEsc:[{type:r.w,args:["keyup.esc"]}],onDocumentClick:[{type:r.w,args:["document:click",["$event"]]}]},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.ac({type:e,selectors:[["","ngxDropdown",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.tc("keyup.esc",(function(){return t.onKeyupEsc()}))("click",(function(e){return t.onDocumentClick(e)}),!1,r.Nc),2&e&&r.Xb("show",t.isOpen)},inputs:{internalOpen:["open","internalOpen"]},outputs:{openChange:"openChange"},exportAs:["ngxDropdown"]}),e}(),u=function(){function e(e){this.dropdown=e}return e.ctorParameters=function(){return[{type:c}]},e.\u0275fac=function(t){return new(t||e)(r.fc(c))},e.\u0275dir=r.ac({type:e,selectors:[["","ngxDropdownMenu",""]],hostVars:4,hostBindings:function(e,t){2&e&&r.Xb("dropdown-menu",!0)("show",t.dropdown.isOpen)}}),e}(),l=function(){function e(e,t){this.dropdown=e,e.toggleElement=t.nativeElement}return e.ctorParameters=function(){return[{type:c},{type:r.r}]},e.\u0275fac=function(t){return new(t||e)(r.fc(c),r.fc(r.r))},e.\u0275dir=r.ac({type:e,selectors:[["","ngxDropdownToggle",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){1&e&&r.tc("click",(function(){return t.dropdown.toggle()})),2&e&&r.Tb("aria-expanded",t.dropdown.isOpen)}}),e}(),p=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}p(t,e),t.prototype.getText=function(e){if(0===e.uncheckedItems.length)return this.getAllCheckboxText();switch(e.checkedItems.length){case 0:return"Select options";case 1:return e.checkedItems[0].text;default:return e.checkedItems.length+" options selected"}},t.prototype.getAllCheckboxText=function(){return"All"},t.prototype.getFilterPlaceholder=function(){return"Filter"},t.prototype.getFilterNoItemsFoundText=function(){return"No items found"},t.prototype.getTooltipCollapseExpandText=function(e){return e?"Expand":"Collapse"},t.\u0275fac=function(e){return n(e||t)},t.\u0275prov=r.bc({token:t,factory:function(e){return t.\u0275fac(e)}});var n=r.nc(t);return t}(d),f=function(){function e(){this.hasAllCheckBox=!0,this.hasFilter=!1,this.hasCollapseExpand=!1,this.decoupleChildFromParent=!1,this.maxHeight=500}return Object.defineProperty(e.prototype,"hasDivider",{get:function(){return this.hasFilter||this.hasAllCheckBox||this.hasCollapseExpand},enumerable:!0,configurable:!0}),e.create=function(t){var n=new e;return Object.assign(n,t),n},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),g=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:function(t){return e.\u0275fac(t)}}),e}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}g(t,e),t.prototype.getSelectedChange=function(e){var t=e.selection.checkedItems;return Object(s.isNil)(t)?[]:t.map((function(e){return e.value}))},t.\u0275fac=function(e){return n(e||t)},t.\u0275prov=r.bc({token:t,factory:function(e){return t.\u0275fac(e)}});var n=r.nc(t);return t}(m),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}g(t,e),t.prototype.getSelectedChange=function(e){var t=this,n=e.items;if(!Object(s.isNil)(n)){var i=[];return n.forEach((function(e){var n=t.getLinks(e,null);Object(s.isNil)(n)||(i=i.concat(n))})),i}return[]},t.prototype.getLinks=function(e,t){var n=this;if(!Object(s.isNil)(e.children)){var i={item:e,parent:t},r=[];return e.children.forEach((function(e){var t=n.getLinks(e,i);Object(s.isNil)(t)||(r=r.concat(t))})),r}return e.checked?[{item:e,parent:t}]:null},t.\u0275fac=function(e){return n(e||t)},t.\u0275prov=r.bc({token:t,factory:function(e){return t.\u0275fac(e)}});var n=r.nc(t);return t}(m),y=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentDownlines=[],t.parser=new b,t}g(t,e),t.prototype.getSelectedChange=function(e){var t=this.parser.getSelectedChange(e);if(0===this.currentDownlines.length)this.currentDownlines=t;else{var n=[];this.currentDownlines.forEach((function(e){for(var i=-1,r=t.length,a=0;a<r;a++)if(e.item.value===t[a].item.value){i=a;break}-1!==i&&(n.push(t[i]),t.splice(i,1))})),this.currentDownlines=n.concat(t)}return this.currentDownlines},t.\u0275fac=function(e){return n(e||t)},t.\u0275prov=r.bc({token:t,factory:function(e){return t.\u0275fac(e)}});var n=r.nc(t)}(m),{findItem:C,findItemInList:function(e,t){if(Object(s.isNil)(e))return;for(var n=0,i=e;n<i.length;n++){var r=C(i[n],t);if(r)return r}return},findParent:O,removeItem:function(e,t){var n=O(e,t);if(n)return Object(s.pull)(n.children,t),0===n.children.length?n.children=void 0:n.correctChecked(),!0;return!1},concatSelection:function(e,t,n){for(var i=t.slice(),r=n.slice(),a=0,o=e;a<o.length;a++){var c=o[a].getSelection();i=Object(s.concat)(i,c.checkedItems),r=Object(s.concat)(r,c.uncheckedItems)}return{checked:i,unchecked:r}}});function C(e,t){if(!Object(s.isNil)(e)){if(e.value===t)return e;if(e.children)for(var n=0,i=e.children;n<i.length;n++){var r=C(i[n],t);if(r)return r}}}function O(e,t){if(!Object(s.isNil)(e)&&!Object(s.isNil)(e.children))for(var n=0,i=e.children;n<i.length;n++){var r=i[n];if(r===t)return e;var a=O(r,t);if(a)return a}}var x=function(){function e(t,n){void 0===n&&(n=!1);var i=this;if(this.internalDisabled=!1,this.internalChecked=!0,this.internalCollapsed=!1,this.disableChildrenCheck=!1,this.disableItemCheck=!1,Object(s.isNil)(t))throw new Error("Item must be defined");if(!Object(s.isString)(t.text))throw new Error("A text of item must be string object");this.text=t.text,this.value=t.value,Object(s.isBoolean)(t.checked)&&(this.checked=t.checked),Object(s.isBoolean)(t.collapsed)&&(this.collapsed=t.collapsed),Object(s.isBoolean)(t.disabled)&&(this.disabled=t.disabled),!Object(s.isNil)(t.children)&&t.children.length>0&&(this.children=t.children.map((function(t){return!0===i.disabled&&(t.disabled=!0),new e(t)}))),n&&this.correctChecked(),Object(s.isBoolean)(t.disableChildrenCheck)&&(this.disableChildrenCheck=t.disableChildrenCheck),Object(s.isBoolean)(t.disableItemCheck)&&(this.disableItemCheck=t.disableItemCheck)}return Object.defineProperty(e.prototype,"checked",{get:function(){return this.internalChecked},set:function(e){this.internalDisabled||this.internalChecked!==e&&(this.internalChecked=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return void 0===this.checked},enumerable:!0,configurable:!0}),e.prototype.setCheckedRecursive=function(e){this.internalDisabled||(this.internalChecked=e,Object(s.isNil)(this.internalChildren)||this.internalChildren.forEach((function(t){return t.setCheckedRecursive(e)})))},Object.defineProperty(e.prototype,"disabled",{get:function(){return this.internalDisabled},set:function(e){this.internalDisabled!==e&&(this.internalDisabled=e,Object(s.isNil)(this.internalChildren)||this.internalChildren.forEach((function(t){return t.disabled=e})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this.internalCollapsed},set:function(e){this.internalCollapsed!==e&&(this.internalCollapsed=e)},enumerable:!0,configurable:!0}),e.prototype.setCollapsedRecursive=function(e){this.internalCollapsed=e,Object(s.isNil)(this.internalChildren)||this.internalChildren.forEach((function(t){return t.setCollapsedRecursive(e)}))},Object.defineProperty(e.prototype,"children",{get:function(){return this.internalChildren},set:function(e){if(this.internalChildren!==e){if(!Object(s.isNil)(e)&&0===e.length)throw new Error("Children must be not an empty array");if(this.internalChildren=e,!Object(s.isNil)(this.internalChildren)){var t=null;this.internalChildren.forEach((function(e){if(null===t)t=e.checked;else if(e.checked!==t)return void(t=void 0)})),this.internalChecked=t}}},enumerable:!0,configurable:!0}),e.prototype.getSelection=function(){var e=[],t=[];if(Object(s.isNil)(this.internalChildren))this.internalChecked?e.push(this):t.push(this);else{var n=y.concatSelection(this.internalChildren,e,t);e=n.checked,t=n.unchecked}return{checkedItems:e,uncheckedItems:t}},e.prototype.correctChecked=function(){this.internalChecked=this.getCorrectChecked()},e.prototype.getCorrectChecked=function(){var e=null;if(Object(s.isNil)(this.internalChildren))e=this.checked;else for(var t=0,n=this.internalChildren;t<n.length;t++){var i=n[t];if(i.internalChecked=i.getCorrectChecked(),null===e)e=i.internalChecked;else if(e!==i.internalChecked){e=void 0;break}}return e},e}();function S(e,t){}function k(e,t){if(1&e){var n=r.mc();r.lc(0,"ngx-treeview-item",5),r.tc("checkedChange",(function(e){r.Oc(n);var i=t.$implicit;return r.xc(3).onChildCheckedChange(i,e)})),r.kc()}if(2&e){var i=t.$implicit,a=r.xc(3);r.Cc("config",a.config)("item",i)("template",a.template)}}function w(e,t){if(1&e&&(r.lc(0,"div"),r.ad(1,k,1,3,"ngx-treeview-item",4),r.kc()),2&e){var n=r.xc(2);r.Sb(1),r.Cc("ngForOf",n.item.children)}}var E=function(e,t,n){return{item:e,onCollapseExpand:t,onCheckedChange:n}};function I(e,t){if(1&e&&(r.lc(0,"div",1),r.ad(1,S,0,0,"ng-template",2),r.ad(2,w,2,1,"div",3),r.kc()),2&e){var n=r.xc();r.Sb(1),r.Cc("ngTemplateOutlet",n.template)("ngTemplateOutletContext",r.Jc(3,E,n.item,n.onCollapseExpand,n.onCheckedChange)),r.Sb(1),r.Cc("ngIf",!n.item.collapsed)}}var T=function(){function e(e){var t=this;this.defaultConfig=e,this.checkedChange=new r.t,this.onCollapseExpand=function(){t.item.collapsed=!t.item.collapsed},this.onCheckedChange=function(){var e=t.item.checked;Object(s.isNil)(t.item.children)||t.config.decoupleChildFromParent||t.item.children.forEach((function(t){return t.setCheckedRecursive(e)})),t.checkedChange.emit({value:t.item.value,isChecked:e})},this.config=this.defaultConfig}return e.prototype.onChildCheckedChange=function(e,t){if(!this.config.decoupleChildFromParent){for(var n=null,i=0,r=this.item.children;i<r.length;i++){var a=r[i];if(null===n)n=a.checked;else if(n!==a.checked){n=void 0;break}}null===n&&(n=!1),this.item.checked!==n&&(this.item.checked=n)}this.checkedChange.emit(t)},e.ctorParameters=function(){return[{type:f}]},e.propDecorators={config:[{type:r.D}],template:[{type:r.D}],item:[{type:r.D}],checkedChange:[{type:r.O}]},e.\u0275fac=function(t){return new(t||e)(r.fc(f))},e.\u0275cmp=r.Zb({type:e,selectors:[["ngx-treeview-item"]],inputs:{config:"config",template:"template",item:"item"},outputs:{checkedChange:"checkedChange"},decls:1,vars:1,consts:[["class","treeview-item",4,"ngIf"],[1,"treeview-item"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"config","item","template","checkedChange",4,"ngFor","ngForOf"],[3,"config","item","template","checkedChange"]],template:function(e,t){1&e&&r.ad(0,I,3,7,"div",0),2&e&&r.Cc("ngIf",t.item)},directives:[o.t,o.A,o.s,e],styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n\n      [_nghost-%COMP%]   .treeview-item[_ngcontent-%COMP%] {\n        white-space: nowrap;\n      }\n\n      [_nghost-%COMP%]   .treeview-item[_ngcontent-%COMP%]   .treeview-item[_ngcontent-%COMP%] {\n        margin-left: 2rem;\n      }"]}),e}();function _(e,t){if(1&e){var n=r.mc();r.lc(0,"i",14),r.tc("click",(function(){return r.Oc(n),(0,r.xc().onCollapseExpand)()})),r.gc(1,"img",15),r.kc()}if(2&e){var i=r.xc().item;r.Xb("fa-caret-right",i.collapsed)("fa-caret-down",!i.collapsed)}}function j(e,t){if(1&e){var n=r.mc();r.lc(0,"div",7),r.ad(1,_,2,4,"i",8),r.lc(2,"div",9),r.lc(3,"input",10),r.tc("ngModelChange",(function(e){return r.Oc(n),t.item.checked=e}))("ngModelChange",(function(){return(0,t.onCheckedChange)()})),r.kc(),r.lc(4,"span",11),r.gc(5,"img",12),r.kc(),r.lc(6,"label",13),r.tc("click",(function(){var e=t.item,n=t.onCheckedChange,i=t.onCollapseExpand;return!e.disableItemCheck&&(e.checked=!e.checked),!e.disableChildrenCheck&&n(),i()})),r.cd(7),r.kc(),r.kc(),r.kc()}if(2&e){var i=t.item;r.Sb(1),r.Cc("ngIf",i.children),r.Sb(2),r.Cc("ngModel",i.checked)("disabled",i.disabled)("indeterminate",i.indeterminate),r.Sb(4),r.ed(" ",i.text," ")}}function P(e,t){if(1&e){var n=r.mc();r.lc(0,"div",18),r.lc(1,"div",19),r.lc(2,"input",20),r.tc("ngModelChange",(function(e){return r.Oc(n),r.xc(2).filterText=e}))("ngModelChange",(function(e){return r.Oc(n),(0,r.xc().onFilterTextChange)(e)})),r.kc(),r.kc(),r.kc()}if(2&e){var i=r.xc(2);r.Sb(2),r.Cc("placeholder",i.i18n.getFilterPlaceholder())("ngModel",i.filterText)}}function A(e,t){if(1&e){var n=r.mc();r.lc(0,"div",26),r.lc(1,"input",27),r.tc("ngModelChange",(function(e){return r.Oc(n),r.xc(3).item.checked=e}))("ngModelChange",(function(){return r.Oc(n),(0,r.xc(3).onCheckedChange)()})),r.kc(),r.lc(2,"label",13),r.tc("click",(function(){r.Oc(n);var e=r.xc(3),t=e.item,i=e.onCheckedChange;return t.checked=!t.checked,i()})),r.cd(3),r.kc(),r.kc()}if(2&e){var i=r.xc(3).item,a=r.xc();r.Sb(1),r.Cc("ngModel",i.checked)("indeterminate",i.indeterminate),r.Sb(2),r.ed(" ",a.i18n.getAllCheckboxText()," ")}}function M(e,t){if(1&e){var n=r.mc();r.lc(0,"label",28),r.tc("click",(function(){return r.Oc(n),(0,r.xc(3).onCollapseExpand)()})),r.lc(1,"i",29),r.gc(2,"img",15),r.kc(),r.kc()}if(2&e){var i=r.xc(3).item,a=r.xc();r.Sb(1),r.Xb("fa-expand",i.collapsed)("fa-compress",!i.collapsed),r.Cc("title",a.i18n.getTooltipCollapseExpandText(i.collapsed))}}function D(e,t){if(1&e&&(r.lc(0,"div",23),r.lc(1,"div",19),r.ad(2,A,4,3,"div",24),r.ad(3,M,3,5,"label",25),r.kc(),r.kc()),2&e){var n=r.xc(2).config;r.Sb(2),r.Cc("ngIf",n.hasAllCheckBox),r.Sb(1),r.Cc("ngIf",n.hasCollapseExpand)}}function R(e,t){1&e&&r.gc(0,"div",30)}function L(e,t){if(1&e&&(r.lc(0,"div"),r.ad(1,D,4,2,"div",21),r.ad(2,R,1,0,"div",22),r.kc()),2&e){var n=r.xc().config;r.Sb(1),r.Cc("ngIf",n.hasAllCheckBox||n.hasCollapseExpand),r.Sb(1),r.Cc("ngIf",n.hasDivider)}}function F(e,t){if(1&e&&(r.ad(0,P,3,2,"div",16),r.ad(1,L,3,2,"div",17)),2&e){var n=t.config,i=r.xc();r.Cc("ngIf",n.hasFilter),r.Sb(1),r.Cc("ngIf",i.hasFilterItems)}}function N(e,t){}function B(e,t){if(1&e){var n=r.mc();r.lc(0,"ngx-treeview-item",33),r.tc("checkedChange",(function(e){r.Oc(n);var i=t.$implicit;return r.xc(2).onItemCheckedChange(i,e)})),r.kc()}if(2&e){var i=t.$implicit,a=r.xc(2),o=r.Mc(1);r.Cc("config",a.config)("item",i)("template",a.itemTemplate||o)}}function U(e,t){if(1&e&&(r.lc(0,"div",31),r.ad(1,B,1,3,"ngx-treeview-item",32),r.kc()),2&e){var n=r.xc();r.Xc("max-height",n.maxHeight,"px"),r.Sb(1),r.Cc("ngForOf",n.filterItems)}}function z(e,t){if(1&e&&(r.lc(0,"div",34),r.cd(1),r.kc()),2&e){var n=r.xc();r.Sb(1),r.ed(" ",n.i18n.getFilterNoItemsFoundText()," ")}}var V=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),G=function(e){function t(t){var n=e.call(this,{text:t.text,value:t.value,disabled:t.disabled,checked:t.checked,collapsed:t.collapsed,children:t.children})||this;return n.refItem=t,n}return V(t,e),t.prototype.updateRefChecked=function(){this.children.forEach((function(e){e instanceof t&&e.updateRefChecked()}));var e=this.checked;if(e)for(var n=0,i=this.refItem.children;n<i.length;n++){if(!i[n].checked){e=!1;break}}this.refItem.checked=e},t}(x),H=function(){function e(e,t,n){this.i18n=e,this.defaultConfig=t,this.eventParser=n,this.selectedChange=new r.t,this.filterChange=new r.t,this.filterText="",this.config=this.defaultConfig,this.allItem=new x({text:"All",value:void 0}),this.createHeaderTemplateContext()}return Object.defineProperty(e.prototype,"hasFilterItems",{get:function(){return!Object(s.isNil)(this.filterItems)&&this.filterItems.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeight",{get:function(){return""+this.config.maxHeight},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=e.items;Object(s.isNil)(t)||Object(s.isNil)(this.items)||(this.updateFilterItems(),this.updateCollapsedOfAll(),this.raiseSelectedChange()),this.createHeaderTemplateContext()},e.prototype.onAllCollapseExpand=function(){var e=this;this.allItem.collapsed=!this.allItem.collapsed,this.filterItems.forEach((function(t){return t.setCollapsedRecursive(e.allItem.collapsed)}))},e.prototype.onFilterTextChange=function(e){this.filterText=e,this.filterChange.emit(e),this.updateFilterItems()},e.prototype.onAllCheckedChange=function(){var e=this.allItem.checked;this.filterItems.forEach((function(t){t.setCheckedRecursive(e),t instanceof G&&t.updateRefChecked()})),this.raiseSelectedChange()},e.prototype.onItemCheckedChange=function(e,t){var n=this;e instanceof G&&e.updateRefChecked(),this.items.forEach((function(e){n.recursiveCheckItems(e,t)})),this.updateCheckedOfAll(),this.raiseSelectedChange()},e.prototype.raiseSelectedChange=function(){this.generateSelection();var e=this.eventParser.getSelectedChange(this);this.selectedChange.emit(e)},e.prototype.recursiveCheckItems=function(e,t){var n=this;e.children?e.children.forEach((function(e){n.recursiveCheckItems(e,t)})):e.value===t.value&&(e.checked=t.isChecked)},e.prototype.createHeaderTemplateContext=function(){var e=this;this.headerTemplateContext={config:this.config,item:this.allItem,onCheckedChange:function(){return e.onAllCheckedChange()},onCollapseExpand:function(){return e.onAllCollapseExpand()},onFilterTextChange:function(t){return e.onFilterTextChange(t)}}},e.prototype.generateSelection=function(){var e=[],t=[];if(!Object(s.isNil)(this.items)){var n=y.concatSelection(this.items,e,t);e=n.checked,t=n.unchecked}this.selection={checkedItems:e,uncheckedItems:t}},e.prototype.updateFilterItems=function(){var e=this;if(""!==this.filterText){var t=[],n=this.filterText.toLowerCase();this.items.forEach((function(i){var r=e.filterItem(i,n);Object(s.isNil)(r)||t.push(r)})),this.filterItems=t}else this.filterItems=this.items;this.updateCheckedOfAll()},e.prototype.filterItem=function(e,t){var n=this;if(Object(s.includes)(e.text.toLowerCase(),t))return e;if(!Object(s.isNil)(e.children)){var i=[];if(e.children.forEach((function(e){var r=n.filterItem(e,t);Object(s.isNil)(r)||i.push(r)})),i.length>0){var r=new G(e);return r.collapsed=!1,r.children=i,r}}},e.prototype.updateCheckedOfAll=function(){for(var e=null,t=0,n=this.filterItems;t<n.length;t++){var i=n[t];if(null===e)e=i.checked;else if(e!==i.checked){e=void 0;break}}null===e&&(e=!1),this.allItem.checked=e},e.prototype.updateCollapsedOfAll=function(){for(var e=!1,t=0,n=this.filterItems;t<n.length;t++){if(!n[t].collapsed){e=!0;break}}this.allItem.collapsed=!e},e.ctorParameters=function(){return[{type:d},{type:f},{type:m}]},e.propDecorators={headerTemplate:[{type:r.D}],itemTemplate:[{type:r.D}],items:[{type:r.D}],config:[{type:r.D}],selectedChange:[{type:r.O}],filterChange:[{type:r.O}]},e.\u0275fac=function(t){return new(t||e)(r.fc(d),r.fc(f),r.fc(m))},e.\u0275cmp=r.Zb({type:e,selectors:[["ngx-treeview"]],inputs:{config:"config",headerTemplate:"headerTemplate",itemTemplate:"itemTemplate",items:"items"},outputs:{selectedChange:"selectedChange",filterChange:"filterChange"},features:[r.Qb],decls:9,vars:5,consts:[["defaultItemTemplate",""],["defaultHeaderTemplate",""],[1,"treeview-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],["class","treeview-container",3,"max-height",4,"ngSwitchCase"],["class","treeview-text",4,"ngSwitchCase"],[1,"form-inline","row-item"],["aria-hidden","true","class","fa treeview-arrow",3,"fa-caret-right","fa-caret-down","click",4,"ngIf"],[1,"form-check","form-input-wrapper"],["type","checkbox",1,"form-check-input",3,"ngModel","disabled","indeterminate","ngModelChange"],[1,"form-custom-checkbox"],["src","./assets/images/decoratives/tick.svg","width","18",1,"form-custom-checkbox-tick"],[1,"form-check-label",3,"click"],["aria-hidden","true",1,"fa","treeview-arrow",3,"click"],["src","./assets/images/decoratives/expand-arrow.svg","width","18"],["class","row row-filter",4,"ngIf"],[4,"ngIf"],[1,"row","row-filter"],[1,"col-12"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","row row-all",4,"ngIf"],["class","dropdown-divider",4,"ngIf"],[1,"row","row-all"],["class","form-check form-check-inline",4,"ngIf"],["class","pull-right form-check-label",3,"click",4,"ngIf"],[1,"form-check","form-check-inline"],["type","checkbox",1,"form-check-input",3,"ngModel","indeterminate","ngModelChange"],[1,"pull-right","form-check-label",3,"click"],["aria-hidden","true",1,"fa","treeview-arrow",3,"title"],[1,"dropdown-divider"],[1,"treeview-container"],[3,"config","item","template","checkedChange",4,"ngFor","ngForOf"],[3,"config","item","template","checkedChange"],[1,"treeview-text"]],template:function(e,t){if(1&e&&(r.ad(0,j,8,5,"ng-template",null,0,r.bd),r.ad(2,F,2,2,"ng-template",null,1,r.bd),r.lc(4,"div",2),r.ad(5,N,0,0,"ng-template",3),r.kc(),r.lc(6,"div",4),r.ad(7,U,2,3,"div",5),r.ad(8,z,2,1,"div",6),r.kc()),2&e){var n=r.Mc(3);r.Sb(5),r.Cc("ngTemplateOutlet",t.headerTemplate||n)("ngTemplateOutletContext",t.headerTemplateContext),r.Sb(1),r.Cc("ngSwitch",t.hasFilterItems),r.Sb(1),r.Cc("ngSwitchCase",!0),r.Sb(1),r.Cc("ngSwitchCase",!1)}},directives:[o.A,o.x,o.y,o.t,a.a,a.s,a.v,a.d,o.s,T],styles:["[_nghost-%COMP%]     .treeview-header .row-filter {\n        margin-bottom: .5rem;\n      }\n\n      [_nghost-%COMP%]     .treeview-header .row-all .fa {\n        cursor: pointer;\n      }\n\n      [_nghost-%COMP%]     .treeview-container .row-item {\n        margin-bottom: .3rem;\n        flex-wrap: nowrap;\n      }\n\n      [_nghost-%COMP%]     .treeview-container .row-item .fa {\n        width: .8rem;\n        cursor: pointer;\n        margin-right: .3rem;\n      }\n\n      .treeview-container[_ngcontent-%COMP%] {\n        overflow-y: auto;\n        padding-right: .3rem;\n      }\n\n      .treeview-text[_ngcontent-%COMP%] {\n        padding: .3rem 0;\n        white-space: nowrap;\n      }\n\n      .treeview-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n        transition: transform 0.3s ease-in-out;\n        transform: rotate(0deg);\n      }\n\n      .treeview-arrow.fa-caret-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n        transform: rotate(-90deg);\n      }\n\n      .form-custom-checkbox-tick[_ngcontent-%COMP%] {\n        display: none;\n      }\n\n      .form-check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked    ~ .form-custom-checkbox[_ngcontent-%COMP%]   .form-custom-checkbox-tick[_ngcontent-%COMP%] {\n        display: block;\n      }"]}),e}(),W=function(){function e(e,t){this.i18n=e,this.defaultConfig=t,this.buttonClass="btn-outline-secondary",this.selectedChange=new r.t(!0),this.filterChange=new r.t,this.config=this.defaultConfig}return e.prototype.getText=function(){return this.i18n.getText(this.treeviewComponent.selection)},e.prototype.onSelectedChange=function(e){this.selectedChange.emit(e)},e.prototype.onFilterChange=function(e){this.filterChange.emit(e)},e.ctorParameters=function(){return[{type:d},{type:f}]},e.propDecorators={buttonClass:[{type:r.D}],headerTemplate:[{type:r.D}],itemTemplate:[{type:r.D}],items:[{type:r.D}],config:[{type:r.D}],selectedChange:[{type:r.O}],filterChange:[{type:r.O}],treeviewComponent:[{type:r.gb,args:[H]}],dropdownDirective:[{type:r.gb,args:[c]}]},e.\u0275fac=function(t){return new(t||e)(r.fc(d),r.fc(f))},e.\u0275cmp=r.Zb({type:e,selectors:[["ngx-dropdown-treeview"]],viewQuery:function(e,t){var n;(1&e&&(r.hd(H,!0),r.hd(c,!0)),2&e)&&(r.Lc(n=r.uc())&&(t.treeviewComponent=n.first),r.Lc(n=r.uc())&&(t.dropdownDirective=n.first))},inputs:{buttonClass:"buttonClass",config:"config",headerTemplate:"headerTemplate",itemTemplate:"itemTemplate",items:"items"},outputs:{selectedChange:"selectedChange",filterChange:"filterChange"},decls:6,vars:6,consts:[["ngxDropdown","",1,"dropdown"],["type","button","role","button","ngxDropdownToggle","",1,"btn",3,"ngClass"],["ngxDropdownMenu","","aria-labelledby","dropdownMenu",3,"click"],[1,"dropdown-container"],[3,"config","headerTemplate","items","itemTemplate","selectedChange","filterChange"]],template:function(e,t){1&e&&(r.lc(0,"div",0),r.lc(1,"button",1),r.cd(2),r.kc(),r.lc(3,"div",2),r.tc("click",(function(e){return e.stopPropagation()})),r.lc(4,"div",3),r.lc(5,"ngx-treeview",4),r.tc("selectedChange",(function(e){return t.onSelectedChange(e)}))("filterChange",(function(e){return t.onFilterChange(e)})),r.kc(),r.kc(),r.kc(),r.kc()),2&e&&(r.Sb(1),r.Cc("ngClass",t.buttonClass),r.Sb(1),r.ed(" ",t.getText()," "),r.Sb(3),r.Cc("config",t.config)("headerTemplate",t.headerTemplate)("items",t.items)("itemTemplate",t.itemTemplate))},directives:[c,l,o.q,u,H],styles:[".dropdown[_ngcontent-%COMP%] {\n        width: 100%;\n        display: inline-block;\n      }\n\n      .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n        width: 100%;\n        margin-right: .9rem;\n        text-align: left;\n        overflow: hidden;\n        padding-right: 30px;\n        text-overflow: ellipsis;\n      }\n\n      .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::after {\n        position: absolute;\n        right: .6rem;\n        margin-top: .6rem;\n      }\n\n      .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%] {\n        padding: 0 .6rem;\n      }"]}),e}(),Y=function(){function e(){}return e.prototype.transform=function(e,t){if(!Object(s.isNil)(e))return e.map((function(e){return new x({text:e[t],value:e})}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.ec({name:"ngxTreeview",type:e,pure:!0}),e}(),X=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[f,{provide:d,useClass:h},{provide:m,useClass:v}]}},e.\u0275mod=r.dc({type:e}),e.\u0275inj=r.cc({factory:function(t){return new(t||e)},imports:[[a.m,o.c]]}),e}()},lP4r:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("D57K"),r=n("6Oco"),a=n("EM62"),o=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeCodeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t,n,a=e.__sakota__.getChanges(),o=this.modifiedShapes(a);try{for(var s=Object(i.k)(o),c=s.next();!c.done;c=s.next()){var u=c.value;this.processShape(e,u)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r.a},e.prototype.processShape=function(e,t){var n=e.shapes[t],i=n.__sakota__.getChanges(),r=i.$set&&!!i.$set.defId;if(n&&n.dataChange&&!r&&n.dataChange(n,e),n&&n.containerId){var a=e.shapes[n.containerId];a&&a.childChange&&a.childChange(a,n)}},e.prototype.modifiedShapes=function(t){var n,r,a=[];try{for(var o=Object(i.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var u in t[c]){e.regexShape.lastIndex=0;var l=e.regexShape.exec(u);if(l){var p=l[1];-1===a.indexOf(p)&&a.push(p)}}}}catch(d){n={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a},e.regexShape=/shapes\.([^\.]+)\./g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},lu3Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("nsO7"),r=n("EM62"),a=function(){function e(){}return e.prototype.addCursors=function(e){this.cursors?this.cursors=Object(i.merge)(this.cursors,e):this.cursors=e},e.prototype.getCursorCSS=function(e){var t,n;if(e.tail){var i=this.getCompactCursor(this.getCursor(e.cursor||"normal"),this.getTail(e.tail));t=i.content,n=i.origin}else{if(!e.cursor||e.tail)throw new Error("At least one of cursor or tail should be defined to generate the cursor CSS.");t=this.getCursor(e.cursor),n=this.getSvgData(t).origin}return("url('data:image/svg+xml;utf8,"+t+"') "+n.x+" "+n.y+", auto").replace(/\n|\r/g,"")},e.prototype.getCursorIcon=function(e){return"url("+this.getCursor(e.cursor)+"), auto"},e.prototype.getCursor=function(e){if(this.cursors.cursors[e])return this.cursors.cursors[e];throw new Error(e+" cursor is not found in the cursors ICursorMap")},e.prototype.getTail=function(e){if(this.cursors.tails[e])return this.cursors.tails[e];throw new Error(e+" cursor tail is not found in the cursors ICursorMap")},e.prototype.getCompactCursor=function(e,t){var n=this.getSvgData(e),i=this.getSvgData(t);return{content:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+(n.width+i.width)+'" height="'+(n.height+i.height)+'" ><g>'+n.content+'</g><g transform="translate('+n.width+" "+n.height+')">'+i.content+"</g></svg>",origin:n.origin}},e.prototype.getSvgData=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector("svg");return{content:n.innerHTML,width:Number(n.getAttribute("width")),height:Number(n.getAttribute("height")),origin:{x:Number(n.getAttribute("data-ox")||0),y:Number(n.getAttribute("data-oy")||0)}}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},myrl:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("TQyE"),r=(n("Cupj"),n("EM62")),a=n("ZTXN"),o=n("C05f"),s=n("6Oco"),c=n("nsO7"),u=["singleColorPickerSection"],l=function(){function e(e,t){this.resolver=e,this.injector=t,this.currentColorPickerComponents={},this.currentDataItemIds=[],this.componentRefreshRequired=!1,this.colorPickerSubscriptions=[],this._change=new a.a,this.valueSource=new o.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){var t=e.map((function(e){return e.id}));this.currentDataItemIds.length>0?Object(c.isEqual)(this.currentDataItemIds.sort(),t.sort())?this.componentRefreshRequired=!1:(this.componentRefreshRequired=!0,this.currentDataItemIds=t):(this.currentDataItemIds=t,this.componentRefreshRequired=!0),this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){var e=this;this.componentRefreshRequired?(this.currentColorPickerComponents={},this.colorPickerSubscriptions.forEach((function(e){e.unsubscribe()})),this.colorPickerSubscriptions=[],this.singleColorPickerSection.clear(),this._data.forEach((function(t){var n=e.getColorPicker(t);n.instance.apply(),n.changeDetectorRef.markForCheck();var i=n.instance.change.subscribe((function(n){e._change.next({item:t,change:n})}));e.colorPickerSubscriptions.push(i)}))):this._data.forEach((function(t){e.getColorPicker(t).instance.apply()}))},e.prototype.applyAnimated=function(){return this.apply(),Object(s.b)()},e.prototype.createColorPicker=function(e){var t=this.resolver.resolveComponentFactory(i.a);return this.singleColorPickerSection.createComponent(t)},e.prototype.getColorPicker=function(e){this.currentColorPickerComponents[e.id]||(this.currentColorPickerComponents[e.id]=this.createColorPicker(e.id));var t=this.currentColorPickerComponents[e.id];t.instance.setProperties({label:e.label});var n={value:e.style.fillColor?e.style.fillColor:e.style.lineColor,params:void 0};return e.id.includes("diff")&&(n.params={isDiffColor:!0}),t.instance.setData(n),t},e.\u0275fac=function(t){return new(t||e)(r.fc(r.m),r.fc(r.C))},e.\u0275cmp=r.Zb({type:e,selectors:[["sidebar-style"]],viewQuery:function(e,t){var n;(1&e&&r.Vc(u,!0,r.hb),2&e)&&(r.Lc(n=r.uc())&&(t.singleColorPickerSection=n.first))},decls:2,vars:0,consts:[["singleColorPickerSection",""]],template:function(e,t){1&e&&r.gc(0,"div",null,0)},encapsulation:2,changeDetection:0}),e}()},nT0V:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var i=n("hX56"),r=n("3+4Q"),a=n("qMyy"),o=n("5xGT"),s=n("TLy2"),c=n("J+dc"),u=n("YtkY"),l=n("8j5Y"),p=n("xVbo"),d=n("4y1S"),h=n("NNJu"),f=n("C05f"),g=n("ZTXN"),m=n("8lHc"),v=n("KTx3"),b=n("X0jn"),y=n("EM62"),C=n("2kYt"),O=n("rwb9"),x=n("s2Ay"),S=n("Wrqg"),k=["textInput"];function w(e,t){if(1&e&&y.gc(0,"user-image",17),2&e){var n=y.xc();y.Cc("hasImage",n.commenter.hasImage)("imagePath",n.commenter.image)("userColor",n.commenter.displayColor)("userInitials",n.commenter.initial)("userRegistered",n.commenter.isRegistered)("userOnlineStatus",!0)}}function E(e,t){if(1&e&&y.gc(0,"user-image",18),2&e){var n=y.xc();y.Cc("hasImage",n.threadCommentor.hasImage)("imagePath",n.threadCommentor.image)("userColor",n.threadCommentor.displayColor)("userInitials",n.threadCommentor.initial)("userRegistered",n.threadCommentor.isRegistered)("userOnlineStatus",!0)}}function I(e,t){if(1&e&&(y.lc(0,"label",19),y.cd(1),y.kc()),2&e){var n=y.xc();y.Sb(1),y.dd(n.commenter.fullName)}}function T(e,t){if(1&e){var n=y.mc();y.lc(0,"div",20),y.lc(1,"a"),y.wc(),y.lc(2,"svg",21),y.gc(3,"use",22),y.kc(),y.kc(),y.vc(),y.lc(4,"div",23),y.lc(5,"a",24),y.tc("click",(function(){return y.Oc(n),y.xc().resolveComment()})),y.cd(6,"COMMENTS.LABELS.RESOLVE_THREAD"),y.kc(),y.kc(),y.kc()}}function _(e,t){1&e&&(y.lc(0,"label",25),y.cd(1,"COMMENTS.LABELS.EDITED"),y.kc())}function j(e,t){if(1&e&&(y.lc(0,"label",26),y.wc(),y.lc(1,"svg",27),y.gc(2,"use",28),y.kc(),y.cd(3),y.kc()),2&e){var n=y.xc();y.Sb(3),y.ed(" ",n.threadCount," ")}}function P(e,t){if(1&e&&(y.lc(0,"div"),y.lc(1,"label",29),y.cd(2,"COMMENTS.LABELS.RESOLVED_BY"),y.kc(),y.cd(3,"\xa0 "),y.lc(4,"span",30),y.cd(5),y.kc(),y.kc()),2&e){var n=y.xc();y.Sb(5),y.dd(n.resolvedCommentor.fullName)}}function A(e,t){if(1&e&&(y.lc(0,"p",32),y.cd(1),y.kc()),2&e){var n=y.xc(2);y.Sb(1),y.dd(n.comment.comment)}}function M(e,t){1&e&&(y.lc(0,"p",19),y.lc(1,"i",29),y.cd(2,"COMMENTS.LABELS.DELETED_COMMENT"),y.kc(),y.kc())}function D(e,t){if(1&e&&(y.lc(0,"div"),y.ad(1,A,2,1,"p",31),y.yc(2,"async"),y.ad(3,M,3,0,"p",6),y.kc()),2&e){var n=y.xc();y.Sb(1),y.Cc("ngIf",!y.zc(2,2,n.isEditMode)&&!n.isDeleted),y.Sb(2),y.Cc("ngIf",n.isDeleted)}}var R=function(){return["Enter"]};function L(e,t){if(1&e){var n=y.mc();y.lc(0,"div",33),y.lc(1,"text-input",34,35),y.tc("submit",(function(e){return y.Oc(n),y.xc().updateComment(e)})),y.yc(3,"translate"),y.kc(),y.kc()}if(2&e){var i=y.xc();y.Sb(1),y.Dc("placeholder",y.zc(3,6,"PLACEHOLDERS.EDIT_COMMENT")),y.Cc("value",i.comment.comment)("clearOnSubmit",!0)("submitOnCode",y.Gc(8,R))("autoFocus",!0)("multiLined",!0)}}function F(e,t){if(1&e){var n=y.mc();y.lc(0,"a",39),y.tc("click",(function(e){return y.Oc(n),y.xc(2).replyClicked.next(e)})),y.cd(1,"Reply"),y.kc()}}function N(e,t){if(1&e){var n=y.mc();y.lc(0,"div",36),y.lc(1,"a",37),y.tc("click",(function(){return y.Oc(n),y.xc().toggleEditCommentMode(!0)})),y.cd(2,"COMMENTS.LABELS.EDIT"),y.kc(),y.lc(3,"a",37),y.tc("click",(function(){return y.Oc(n),y.xc().deleteComment()})),y.cd(4,"COMMENTS.LABELS.DELETE"),y.kc(),y.ad(5,F,2,0,"a",38),y.kc()}if(2&e){var i=y.xc();y.Sb(5),y.Cc("ngIf",i.showReplayControl)}}function B(e,t){if(1&e){var n=y.mc();y.lc(0,"a",39),y.tc("click",(function(e){return y.Oc(n),y.xc(2).replyClicked.next(e)})),y.cd(1,"Reply"),y.kc()}}function U(e,t){if(1&e){var n=y.mc();y.lc(0,"div",36),y.lc(1,"a",37),y.tc("click",(function(){return y.Oc(n),y.xc().updateComment()})),y.cd(2,"COMMENTS.LABELS.UPDATE"),y.kc(),y.lc(3,"a",37),y.tc("click",(function(){return y.Oc(n),y.xc().toggleEditCommentMode(!1)})),y.cd(4,"COMMENTS.LABELS.CANCEL"),y.kc(),y.ad(5,B,2,0,"a",38),y.kc()}if(2&e){var i=y.xc();y.Sb(5),y.Cc("ngIf",i.showReplayControl)}}function z(e,t){1&e&&y.gc(0,"div",40)}var V=function(){function e(e,t,n,i){var r=this;this.datastore=e,this.commandService=t,this.state=n,this.userLocator=i,this.threadCount=1,this.showControls=!1,this.showReplayControl=!1,this.isEditMode=new f.a(!1),this.commentTime=new f.a(""),this.replyClicked=new g.a,this.itemClicked=new g.a,this.timeRefreshInterval=6e4,this.subs=[],this.subs.push(this.getCancelEditInteraction().subscribe((function(){return r.isEditMode.next(!1)})))}return Object.defineProperty(e.prototype,"isNew",{get:function(){return this.comment.isNew(this.state.get("CurrentUser"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDeleted",{get:function(){return this.comment.isDeleted()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEdited",{get:function(){return this.comment.isEdited()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableBasicControls",{get:function(){return this.showControls&&this.commenter&&this.commenter.id===this.state.get("CurrentUser")&&!this.isDeleted&&!this.isEditMode.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableEditControls",{get:function(){return this.showControls&&this.commenter&&this.commenter.id===this.state.get("CurrentUser")&&this.isEditMode.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showResolveButton",{get:function(){return!this.comment.parentId&&!this.comment.resolved},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.state.get("CurrentDiagram");this.subs.push(Object(m.a)(0,this.timeRefreshInterval).pipe(Object(s.a)((function(){return e.datastore.findOne(r.a,{diagramId:t,id:e.comment.id}).pipe(Object(c.a)(1),Object(u.a)((function(t){return e.commentTime.next(t.getTime())})))}))).subscribe())},e.prototype.deleteComment=function(){o.Lb.track("canvas.comment.existing.delete"),this.commandService.dispatch(a.a.deleteComment,{commentId:this.comment.id})},e.prototype.updateComment=function(e){this.isEditMode.next(!1),e||(e=this.textInput.text),e&&0!==e.trim().length?this.commandService.dispatch(a.a.editComment,{commentId:this.comment.id,diagramId:this.comment.diagramId,comment:e}):this.isEditMode.next(!1)},e.prototype.resolveComment=function(){var e=this;o.Lb.track("canvas.comment.resolve-thread.click"),this.userLocator.getUserData().pipe(Object(c.a)(1),Object(l.a)((function(t){e.commandService.dispatch(a.a.resolveComment,{commentId:e.comment.id,userId:t.id})}))).subscribe()},e.prototype.toggleEditCommentMode=function(e){this.isEditMode.next(e),e&&o.Lb.track("right.comment.existing.edit")},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getCancelEditInteraction=function(){var e=this;return Object(v.a)(window,"keydown").pipe(Object(p.a)((function(t){return t.keyCode===b.k.Escape&&e.isEditMode.value})))},e.\u0275fac=function(t){return new(t||e)(y.fc(i.b),y.fc(o.B),y.fc(o.Jb),y.fc(d.x))},e.\u0275cmp=y.Zb({type:e,selectors:[["comment-thread-item"]],viewQuery:function(e,t){var n;(1&e&&y.hd(k,!0,h.t),2&e)&&(y.Lc(n=y.uc())&&(t.textInput=n.first))},inputs:{comment:"comment",commenter:"commenter",resolvedCommentor:"resolvedCommentor",threadCommentor:"threadCommentor",threadCount:"threadCount",showControls:"showControls",showReplayControl:"showReplayControl"},outputs:{replyClicked:"replyClicked",itemClicked:"itemClicked"},decls:23,vars:19,consts:[[1,"cti"],[1,"cti-header","fx-center-vertical",3,"click"],[1,"cti-user-img"],["class","cti-last-user-img","imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],["class","cti-prev-user-img","imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],[1,"cti-header-info","fx-flex-expand"],["class","grey",4,"ngIf"],["class","temp-resolve-menu",4,"ngIf"],[1,"cti-header-info-lbls"],[1,"cti-header-time","grey"],["class","cti-header-edited grey","translate","",4,"ngIf"],["class","cti-header-count grey",4,"ngIf"],[1,"cti-content","fx-margin-top-5","fx-margin-bottom-5",3,"click"],[4,"ngIf"],["class","cti-edit-comment",4,"ngIf"],["class","cti-buttons",4,"ngIf"],["class","cti-new-comment-indicator",4,"ngIf"],["imageSize","small",1,"cti-last-user-img",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],["imageSize","small",1,"cti-prev-user-img",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],[1,"grey"],[1,"temp-resolve-menu"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"menu-content"],["translate","",1,"dark-blue",3,"click"],["translate","",1,"cti-header-edited","grey"],[1,"cti-header-count","grey"],[1,"nu-icon","nu-icon-xsmall"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"],["translate",""],[1,"cti-content-commenter-name"],["class","cti-content-text",4,"ngIf"],[1,"cti-content-text"],[1,"cti-edit-comment"],[3,"placeholder","value","clearOnSubmit","submitOnCode","autoFocus","multiLined","submit"],["textInput",""],[1,"cti-buttons"],["translate","",1,"primary",3,"click"],["class","primary",3,"click",4,"ngIf"],[1,"primary",3,"click"],[1,"cti-new-comment-indicator"]],template:function(e,t){1&e&&(y.lc(0,"div",0),y.lc(1,"div",1),y.tc("click",(function(e){return t.itemClicked.next(e)})),y.lc(2,"div",2),y.ad(3,w,1,6,"user-image",3),y.ad(4,E,1,6,"user-image",4),y.kc(),y.lc(5,"div",5),y.lc(6,"div"),y.ad(7,I,2,1,"label",6),y.ad(8,T,7,0,"div",7),y.kc(),y.lc(9,"div",8),y.lc(10,"label",9),y.cd(11),y.yc(12,"async"),y.kc(),y.ad(13,_,2,0,"label",10),y.ad(14,j,4,1,"label",11),y.kc(),y.kc(),y.kc(),y.lc(15,"div",12),y.tc("click",(function(e){return t.itemClicked.next(e)})),y.ad(16,P,6,1,"div",13),y.ad(17,D,4,4,"div",13),y.kc(),y.ad(18,L,4,9,"div",14),y.yc(19,"async"),y.ad(20,N,6,1,"div",15),y.ad(21,U,6,1,"div",15),y.ad(22,z,1,0,"div",16),y.kc()),2&e&&(y.Sb(1),y.Xb("has-prev-user",t.threadCommentor),y.Sb(2),y.Cc("ngIf",t.commenter),y.Sb(1),y.Cc("ngIf",t.threadCommentor),y.Sb(3),y.Cc("ngIf",t.commenter),y.Sb(1),y.Cc("ngIf",t.showResolveButton),y.Sb(3),y.dd(y.zc(12,15,t.commentTime)),y.Sb(2),y.Cc("ngIf",t.isEdited),y.Sb(1),y.Cc("ngIf",t.threadCount>1),y.Sb(2),y.Cc("ngIf",t.resolvedCommentor),y.Sb(1),y.Cc("ngIf",!t.resolvedCommentor),y.Sb(1),y.Cc("ngIf",y.zc(19,17,t.isEditMode)),y.Sb(2),y.Cc("ngIf",t.enableBasicControls),y.Sb(1),y.Cc("ngIf",t.enableEditControls),y.Sb(1),y.Cc("ngIf",t.isNew))},directives:[C.t,O.a,x.a,S.a],pipes:[C.b,x.d],styles:[".cti[_ngcontent-%COMP%]{padding:5px;position:relative}.cti.selected[_ngcontent-%COMP%]{background-color:#f2f5fb}.cti-user-img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:10px;position:relative;margin-left:-2px}.cti-user-img[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{border:2px solid #fff;border-radius:100%;position:absolute}.cti-last-user-img[_ngcontent-%COMP%]{z-index:1;display:inline-block}.cti-prev-user-img[_ngcontent-%COMP%]{display:none;right:-15px}.cti-header.has-prev-user[_ngcontent-%COMP%]   .cti-prev-user-img[_ngcontent-%COMP%]{display:inline-block}.cti-header.has-prev-user[_ngcontent-%COMP%]   .cti-header-info[_ngcontent-%COMP%]{padding-left:10px}.cti-header-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px;font-size:12px}.cti-buttons[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-right:10px;font-size:12px}.cti-header-count[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:2px}.cti-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;position:absolute;right:5px;top:7px;border-radius:100%}.cti-content-commenter-name[_ngcontent-%COMP%], .cti-content-text[_ngcontent-%COMP%]{word-wrap:break-word}.cti-content-text[_ngcontent-%COMP%]{white-space:pre-line}.temp-resolve-menu[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.temp-resolve-menu[_ngcontent-%COMP%]   .menu-content[_ngcontent-%COMP%]{display:none;position:absolute;z-index:inherit;top:25px;right:0;width:128px;border:1px solid #d3d3e7;padding:15px;border-radius:4px;background:#fff}.temp-resolve-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]{display:inline-block}.cti-edit-comment[_ngcontent-%COMP%]{margin-bottom:5px}"],changeDetection:0}),e}()},o9on:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),r=n("5xGT"),a=n("4y1S"),o=n("6Oco"),s=n("EM62"),c=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return r.m.get("REST_API_BASE_URL")+"/"+r.m.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/get-projects"},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.auth=this.auth.token},t.prototype.execute=function(){return o.a},t.prototype.executeResult=function(e){return this.data.callBack(e.result),!0},t.\u0275fac=function(e){return new(e||t)(s.pc(a.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[a.a])],t)}(r.f);Object.defineProperty(c,"name",{value:"GetClassicProjects"});var u=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return r.m.get("REST_API_BASE_URL")+"/"+r.m.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/migrate-classic-projects"},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.auth=this.auth.token},t.prototype.execute=function(){return o.a},t.\u0275fac=function(e){return new(e||t)(s.pc(a.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[a.a])],t)}(r.f);Object.defineProperty(u,"name",{value:"ImportClassicProjects"});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.registerGetClassicProjects=function(e){e.map(t.getClassicProjects).add(c)},t.registerImportClassicProjects=function(e){e.map(t.importClassicProjects).add(u)},t.getClassicProjects=new t("GetClassicProjects"),t.importClassicProjects=new t("ImportClassicProjects"),t}(r.y)},oK6n:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("D57K"),r=n("ROBh"),a=n("cOhl"),o=n("TLy2"),s=n("J+dc"),c=n("YtkY"),u=n("5xGT"),l=n("QoSw"),p=n("EM62"),d=function(){function e(e,t,n){this.styleLoader=e,this.state=t,this.ll=n,this.documentStylesArraySize=14}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.getFeatureData=function(e,t){var n=this,r=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(o.a)((function(e){return n.styleLoader.getPalattes().pipe(Object(s.a)(1),Object(c.a)((function(t){var a,o,s={palettes:[]},c=!0;try{for(var u=Object(i.k)(r),l=u.next();!l.done;l=u.next()){var p=l.value;if(!e.shapes[p].isConnector()){c=!1;break}}}catch(h){a={error:h}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}var d=[];return c?d=n.styleLoader.getDocumentLinePalette().styles.slice():(d=n.styleLoader.getDocumentPalette().styles.slice(),s.palettes.push({id:"fillColor",title:"Fill Color",icon:"fill-solid",palette:t.find((function(e){return"metro"===e.name}))})),s.documentStyles=[],n.sortAndSliceStyles(r,e,d).forEach((function(e){s.documentStyles.push({style:e,selected:!1})})),1===r.length&&s.documentStyles.length>0&&(s.documentStyles[0].selected=!0),s.palettes.push({id:"lineColor",title:"Line Color",icon:"fill-line",palette:t.find((function(e){return"metro-lined"===e.name}))}),s.palettes.push({id:"lineStyle",title:"Line Style",icon:"fill-dotted",palette:t.find((function(e){return"dotted"===e.name}))}),s})))})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(c.a)((function(e){var n,r;try{for(var a=Object(i.k)(t),o=a.next();!o.done;o=a.next()){var s=o.value,c=e.shapes[s];if(c&&(c.isConnector()||c.isStyleEnabledShape()))return!0}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1})))},e.prototype.getApplyData=function(e,t){return Object(r.a)({style:t,format:{"*":{indexStart:0,styles:{color:t.textColor}}}})},e.prototype.sortAndSliceStyles=function(e,t,n){var r,a,o=[],s=function(e){var i=t.shapes[e],r=n.findIndex((function(e){return e.id===i.style.id}));if(!(o.length<c.documentStylesArraySize&&n.length>0))return"break";o.push(n.splice(r,1)[0])},c=this;try{for(var u=Object(i.k)(e),l=u.next();!l.done;l=u.next()){if("break"===s(l.value))break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}return o.concat(n).slice(0,this.documentStylesArraySize)},e.\u0275fac=function(t){return new(t||e)(p.pc(a.a),p.pc(u.Jb),p.pc(l.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},okSW:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("nsO7"),a=n("NNJu"),o=n("QoSw"),s=n("5xGT"),c=n("EM62"),u=n("pWGo"),l=n("2aGL"),p=["linksContainer"],d=["shapesContainer"],h=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.ll=i,o.commandService=r,o.state=a,o.subs=[],o.linkItems={},o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"linkItemIds",{get:function(){return Object.keys(this.linkItems)},enumerable:!1,configurable:!0}),t.prototype.onTabUpdate=function(){this.manage()},t.prototype.ngAfterViewInit=function(){this.manage()},t.prototype.manage=function(){this.links||(this.links={}),this.manageLinks(Object(r.cloneDeep)(this.links)),this.addShapeSection(this.shapes)},t.prototype.ngOnDestroy=function(){this.clearSubs()},t.prototype.addLinkItem=function(e){var t=this.makeComponent(u.a);t.instance.connectors=e.items,t.instance.eDataId=this.eDataId,t.instance.entityId=this.entityId,this.linkItems[e.id]={item:t,container:this.linksContainer},this.insert(this.linksContainer,t),t.changeDetectorRef.detectChanges()},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.addShapeSection=function(e){if(!this.shapeSectionItem&&this.shapesContainer){var t=this.makeComponent(l.a);this.shapeSectionItem=t,this.insert(this.shapesContainer,this.shapeSectionItem)}this.shapeSectionItem&&(this.shapeSectionItem.instance.shapes=e,this.shapeSectionItem.changeDetectorRef.detectChanges())},t.prototype.manageLinks=function(e){var t=this,n={};Object(r.values)(e).forEach((function(e){Object.keys(e.connectors).forEach((function(t){var i=Object.keys(e.connectors[t]).map((function(n){var i=e.connectors[t][n];return i.id=n,i}));n[t]||(n[t]=[]),i.forEach((function(i){i.docId=t,i.link=e,n[t].push(i)}))}))}));var i=[],a=[];for(var o in n){var s=n[o];this.linkItemIds.includes(o)?a.push({id:o,items:s}):i.push({id:o,items:s})}this.linkItemIds.filter((function(e){return!Object.keys(n).includes(e)})).forEach((function(e){return t.removeLinkItem(e)})),a.forEach((function(e,n){return t.updateLinkItem(e)})),i.forEach((function(e,n){return t.addLinkItem(e)}))},t.prototype.updateLinkItem=function(e){var t=this.linkItems[e.id].item;t.instance.connectors=e.items,t.instance.eDataId=this.eDataId,t.instance.entityId=this.entityId,t.changeDetectorRef.detectChanges()},t.prototype.removeLinkItem=function(e){if(this.linkItems[e]){var t=this.linkItems[e].item,n=this.linkItems[e].container;t&&n&&(this.remove(n,t),delete this.linkItems[e])}},t.\u0275fac=function(e){return new(e||t)(c.fc(c.m),c.fc(c.C),c.fc(o.a),c.fc(s.B),c.fc(s.Jb))},t.\u0275cmp=c.Zb({type:t,selectors:[["links-renderer"]],viewQuery:function(e,t){var n;(1&e&&(c.hd(p,!0,c.hb),c.hd(d,!0,c.hb)),2&e)&&(c.Lc(n=c.uc())&&(t.linksContainer=n.first),c.Lc(n=c.uc())&&(t.shapesContainer=n.first))},inputs:{eDataId:"eDataId",entityId:"entityId",links:"links",shapes:"shapes"},features:[c.Pb],decls:10,vars:0,consts:[[1,"links-renderer-section"],["shapesContainer",""],["linksContainer",""]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"h4"),c.cd(2,"Shape Occurrences"),c.kc(),c.gc(3,"div",null,1),c.kc(),c.lc(5,"div",0),c.lc(6,"h4"),c.cd(7,"Connections"),c.kc(),c.gc(8,"div",null,2),c.kc())},styles:["h4[_ngcontent-%COMP%]{font-size:14px;color:#7e7e7e}.links-renderer-shape-item-doc[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:5px}.links-renderer-shape-item-doc[_ngcontent-%COMP%]   .links-renderer-shape-item-doc-count[_ngcontent-%COMP%]{background-color:#04263d;padding:5px;font-size:12px;text-align:center;color:#fff;border-radius:5px;margin-left:10px}.links-renderer-section[_ngcontent-%COMP%]{margin-bottom:40px}.links-renderer-section[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.links-renderer-section[_ngcontent-%COMP%]  .links-renderer-item-doc-name{color:rgba(20,40,46,.8);margin-bottom:5px}.links-renderer-section[_ngcontent-%COMP%]  .panel-content{margin-left:12px;border-left:1px solid #d6d6d6;padding-left:15px}.links-renderer-section[_ngcontent-%COMP%]  .col{padding-left:0}.links-renderer-section[_ngcontent-%COMP%]  .row{padding:10px 0}.links-renderer-item-connections[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:25px}.links-renderer-item-connections[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{width:20px;height:20px}.links-renderer-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;color:#04263d;font-weight:700;margin-bottom:16px}"],changeDetection:0}),t}(a.l)},pTJA:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("5xGT"),r=n("nsO7"),a=n("I4UX"),o=n("diDk"),s=n("QoSw"),c=n("xVbo"),u=n("TLy2"),l=n("J+dc"),p=n("YtkY"),d=n("jIqt"),h=n("TaSY"),f=n("BwBJ"),g=n("nIj0"),m=n("C05f"),v=n("ROBh"),b=n("HM3f"),y=n("EM62"),C=n("pYIu"),O=n("TdEb"),x=n("pVzg"),S=n("29Wa"),k=n("Cd2c"),w=n("ulve"),E=n("2kYt"),I=n("mFH5");function T(e,t){if(1&e&&(y.lc(0,"mat-option",28),y.cd(1),y.kc()),2&e){var n=t.$implicit;y.Cc("value",n),y.Sb(1),y.ed(" ",n.name," ")}}var _=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},j=function(){function e(e,t,n,i){var a=this;this.ll=e,this.ell=t,this.eDataManage=n,this.state=i,this.dbControl=new g.h,this.subs=[],this.edataModels=[],this.isNameValid=new m.a(!1),this.isDBValid=new m.a(!1),this.editData=new m.a(!1),this.syncType=this.state.changes("Selected").pipe(Object(c.a)((function(e){return 1===e.length})),Object(u.a)((function(e){return a.ll.forCurrentObserver(!1).pipe(Object(l.a)(1),Object(u.a)((function(t){return t.getShapeModel(e[0])})))})),Object(u.a)((function(e){var t=e.entityDefId;return e.eDataId&&t?a.ell.getEData(e.eDataId).pipe(Object(u.a)((function(e){return e.getEDataModel()})),Object(p.a)((function(n){var i=n.getActiveCustomEntityDefs().find((function(e){return e.id===t}));i?a.editData.next(!0):a.editData.next(!1);var o=!1;if(i&&i.dataItems){var s=Object(r.values)(e.dataItems||{}).filter((function(e){return e.isPublic&&!e.primaryTextBound}));s.length>0?a.editData.next(!0):a.editData.next(!1),s.forEach((function(e){if(!i.dataItems[e.id])return o=!0,!1}))}return o}))):(a.editData.next(!1),Object(v.a)(!1))})))}return e.prototype.displayFn=function(e){return e&&e.name?e.name:""},e.prototype._filter=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return!!e.isCustom&&(e.name||"").toLowerCase().includes(n)}))},e.prototype.ngAfterViewInit=function(){var e=this;this.filteredOptions=this.dbControl.valueChanges.pipe(Object(d.a)(""),Object(u.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(u.a)((function(t){return t.getDiagramEData().pipe(Object(u.a)((function(t){if(!t)return Object(v.a)([]);var n=[];return t.forEach((function(t){var i=e.ell.getEData(t).pipe(Object(u.a)((function(e){return e.getEDataModel()})),Object(l.a)(1));n.push(i)})),Object(b.b)(n)})))})),Object(p.a)((function(e){return{eDataModels:e,value:t}})))})),Object(p.a)((function(t){var n="string"==typeof t.value?t.value:t.value.name;return e.edataModels=t.eDataModels,n?e._filter(t.eDataModels,n):t.eDataModels.filter((function(e){return e&&!!e.isCustom})).slice()}))),this.hideCreater()},e.prototype.showCreater=function(){document.querySelector(".entity-type-manage-add-new").style.display="block"},e.prototype.hideCreater=function(){this.selectedDatabase=void 0;var e=document.querySelector(".entity-type-manage-add-new");document.querySelector(".entity-type-manage-add-new-db input").value="",document.querySelector(".entity-type-manage-add-new-name input").value="",e.style.display="none",this.isNameValid.next(!1),this.isDBValid.next(!1)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleSaveClick=function(){var e,t=this,n=this.state.get("Selected"),r=document.querySelector(".entity-type-manage-add-new-name input").value,a=Object(v.a)({});if(r){if(this.selectedDatabase)e=this.selectedDatabase.id;else{var o=document.querySelector(".entity-type-manage-add-new-db input").value.trim();if(!o)return;var s=this.edataModels.find((function(e){return e.name===o}));s?e=s.id:(e=i.sb.eDataId(),a=this.eDataManage.createCustomDB(e,o).pipe(Object(h.a)(),Object(f.a)(1e3)))}a.pipe(Object(u.a)((function(){return t.eDataManage.createType(e,r).pipe(Object(u.a)((function(i){return t.eDataManage.bindNewEntityToShape(e,n[0],i)})))}))).subscribe(),this.hideCreater()}},e.\u0275fac=function(t){return new(t||e)(y.fc(s.a),y.fc(o.a),y.fc(a.a),y.fc(i.Jb))},e.\u0275cmp=y.Zb({type:e,selectors:[["entity-type-manage"]],decls:52,vars:19,consts:[[1,"entity-type-manage-container"],["alignment","right",3,"settings"],["dd",""],["ddbutton",""],[1,"nu-btn-small","nu-btn-icon"],[1,"settings-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["dditem","",3,"hidden","click"],[1,"dropdown-item-icon"],[1,""],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-refresh"],[1,"dropdown-item-text"],["dditem","",1,"new-data",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-database-small"],["dditem","",1,"edit-data",3,"hidden","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-pencil"],[1,"entity-type-manage-add-new"],["typeCreator",""],[1,"entity-type-manage-add-new-name"],[1,"grey"],["value","",1,"text-input",3,"keyup"],[1,"entity-type-manage-add-new-db"],["type","text","matInput","",1,"text-input",3,"formControl","matAutocomplete","change","keyup"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"entity-type-manage-add-new-btns"],[1,"primary",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(y.lc(0,"div",0),y.lc(1,"abs-dropdown",1,2),y.lc(3,"simple-dropdown-button",3),y.lc(4,"button",4),y.wc(),y.lc(5,"svg",5),y.gc(6,"use",6),y.kc(),y.kc(),y.kc(),y.vc(),y.lc(7,"simple-dropdown-item",7),y.tc("click",(function(){return t.eDataManage.updateType().subscribe()})),y.yc(8,"async"),y.lc(9,"div",8),y.wc(),y.lc(10,"svg",9),y.gc(11,"use",10),y.kc(),y.kc(),y.vc(),y.lc(12,"div",11),y.lc(13,"a"),y.cd(14,"Sync changes to Type"),y.kc(),y.kc(),y.kc(),y.lc(15,"simple-dropdown-item",12),y.tc("click",(function(){return t.showCreater()})),y.lc(16,"div",8),y.wc(),y.lc(17,"svg",9),y.gc(18,"use",13),y.kc(),y.kc(),y.vc(),y.lc(19,"div",11),y.lc(20,"a"),y.cd(21,"Save as a new Entity Type"),y.kc(),y.kc(),y.kc(),y.lc(22,"simple-dropdown-item",14),y.tc("click",(function(){return t.eDataManage.makeTypeEditable(!0).subscribe()})),y.yc(23,"async"),y.lc(24,"div",8),y.wc(),y.lc(25,"svg",9),y.gc(26,"use",15),y.kc(),y.kc(),y.vc(),y.lc(27,"div",11),y.lc(28,"a"),y.cd(29,"Edit Entity Type"),y.kc(),y.kc(),y.kc(),y.kc(),y.kc(),y.lc(30,"div",16,17),y.lc(32,"div",18),y.lc(33,"label",19),y.cd(34,"Type Name"),y.kc(),y.lc(35,"input",20),y.tc("keyup",(function(e){return t.isNameValid.next(!!e.target.value.trim())})),y.kc(),y.kc(),y.lc(36,"div",21),y.lc(37,"label",19),y.cd(38,"Create / Choose Database"),y.kc(),y.lc(39,"mat-form-field",9),y.lc(40,"input",22),y.tc("change",(function(){return t.selectedDatabase=void 0}))("keyup",(function(e){return t.isDBValid.next(!!e.target.value.trim())})),y.kc(),y.lc(41,"mat-autocomplete",23,24),y.tc("optionSelected",(function(e){return t.selectedDatabase=e.option.value,t.isDBValid.next(!!e.option.value)})),y.ad(43,T,2,2,"mat-option",25),y.yc(44,"async"),y.kc(),y.kc(),y.kc(),y.lc(45,"div",26),y.lc(46,"a",27),y.tc("click",(function(){return t.handleSaveClick()})),y.yc(47,"async"),y.yc(48,"async"),y.cd(49,"Save"),y.kc(),y.lc(50,"a",27),y.tc("click",(function(){return t.hideCreater()})),y.cd(51,"Cancel"),y.kc(),y.kc(),y.kc()),2&e){var n=y.Mc(42);y.Sb(1),y.Cc("settings",y.Gc(18,_)),y.Sb(6),y.Cc("hidden",!y.zc(8,8,t.syncType)),y.Sb(15),y.Cc("hidden",!y.zc(23,10,t.editData)),y.Sb(18),y.Cc("formControl",t.dbControl)("matAutocomplete",n),y.Sb(1),y.Cc("displayWith",t.displayFn),y.Sb(2),y.Cc("ngForOf",y.zc(44,12,t.filteredOptions)),y.Sb(3),y.Tb("disabled",y.zc(47,14,t.isNameValid)&&y.zc(48,16,t.isDBValid)?null:"")}},directives:[C.a,O.a,x.a,S.c,k.b,g.d,w.d,g.s,g.i,w.a,E.s,I.k],pipes:[E.b],styles:["[_nghost-%COMP%]  a.primary{border:1px solid;height:30px;border-radius:4px;padding:4px 12px;background:rgba(81,192,170,.2)}[_nghost-%COMP%]  .dropdown-item-icon{width:20px;height:15px;float:left}[_nghost-%COMP%]  .dropdown-item-icon svg{width:20px;height:20px}[_nghost-%COMP%]  ul.abs-dropdown-items-container{min-width:254px}[_nghost-%COMP%]  .dropdown-item-text{font-size:14px;margin-left:24px}[_nghost-%COMP%]  .mat-form-field-infix{padding:4px 0}[_nghost-%COMP%]  .mat-input-element{padding:8px;border:1px solid #d3d3e7}[_nghost-%COMP%]  .abs-dropdown-inner{top:-15px!important}.settings-icon[_ngcontent-%COMP%]{width:30px;height:50px;margin-top:-13px;margin-right:-4px}.entity-type-manage-add-new[_ngcontent-%COMP%]{position:absolute;z-index:10;padding:10px;box-shadow:0 0 2px grey;margin-top:10px;width:260px;background:#fff;right:0;top:15px}.entity-type-manage-add-new-name[_ngcontent-%COMP%]{margin-bottom:15px}.entity-type-manage-add-new-btns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:7px}.entity-type-manage-add-new-btns[_ngcontent-%COMP%]{margin-bottom:10px}.entity-type-manage-add-new-db[_ngcontent-%COMP%]{margin-bottom:18px}"],changeDetection:0}),e}()},pWGo:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("D57K"),r=n("NNJu"),a=n("5xGT"),o=n("X0jn"),s=n("0jHB"),c=n("YtkY"),u=n("J+dc"),l=n("diDk"),p=n("W9bu"),d=n("QoSw"),h=n("Xpu5"),f=n("EM62"),g=n("lQIu"),m=n("2kYt");function v(e,t){1&e&&(f.jc(0),f.cd(1,"s"),f.ic())}function b(e,t){if(1&e){var n=f.mc();f.lc(0,"div",16),f.lc(1,"a",17),f.tc("click",(function(){f.Oc(n);var e=f.xc(2);return e.resolveChanges(e.linkData.id)})),f.cd(2),f.ad(3,v,2,0,"ng-container",18),f.kc(),f.kc()}if(2&e){var i=f.xc(2);f.Sb(2),f.ed(" Resolve ",i.linkData.refChangeCount," change"),f.Sb(1),f.Cc("ngIf",i.linkData.refChangeCount>1)}}function y(e,t){if(1&e){var n=f.mc();f.lc(0,"div"),f.lc(1,"div",4),f.lc(2,"div",5),f.lc(3,"div",6),f.lc(4,"div",7),f.lc(5,"a",8),f.tc("click",(function(){f.Oc(n);var e=t.$implicit;return f.xc().navigateToItem(e.diagId,e.connId)})),f.cd(6),f.yc(7,"async"),f.kc(),f.kc(),f.ad(8,b,4,2,"div",9),f.kc(),f.lc(9,"div",10),f.lc(10,"div",11),f.wc(),f.lc(11,"svg",12),f.gc(12,"use",13),f.kc(),f.kc(),f.kc(),f.vc(),f.lc(13,"div",6),f.lc(14,"div",14),f.tc("click",(function(){f.Oc(n);var e=t.$implicit;return f.xc().navigateToItem(e.diagId,e.shapeId)})),f.lc(15,"a"),f.cd(16),f.kc(),f.lc(17,"a",15),f.cd(18),f.yc(19,"async"),f.kc(),f.kc(),f.kc(),f.kc(),f.kc(),f.kc()}if(2&e){var i=t.$implicit,r=f.xc();f.Sb(6),f.dd(f.zc(7,4,i.cType)),f.Sb(2),f.Cc("ngIf",r.linkData.refChangeCount>0),f.Sb(8),f.dd(i.entityName),f.Sb(2),f.ed(" ",f.zc(19,6,r.getEntityShapeType(i,r.linkData)),"")}}var C=function(e){function t(t,n,i,r,a,o,s,c){var u=e.call(this,t,n)||this;return u.componentFactoryResolver=t,u.injector=n,u.defLocator=i,u.ell=r,u.ll=a,u.linkSvc=o,u.state=s,u.commandService=c,u.connectors=[],u.subs=[],u}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"linkData",{get:function(){var e=this,t={conns:[]};return this.connectors.forEach((function(n,i){if(t.docId=n.docId,t.conns.push({cType:e.defName(n.defId),diagId:n.docId,diagName:e.diagName(n.docId),connId:n.id,shapeId:n.shapeId,shapeDefName:e.defName(n.shapeDefId),entityName:n.link.identifier}),0===i){var r=n.link;t.id=r.id,t.entityType=e.entityType(r),t.refChangeCount=0,r.type===o.g.REFERENCE&&r.refChanges&&(t.refChangeCount=r.refChanges.length),t.diagName=e.diagName(n.docId)}})),t.count=t.conns.length,t},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.apply=function(){this.itemRef.instance.apply()},t.prototype.navigateToItem=function(e,t){this.state.get("CurrentDiagram")!==e?this.linkSvc.navigateToDiagram(e,["shape",t]).subscribe():this.linkSvc.navigateToShape(t)},t.prototype.getPlural=function(e,t){return t>1?e+"s":e},t.prototype.getEntityShapeType=function(e,t){return t.entityType?t.entityType:e.shapeDefName},t.prototype.resolveChanges=function(e){this.commandService.dispatch(h.a.updateEDateRefChanges,this.eDataId,{entityIds:[this.entityId],linkId:e,markResolved:!0})},t.prototype.defName=function(e){return this.defLocator.getDefinition(e).pipe(Object(c.a)((function(e){return e.name})))},t.prototype.diagName=function(e){return this.ll.forDiagram(e,!1).getDiagramName().pipe(Object(u.a)(1))},t.prototype.entityType=function(e){if(e.eDataId&&e.entityId)return this.ell.getEntityOnce(e.eDataId,e.entityId).pipe(Object(c.a)((function(e){return e.getDefName()})))},t.\u0275fac=function(e){return new(e||t)(f.fc(f.m),f.fc(f.C),f.fc(s.a),f.fc(l.a),f.fc(d.a),f.fc(p.a),f.fc(a.Jb),f.fc(a.B))},t.\u0275cmp=f.Zb({type:t,selectors:[["link-info-item"]],inputs:{connectors:"connectors",eDataId:"eDataId",entityId:"entityId"},outputs:{change:"change",removed:"removed"},features:[f.Pb],decls:6,vars:6,consts:[[1,"links-renderer-item","links-renderer-item-connections"],[1,"links-renderer-item-doc-name"],[3,"heading"],[4,"ngFor","ngForOf"],[1,"container"],[1,"row"],[1,"col","my-auto"],[1,"links-renderer-item-ctype"],[3,"click"],["class","links-renderer-item-changes",4,"ngIf"],[1,"col-2","my-auto"],[1,"links-renderer-item-arrow"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow-right"],[1,"links-renderer-item-entity",3,"click"],[1,"links-renderer-item-shape-type"],[1,"links-renderer-item-changes"],[1,"primary",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(f.lc(0,"div",0),f.lc(1,"div",1),f.cd(2),f.yc(3,"async"),f.kc(),f.lc(4,"collapsable-panel-item",2),f.ad(5,y,20,8,"div",3),f.kc(),f.kc()),2&e&&(f.Sb(2),f.dd(f.zc(3,4,t.linkData.diagName)),f.Sb(2),f.Fc("heading","",t.linkData.count," ",t.getPlural("Connection",t.linkData.count),""),f.Sb(1),f.Cc("ngForOf",t.linkData.conns))},directives:[g.b,m.s,m.t],pipes:[m.b],styles:[".links-renderer-item[_ngcontent-%COMP%]  .panel-section{margin-bottom:15px}.links-renderer-item-connections[_ngcontent-%COMP%]{align-items:center}.links-renderer-item-ctype[_ngcontent-%COMP%]{color:rgba(20,40,46,.8)}.links-renderer-item-shape-type[_ngcontent-%COMP%]{color:rgba(61,66,66,.6);font-size:12px;line-height:20px}.links-renderer-item-entity[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(r.l)},"pt/I":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("D57K"),r=n("g6G6"),a=n("KTx3"),o=n("8j5Y"),s=n("cJ9h"),c=n("TLy2"),u=n("kuMc"),l=n("xVbo"),p=n("LLEj"),d=n("O6K7"),h=n("5xGT"),f=n("EM62"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:"comment",tail:null,type:"cur",viewingArea:"app"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,i){var a=this,s=e.prototype.initialize.call(this,t,n,i),c=this.getStagePressUp(this.gridCanvas).pipe(Object(o.a)((function(e){return a.addComment(e)}))),u=this.getClickOnShape().pipe(Object(o.a)((function(e){return a.addComment(e)})));return Object(r.a)(s,c,u)},t.prototype.getClickOnShape=function(){var e=this;return this.getShapes().pipe(Object(s.a)((function(t){return Object(a.a)(t,"mousedown").pipe(Object(c.a)((function(){return Object(a.a)(t,"pressup").pipe(Object(u.a)(Object(a.a)(t,"pressmove")))})),Object(u.a)(Object(a.a)(e.diagramCanvas,"childRemoved").pipe(Object(l.a)((function(e){return e.child===t})))))})))},t.prototype.addComment=function(e){h.Lb.track("canvas.comment.add.canvas.click");var t=new d.a(d.b.CreateComment,e);this.interactionCanvas.dispatchEvent(t)},t.\u0275fac=function(e){return m(e||t)},t.\u0275prov=f.bc({token:t,factory:t.\u0275fac}),t}(p.a),m=f.nc(g)},"q+iX":function(e,t,n){(function(){"use strict";var i=this._;i||(i=n("6WTZ"));var r={create:function(e,t){var n;if(t?(n=t).eClass=t.eClass||e:e instanceof o?(n={}).eClass=e:n=e,!n.eClass||n.eClass.get("abstract"))throw new Error("Cannot create EObject from undefined or abstract EClass");return new o(n)}};e.exports&&(t=e.exports=r),t.Ecore=r;var a={on:function(e,t,n){var i,r;if(!t)return this;for(e=e.split(/\s+/),i=this._callbacks||(this._callbacks={});r=e.shift();)(i[r]||(i[r]=[])).push(t,n);return this},off:function(e,t,n){var r,a,o,s;if(!(a=this._callbacks))return this;if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(/\s+/):i.keys(a);r=e.shift();)if((o=a[r])&&(t||n))for(s=o.length-2;s>=0;s-=2)t&&o[s]!==t||n&&o[s+1]!==n||o.splice(s,2);else delete a[r];return this},trigger:function(e){var t,n,i,r,a,o,s,c;if(!(n=this._callbacks))return this;for(c=[],e=e.split(/\s+/),r=1,a=arguments.length;r<a;r++)c[r-1]=arguments[r];for(;t=e.shift();){if((s=n.all)&&(s=s.slice()),(i=n[t])&&(i=i.slice()),i)for(r=0,a=i.length;r<a;r+=2)i[r].apply(i[r+1]||this,c);if(s)for(o=[t].concat(c),r=0,a=s.length;r<a;r+=2)s[r].apply(s[r+1]||this,o)}return this}},o=function(e){return e||(e={}),this.eClass=e.eClass,this.values={},e._&&(this._=e._),s(this),l(this,e),p(this),this};function s(e){var t=e.eClass;if(t){var n=t.get("eAllStructuralFeatures");i.each(n,(function(t){c(e,t)}))}}function c(e,t){if(e&&t){var n=t.get("name"),i=t.values.defaultValue,a=t.get("upperBound"),o=!0===t.values.derived,s=(t.values.containment,e.values[n]);null==s&&(o?e.values[n]=t.values._:1!==a&&a?s instanceof r.EList?s._setFeature(t):t.isTypeOf("EAttribute")?e.values[n]=[]:e.values[n]=new r.EList(e,t):e.values[n]=null==i?null:0===i?0:!1!==i&&i)}}function u(e,t){return i.find(e.get("eAllStructuralFeatures"),(function(e){return e.values.name===t}))}function l(e,t){if(e.eClass){var n=function(e,t){return"function"==typeof t||t instanceof o?t:r.create(e,t)};i.each(t,(function(t,a){var o=u(this.eClass,a);o&&void 0!==t&&(1===o.get("upperBound")?function(t,i,r,a){r?e.set(t,n(a,i)):e.set(t,i)}(a,t,o.eClass===r.EReference,o.get("eType")):function(t,r,a,o){var s=i.isArray(r)?r:[r];i.each(s,(function(i){a?e.get(t).add(n(o,i)):e.get(t).push(i)}))}(a,t,o.eClass===Z,o.get("eType")))}),e)}}function p(e){if(e&&e.eClass){var t=function e(t){var n=t.get("eOperations").array(),r=t.get("eAllSuperTypes");return i.flatten(i.union(n||[],i.map(r||[],(function(t){return e(t)}))))}(e.eClass);t&&i.each(t,(function(t){e[t.get("name")]=t._}))}}r.EObjectPrototype={setEClass:function(e){return this.eClass=e,s(this),l(this,this.values),p(this),this},create:function(e){if("EClass"===this.eClass.get("name"))return r.create(this,e)},has:function(e){return this.values.hasOwnProperty(e)||u(this.eClass,e)},isSet:function(e){if(!this.has(e))return!1;if(!this.eClass)return!1;var t=this.get(e);return t instanceof d?t.size()>0:null!=t},set:function(e,t){var n,r,a,o;if(null===e)return this;e.eClass&&(e=e.get("name")),i.isObject(e)||(r=e,(e={})[r]=t);var s=this.eResource();for(n in e)if(void 0!==(a=e[n])&&this.has(n)){this.isSet(n)&&this.unset(n);var c=u(this.eClass,n),l=c.get("containment");"containment"===n&&"string"==typeof a&&"EReference"===this.eClass.values.name&&(a="true"===a.toLowerCase()),this.values[n]=a,l&&(a.eContainingFeature=c,a.eContainer=this),o="change:"+n,this.trigger("change "+o,n),s&&s.trigger("change",this)}return this},unset:function(e,t){var n,r,a;if(null===e)return this;e.eClass&&(e=e.get("name")),i.isObject(e)||(r=e,(e={})[r]=void 0);var o=this.eResource();for(n in e)if(this.has(n)&&this.isSet(n)){var s=u(this.eClass,n),c=!0===Boolean(s.get("containment")),l=this.values[n];c&&(l.eContainingFeature=void 0,l.eContainer=void 0),this.values[n]=void 0,a="unset:"+n,this.trigger("unset "+a,n),o&&o.trigger("change",this)}return this},get:function(e){if(!e)return null;var t=e.eClass?e.get("name"):e;!i.has(this.values,t)&&this.has(t)&&c(this,u(this.eClass,t));var n=this.values[t];return"function"==typeof n?n.apply(this):n},isTypeOf:function(e){if(!e||!this.eClass)return!1;var t=e.eClass?e.get("name"):e;return this.eClass.get("name")===t},isKindOf:function(e){if(!e||!this.eClass)return!1;if(this.isTypeOf(e))return!0;var t=e.eClass?e.get("name"):e,n=this.eClass.get("eAllSuperTypes");return i.any(n,(function(e){return e.get("name")===t}))},eResource:function(){return this.isKindOf("Resource")?this:this.eContainer?this.eContainer.isKindOf("Resource")?this.eContainer:this.eContainer.eResource():null},eContents:function(){if(!this.eClass)return[];if(i.isUndefined(this.__updateContents)){this.__updateContents=!0;var e=this.eResource();if(e){var t=this;e.on("add remove",(function(){t.__updateContents=!0}))}}if(this.__updateContents){var n=this.eClass.get("eAllStructuralFeatures"),r=i.filter(n,(function(e){return e.isTypeOf("EReference")&&e.get("containment")&&this.isSet(e.get("name"))}),this),a=null;this.__eContents=i.flatten(i.map(r,(function(e){return(a=this.get(e.get("name")))?a.array?a.array():a:[]}),this)),this.__updateContents=!1}return this.__eContents},eURI:function(){var e=this.eResource();return(e?e.get("uri"):"")+"#"+this.fragment()},fragment:function(){var e,t,n,i=this.eContainer,r=this.eClass.get("eIDAttribute");return i?r?this.get(r.get("name")):this._id?this._id:this.isKindOf("EModelElement")?i?i.isKindOf("Resource")?(t=i.get("contents")).size()>1?"/"+t.indexOf(this):"/":i.fragment()+"/"+this.get("name"):"/":(i.isKindOf("Resource")?n=(t=i.get("contents")).size()>1?"/"+t.indexOf(this):"/":(e=this.eContainingFeature)&&(n=i.fragment()+"/@"+e.get("name"),1!==e.get("upperBound")&&(n+="."+i.get(e.get("name")).indexOf(this))),n):null}},i.extend(o.prototype,r.EObjectPrototype,a);var d=r.EList=function(e,t){return this._internal=[],this._owner=e,this._size=0,this._setFeature(t),this};d.prototype={_setFeature:function(e){e&&(this._feature=e,this._isContainment=this._feature.get("containment"),i.each(this._internal,(function(e){this._isContainment&&(e.eContainer=this._owner,e.eContainingFeature=this._feature)}),this))},add:function(e){if(!e||!e instanceof o)return this;this._isContainment&&(e.eContainingFeature=this._feature,e.eContainer=this._owner),this._size++,this._internal.push(e);var t=this._owner.eResource(),n="add";return this._feature&&(n+=":"+this._feature.get("name")),this._owner.trigger(n,e),t&&t.trigger("add",this),this},addAll:function(){return i.each(i.flatten(arguments||[]),(function(e){this.add(e)}),this),this},remove:function(e){var t="remove",n=this._owner.eResource();return this._internal=i.without(this._internal,e),this._size=this._size-1,this._feature&&(t+=":"+this._feature.get("name")),this._owner.trigger(t,e),n&&n.trigger("remove",this),this},clear:function(){for(var e=this.array(),t=0;t<e.length;t++)this.remove(e[t]);return this},size:function(){return this._size},at:function(e){if(this._size<e)throw new Error("Index Out Of Range");return this._internal[e]},array:function(){return this._internal},first:function(){return i.first(this._internal)},last:function(){return i.last(this._internal)},rest:function(e){return i.rest(this._internal,e)},each:function(e,t){return i.each(this._internal,e,t)},filter:function(e,t){return i.filter(this._internal,e,t)},find:function(e,t){return i.find(this._internal,e,t)},map:function(e,t){return i.map(this._internal,e,t)},reject:function(e,t){return i.reject(this._internal,e,t)},contains:function(e){return i.contains(this._internal,e)},indexOf:function(e){return i.indexOf(this._internal,e)}};var h=new o,f=new o,g=new o,m=new o,v=new o,b=new o,y=new o,C=new o,O=new o,x=new o,S=new o,k=new o,w=new o,E=new o,I=new o,T=new o,_=new o;h.eClass=h,h.values={name:"EClass",abstract:!1,interface:!1,eStructuralFeatures:new r.EList(h),eOperations:new r.EList(h),eSuperTypes:new r.EList(h),eAllSuperTypes:function(){if(!this._eAllSuperTypes){var e=function(e){var t=e.get("eSuperTypes").array(),n=i.flatten(i.map(t,(function(e){return e.get("eAllSuperTypes")})));return i.union(n,t)};this.on("add:eSuperTypes remove:eSuperTypes",(function(){this._eAllSuperTypes=e(this)}),this),this._eAllSuperTypes=e(this)}return this._eAllSuperTypes},eAllSubTypes:function(){var e,t,n;return e=(n=this.eResource().get("resourceSet"))?n.elements("EClass"):r.EPackage.Registry.elements("EClass"),t=i.filter(e,(function(e){return i.contains(e.get("eAllSuperTypes"),this)}),this),i.isArray(t)?t:[]},eReferences:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EReference")})),e},eAttributes:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EAttribute")})),e},eIDAttribute:function(){var e,t;return e=this.get("eAllAttributes"),t=i.filter(e,(function(e){return!0===e.get("iD")})),i.isArray(t)?t[0]:null},eAllStructuralFeatures:function(){var e,t,n,r;return r=(e=this).get("eAllSuperTypes"),n=e.values.eStructuralFeatures.array(),t=i.flatten(i.map(r||[],(function(e){return e.values.eStructuralFeatures.array()}))),i.union(t||[],n||[])},eAllAttributes:function(){var e=this.get("eAllStructuralFeatures"),t=i.filter(e||[],(function(e){return e.eClass===r.EAttribute}));return t},eAllContainments:function(){var e=this.get("eAllStructuralFeatures"),t=i.filter(e,(function(e){return e.eClass===r.EReference&&e.get("containment")}));return t},eAllReferences:function(){var e=this.get("eAllStructuralFeatures"),t=i.filter(e,(function(e){return e.eClass===r.EReference&&!e.get("containment")}));return t}},w.values={name:"abstract",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},E.values={name:"interface",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},I.values={name:"eStructuralFeatures",lowerBound:0,upperBound:-1,containment:!0},_.values={name:"eSuperTypes",lowerBound:0,upperBound:-1,containment:!1},T.values={name:"eOperations",lowerBound:0,upperBound:-1,containment:!0},h.get("eStructuralFeatures").add(w).add(E).add(_).add(I).add(T);var j=new o;j.values={name:"eAllStructuralFeatures",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllStructuralFeatures};var P=new o;P.values={name:"eAllSuperTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllSuperTypes};var A=new o;A.values={name:"eAllSubTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllSubTypes};var M=new o;M.values={name:"eAllAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllAttributes};var D=new o;D.values={name:"eAllContainments",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllContainments};var R=new o;R.values={name:"eAllReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAllReferences};var L=new o;L.values={name:"eReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eReferences};var F=new o;F.values={name:"eAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:h.values.eAttributes};var N=new o;N.values={name:"eIDAttribute",lowerBound:0,upperBound:1,derived:!0,containment:!1,_:h.values.eIDAttribute},h.get("eStructuralFeatures").add(j).add(P).add(A).add(M).add(R).add(D).add(F).add(L).add(N),h.getEStructuralFeature=function(e){var t;return t=e.eClass?e.get("name"):e,i.find(this.get("eAllStructuralFeatures"),(function(e){return e.get("name")===t}))};var B=new o;B.values={name:"getEStructuralFeature",lowerBound:0,upperBound:1,eParameters:new r.EList(this)},B._=h.getEStructuralFeature,h.get("eOperations").add(B),h.values.eStructuralFeatures._setFeature(I),h.values.eSuperTypes._setFeature(_),h.values.eOperations._setFeature(T);var U=h.create(),z=h.create(),V=h.create(),G=h.create(),H=h.create(),W=h.create(),Y=h.create(),X=h.create(),q=h.create(),K=h.create(),J=h.create(),Z=h.create(),Q=h.create(),$=h.create(),ee=h.create(),te=h.create(),ne=h.create();w.eClass=J,E.eClass=J,I.eClass=Z,I.values.eType=K,_.eClass=Z,_.values.eType=h,T.eClass=Z,T.values.eType=Q,j.eClass=Z,j.values.eType=K,P.eClass=Z,P.values.eType=h,A.eClass=Z,A.values.eType=h,M.eClass=Z,M.values.eType=J,R.eClass=Z,R.values.eType=Z,D.eClass=Z,D.values.eType=Z,F.eClass=Z,F.values.eType=J,L.eClass=Z,L.values.eType=Z,N.eClass=Z,N.values.eType=J,B.eClass=Q,B.values.eType=K,z.get("eSuperTypes").add(U),V.get("eSuperTypes").add(z),G.get("eSuperTypes").add(z),H.get("eSuperTypes").add(G),W.get("eSuperTypes").add(G),h.get("eSuperTypes").add(W),Y.get("eSuperTypes").add(W),X.get("eSuperTypes").add(Y),ee.get("eSuperTypes").add(G),q.get("eSuperTypes").add(G),K.get("eSuperTypes").add(q),J.get("eSuperTypes").add(K),Z.get("eSuperTypes").add(K),Q.get("eSuperTypes").add(q),$.get("eSuperTypes").add(q),ne.get("eSuperTypes").add(G),te.get("eSuperTypes").add(U);var ie=new o,re=new o,ae=new o,oe=new o,se=new o,ce=new o,ue=new o;ie.eClass=Z,ie.values={name:"eType",lowerBound:0,upperBound:1,containment:!1,eType:W},re.eClass=J,re.values={name:"ordered",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},ae.eClass=J,ae.values={name:"unique",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},oe.eClass=J,oe.values={name:"lowerBound",lowerBound:0,upperBound:1,defaultValueLiteral:"0",defaultValue:0,eType:g},se.eClass=J,se.values={name:"upperBound",lowerBound:0,upperBound:1,defaultValueLiteral:"1",defaultValue:1,eType:g},ce.eClass=J,ce.values={name:"many",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1!==this.get("upperBound")}},ue.eClass=J,ue.values={name:"required",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1===this.get("lowerBound")}},q.get("eStructuralFeatures").add(ie).add(re).add(ae).add(oe).add(se).add(ce).add(ue);var le=new o;le.eClass=Z,le.values={name:"eAnnotations",eType:V,lowerBound:0,upperBound:-1,containment:!0},z.get("eStructuralFeatures").add(le);var pe=new o;pe.eClass=J,pe.values={name:"name",lowerBound:0,upperBound:1,eType:f},G.get("eStructuralFeatures").add(pe);var de=J.create({name:"changeable",eType:m}),he=J.create({name:"volatile",eType:m}),fe=J.create({name:"transient",eType:m}),ge=J.create({name:"defaultValueLiteral",eType:f}),me=J.create({name:"defaultValue",eType:k,derived:!0}),ve=J.create({name:"unsettable",eType:m}),be=J.create({name:"derived",eType:m});K.get("eStructuralFeatures").add(de).add(he).add(fe).add(ge).add(me).add(ve).add(be),me.set({derived:!0});var ye=J.create({name:"containment",eType:m}),Ce=J.create({name:"container",eType:m}),Oe=J.create({name:"resolveProxies",eType:m}),xe=Z.create({name:"eOpposite",eType:Z});Z.get("eStructuralFeatures").add(ye).add(Ce).add(Oe).add(xe);var Se=J.create({name:"iD",eType:m});J.get("eStructuralFeatures").add(Se),U.set({name:"EObject"}),z.set({name:"EModelElement",abstract:!0}),V.set({name:"EAnnotation"}),G.set({name:"ENamedElement",abstract:!0}),H.set({name:"EPackage"}),W.set({name:"EClassifier",abstract:!0}),Y.set({name:"EDataType"}),X.set({name:"EEnum"}),q.set({name:"ETypedElement",abstract:!0}),K.set({name:"EStructuralFeature",abstract:!0}),J.set({name:"EAttribute"}),Z.set({name:"EReference"}),Q.set({name:"EOperation"}),$.set({name:"EParameter"}),ee.set({name:"EEnumLiteral"}),ne.set({name:"ETypeParameter"}),te.set({name:"EGenericType"});var ke=Z.create({name:"eParameters",eType:$,containment:!0,lowerBound:0,upperBound:-1});Q.get("eStructuralFeatures").add(ke);var we=Z.create({name:"eLiterals",eType:ee,containment:!0,lowerBound:0,upperBound:-1});X.get("eStructuralFeatures").add(we),ee.get("eStructuralFeatures").add(J.create({name:"literal",eType:f})).add(J.create({name:"value",eType:g}));var Ee=h.create({name:"EStringToStringMapEntry"}),Ie=J.create({name:"key",lowerBound:0,upperBound:1,eType:f}),Te=J.create({name:"value",lowerBound:0,upperBound:1,eType:f});Ee.get("eStructuralFeatures").add(Ie).add(Te);var _e=J.create({name:"source",upperBound:1,lowerBound:0,eType:f}),je=Z.create({name:"details",upperBound:-1,lowerBound:0,containment:!0,eType:Ee});V.get("eStructuralFeatures").add(_e).add(je);var Pe=Z.create({name:"eTypeParameter",eType:ne,containment:!1,lowerBound:0,upperBound:1}),Ae=Z.create({name:"eUpperBound",containment:!0,eType:te}),Me=Z.create({name:"eLowerBound",containment:!0,eType:te}),De=Z.create({name:"eTypeArguments",containment:!0,upperBound:-1,eType:te}),Re=Z.create({name:"eClassifier",eType:W});te.get("eStructuralFeatures").add(Pe).add(Ae).add(Me).add(De).add(Re);var Le=Z.create({name:"eGenericType",upperBound:1,containment:!0,eType:te});q.get("eStructuralFeatures").add(Le);var Fe=Z.create({name:"eGenericSuperTypes",upperBound:-1,containment:!0,eType:te});h.get("eStructuralFeatures").add(Fe);var Ne=Z.create({name:"eGenericExceptions",upperBound:-1,containment:!0,eType:te});Q.get("eStructuralFeatures").add(Ne);var Be=Z.create({name:"eBounds",containment:!0,upperBound:-1,eType:te}),Ue=Z.create({name:"eGenericTypes",containment:!1,upperBound:-1,eType:te});ne.get("eStructuralFeatures").add(Be).add(Ue);var ze=Z.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});W.get("eStructuralFeatures").add(ze);var Ve=Z.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});Q.get("eStructuralFeatures").add(Ve),f.eClass=Y,f.set({name:"EString"}),g.eClass=Y,g.set({name:"EInt"}),m.eClass=Y,m.set({name:"EBoolean"}),b.eClass=Y,b.set({name:"EDate"}),v.eClass=Y,v.set({name:"EDouble"}),y.eClass=Y,y.set({name:"EIntegerObject"}),C.eClass=Y,C.set({name:"EFloatObject"}),O.eClass=Y,O.set({name:"ELongObject"}),x.eClass=Y,x.set({name:"EMap"}),S.eClass=Y,S.set({name:"EDiagnosticChain"}),k.eClass=Y,k.set({name:"JSObject"}),r.ELong=Y.create({name:"ELong"}),r.EFloat=Y.create({name:"EFloat"}),r.EShort=Y.create({name:"EShort"}),r.EDoubleObject=Y.create({name:"EDoubleObject"});var Ge=Z.create({name:"eClassifiers",lowerBound:0,upperBound:-1,containment:!0,eType:W}),He=Z.create({name:"eSubPackages",lowerBound:0,upperBound:-1,containment:!0,eType:H});H.get("eStructuralFeatures").add(J.create({name:"nsURI",eType:f})).add(J.create({name:"nsPrefix",eType:f})).add(Ge).add(He),r.EcorePackage=H.create({name:"ecore",nsPrefix:"ecore",nsURI:"http://www.eclipse.org/emf/2002/Ecore"}),r.EcorePackage.get("eClassifiers").add(U).add(z).add(V).add(G).add(H).add(W).add(h).add(Y).add(q).add(K).add(J).add(Z).add(Q).add($).add(X).add(ee).add(ne).add(te).add(Ee).add(f).add(m).add(g).add(v).add(y).add(C).add(O).add(x).add(S).add(b).add(r.EShort).add(r.EFloat).add(r.ELong).add(r.EDoubleObject).add(k),r.EObject=U,r.EModelElement=z,r.EClass=h,r.EClassifier=W,r.EAnnotation=V,r.EStringToStringMapEntry=Ee,r.EPackage=H,r.ETypedElement=q,r.ENamedElement=G,r.EStructuralFeature=K,r.EAttribute=J,r.EReference=Z,r.EEnum=X,r.EEnumLiteral=ee,r.EDataType=Y,r.EOperation=Q,r.EParameter=$,r.ETypeParameter=ne,r.EGenericType=te,r.EString=f,r.EBoolean=m,r.EInt=g,r.EDouble=v,r.EIntegerObject=y,r.EFloatObject=C,r.ELongObject=O,r.EMap=x,r.EDiagnosticChain=S,r.EDate=b,r.JSObject=k,r.EPackage.Registry={_ePackages:{},getEPackage:function(e){return this._ePackages[e]},register:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(!e.isSet("nsURI"))throw new Error("Cannot register EPackage without nsURI");e.get("eSubPackages").each((function(e){register(e)})),this._ePackages[e.get("nsURI")]=e})),ePackages:function(){return i.values(this._ePackages)},elements:function(e){var t=this.ePackages(),n=[t,i.map(t,(function(e){return function e(t){return i.map(t.eContents(),(function(t){return[t,e(t)]}))}(e)}))];return n=i.flatten(n),n=i.filter(n,(function(t){return!e||(e.eClass?t.eClass===e:t.eClass.get("name")===e)}))}},r.EPackage.Registry.register(r.EcorePackage),r.JSON={dataType:"json",contentType:"application/json",parse:function(e,t){i.isString(t)&&(t=JSON.parse(t));var n=[],a=e.get("resourceSet")||r.ResourceSet.create();function o(e,t){var s;if(e&&(t||e.eClass)){e.eClass&&(t=a.getEObject(e.eClass));try{s=r.create(t)}catch(c){throw new Error("Cannot parse or cannot find EClass for object"+JSON.stringify(e))}s&&(e._id&&(s._id=e._id),t===r.EAnnotation?function(e,t){if(e.source&&t.set("source",e.source),e.details)if(i.isArray(e.details));else{var n=t.get("details");i.each(e.details,(function(e,t){n.add(r.EStringToStringMapEntry.create({key:t,value:e}))}))}}(e,s):i.each(t.get("eAllStructuralFeatures"),function(e,t){return e&&t?function(r){if(r&&!r.get("derived")){var a=r.get("name"),s=e[a];if(void 0!==s)if(r.isTypeOf("EAttribute"))t.set(a,s);else if(r.get("containment")){var c=r.get("eType");1===r.get("upperBound")?t.set(a,o(s,c)):i.each(s||[],(function(e){t.get(a).add(o(e,c))}))}else n.push({parent:t,feature:r,value:s})}}:function(){}}(e,s)))}return s}i.isArray(t)?i.each(t,(function(t){e.add(o(t))})):e.add(o(t)),function(){var t=Ke(e);function r(e,n,i,r){var o=i.$ref,s=t[o];s||(s=a.getEObject(o)),s&&(r?e.get(n.get("name")).add(s):e.set(n.get("name"),s))}i.each(n,(function(e){var t=e.parent,n=e.feature,a=e.value;1===n.get("upperBound")?r(t,n,a,!1):i.each(i.isArray(a)?a:[a],(function(e){r(t,n,e,!0)}))}))}()},to:function(e){var t,n=e.get("contents").array(),a={};function o(e,t){var n=t.eResource(),i=e.eResource(),r=n!==i;if(n&&i){a[n.get("uri")]||(a[n.get("uri")]=Ke(n));var o=a[n.get("uri")];for(var s in o)if(o[s]===t)return r?n.get("uri")+"#"+s:s;return null}}function s(e,t,n){return!0===n?c(t):{$ref:o(e,t),eClass:t.eClass.eURI()}}function c(e){var t=e.eClass,n=e.values,a={eClass:t.eURI()};return e._id&&(a._id=e._id),t===r.EAnnotation?function(e,t){e.values.source&&(t.source=e.values.source),e.values.details&&e.values.details.size()>0&&(t.details={},e.values.details.each((function(e){var n=e.get("key"),i=e.get("value");n&&(t.details[n]=i)})))}(e,a):i.each(n,function(e,t){return e&&t?function(n,i){if("_"!==i[0]){var r=e.eClass.getEStructuralFeature(i),a=e.isSet(i);if(r&&a&&!r.get("derived")){var o=n,c=r.get("name"),u=1!==r.get("upperBound"),l=r.get("containment");r.isTypeOf("EAttribute")?t[c]=o:u?(t[c]=[],o.each((function(n){t[c].push(s(e,n,l))}))):t[c]=s(e,o,l)}}}:function(){}}(e,a)),a}if(a[e.get("uri")]=Ke(e),1===n.length){t=c(n[0])}else{t=[];for(var u=0;u<n.length;u++)t.push(c(n[u]))}return t}};var We=r.Resource=r.EClass.create({name:"Resource",eSuperTypes:[r.EObject],eStructuralFeatures:[{eClass:r.EAttribute,name:"uri",lowerBound:1,upperBound:1,eType:r.EString},{eClass:r.EReference,name:"contents",upperBound:-1,containment:!0,eType:r.EObject},{eClass:r.EReference,name:"resourceSet",upperBound:1,lowerBound:0,eType:r.ResourceSet}],eOperations:[{eClass:r.EOperation,name:"add",_:function(e){return e||e.eClass?(e.eContainer=this,this.get("contents").add(e),this):this}},{eClass:r.EOperation,name:"clear",_:function(){return this.get("contents").clear(),this}},{eClass:r.EOperation,name:"addAll",_:function(e){return i.isArray(e)&&i.each(e,(function(e){this.add(e)}),this),this}},{eClass:r.EOperation,name:"getEObject",eType:r.EObject,_:function(e){return e?this._index()[e]?this._index()[e]:void 0:null}},{eClass:r.EOperation,name:"each",_:function(e,t){return this.get("contents").each(e,t)}},{eClass:r.EOperation,name:"to",_:function(e,t){return e&&"function"==typeof e.to?e.to(this,t):r.JSON.to(this)}},{eClass:r.EOperation,name:"parse",_:function(e,t){return t&&"function"==typeof t.parse?t.parse(this,e):r.JSON.parse(this,e),this}},{eClass:r.EOperation,name:"save",_:function(e,t){t||(t={});var n,i=t.format?t.format:r.JSON;try{n=this.to(i)}catch(a){e(null,a)}e(n,null)}},{eClass:r.EOperation,name:"load",_:function(e,t,n){n||(n={});var i=n.format||r.JSON;this.get("resourceSet");try{this.parse(e,i)}catch(a){t(null,a)}this.trigger("change"),"function"==typeof t&&t(this,null)}},{eClass:r.EOperation,name:"remove",_:function(){var e=this.get("resourceSet");e&&e.get("resources").remove(this),this.clear()}},{eClass:r.EOperation,name:"_index",eType:k,_:function(){if(i.isUndefined(this.__updateIndex)){var e=this;e.__updateIndex=!0,e.on("add remove",(function(){e.__updateIndex=!0}))}return this.__updateIndex&&(this.__index=Ke(this),this.__updateIndex=!1),this.__index}}]}),Ye=function(){this.uriMap={}};Ye.prototype={map:function(e,t){this.uriMap[e]=t},normalize:function(e){var t=e.split("#")[0],n=this.uriMap[t];if(n)return n;var i,r,a=t.lastIndexOf("/")+1;return(i=t.slice(0,a))===t?e:(r=t.slice(a,t.length),this.normalize(i)+r)}};var Xe=r.ResourceSet=r.EClass.create({name:"ResourceSet",eSuperTypes:[r.EObject],eStructuralFeatures:[{eClass:r.EAttribute,name:"uri",upperBound:1,lowerBound:0,eType:r.EString},{eClass:r.EReference,name:"resources",upperBound:-1,containment:!0,eType:We}],eOperations:[{eClass:r.EOperation,eType:r.Resource,upperBound:1,name:"create",_:function(e){var t=i.isObject(e)?e:{uri:e};if(!t.uri)throw new Error("Cannot create Resource, missing URI parameter");var n=this.get("resources").find((function(e){return e.get("uri")===t.uri}));return n||((n=r.Resource.create(t)).set("resourceSet",this),this.get("resources").add(n),this.trigger("add",n),n)}},{eClass:r.EOperation,eType:r.EObject,upperBound:1,name:"getEObject",_:function(e){var t,n=e.split("#"),i=n[0],a=n[1];if(!a)return null;var o=r.EPackage.Registry.getEPackage(i);return o&&((t=o.eResource())||((t=this.create({uri:i})).add(o),this.get("resources").add(t),t.set("resourceSet",this))),t||(t=this.get("resources").find((function(e){return e.get("uri")===i})))?t.getEObject(a):null}},{eClass:r.EOperation,eType:r.EObject,upperBound:-1,name:"elements",_:function(e){var t=function(t){return!e||t.isKindOf(e)},n=this.get("resources").map((function(e){return i.filter(i.values(e._index()),t)}));return i.flatten(n)}},{eClass:r.EOperation,eType:r.JSObject,upperBound:1,name:"uriConverter",_:function(){return this._converter||(this._converter=new Ye),this._converter}},{eClass:r.EOperation,eType:r.JSObject,upperBound:1,name:"toJSON",_:function(){var e={total:this.get("resources").size(),resources:[]};return this.get("resources").each((function(t){e.resources.push({uri:t.get("uri"),length:t.get("contents").size(),contents:t.get("contents").map((function(e){return{eURI:e.eURI(),eClass:e.eClass.eURI()}}))})})),e}},{eClass:r.EOperation,name:"parse",_:function(e){e&&e.resources&&i.each(e.resources,(function(e){e.uri&&resourceSet.create({uri:e.uri})}),this)}}]});We.getEStructuralFeature("resourceSet").set("eType",Xe);var qe=r.EPackage.create({name:"resources",nsPrefix:"resources",nsURI:"http://www.eclipselabs.org/ecore/2012/resources",eClassifiers:[Xe,We]});function Ke(e){var t={},n=e.get("contents").array();if(n.length){var r,a,o=function e(n,r){var a=n.eContents();t[r]=n,i.each(a,(function(t){e(t,t.fragment())}))};if(1===n.length)(r=n[0])._id?o(r,r._id):(a=r.eClass.get("eIDAttribute")||null,o(r,a?r.get(a.get("name")):"/"));else for(var s=0;s<n.length;s++)(r=n[s])._id?o(r,r._id):(a=r.eClass.get("eIDAttribute")||null,o(r,a?r.get(a.get("name")):"/"+s))}return t}function Je(e){return!e.get("abstract")}function Ze(e,t){if(!e)return[];var n=e.eClass.get("eAllContainments");return i.flatten(i.map(n,(function(n){var r=function(e){if(!e||!e.eClass)return[];var t=e.get("eAllSubTypes");return i.filter(i.union([e],t),Je)}(n.get("eType"));return t&&"function"==typeof t?t(e,n,r):r})))}function Qe(e,t){return e?Ze(e.eContainer,t):[]}function $e(e,t,n){return i.map(n,(function(n){return{label:"New "+n.get("name"),owner:e,feature:t,type:n}}))}function et(e){return e.get("name")||""}function tt(e){var t=e.get("eType"),n=e.eClass===r.EOperation,i=t?t.get("name"):null;return e.get("name")+(n?"()":"")+(i?" : "+i:"")}r.Resource.create({uri:r.EcorePackage.get("nsURI")}).add(r.EcorePackage),r.Resource.create({uri:qe.get("nsURI")}).add(qe),r.EPackage.Registry.register(qe),r.Edit={childTypes:Ze,siblingTypes:Qe,childDescriptors:function(e){return Ze(e,$e)},siblingDescriptors:function(e){return Qe(e,$e)},choiceOfValues:function(e,t){if(null==e||null==e.eResource()||null==e.eResource().get("resourceSet"))throw new Error("Bad argument");var n=t.get("eType"),r=e.eResource().get("resourceSet").elements();return i.filter(r,(function(e){return e.isKindOf(n)}))},_get:function(e,t){if(!t||!t.eClass)return null;var n=t.eClass.get("name");return this[n]?"function"==typeof this[n][e]?this[n][e](t):this[n][e]:t.eClass.get("name")},text:function(e){return this._get("text",e)},icon:function(e){return this._get("icon",e)},label:function(e){return this._get("label",e)},EClass:{text:et,label:et,icon:"icon-EClass"},EDataType:{text:et,label:et,icon:"icon-EDataType"},EEnum:{text:et,label:et,icon:"icon-EEnum"},EEnumLiteral:{text:function(e){return e.get("name")+" = "+e.get("value")},label:et,icon:"icon-EEnumLiteral"},EAttribute:{text:tt,label:et,icon:"icon-EAttribute"},EReference:{text:tt,label:et,icon:"icon-EReference"},EOperation:{text:tt,label:et,icon:"icon-EOperation"},EPackage:{text:et,label:et,icon:"icon-EPackage"},EAnnotation:{text:function(e){return e.get("source")},label:function(e){return e.get("source")},icon:"icon-EAnnotation"},EStringToStringMapEntry:{text:function(e){return e.get("key")+" -> "+e.get("value")},label:function(e){return e.get("key")},icon:"icon-EStringToStringMapEntry"},ResourceSet:{text:"resourceSet",label:"",icon:"icon-EObject"},Resource:{text:function(e){return e.get("uri")},label:function(e){return e.get("uri")},icon:"icon-EObject"}},r.sax=n("bnd4"),r.XMI={dataType:"xml",contentType:"application/xml",parse:function(e,t){if(!r.sax)throw new Error("Sax is missing.");var n=r.sax.parser(!0),a=e.get("resourceSet")||r.ResourceSet.create(),o=[];function s(e){var t=e.split(":"),n=t[0],r=t[1];return function(e){var t=i.find(o,(function(t){return t.prefix===e}));return t?t.uri:null}(n)+"#//"+r}function c(e){return function(e){return-1!==e.name.indexOf(":")}(e)?a.getEObject(s(e.name)):function(e){var t;if(e.parent&&e.parent.eObject){var n,i=u.parent.eObject,r=e.name,o=i.eClass.getEStructuralFeature(r);if(o&&o.get){n=o.get("eType");var c=e.attributes["xsi:type"];t=c?a.getEObject(s(c)):n}}return t}(e)}var u,l,p,d=[];n.ontext=function(e){u&&u.waitingForAttributeText&&u.parent.eObject.set(u.name,e)},n.onopentag=function(t){var n,a,s,p,h;if((h=t.attributes)&&i.each(h,(function(e,t){if(-1!==t.indexOf(":")){var n=t.split(":");"xmlns"===n[0]&&o.push({prefix:n[1],uri:e})}})),t.children=[],t.parent=u,t.parent&&t.parent.children.push(t),u=t,n=c(t)){if(u.parent&&u.parent.eObject&&u.parent.eObject.eClass.getEStructuralFeature(t.name).isTypeOf("EAttribute"))t.waitingForAttributeText=!0;else if(a=u.eObject=r.create(n),l||(l=a),i.each(t.attributes,(function(e,t){a.has(t)&&((s=a.eClass.getEStructuralFeature(t)).isTypeOf("EAttribute")?a.set(t,e):d.push({parent:a,feature:s,value:e})),"xmi:id"===t&&(a._id=e)})),t.parent)if((p=t.parent.eObject)&&p.has(t.name))if((s=p.eClass.getEStructuralFeature(t.name)).get("containment"))1===s.get("upperBound")?p.set(t.name,a):p.get(t.name).add(a);else{var f=t.attributes,g=f?f.href:null;g&&d.push({parent:p,feature:s,value:g})}else l&&l!==a&&(e.add(l),l=a)}else if(void 0===n)throw new Error(t.name+" has undefined/invalid eClass.")},n.onclosetag=function(e){var t;u&&u.parent&&(t=u.parent,delete u.parent,u=t)},n.write(t).close(),e.add(l),p=e._index(),i.each(d,(function(e){!function(e,t,n){var r,o=n.split(/\s/),s=1!==t.get("upperBound");"ecore:EDataType"===o[0]&&o.shift(),i.each(o,(function(n){if("#"===n[0]&&(n=n.substring(1,n.length)),"/"===n.substring(0,1)?r=p[n]:null===(r=a.getEObject(n))&&console.log("Warning: "+n+" is an unresolved reference"),r)s?e.get(t.get("name")).add(r):e.set(t.get("name"),r);else if(void 0===r)throw new Error("Undefined reference: "+n)}))}(e.parent,e.feature,e.value)}))},to:function(e,t){var n,a,o="",s=e.get("contents").array(),c=r.Resource.getEStructuralFeature("contents");function u(e,t){var s;o+="<",s=e.eContainingFeature&&e.eContainingFeature!==c?e.eContainingFeature.get("name"):n+":"+e.eClass.get("name"),o+=s,e.eContainer.isKindOf("Resource")?t&&(o+=' xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI"',o+=' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"',o+=" xmlns:"+n+'="'+a+'"'):e.eContainingFeature.get("eType")!==e.eClass&&(o+=' xsi:type="',o+=n+":"+e.eClass.get("name")+'"');var l=e.eClass.get("eAllStructuralFeatures"),p=i.filter(l,(function(t){return!t.get("derived")&&t.isTypeOf("EAttribute")&&e.isSet(t.get("name"))})),d=i.filter(l,(function(t){return!t.get("derived")&&t.isTypeOf("EReference")&&!t.get("containment")&&e.isSet(t.get("name"))}));e._id&&(o+=' xmi:id="'+e._id+'"'),i.each(p,(function(t){var n,i=t.get("name"),r=e.get(i);void 0!==r&&"false"!==r&&(o+=" "+i+'="',o+="string"==typeof r?(n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},r.replace(/[&<>"']/g,(function(e){return n[e]}))):r,o+='"')}));var h=[];if(i.each(d,(function(t){var n=e.get(t.get("name")),a=n instanceof r.EList?n.array():n?[n]:[],s=i.filter(a,(function(t){return t.eResource()!==e.eResource()}));s.length&&h.push({feature:t,refs:s});var c=i.difference(a,s),u=i.map(c,(function(e){return e.fragment()}));u.length&&(o+=" "+t.get("name")+'="'+u.join(" ")+'"')})),0===e.eContents().length&&0===h.length)o+="/>";else{o+=">",i.each(h,(function(e){var t,n=e.feature,r=e.refs,a=n.get("eType").get("abstract");i.each(r,(function(e){o+="<"+n.get("name"),a&&(t=e.eClass.eContainer.get("nsPrefix"),o+=' xsi:type="'+(t?t+":":"")+e.eClass.get("name")+'"'),o+=' href="'+e.eURI()+'" />'}))}));var f=i.filter(l,(function(t){return t.isTypeOf("EReference")&&t.get("containment")&&e.isSet(t.get("name"))}));i.each(f,(function(t){var n=e.get(t.get("name"));1!==t.get("upperBound")?n.each((function(e){u(e)})):u(n)})),o+="</"+s+">"}return o}if(1===s.length)n=s[0].eClass.eContainer.get("nsPrefix"),a=s[0].eClass.eContainer.get("nsURI"),u(s[0],!0);else{var l={};for(var p in s)n=s[p].eClass.eContainer.get("nsPrefix"),a=s[p].eClass.eContainer.get("nsURI"),l[n]=a,u(s[p]);var d="";for(var h in l)d+=" xmlns:"+h+'="'+l[h]+'"';o='<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'+d+">"+o+"</xmi:XMI>"}return o='<?xml version="1.0" encoding="UTF-8"?>\n'+(o=t?function(e){var t=/(>)(<)(\/*)/g,n=/ *([^ ].*[^ ]) *\n/g,i=/(<.+>)(.+\n)/g;e=e.replace(t,"$1\n$2$3").replace(n,"$1\n").replace(i,"$1\n$2");for(var r="",a=e.split("\n"),o=0,s="other",c={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},u=0;u<a.length;u++){var l=a[u],p=Boolean(l.match(/<.+\/>/)),d=Boolean(l.match(/<\/.+>/)),h=Boolean(l.match(/<[^!].*>/)),f=p?"single":d?"closing":h?"opening":"other",g=s+"->"+f;s=f;var m="";o+=c[g];for(var v=0;v<o;v++)m+="    ";r+=m+l+"\n"}return r}(o):o)}}}).call(this)},qMyy:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ne}));var i=n("D57K"),r=n("Jzy8"),a=n("5xGT"),o=n("xnGY"),s=n("hX56"),c=n("J+dc"),u=n("xVbo"),l=n("TLy2"),p=n("oyCe"),d=n("EM62"),h=function(e){function t(t,n){var i=e.call(this)||this;return i.modelSubManager=t,i.dataStore=n,i}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.dataStore.findOneRaw(p.a,{id:this.resourceId}).pipe(Object(c.a)(1),Object(u.a)((function(e){return e&&e.project&&"home"!==e.project})),Object(l.a)((function(t){return e.resultData={projectId:t.project},e.modelSubManager.start(r.C,t.project)})))},t.\u0275fac=function(e){return new(e||t)(d.pc(o.d),d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[o.d,s.b])],t)}(a.b);Object.defineProperty(h,"name",{value:"StartDiagramProjectSubscription"});var f=n("ktZS"),g=n("sEIs"),m=n("8j5Y"),v=function(e){function t(t,n){var i=e.call(this,n)||this;return i.modelSubManager=t,i.router=n,i}return Object(i.e)(t,e),t.prototype.execute=function(){var e=this;return this.resultData=this.data,this.modelSubManager.start(f.a,this.data.status.input.resourceId).pipe(Object(l.a)((function(e){return e.status})),Object(u.a)((function(e){return e.subStatus!==o.f.created})),Object(c.a)(1),Object(m.a)((function(t){e.navigateToRoute(e.data.status),t.subStatus===o.f.errored&&e.log.error("There was an error starting the diagram subscription : "+t.error)})))},t.\u0275fac=function(e){return new(e||t)(d.pc(o.d),d.pc(g.d))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[o.d,g.d])],t)}(a.g);Object.defineProperty(v,"name",{value:"StartDiagramSubscription"});var b=n("yn08"),y=n("C5+t"),C=function(e){function t(t){var n=e.call(this)||this;return n.state=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{status:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return a.m.get("DISABLE_WEBSOCKET_CONNECTION")?["IStateChangeCommand"]:["IStateChangeCommand","IMessageCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this,t=this.data.status.input.action;return this.data={Realtime:{action:""}},t===b.a.Edit&&(this.data.Realtime.action="ACTIVITIES.EDITING"),t===b.a.View&&(this.data.Realtime.action="ACTIVITIES.VIEWING"),this.state.getShared().forEach((function(t){return e.data[t]=e.state.get(t)})),!0},t.\u0275fac=function(e){return new(e||t)(d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[a.Jb])],t)}(y.b);Object.defineProperty(C,"name",{value:"BeginStateSync"});var O=n("qZtG"),x=n("g6G6"),S=n("i9xl"),k=n("6Oco"),w=n("4y1S"),E=function(e){function t(t,n){var i=e.call(this)||this;return i.dataStore=t,i.modelSubManager=n,i}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{collabs:!0,diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.collabs.forEach((function(e){e.addedStatus="pending",e.email=e.email.toLowerCase()}))},t.prototype.execute=function(){return this.dataStore.getModelStore(r.j).storageMergeCollabs(this.data.diagramId,this.data.collabs)},t.prototype.executeResult=function(e){var t=this,n=this.dataStore.getModelStore(r.j),a=[],s=e.collabs;return s.forEach((function(e,n){e&&(a.push(t.modelSubManager.start(w.w,e.id).pipe(Object(l.a)((function(e){return e.status})),Object(u.a)((function(e){return e.subStatus!==o.f.created})),Object(c.a)(1))),t.data&&(s[n].email=t.data.collabs[n].email))})),s.length>0?Object(O.a)(x.a.apply(void 0,Object(i.j)(a)),Object(S.a)((function(){return n.storageMergeCollabs(t.resourceId,s.filter((function(e){return null!==e})))})),Object(S.a)((function(){return t.removePendingCollabs()}))):k.a},t.prototype.revert=function(){return this.removePendingCollabs()},t.prototype.onError=function(e){if(e.code)throw e},t.prototype.removePendingCollabs=function(){return this.dataStore.getModelStore(r.j).storageFilterCollabs(this.resourceId,(function(e){return"pending"===e.addedStatus}))},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b),d.pc(o.d))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b,o.d])],t)}(y.b);Object.defineProperty(E,"name",{value:"AddDiagramCollaborators"});var I=n("ROBh"),T=n("YtkY"),_=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{collabs:!0,diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.getModelStore(r.j).getCollabs(this.data.diagramId).pipe(Object(m.a)((function(t){e.previousData.collabs=t.filter((function(t){return-1!==e.data.collabs.map((function(e){return e.id})).indexOf(t.id)}))})))},t.prototype.execute=function(){var e=this,t=this.dataStore.getModelStore(r.j);return Object(I.a)(this.previousData.collabs).pipe(Object(T.a)((function(t){var n=[];return e.data.collabs.forEach((function(e){var i=t.filter((function(t){return t.id===e.id}))[0];i.role=e.role,n.push(i)})),n})),Object(l.a)((function(n){return t.storageMergeCollabs(e.data.diagramId,n)})))},t.prototype.executeResult=function(e){return this.dataStore.getModelStore(r.j).storageMergeCollabs(this.resourceId,e.collabs)},t.prototype.revert=function(){return this.dataStore.getModelStore(r.j).storageMergeCollabs(this.data.diagramId,this.previousData.collabs)},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(_,"name",{value:"ChangeDiagramCollaborators"});var j=function(e){function t(t,n){var i=e.call(this)||this;return i.dataStore=t,i.modelSubManager=n,i}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0,collabIds:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.getModelStore(r.j).getCollabs(this.data.diagramId).pipe(Object(m.a)((function(t){e.previousData.collabs=t.filter((function(t){return-1!==e.data.collabIds.indexOf(t.id)}))})))},t.prototype.execute=function(){var e=this;return this.dataStore.getModelStore(r.j).storageFilterCollabs(this.data.diagramId,(function(t){return e.data.collabIds.indexOf(t.id)>-1}))},t.prototype.executeResult=function(e){var t=this.dataStore.getModelStore(r.j),n=[];this.previousData&&(n=this.previousData.collabs.filter((function(t){return-1===e.collabIds.indexOf(t.id)})));var i=Object(k.b)();n.length>0&&(i=t.storageMergeCollabs(this.data.diagramId,n));var a=t.storageFilterCollabs(this.resourceId,(function(t){return e.collabIds.indexOf(t.id)>-1})),o=this.stopSubscriptions(e.collabIds);return Object(x.a)(i,a,o)},t.prototype.revert=function(){return this.dataStore.getModelStore(r.j).storageMergeCollabs(this.data.diagramId,this.previousData.collabs)},t.prototype.stopSubscriptions=function(e){var t=this;return Object(I.a)(e).pipe(Object(l.a)((function(e){var n=[];return e.forEach((function(e){e&&n.push(t.modelSubManager.stop(e))})),x.a.apply(void 0,Object(i.j)(n))})))},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b),d.pc(o.d))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b,o.d])],t)}(y.b);Object.defineProperty(j,"name",{value:"RemoveDiagramCollaborators"});var P=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!0},t.prototype.executeResult=function(e){return this.dataStore.getModelStore(r.j).replaceOwner(this.resourceId,e.owner)},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(P,"name",{value:"TransferDiagramOwnership"});var A=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0,lastChangeId:!1,name:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!0},t.prototype.executeResult=function(e){var t=this.dataStore.getModelStore(r.j);return e.snapshot?t.insertHistoryItem(this.resourceId,e.snapshot):t.renameHistoryItem(this.resourceId,this.data.lastChangeId,this.data.name)},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(A,"name",{value:"CreateDiagramSnapshot"});var M=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{privacy:!0,diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.getModelStore(r.j).getPrivacy(this.data.diagramId).pipe(Object(m.a)((function(t){return e.previousData.privacy=t})))},t.prototype.execute=function(){var e=this,t=this.dataStore.getModelStore(r.j);return Object(I.a)(this.previousData.privacy).pipe(Object(T.a)((function(t){return t.role=e.data.privacy.role,t.level=e.data.privacy.level,t})),Object(l.a)((function(n){return t.storgaeUpdatePrivacy(e.data.diagramId,n)})))},t.prototype.executeResult=function(e){return this.dataStore.getModelStore(r.j).storgaeUpdatePrivacy(this.resourceId,e.privacy)},t.prototype.revert=function(){return this.dataStore.getModelStore(r.j).storgaeUpdatePrivacy(this.data.diagramId,this.previousData.privacy)},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(M,"name",{value:"ChangeDiagramPrivacy"});var D=function(e){function t(t,n,i){var r=e.call(this)||this;return r.modelSubManager=t,r.dataStore=n,r.state=i,r}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.dataStore.findOneRaw(p.a,{id:this.resourceId}).pipe(Object(c.a)(1),Object(u.a)((function(e){return!!(e&&e.collabs&&e.collabs.length>0)})),Object(l.a)((function(t){return x.a.apply(void 0,Object(i.j)(t.collabs.map((function(t){return t.role===r.g.OWNER&&t.id!==e.state.get("CurrentUser")?e.modelSubManager.start(w.z,t.id):e.modelSubManager.start(w.w,t.id)}))))})))},t.\u0275fac=function(e){return new(e||t)(d.pc(o.d),d.pc(s.b),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[o.d,s.b,a.Jb])],t)}(a.b);Object.defineProperty(D,"name",{value:"StartDiagramCollabSubscriptions"});var R=n("s2Ay"),L=n("QoSw"),F=n("GoAz"),N=n("etrl"),B=n.n(N),U=n("19Zn"),z=n("Bbfy"),V=function(e){function t(t,n,i,r,a){var o=e.call(this)||this;return o.ll=t,o.resources=n,o.notifierController=i,o.translate=r,o.state=a,o.maxClientExportWidthOrHeight=6e3,o.maxServerExportWidth=32e3,o.notificationMessages=new z.a(o.translate),o}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"isOffline",{get:function(){return this.state.get(y.c)===y.c.OFFLINE},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.triggerDownload()},t.prototype.prepareSvgData=function(){var e=this,t=this.ll.forCurrentObserver(this.eventData.scenario===a.A.PREVIEW),n=this.createDiagramSVGView(t);return t.pipe(Object(c.a)(1),Object(l.a)((function(e){return e.getDiagramOnce()})),Object(l.a)((function(t){return Object(O.a)(Object(S.a)((function(){return n.populateDiagram()})),Object(S.a)((function(){var i=0===e.state.get("Selected").length?void 0:e.state.get("Selected");return n.toSvg(i).pipe(Object(c.a)(1),Object(T.a)((function(e){return{svg:e,name:t.name,id:t.id}})))})))})))},t.prototype.createDiagramSVGView=function(e){return new U.n(e,this.resources)},t.prototype.triggerDownload=function(){if("file"===this.data.format){var e=new Blob([this.data.content],{type:this.data.type});return B()(e,this.data.name),Object(I.a)(!0)}if("blob"===this.data.format)return B()(this.data.content,this.data.name),Object(I.a)(!0)},t.prototype.isDiagramExceededMaxClientExport=function(e,t){return e>this.maxClientExportWidthOrHeight||t>this.maxClientExportWidthOrHeight},t.prototype.showExportNotification=function(){var e=this.notificationMessages.getNotificationMessage(z.b.IMAGE_EXPORT_STARTED);this.notifierController.show(z.b.IMAGE_EXPORT_STARTED,e.component,e.type,e.options,e.collapsed)},t.prototype.showLargeExportNeedInternetNotification=function(){var e=this.notificationMessages.getNotificationMessage(z.b.IMAGE_EXPORT_OFFLINE);this.notifierController.show(z.b.IMAGE_EXPORT_OFFLINE,e.component,e.type,e.options,e.collapsed)},t.prototype.showErrorNotification=function(){var e=this.notificationMessages.getNotificationMessage(z.b.IMAGE_EXPORT_FAILED);this.notifierController.show(z.b.IMAGE_EXPORT_FAILED,e.component,e.type,e.options,e.collapsed)},t.prototype.hideExportNotification=function(){this.notifierController.hide(z.b.IMAGE_EXPORT_STARTED)},t.prototype.fetchDiagramFromServer=function(e,t){var n=this,i=Math.min(this.maxServerExportWidth,Math.round(t));return Object(I.a)(this.isOffline).pipe(Object(u.a)((function(e){return e&&n.showLargeExportNeedInternetNotification(),!e})),Object(l.a)((function(){return n.prepareSvgData().pipe(Object(m.a)((function(){return n.showExportNotification()})),Object(l.a)((function(t){return Object(F.a)(fetch(a.m.get("SVG_TO_RASTER_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,width:i,svg:t.svg,id:t.id})}))})),Object(l.a)((function(e){return Object(F.a)(e.blob())})))})))},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.W),d.pc(a.kb),d.pc(R.e),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.W,a.kb,R.e,a.Jb])],t)}(a.b);Object.defineProperty(V,"name",{value:"AbstractDiagramExportCommand"});var G=function(e){function t(t,n,i,r,a){var o=e.call(this,t,i,r,a,n)||this;return o.state=n,o}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var t=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(l.a)((function(e){var n=t.state.get("DiagramCanvas"),i=0===t.state.get("Selected").length?e.getBounds():e.getBounds(t.state.get("Selected")),r=i.width+40,a=i.height+40;if(t.isDiagramExceededMaxClientExport(r,a))return t.fetchDiagramFromServer("png",2*r).pipe(Object(T.a)((function(t){return{name:e.name,blob:t}})));n.cache(i.x-20,i.y-20,r,a,2);var o=n.getCacheDataURL();return n.uncache(),Object(I.a)({name:e.name,blob:o})})),Object(m.a)((function(e){t.data={content:e.blob,name:e.name+".png",type:"image/png",format:"blob"}})),Object(l.a)((function(){return e.prototype.execute.call(t)}))).subscribe({complete:function(){return t.hideExportNotification()},error:function(){t.hideExportNotification(),t.showErrorNotification()}}),Object(I.a)({})},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.Jb),d.pc(a.W),d.pc(a.kb),d.pc(R.e))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.Jb,a.W,a.kb,R.e])],t)}(V);Object.defineProperty(G,"name",{value:"ExportAsPng"});var H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.prepareSvgData().pipe(Object(m.a)((function(t){return e.data={content:t.svg,name:t.name+".svg",type:"image/svg+xml",format:"file"}})))},t.\u0275fac=function(e){return W(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)()],t)}(V),W=d.nc(H);Object.defineProperty(H,"name",{value:"ExportAsSvg"});var Y=n("P1E4"),X=function(e){function t(t,n,i,r){var a=e.call(this,n,i)||this;return a.state=t,a.dataStore=n,a.modelSubManager=i,a.router=r,a}return Object(i.e)(t,e),t.prototype.executeResult=function(t){var n=this;return e.prototype.executeResult.call(this,t).pipe(Object(m.a)((function(){n.resourceId===n.state.get("CurrentDiagram")&&n.router.navigateByUrl("/")})))},t.\u0275fac=function(e){return new(e||t)(d.pc(a.Jb),d.pc(s.b),d.pc(o.d),d.pc(g.d))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[a.Jb,s.b,o.d,g.d])],t)}(r.a);Object.defineProperty(X,"name",{value:"DeleteDiagram"});var q=n("d9KY"),K=function(e){function t(t,n,i,r,a){var o=e.call(this,t,i,r,a,n)||this;return o.state=n,o}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var t=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(l.a)((function(e){var n=t.state.get("DiagramCanvas"),i=0===t.state.get("Selected").length?e.getBounds():e.getBounds(t.state.get("Selected")),r=i.width+40,a=i.height+40;if(t.isDiagramExceededMaxClientExport(r,a))return t.fetchDiagramFromServer("jpg",2*r).pipe(Object(T.a)((function(t){return{name:e.name,blob:t}})));n.cache(i.x-20,i.y-20,r,a,2);var o=n.cacheCanvas,s=o.cloneNode(!0),c=s.getContext("2d");c.fillStyle="#FFF",c.fillRect(0,0,s.width,s.height),c.drawImage(o,0,0);var u=s.toDataURL("image/jpg",1);return n.uncache(),Object(I.a)({name:e.name,blob:u})})),Object(m.a)((function(e){t.data={content:e.blob,name:e.name+".jpg",type:"image/jpg",format:"blob"}})),Object(l.a)((function(){return e.prototype.execute.call(t)}))).subscribe({complete:function(){return t.hideExportNotification()},error:function(){t.hideExportNotification(),t.showErrorNotification()}}),Object(I.a)({})},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.Jb),d.pc(a.W),d.pc(a.kb),d.pc(R.e))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.Jb,a.W,a.kb,R.e])],t)}(V);Object.defineProperty(K,"name",{value:"ExportAsJpeg"});var J=n("fqe/"),Z=n("vobO"),Q=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Z.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("GRAPHQL_API_BASE_URL")},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return Object(k.b)()},t.prototype.prepareData=function(){var e='{\n            document(id:"'+this.data.resourceId+'"){\n            image{\n              svg\n            }\n        }}';this.data.query=e},t.\u0275fac=function(e){return new(e||t)(d.pc(J.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[J.a])],t)}(a.f);Object.defineProperty(Q,"name",{value:"FetchEmbedImageUrl"});var $=n("X0jn"),ee=n("Wpmq"),te=n("3+4Q"),ne=n("HM3f"),ie=function(e){function t(t,n,i,r,a,o,s){var c=e.call(this)||this;return c.userLocator=t,c.notifierController=n,c.translate=i,c.ll=r,c.v2d=a,c.dataStore=o,c.state=s,c}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),t.handleNotificationClick=function(e,t,n){if(e.parentId)n.findOneLatest(te.a,{id:e.parentId}).pipe(Object(m.a)((function(e){var n={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",n)}))).subscribe();else{var i={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",i)}},Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.data.comment.diagramId=this.resourceId,this.data.comment.userId=this.state.get("CurrentUser"),this.data.comment.added=Date.now(),this.data.comment.parentId?(delete this.data.comment.shapeId,delete this.data.comment.locOnDiagram,Object(k.b)()):this.data.comment.shapeId?this.ll.forCurrent(!1).getShapeOnce(this.data.comment.shapeId).pipe(Object(m.a)((function(t){if(t.type!==$.u.Connector){if(!e.data.comment.locOnDiagram){var n=t.bounds;e.data.comment.locOnDiagram={x:n.centerX,y:n.centerY}}var i=t.getPositionOnShape(e.data.comment.locOnDiagram,5);e.data.comment.locOnShape=i}else delete e.data.comment.shapeId}))):Object(k.b)()},t.prototype.execute=function(){var e=this;return Object(O.a)(this.dataStore.insert(te.a,this.data.comment),Object(S.a)((function(){return e.dataStore.findOne(te.a,e.data.comment).pipe(Object(c.a)(1),Object(m.a)((function(t){if(!t.parentId){var n=e.state.get("CommentThreadData").parentSelector,i={visible:!e.data.close,threadId:t.id,parentSelector:n,comments:[t]};e.state.set("CommentThreadData",i)}})))})))},t.prototype.executeResult=function(){var e=Object(i.a)(Object(i.a)({},this.resultData.comment),{diagramId:this.resourceId,comitted:!0});return Object(ne.b)(this.handleNotification(),this.dataStore.insert(te.a,e))},t.prototype.revert=function(){return this.dataStore.remove(te.a,{id:this.data.comment.id,diagramId:this.resourceId})},t.prototype.handleNotification=function(){var e=this;return this.state.get("CurrentUser")!==this.resultData.comment.userId&&this.state.get("CurrentDiagram")===this.resultData.comment.diagramId?this.userLocator.getUserInfo(this.resultData.comment.userId).pipe(Object(c.a)(1),Object(m.a)((function(t){var i=e.resultData.comment.parentId?"REPLIED":"ADDED",r={inputs:{heading:t.firstName+" "+e.translate.instant("NOTIFICATIONS.COMMENT."+i),description:e.resultData.comment.comment,user:t,notificationAction:{action:n.handleNotificationClick,args:[e.resultData.comment,e.state,e.dataStore]},autoDismiss:!0,dismissAfter:3e3}};e.notifierController.show(z.b.COMMENT_ADDED,a.i,a.jb.Success,r)}))):Object(I.a)({})},t.\u0275fac=function(e){return new(e||t)(d.pc(w.x),d.pc(a.kb),d.pc(R.e),d.pc(L.a),d.pc(ee.a),d.pc(s.b),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[w.x,a.kb,R.e,L.a,ee.a,s.b,a.Jb])],t)}(y.b);Object.defineProperty(ie,"name",{value:"AddComment"});var re=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{commentId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.findOne(te.a,{id:this.data.commentId,diagramId:this.resourceId}).pipe(Object(c.a)(1),Object(m.a)((function(t){return e.previousData.comment=t.comment})))},t.prototype.execute=function(){return this.dataStore.update(te.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{deleted:(new Date).getTime(),comitted:!1},$unset:{comment:""}})},t.prototype.executeResult=function(e){return this.dataStore.update(te.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{deleted:e.comment.deleted,comitted:!0},$unset:{comment:""}})},t.prototype.revert=function(){return this.dataStore.update(te.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.previousData.comment},$unset:{deleted:""}})},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(re,"name",{value:"DeleteComment"});var ae=n("zd2y"),oe=function(e){function t(t,n){var i=e.call(this)||this;return i.resourceId=t,i.datastore=n,i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"subscription",{get:function(){return"Comment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelType",{get:function(){return te.a},enumerable:!1,configurable:!0}),t.prototype.getLatestSyncedTime=function(){var e={id:this.resourceId};return this.datastore.findOneLatest(te.a,e,{sort:{lastUpdated:-1}}).pipe(Object(T.a)((function(e){return e?e.lastUpdated:null})))},t}(o.b),se=function(e){function t(t,n){var i=e.call(this)||this;return i.commentSub=t,i.datastore=n,i}return Object(i.e)(t,e),t.prototype.execute=function(){var e=new oe(this.resourceId,this.datastore);return this.commentSub.start(e),!0},t.\u0275fac=function(e){return new(e||t)(d.pc(ae.a),d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[ae.a,s.b])],t)}(a.b);Object.defineProperty(se,"name",{value:"StartDiagramCommentSubscription"});var ce=function(e){function t(t,n,i,r,a){var o=e.call(this)||this;return o.userLocator=t,o.notifierController=n,o.translate=i,o.state=r,o.dataStore=a,o}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t,"dataDefinition",{get:function(){return{commentId:!0,userId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),t.handleNotificationClick=function(e,t,n){if(e.parentId)n.findOneLatest(te.a,{id:e.parentId}).pipe(Object(m.a)((function(e){var n={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",n)}))).subscribe();else{var i={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",i)}},Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.dataStore.update(te.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{resolved:(new Date).getTime(),resolvedBy:this.data.userId,comitted:!1}})},t.prototype.executeResult=function(e){return Object(ne.b)(this.handleNotification(),this.dataStore.update(te.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{resolved:this.resultData.comment.resolved,resolvedBy:this.resultData.comment.resolvedBy,comitted:!0}}))},t.prototype.revert=function(){return this.dataStore.update(te.a,{id:this.data.commentId,diagramId:this.resourceId},{$unset:{resolved:"",resolvedBy:""}})},t.prototype.handleNotification=function(){var e=this;return this.state.get("CurrentUser")!==this.resultData.comment.resolvedBy&&this.state.get("CurrentDiagram")===this.resultData.comment.diagramId?this.userLocator.getUserInfo(this.resultData.comment.resolvedBy).pipe(Object(c.a)(1),Object(m.a)((function(t){var i={inputs:{heading:t.firstName,description:e.translate.instant("NOTIFICATIONS.COMMENT.RESOLVED"),user:t,notificationAction:{action:n.handleNotificationClick,args:[e.resultData.comment,e.state,e.dataStore]},autoDismiss:!0,dismissAfter:3e3}};e.notifierController.show(z.b.COMMENT_RESOLVED,a.i,a.jb.Success,i)}))):Object(I.a)({})},t.\u0275fac=function(e){return new(e||t)(d.pc(w.x),d.pc(a.kb),d.pc(R.e),d.pc(a.Jb),d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[w.x,a.kb,R.e,a.Jb,s.b])],t)}(y.b);Object.defineProperty(ce,"name",{value:"ResolveComment"});var ue=function(e){function t(t,n){var i=e.call(this)||this;return i.ll=t,i.resources=n,i}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IHttpCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("PDF_EXPORT_URL")},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;this.data={};var t=this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW),n=this.createDiagramSVGView(t);return t.getDiagramOnce().pipe(Object(l.a)((function(t){return Object(O.a)(Object(S.a)((function(){return n.populateDiagram()})),Object(S.a)((function(){return n.toSvgFrames().pipe(Object(c.a)(1),Object(m.a)((function(n){e.data.data=n,e.data.id=t.id})))})))})))},t.prototype.execute=function(){return Object(k.b)()},t.prototype.createDiagramSVGView=function(e){return new U.n(Object(I.a)(e),this.resources)},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.W))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.W])],t)}(a.f);Object.defineProperty(ue,"name",{value:"GeneratePdf"});var le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(m.a)((function(t){e.data={content:e.data.data,name:t.name+".pdf",type:"application/pdf",format:"blob"}})))},t.\u0275fac=function(e){return pe(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)()],t)}(V),pe=d.nc(le);Object.defineProperty(le,"name",{value:"ExportAsPdf"});var de=n("EmgI"),he=function(e){function t(t,n,i,r,a,o){var s=e.call(this,t,n,i,r,a)||this;return s.csvExporter=o,s}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.csvExporter.exportCSV().pipe(Object(m.a)((function(t){return e.data={content:t.data,name:t.name+".csv",type:"text/csv",format:"file"}})))},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.W),d.pc(a.kb),d.pc(R.e),d.pc(a.Jb),d.pc(de.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.W,a.kb,R.e,a.Jb,de.a])],t)}(V);Object.defineProperty(he,"name",{value:"ExportAsCsv"});var fe=n("4t+C"),ge=function(e){function t(t,n,i,r,a,o){var s=e.call(this,t,n,i,r,a)||this;return s.ecoreExporter=o,s}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.ecoreExporter.exportEcoreModel(!0).pipe(Object(m.a)((function(t){return e.data={content:t.data,name:t.name+".xmi",type:"application/xml",format:"file"}})))},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.W),d.pc(a.kb),d.pc(R.e),d.pc(a.Jb),d.pc(fe.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.W,a.kb,R.e,a.Jb,fe.a])],t)}(V);Object.defineProperty(ge,"name",{value:"ExportAsXmi"});var me=function(e){function t(t,n,i,r,a,o){var s=e.call(this,t,n,i,r,a)||this;return s.ecoreExporter=o,s}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{type:!0}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var t=this;return this.fetchCodeFromServer(this.data.type).pipe(Object(m.a)((function(e){return t.data={content:e.blob,name:e.name+".zip",type:"application/zip",format:"blob"}})),Object(l.a)((function(){return e.prototype.execute.call(t)})))},t.prototype.fetchCodeFromServer=function(e){return this.ecoreExporter.exportEcoreModel(!0).pipe(Object(l.a)((function(t){return Object(F.a)(fetch(a.m.get("CODE_GENERATOR_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,model:t.data})})).pipe(Object(l.a)((function(e){return Object(F.a)(e.blob())})),Object(T.a)((function(e){return{blob:e,name:t.name}})))})))},t.\u0275fac=function(e){return new(e||t)(d.pc(L.a),d.pc(a.W),d.pc(a.kb),d.pc(R.e),d.pc(a.Jb),d.pc(fe.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[L.a,a.W,a.kb,R.e,a.Jb,fe.a])],t)}(V);Object.defineProperty(me,"name",{value:"ExportAsCode"});var ve=function(e){function t(t){var n=e.call(this)||this;return n.state=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{state:!1,keyboardEvent:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return{MouseControlState:this.data.state}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){if(!this.data)return!1;if(this.data.keyboardEvent&&"keydown"===this.data.keyboardEvent.type){var e=this.state.get("CommentThreadData");this.data.keyboardEvent.keyCode===$.k.C&&e&&!e.visible?(this.data={state:b.b.Comment},a.Lb.track("right.comment.add.click",{value1Type:"trigger",value1:"c"})):this.data.keyboardEvent.keyCode===$.k.Space?this.data={state:b.b.Pan}:this.data.keyboardEvent.keyCode===$.k.A&&(this.data={state:b.b.Pen})}else this.data.keyboardEvent&&"keyup"===this.data.keyboardEvent.type&&(this.data={state:b.b.Normal});return!!this.data.state},t.\u0275fac=function(e){return new(e||t)(d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[a.Jb])],t)}(a.b);Object.defineProperty(ve,"name",{value:"ChangeMouseControlState"});var be=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{commentIds:!0,userId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.dataStore.update(te.a,{id:{$in:this.data.commentIds},diagramId:this.resourceId},{$set:{seenBy:[this.data.userId],comitted:!1}})},t.prototype.executeResult=function(){return this.dataStore.update(te.a,{id:{$in:this.data.commentIds},diagramId:this.resourceId},{$set:{comitted:!0}})},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(be,"name",{value:"MarkCommentSeen"});var ye=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{commentId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.findOne(te.a,{id:this.data.commentId,diagramId:this.resourceId}).pipe(Object(c.a)(1),Object(m.a)((function(t){return e.previousData.comment=t.comment})))},t.prototype.execute=function(){return this.dataStore.update(te.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.data.comment,edited:(new Date).getTime(),comitted:!1}})},t.prototype.executeResult=function(e){return this.dataStore.update(te.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{comment:e.comment.comment,edited:e.comment.edited,comitted:!0}})},t.prototype.revert=function(){return this.dataStore.update(te.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.previousData.comment},$unset:{edited:""}})},t.\u0275fac=function(e){return new(e||t)(d.pc(s.b))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(ye,"name",{value:"EditComment"});var Ce=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Z.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("GRAPHQL_API_BASE_URL")},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return Object(k.b)()},t.prototype.prepareData=function(){var e='mutation{\n            documentResetEmbed(id:"'+this.data.resourceId+'")\n        }';this.data.query=e},t.\u0275fac=function(e){return new(e||t)(d.pc(J.a))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[J.a])],t)}(a.f);Object.defineProperty(Ce,"name",{value:"ResetEmbedImageToken"});var Oe=function(e){function t(t,n){var i=e.call(this)||this;return i.auth=t,i.state=n,i}return Object(i.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Z.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("GRAPHQL_API_BASE_URL")},enumerable:!1,configurable:!0}),t.prototype.execute=function(){if(this.state.get("CurrentUser"))return k.a},t.prototype.prepareData=function(){this.data={};this.data.query="{\n            user{\n              organization{\n                subscription{\n                    cancelScheduled,\n                    cancelled,\n                    extendSubOfferStart,\n                    extendSubOfferExpired,\n                    extendSubOfferClaim,\n                    paymentFailedCount,\n                    planId,\n                }\n              }\n            }\n        }"},t.\u0275fac=function(e){return new(e||t)(d.pc(J.a),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[J.a,a.Jb])],t)}(a.f);Object.defineProperty(Oe,"name",{value:"FetchUserSubscriptionData"});var xe=n("zuHe"),Se=n("icO7"),ke=n("NNJu"),we=n("dKf+"),Ee=n("5Jpj"),Ie=n("3vL/"),Te=function(e){function t(t,n,i,r,a,o,s,c){var u=e.call(this,t,n,i,r,a)||this;return u.userLocator=o,u.translate=s,u.notifierController=c,u}return Object(i.e)(t,e),t.prototype.executeResult=function(){return Object(ne.b)(e.prototype.executeResult.call(this),this.handleNotification())},t.prototype.handleNotification=function(){var e=this;if(this.state.get("CurrentDiagram")===this.resourceId){if(this.state.get("CurrentUser")!==this.resultData.change.userId)return this.userLocator.getUserInfo(this.resultData.change.userId).pipe(Object(c.a)(1),Object(m.a)((function(t){var n={inputs:{description:e.translate.instant("NOTIFICATIONS.DIAGRAM.RESTORED",{username:t.firstName}),user:t,autoDismiss:!0,dismissAfter:3e3}};e.notifierController.show("DIAGRAM_RESTORED",ke.d,a.jb.Neutral,n)})));var t={inputs:{description:this.translate.instant("NOTIFICATIONS.DIAGRAM.RESTORE_SUCCESS"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("DIAGRAM_RESTORED",ke.d,a.jb.Success,t)}return Object(I.a)({})},t.\u0275fac=function(e){return new(e||t)(d.pc(Ie.a),d.pc(L.a),d.pc(we.a),d.pc(Ee.a),d.pc(a.Jb),d.pc(w.x),d.pc(R.e),d.pc(a.kb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[Ie.a,L.a,we.a,Ee.a,a.Jb,w.x,R.e,a.kb])],t)}(Se.a);Object.defineProperty(Te,"name",{value:"RestoreDocumentChange"});var _e=n("8l7v"),je=n("xATe"),Pe=n("3QsU"),Ae=function(e){function t(t){var n=e.call(this)||this;return n.state=t,n}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{scope:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return{GlobalSearch:{scope:this.data.scope,state:Pe.c.OPEN}}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.keyboardEvent&&this.data.keyboardEvent.preventDefault()},t.prototype.execute=function(){return!0},t.\u0275fac=function(e){return new(e||t)(d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[a.Jb])],t)}(a.b);Object.defineProperty(Ae,"name",{value:"OpenGlobalSearch"});var Me=function(e){function t(){return e.call(this)||this}return Object(i.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{searchQuery:!0,numberOfArticle:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IHttpCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpMethod",{get:function(){return a.yb.Get},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){var e="?query="+this.data.searchQuery+"&page=1&per_page="+this.data.numberOfArticle;return a.m.get("ZENDESK_HELP_CENTER_URL")+e},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.searchQuery=encodeURI(this.data.searchQuery)},t.prototype.execute=function(){return Object(k.b)()},t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[])],t)}(a.f);Object.defineProperty(Me,"name",{value:"GetHelpCenterArticles"});var De=n("zmc3"),Re=n("c6sW"),Le=function(e){function t(t,n){var i=e.call(this)||this;return i.resourceId=t,i.datastore=n,i}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"subscription",{get:function(){return"Task"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelType",{get:function(){return r.K},enumerable:!1,configurable:!0}),t.prototype.getLatestSyncedTime=function(){var e={id:this.resourceId};return this.datastore.findOneLatest(r.K,e,{sort:{lastUpdated:-1}}).pipe(Object(T.a)((function(e){return e?e.lastUpdated:null})))},t.prototype.isActive=function(){return this.status.value.subStatus===o.f.started||this.status.value.subStatus===o.f.created},t}(o.b),Fe=function(e){function t(t,n,i){var r=e.call(this)||this;return r.taskSub=t,r.datastore=n,r.state=i,r}var n;return Object(i.e)(t,e),n=t,t.prototype.execute=function(){if(!n.currentSub||!n.currentSub.isActive()){var e=new Le(this.state.get("CurrentUser"),this.datastore);this.taskSub.start(e),n.currentSub=e}return!0},t.\u0275fac=function(e){return new(e||t)(d.pc(Re.a),d.pc(s.b),d.pc(a.Jb))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(a.v)(),Object(i.g)("design:paramtypes",[Re.a,s.b,a.Jb])],t)}(a.b);Object.defineProperty(Fe,"name",{value:"StartTaskSubscription"});var Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.register=function(e){e.mapSequence(t.startDiagramSubscription).add(v),e.mapSequence(t.startDiagramSubscriptionAndDeps).add(v).add(C,{alter:function(e){return!0}}).add(D).add(se).add(h).add(xe.a,{transform:function(e){return e.resultData[4]}}).add(Fe),e.mapSequence(t.startEDataSubscription).add(xe.a),e.mapSequence(t.startTaskSubscription).add(Fe),e.mapSequence(t.addDiagramCollaborators).add(E),e.map(t.removeDiagramCollaborators).add(j),e.map(t.changeDiagramCollaborators).add(_),e.map(t.transferDiagramOwnership).add(P),e.map(t.createDiagramSnapshot).add(A),e.mapSequence(t.changeDiagramPrivacy).add(M),e.mapSequence(t.exportAsPng).add(G),e.mapSequence(t.exportAsJpeg).add(K),e.mapSequence(t.fetchUserSubscriptionData).add(Oe),e.mapSequence(t.fetchEmbedImageUrl).add(Q),e.mapSequence(t.resetEmbedImageToken).add(Ce),e.mapSequence(t.exportAsSvg).add(H),e.mapSequence(t.exportAsPdf).add(ue).add(le),e.mapSequence(t.exportAsCsv).add(he),e.mapSequence(t.exportAsXmi).add(ge),e.mapSequence(t.exportAsCode).add(me),e.map(t.deleteDiagram).add(X),e.map(t.selectShapes).add(q.a),e.map(t.addComment).add(ie),e.map(t.editComment).add(ye),e.map(t.deleteComment).add(re),e.map(t.resolveComment).add(ce),e.map(t.markCommentSeen).add(be),e.map(t.addTask).add(De.a),e.map(t.changeMouseControlState).add(ve),e.map(t.documentChange).add(Se.a),e.map(t.resetSnapshotPreview).add(_e.a),e.map(t.restoreSnapshot).add(je.a).add(Te),e.map(t.openGlobalSearch).add(Ae),e.map(t.helpCenterArticles).add(Me)},t.startDiagramSubscription=new t("StartDiagramSubscription"),t.startDiagramSubscriptionAndDeps=new t("StartDiagramSubscriptionAndDeps"),t.addDiagramCollaborators=new t("AddDiagramCollaborators"),t.changeDiagramCollaborators=new t("ChangeDiagramCollaborators"),t.removeDiagramCollaborators=new t("RemoveDiagramCollaborators"),t.transferDiagramOwnership=new t("TransferDiagramOwnership"),t.createDiagramSnapshot=new t("CreateDiagramSnapshot"),t.changeDiagramPrivacy=new t("ChangeDiagramPrivacy"),t.startEDataSubscription=new t("StartEDataSubscription"),t.startTaskSubscription=new t("StartTaskSubscription"),t.fetchUserSubscriptionData=new t("FetchUserSubscriptionData"),t.exportAsPng=new t("ExportAsPng"),t.fetchEmbedImageUrl=new t("FetchEmbedImageUrl"),t.resetEmbedImageToken=new t("ResetEmbedImageToken"),t.exportAsJpeg=new t("ExportAsJpeg"),t.exportAsSvg=new t("ExportAsSvg"),t.exportAsPdf=new t("ExportAsPdf"),t.exportAsCsv=new t("ExportAsCsv"),t.exportAsXmi=new t("ExportAsXmi"),t.exportAsCode=new t("ExportAsCode"),t.selectShapes=new t("SelectShapes"),t.addComment=new t("AddComment"),t.editComment=new t("EditComment"),t.deleteComment=new t("DeleteComment"),t.resolveComment=new t("ResolveComment"),t.markCommentSeen=new t("MarkCommentSeen"),t.addTask=new t("AddTask"),t.deleteDiagram=new Y.a("DeleteDiagram"),t.documentChange=new t("DocumentChange"),t.resetSnapshotPreview=new t("ResetSnapshotPreview"),t.restoreSnapshot=new t("RestoreDiagramSnapshot"),t.changeMouseControlState=new t("ChangeMouseControlState"),t.openGlobalSearch=new t("OpenGlobalSearch"),t.helpCenterArticles=new t("HelpCenterArticles"),t}(a.d)},qonV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),r=n("5xGT"),a=n("nsO7"),o=n("EM62"),s=function(){function e(e,t){this.state=e,this.postMessage=t,this._fetch=window.fetch.bind(window),this._document=window.document,this.frames={}}return e.prototype.initialize=function(){this.state.initialize("EnabledPlugins",[]),this.manifests={},this.identifiers={},this.prepareContainerElement()},e.prototype.load=function(e){return Object(i.c)(this,void 0,void 0,(function(){var t,n;return Object(i.f)(this,(function(i){switch(i.label){case 0:if(!this.isAllowedPlugin(e))throw new Error("Plugin error: please add "+e+" to the whitelist");return this.frames[e]?[2]:[4,this.loadPluginManifest(e)];case 1:return t=i.sent(),this.manifests[e]=t,this.identifiers[e]||(n=this.getRandomIdentifier(),this.identifiers[e]=n),[4,this.loadPluginMainIframe(t)];case 2:return i.sent(),this.state.set("EnabledPlugins",this.state.get("EnabledPlugins").concat([t])),[2]}}))}))},e.prototype.unload=function(e){return Object(i.c)(this,void 0,void 0,(function(){var t,n;return Object(i.f)(this,(function(i){return r.db.debug("Unload plugin",e),(t=this.manifests[e])&&(delete this.frames[e],n=Object(a.remove)(this.state.get("EnabledPlugins"),(function(e){return e.url===t._url})),this.state.set("EnabledPlugins",n)),[2]}))}))},e.prototype.burrowMainIframe=function(e){return this.frames[e]},e.prototype.returnMainIframe=function(e,t){this.container.appendChild(t)},e.prototype.recieveMessages=function(e){if(!this.manifests[e])throw new Error("Plugin error: invalid message subscription request for "+e);var t=this.getHostFromUrl(e);return this.postMessage.recv([t],this.identifiers[e])},e.prototype.sendMessage=function(e,t,n){var i=this.frames[n];i&&this.postMessage.sendToWindow(e,t,i.contentWindow)},e.prototype.prepareContainerElement=function(){this._document.getElementById(e.CONTAINER_ELEMENT_ID)||(this.container=document.createElement("div"),this.container.id=e.CONTAINER_ELEMENT_ID,this._document.body.appendChild(this.container))},e.prototype.isAllowedPlugin=function(e){return!0},e.prototype.loadPluginManifest=function(e){return Object(i.c)(this,void 0,void 0,(function(){var t;return Object(i.f)(this,(function(n){switch(n.label){case 0:return[4,this.fetchPluginManifestFromCache(e)];case 1:return(t=n.sent())?[3,5]:[4,this.fetchPluginManifestFromSource(e)];case 2:return t=n.sent(),[4,this.checkPluginManifest(e,t)];case 3:return n.sent(),[4,this.cachePluginManifest(e,t)];case 4:n.sent(),n.label=5;case 5:return[2,t]}}))}))},e.prototype.fetchPluginManifestFromCache=function(e){return Object(i.c)(this,void 0,void 0,(function(){return Object(i.f)(this,(function(t){return[2,this.manifests[e]]}))}))},e.prototype.fetchPluginManifestFromSource=function(e){return Object(i.c)(this,void 0,void 0,(function(){var t;return Object(i.f)(this,(function(n){switch(n.label){case 0:return[4,this._fetch(e)];case 1:return[4,n.sent().json()];case 2:return(t=n.sent())._url=e,[2,t]}}))}))},e.prototype.checkPluginManifest=function(e,t){return Object(i.c)(this,void 0,void 0,(function(){return Object(i.f)(this,(function(e){return[2]}))}))},e.prototype.cachePluginManifest=function(e,t){return Object(i.c)(this,void 0,void 0,(function(){return Object(i.f)(this,(function(e){return[2]}))}))},e.prototype.loadPluginMainIframe=function(e){var t=this;return new Promise((function(n,i){var a=document.createElement("iframe");a.setAttribute("allow","camera; microphone"),a.onload=function(i){t.sendMessage(r.qb.pluginInit,{id:t.identifiers[e._url]},e._url),n()},a.src=e.main,t.container.appendChild(a),t.frames[e._url]=a}))},e.prototype.getHostFromUrl=function(e){var t=e.match(/^https?\:\/\/[^\/?#]+/i);if(t&&t.length>-1)return t[0]},e.prototype.getRandomIdentifier=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e.CONTAINER_ELEMENT_ID="creately-plugin-container",e.\u0275fac=function(t){return new(t||e)(o.pc(r.Jb),o.pc(r.pb))},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},s9Xn:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("D57K"),r=n("hSRu"),a=n("YtkY"),o=n("/AMt"),s=n("EM62"),c=n("pYIu"),u=n("tG6W"),l=n("2kYt"),p=n("LA+B");function d(e,t){if(1&e&&s.gc(0,"toolbar-grid-dropdown-item",6),2&e){var n=t.$implicit;s.Cc("item",n)}}function h(e,t){1&e&&s.gc(0,"div",7)}function f(e,t){if(1&e&&s.gc(0,"toolbar-grid-dropdown-item",6),2&e){var n=t.$implicit;s.Cc("item",n)}}function g(e,t){if(1&e&&(s.lc(0,"div",8),s.ad(1,f,1,1,"toolbar-grid-dropdown-item",3),s.kc()),2&e){var n=t.$implicit;s.Sb(1),s.Cc("ngForOf",n)}}var m=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(a.a)((function(e){var t=[];return e.value.forEach((function(e){return t.push(e.filter((function(e){return e&&!e.custom})))})),t})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customItems",{get:function(){return this._data.pipe(Object(a.a)((function(e){var t=[];return e.value.forEach((function(e){return t.push(e.filter((function(e){return e&&e.custom})))})),Object(o.a)(t)})))},enumerable:!1,configurable:!0}),t.prototype.setData=function(e){e.value&&e.value[0]&&!Array.isArray(e.value[0])&&(e.value=[e.value]),this.data=e},t.\u0275fac=function(e){return b(e||t)},t.\u0275cmp=s.Zb({type:t,selectors:[["toolbar-grid-dropdown"]],features:[s.Pb],decls:10,vars:15,consts:[[1,"toolbar-grid-dropdown-container",3,"settings"],["dd",""],["ddbutton","",3,"items","props"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","","class","separator",4,"ngIf"],["dditem","","class","toolbar-grid-row-container",4,"ngFor","ngForOf"],["dditem","",3,"item"],["dditem","",1,"separator"],["dditem","",1,"toolbar-grid-row-container"]],template:function(e,t){if(1&e&&(s.lc(0,"abs-dropdown",0,1),s.gc(2,"toolbar-dropdown-button",2),s.yc(3,"async"),s.ad(4,d,1,1,"toolbar-grid-dropdown-item",3),s.yc(5,"async"),s.ad(6,h,1,0,"div",4),s.yc(7,"async"),s.ad(8,g,2,1,"div",5),s.yc(9,"async"),s.kc()),2&e){var n,i;s.Cc("settings",s.Gc(14,m)),s.Sb(2),s.Cc("items",null==(n=s.zc(3,6,t._data))?null:n.value)("props",t.props),s.Sb(2),s.Cc("ngForOf",s.zc(5,8,t.customItems)),s.Sb(2),s.Cc("ngIf",(null==(i=s.zc(7,10,t.customItems))?null:i.length)>0),s.Sb(2),s.Cc("ngForOf",s.zc(9,12,t.defaultItems))}},directives:[c.a,u.a,l.s,l.t,p.a],pipes:[l.b],styles:[".separator[_ngcontent-%COMP%]{height:1px;width:100%;background:#e7e6e6;margin:3px 0 7px}.toolbar-grid-dropdown-container[_ngcontent-%COMP%]{display:inline-block;width:35px;margin-left:10px}.toolbar-grid-dropdown-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:120px}.toolbar-grid-row-container[_ngcontent-%COMP%]:not(:last-child){display:flex;margin-bottom:2px}toolbar-grid-dropdown-item[_ngcontent-%COMP%]{display:inline-grid}toolbar-grid-dropdown-item[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}"],changeDetection:0}),t}(r.a),b=s.nc(v)},sKtG:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("hSRu"),a=n("EM62"),o=n("pYIu"),s=n("Gjo4"),c=n("2kYt"),u=n("Mb5J");function l(e,t){if(1&e&&a.gc(0,"toolbar-list-dropdown-item",7),2&e){var n=t.$implicit;a.Cc("item",n)}}function p(e,t){if(1&e&&a.gc(0,"toolbar-list-dropdown-item",8),2&e){var n=t.$implicit;a.Cc("item",n)}}var d=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-input-list-dropdown"]],features:[a.Pb],decls:11,vars:14,consts:[[1,"ftb-item","ftb-item-text"],[3,"settings"],["dd",""],["ddbutton","",3,"validation","items","inputChanged"],["class","fx-margin-bottom-10 custom-option","dditem","",3,"item",4,"ngFor","ngForOf"],["dditem",""],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10","custom-option",3,"item"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.lc(0,"div",0),a.lc(1,"abs-dropdown",1,2),a.lc(3,"toolbar-dropdown-input",3),a.tc("inputChanged",(function(e){return t.change.next(e)})),a.yc(4,"async"),a.yc(5,"async"),a.kc(),a.ad(6,l,1,1,"toolbar-list-dropdown-item",4),a.yc(7,"async"),a.gc(8,"hr",5),a.ad(9,p,1,1,"toolbar-list-dropdown-item",6),a.yc(10,"async"),a.kc(),a.kc()),2&e){var n,i;a.Sb(1),a.Cc("settings",a.Gc(13,d)),a.Sb(2),a.Cc("validation",null==(n=a.zc(4,5,t._data))?null:n.validation)("items",null==(i=a.zc(5,7,t._data))?null:i.value),a.Sb(3),a.Cc("ngForOf",a.zc(7,9,t.customItems)),a.Sb(3),a.Cc("ngForOf",a.zc(10,11,t.defaultItems))}},directives:[o.a,s.a,c.s,u.a],pipes:[c.b],styles:[".custom-option[_ngcontent-%COMP%]  li:last-child{border-bottom:1px solid #dcdcdc}"],changeDetection:0}),t}(r.a),f=a.nc(h)},sXdR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("nsO7"),r=n("+kfY");t.lodashThrottle=function(e,t){return void 0===t&&(t={leading:!0,trailing:!0}),function(n){return r.Observable.create((function(r){var a=i.throttle(r.next.bind(r),e,t),o=n.subscribe((function(e){return a(e)}),(function(e){return r.next(e)}),(function(){return r.complete()}));return function(){o.unsubscribe()}}))}}},tG6W:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("D57K"),r=n("EM62"),a=n("NNJu"),o=n("jHi0"),s=n("2kYt"),c=n("g5Ym");function u(e,t){if(1&e&&(r.lc(0,"div",4),r.gc(1,"static-image",5),r.gc(2,"img",6),r.kc()),2&e){var n=r.xc();r.Sb(1),r.Cc("enableHover",!0)("type",n.buttonIcon.type)("value",n.buttonIcon.value)("width",n.buttonIcon.width||35)("height",n.buttonIcon.height||20)}}function l(e,t){if(1&e&&(r.lc(0,"div",7),r.lc(1,"span",8),r.cd(2),r.kc(),r.gc(3,"img",9),r.kc()),2&e){var n=r.xc();r.Sb(2),r.ed(" ",n.buttonLabel," ")}}var p=function(e){function t(t){return e.call(this,t)||this}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"tooltipValue",{get:function(){return this.props?this.props.tooltip:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonIcon",{get:function(){return this.item?this.item.buttonIcon:{type:"svg",value:this.props?this.props.icon:void 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonLabel",{get:function(){return this.item?this.item.buttonLabel:this.props.label?this.props.label:void 0},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(r.fc(r.r))},t.\u0275cmp=r.Zb({type:t,selectors:[["toolbar-dropdown-button"]],inputs:{props:"props"},features:[r.Rb([{provide:a.j,useExisting:Object(r.lb)((function(){return t}))}]),r.Pb],decls:5,vars:4,consts:[["tooltip","","placement","top",1,"toolbar-dd-button-container",3,"deactivated"],["class","toolbar-dd-button-icon",4,"ngIf"],["class","toolbar-dd-button-text nu-dropdown-container",4,"ngIf"],[1,"tooltip-content"],[1,"toolbar-dd-button-icon"],[3,"enableHover","type","value","width","height"],["width","8","src","./assets/images/decoratives/triangle.svg",1,"toolbar-dd-button-arrow"],[1,"toolbar-dd-button-text","nu-dropdown-container"],[1,"toolbar-dd-button-text-inner","fx-ellipsis"],["src","./assets/icon-hovers/arrow-down-extra-small-thin.svg",1,"nu-dropdown-arrow"]],template:function(e,t){1&e&&(r.lc(0,"a",0),r.ad(1,u,3,5,"div",1),r.ad(2,l,4,1,"div",2),r.lc(3,"span",3),r.cd(4),r.kc(),r.kc()),2&e&&(r.Cc("deactivated",!t.tooltipValue),r.Sb(1),r.Cc("ngIf",t.buttonIcon),r.Sb(1),r.Cc("ngIf",!t.buttonIcon),r.Sb(2),r.dd(t.tooltipValue))},directives:[o.a,s.t,c.a],styles:[".toolbar-dd-button-icon[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative}.toolbar-dd-button-icon[_ngcontent-%COMP%]  .static-image-container{height:45px}.toolbar-dd-button-icon[_ngcontent-%COMP%]  .nu-icon{margin-left:-5px;margin-top:-3px}.toolbar-dd-button-text[_ngcontent-%COMP%]{min-width:55px}.toolbar-dd-button-text[_ngcontent-%COMP%]   .nu-dropdown-arrow[_ngcontent-%COMP%]{transform:translate(4px,7px);top:-6px}.toolbar-dd-button-container[_ngcontent-%COMP%]{display:inline-block}.toolbar-dd-button-container[_ngcontent-%COMP%]   .nu-dropdown-container[_ngcontent-%COMP%]{height:32px}.toolbar-dd-button-text-inner[_ngcontent-%COMP%]{padding:8px 25px 8px 10px;background-color:#fff;border-radius:4px;height:32px;display:flex;align-items:center}.toolbar-dd-button-arrow[_ngcontent-%COMP%]{position:absolute;right:-5px;bottom:10px}"],changeDetection:0}),t}(a.j)},tLVu:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("D57K"),r=n("Q9lH"),a=n("c7W3"),o=n("NNJu"),s=n("5xGT"),c=n("EM62"),u=n("s2Ay"),l=["richTextArea"],p=function(e){function t(t,n,i,r,a){var o=e.call(this,n,i)||this;return o.translate=t,o.componentFactoryResolver=n,o.injector=i,o.commandService=r,o.state=a,o.textStyles={color:"#7E7E7E"},o.subs=[],o}return Object(i.e)(t,e),t.prototype.onTabUpdate=function(){this.clearSubs(),this.manage()},t.prototype.ngAfterViewInit=function(){this.manage()},t.prototype.manage=function(){this.richTextEditorUIC||this.createTextArea();var e=[],t=[];this.shapeAttachments.forEach((function(n){n&&n.type.includes("image")?e.push(n):n&&t.push(n)})),this.insertData(e,t)},t.prototype.ngOnDestroy=function(){this.clearSubs()},t.prototype.insertData=function(e,t){var n=this;this.richTextEditorUIC.quill.enable(!0),this.richTextEditorUIC.quill.setText("");var i=0;if(t.length>0){var r=this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.FILES_SECTION_TITLE");this.richTextEditorUIC.quill.insertText(i,r,this.textStyles,"api"),i=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(i,"\n",this.textStyles,"api"),i=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.setSelection({index:i,length:0},"api"),t.forEach((function(e){return n.richTextEditorUIC.insertToEditor(e)})),i=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(i,"\n",this.textStyles,"api"),i=this.richTextEditorUIC.quill.getLength()}if(e.length>0){r=this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.IMAGES_SECTION_TITLE");this.richTextEditorUIC.quill.insertText(i,r,this.textStyles,"api"),i=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(i,"\n",this.textStyles,"api"),i=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.setSelection({index:i,length:0},"api"),e.forEach((function(e){return n.richTextEditorUIC.insertToEditor(e,!0)}))}this.richTextEditorUIC.quill.enable(!1)},t.prototype.removeAttachment=function(e){var t,n=this.state.get("Selected")[0];this.commandService.dispatch(a.a.changeAttachments,((t={})[e.id]={action:"remove",shapeId:n},t))},t.prototype.createTextArea=function(){var e=this,t=this.makeComponent(r.a);this.item=t,this.richTextEditorUIC=t.instance,this.richTextEditorUIC.enableUploadOptions=!1,this.richTextEditorUIC.blotOptionCallbacks={remove:function(t){return e.removeAttachment(t)}},this.insert(this.richTextArea,t),t.changeDetectorRef.detectChanges()},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.fc(u.e),c.fc(c.m),c.fc(c.C),c.fc(s.B),c.fc(s.Jb))},t.\u0275cmp=c.Zb({type:t,selectors:[["attachments-renderer"]],viewQuery:function(e,t){var n;(1&e&&c.hd(l,!0,c.hb),2&e)&&(c.Lc(n=c.uc())&&(t.richTextArea=n.first))},inputs:{shapeAttachments:"shapeAttachments"},features:[c.Pb],decls:2,vars:0,consts:[["richTextArea",""]],template:function(e,t){1&e&&c.gc(0,"div",null,0)},styles:["[_nghost-%COMP%]  .ql-editor{min-height:500px}"],changeDetection:0}),t}(o.l)},tqrN:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("D57K"),r=n("nsO7"),a=n("wx9+"),o=n("5xGT"),s=n("YtkY"),c=n("Ohay"),u=n("TLy2"),l=n("J+dc"),p=n("mWib"),d=n("QoSw"),h=n("HM3f"),f=n("ROBh"),g=n("g6G6"),m=n("EM62"),v=function(){function e(e,t,n){this.state=e,this.viewport=t,this.ll=n,this.debounce=100,this.rtree=new o.rb}return e.prototype.initialize=function(){var e=this;return Object(h.b)(this.state.changes("SnapToGuides"),this.state.changes("ShowGuides")).pipe(Object(s.a)((function(e){var t=Object(i.h)(e,2),n=t[0],r=t[1];return n||r})),Object(c.a)(),Object(u.a)((function(t){return t?e.manageNodes():(e.rtree.clear(),Object(f.a)({}))})))},e.prototype.search=function(e,t,n,i,r){var a=this;void 0===r&&(r=.5);try{return this.rtree.search(e-r,t+r,n-r,i+r).filter((function(e){return!a.state.get("Selected").includes(e.shapeId)})).map((function(e){for(var t in e)"number"==typeof e[t]&&(e[t]=parseFloat(e[t].toFixed(5)));return e}))}catch(o){return[]}},e.prototype.manageNodes=function(){var e=this;return Object(g.a)(this.getPanZoomChanges(this.debounce).pipe(Object(u.a)((function(){return e.viewport.getShapeModels().pipe(Object(l.a)(1),Object(s.a)((function(t){return e.rtree.clear(),e.rtree.load(Object(r.flatten)(Object(r.values)(t).filter((function(t){return!e.state.get("Selected").includes(t.id)})).map((function(e){return e.getAlignmentNodes()}))))})))}))),this.ll.forCurrent(!1).getDiagramChanges().pipe(Object(u.a)((function(){return e.viewport.getShapeModels().pipe(Object(l.a)(1),Object(s.a)((function(t){return e.rtree.clear(),e.rtree.load(Object(r.flatten)(Object(r.values)(t).filter((function(t){return!e.state.get("Selected").includes(t)})).map((function(e){return e.getAlignmentNodes()}))))})))}))))},e.prototype.getPanZoomChanges=function(e){return Object(g.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(p.a)(e))},e.\u0275fac=function(t){return new(t||e)(m.pc(o.Jb),m.pc(a.a),m.pc(d.a))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},u7ZA:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("D57K"),r=n("YtkY"),a=n("TLy2"),o=n("J+dc"),s=n("xVbo"),c=n("5xGT"),u=n("ROBh"),l=n("SBw3"),p=n("xcrX"),d=n("QoSw"),h=n("EM62"),f=function(){function e(e,t,n,i){this.state=e,this.ll=t,this.libraryLoader=n,this.featureList=i}return e.prototype.getFeatureData=function(e,t){return this.getSwitchData(e).pipe(Object(r.a)((function(t){return{id:e,value:t.value}})))},e.prototype.transformProperties=function(e,t){var n=this.state.get("Selected");return t.icon="",t.updateToolbarIcon=!0,1!==n.length?Object(u.a)(t):this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(n[0])})),Object(a.a)((function(e){return e&&e.switchable&&(t.icon=e.switchable.shapeIcon),Object(u.a)(t)})),Object(o.a)(1))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return 1!==t.length?Object(u.a)(!1):this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(t[0])})),Object(a.a)((function(e){return Object(u.a)(!!e.switchable)})),Object(o.a)(1))},e.prototype.getApplyData=function(e,t){return this.getSwitchData(e).pipe(Object(r.a)((function(e){return Object(i.a)(Object(i.a)({},e),{id:t.id})})))},e.prototype.getSwitchDefaults=function(e){return e?this.libraryLoader.getLibrary(e).pipe(Object(r.a)((function(e){return e.switchDefaults?e.switchDefaults:{shapes:[],defaultPreferences:{}}}))):Object(u.a)({shapes:[],defaultPreferences:{}})},e.prototype.getSwitchData=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(t.state.get("Selected")[0])})),Object(s.a)((function(e){return!!e&&!!e.switchable})),Object(a.a)((function(e){var n=Object(i.a)({},e.switchable);return e.data&&e.data.switchShape&&(n=Object(i.a)(Object(i.a)({},e.data.switchShape),e.switchable)),t.getSwitchDefaults(n.defaultLibrary).pipe(Object(r.a)((function(t){return[e,n,t]})))})),Object(o.a)(1),Object(r.a)((function(e){var t=e[0],n=e[1],i=e[2],r=n.shapes?n.shapes:[],a=n.value?n.value:[];n.defaultLibrary?(i.shapes.forEach((function(e){e.defId===t.defId||r.find((function(t){return t.defId===e.defId}))||(r.push(e),a.push(e.data))})),n.defaultPreferences=i.defaultPreferences,n.shapes=r,n.value=a):n.defaultPreferences={};for(var o=[],s=0;s<n.value.length;s+=3)o.push([n.value[s],n.value[s+1],n.value[s+2]]);return n.value=o,n})),Object(o.a)(1))},e.\u0275fac=function(t){return new(t||e)(h.pc(c.Jb),h.pc(d.a),h.pc(p.a),h.pc(l.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},"u80+":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("D57K"),r=n("5xGT"),a=n("YtkY"),o=n("Ohay"),s=n("TLy2"),c=n("hX56"),u=n("nsO7"),l=n("4y1S"),p=n("HM3f"),d=n("6Oco"),h=n("Jzy8"),f=n("nWGD"),g=n("EM62"),m=function(){function e(e,t,n,i){this.locator=e,this.state=t,this.dataStore=n,this.userLocator=i}return e.prototype.getCollabs=function(e){var t=this;return this.locator.getTask(e).pipe(Object(a.a)((function(e){return e.roles||[]})),Object(o.a)(u.isEqual),Object(s.a)((function(e){var n=e.map((function(e){return t.userLocator.getUserInfo(e.userId).pipe(Object(a.a)((function(t){return Object.assign(new h.c(e.userId),t)})))}));return n.length>0?p.b.apply(void 0,Object(i.j)(n)):Object(d.b)()})),Object(a.a)((function(e){return t.sortCollabs(e)})))},e.prototype.sortCollabs=function(e){return e.slice().sort((function(e,t){return e.roleSortOrderWithoutOnline-t.roleSortOrderWithoutOnline}))},e.\u0275fac=function(t){return new(t||e)(g.pc(f.a),g.pc(r.Jb),g.pc(c.b),g.pc(l.x))},e.\u0275prov=g.bc({token:e,factory:e.\u0275fac}),e}()},uDTp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("D57K"),r=n("5xGT"),a=n("EM62"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.e)(t,e),Object.defineProperty(t,"configKey",{get:function(){return"APP_MODE"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ifMode",{set:function(e){if(Array.isArray(e))this.values=e;else{if("string"!=typeof e)throw new Error("The [ifMode] directive requires a string or string array");this.values=[e]}},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){-1!==this.values.indexOf(r.m.get(t.configKey))?this.showElement():this.hideElement()},t.\u0275fac=function(e){return s(e||t)},t.\u0275dir=a.ac({type:t,selectors:[["","ifMode",""]],inputs:{ifMode:"ifMode"},features:[a.Pb]}),t}(r.q),s=a.nc(o)},ujvC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("SBw3"),r=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(r.a)({value:t.data,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(r.a)({styles:{size:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.pc(i.a))},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},vRBZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("NNJu"),r=n("C05f"),a=n("EM62"),o=n("jHi0"),s=n("s2Ay"),c=n("2kYt");function u(e,t){1&e&&a.gc(0,"div",4)}var l=function(){function e(e){this.element=e,this.height=33,this.marginBottom=15,this.showIndicator=new r.a(!1)}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),e.prototype.setIndicator=function(e){this.showIndicator.next(e)},e.prototype.toggleZoom=function(e){void 0===e&&(e=!1);var t={transform:"scale(0,0)"},n={transform:"scale(1,1)"},r=t,a=n;!0===e&&(r=n,a=t);var o=new i.e({from:r,to:a,transitionProperty:"transform",duration:300,easing:"ease-in-out"});return o.element=this.element.nativeElement.firstElementChild,o},e.\u0275fac=function(t){return new(t||e)(a.fc(a.r))},e.\u0275cmp=a.Zb({type:e,selectors:[["sidebar-button"]],decls:7,vars:9,consts:[["tooltip","","placement","left"],[1,"nu-icon","light-nv-blue"],["translate","",1,"tooltip-content"],["class","cti-new-comment-indicator",4,"ngIf"],[1,"cti-new-comment-indicator"]],template:function(e,t){1&e&&(a.lc(0,"button",0),a.wc(),a.lc(1,"svg",1),a.gc(2,"use"),a.kc(),a.vc(),a.lc(3,"span",2),a.cd(4),a.kc(),a.ad(5,u,1,0,"div",3),a.yc(6,"async"),a.kc()),2&e&&(a.Vb("sidebar-button nu-btn-med nu-btn-icon nu-ic-",t.icon,""),a.Tb("data-testid",t.id+"-button"),a.Sb(2),a.Tb("href",t.iconHref,null,"xlink"),a.Sb(2),a.dd(t.tooltip),a.Sb(1),a.Cc("ngIf",a.zc(6,7,t.showIndicator)))},directives:[o.a,s.a,c.t],pipes:[c.b],styles:[".nu-ic-properties[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:2px}.cti-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;position:absolute;right:8px;top:7px;border-radius:100%;outline:2px solid #fff}"],changeDetection:0}),e}()},vdZD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("D57K"),r=n("NNJu"),a=n("EM62"),o=n("/g0E"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.isSelected=!1,n}return Object(i.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.fc(a.r))},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-shape-style-dropdown-item"]],inputs:{isSelected:"isSelected"},features:[a.Rb([{provide:r.k,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:3,vars:3,consts:[["tabindex","-1",1,"tss-dd-item-container","abs-dropdown-item","fx-center-all"],["dditem","",1,"style-tile-container"],["svgType","circle",3,"data"]],template:function(e,t){1&e&&(a.lc(0,"li",0),a.lc(1,"div",1),a.gc(2,"styling-tile",2),a.kc(),a.kc()),2&e&&(a.Sb(2),a.Xb("selected",t.isSelected),a.Cc("data",t.item))},directives:[o.a],styles:[".tss-dd-item-container[_ngcontent-%COMP%]  .selected .style-tile-wrapper{border:1px solid #ffc648}"],changeDetection:0}),t}(r.k)},vz8n:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n("i9EC"),t),r(n("fxI9"),t),r(n("Aq/p"),t),r(n("kgBD"),t),r(n("QuwQ"),t)},w5Uk:function(e,t,n){"use strict";var i=n("D57K"),r=n("5xGT");(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.e)(t,e)})(r.Jb),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.e)(t,e)}(r.Jb),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.e)(t,e)}(r.Jb)},wOpJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("D57K"),r=n("5xGT"),a=n("h1tj"),o=n("C0rp"),s=function(e){function t(t){var n=e.call(this)||this;return n._doc=o.document(t),n}return Object(i.e)(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this._text=e},enumerable:!1,configurable:!0}),t.prototype.setDefaultStyles=function(e){this._doc.setDefaultStyles(e)},t.prototype.draw=function(t,n){if(void 0===n&&(n=!1),!this._text||!this._text.length)return!0;if(e.prototype.draw.call(this,t,n))return!0;if(this._text&&this._text[0]&&this._text[0].backgroundColor){var i=this._doc.frame.actualWidth()+5,r=this._doc.frame.actualHeight()+2.5,a=this.getBounds().x-2.5,o=this.getBounds().y;t.beginPath(),t.moveTo(a+5,o),t.arcTo(a+i,o,a+i,o+r,5),t.arcTo(a+i,o+r,a,o+r,5),t.arcTo(a,o+r,a,o,5),t.arcTo(a,o,a+i,o,5),t.closePath(),t.fillStyle=this._text[0].backgroundColor,t.fill()}return this._doc.load(this._text),this._doc.width(this.lineWidth),this._doc.draw(t),!0},t.prototype.getBounds=function(){return new a.Rectangle(0,0,this._doc.frame.actualWidth(),this._doc.frame.actualHeight())},t}(a.DisplayObject),c=n("X0jn"),u=function(e){function t(t){var n=e.call(this,c.c)||this;return n.cachedBounds=null,n.name=t.id,n.hitArea=new a.Shape,n.update(t),n}return Object(i.e)(t,e),t.prototype.getCursor=function(e){return e.includes("editor")&&e.includes("normal")&&e.includes("selected")?{cursor:"text",tail:null,type:"css"}:{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t.prototype.updateHitArea=function(e,t){var n=r.vb.from(t),i=this.hitArea;i.graphics.clear(),i.graphics.beginFill("#000"),e.hitArea?i.graphics.drawRect(0,0,e.hitArea.width,e.hitArea.height):e.editable&&i.graphics.drawRect(n.x,n.y,this.lineWidth,n.height),i.graphics.endFill()},t.prototype.updateViewCache=function(e,n){if(this.cachedBounds&&(this.cachedBounds.width===this.lineWidth&&this.cachedBounds.height===e.height?r.hb.hasChanges(n,"texts."+e.id+".content")&&this.updateCache():(this.uncache(),this.cachedBounds=null)),!this.cachedBounds){if(!this.hasRenderableText(e.content))return;if(!this.lineWidth||!e.height)return void r.db.warning("TextView: Found text model without width/height",e);this.cache(-t.CACHE_PADDING,-t.CACHE_PADDING,this.lineWidth+2*t.CACHE_PADDING,e.height+2*t.CACHE_PADDING,t.CACHE_DENSITY),this.cachedBounds={width:this.lineWidth,height:e.height}}},t.prototype.update=function(e,t){this.hasRenderableText(e.content)?(this.text=e.content,this.lineWidth=e.width):this.hasRenderableText(e.placeholder)?(this.text=e.placeholder,this.lineWidth=e.width):(this.text=[],this.lineWidth=0)},t.prototype.destroy=function(){this.parent?this.parent.removeChild(this):r.db.error("TextView.destroy called but this.parent was null.")},t.prototype.getTextBounds=function(e,t){void 0===t&&(t=1e4);var n=document.createElement("canvas"),i=new s(c.c);return i.text=e,i.lineWidth=t,i.draw(n.getContext("2d")),i.getBounds()},t.prototype.hasRenderableText=function(e){var t,n;if(e&&e.length)try{for(var r=Object(i.k)(e),a=r.next();!a.done;a=r.next()){var o=a.value;if(o&&o.text&&o.text.trim().length>0)return!0}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!1},t.CACHE_PADDING=10,t.CACHE_DENSITY=2,t}(s)},wf7V:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ROBh"),r=n("nsO7"),a=n("EM62"),o=function(){function e(){}return e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,itemIcon:{type:"image",value:e.icon},buttonIcon:{type:"image",value:e.icon},value:e.id,shapeId:t.shapeId}})),a=Object(r.uniqBy)(n,(function(e){return e.id}));return a.find((function(e){return e.id===t.selected})).selected=!0,Object(i.a)({value:a})},e.prototype.getApplyData=function(e,t){var n={changes:{}};return n.changes[t.shapeId]={entryClass:t.value},Object(i.a)(n)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},wk5G:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var i,r=n("D57K"),a=n("h1tj");!function(e){e.interactionStart="interaction-start",e.interaction="interaction",e.interactionImmediate="interaction-immediate",e.interactionEnd="interaction-end",e.interactionCancel="interaction-cancel"}(i||(i={}));var o=function(e){function t(t,n,i,r,a){var o=e.call(this,t,!0,!0)||this;return o.type=t,o.handle=i,o.targetOver=r,o.relatedEvent=a,o.interactionName=n,o}return Object(r.e)(t,e),t}(a.Event)},wuOO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("SBw3"),r=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(r.a)({value:t.data,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(r.a)({styles:{font:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.pc(i.a))},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},"wx9+":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("D57K"),r=n("nsO7"),a=n("HM3f"),o=n("5xGT"),s=n("YtkY"),c=n("TLy2"),u=n("J+dc"),l=n("gZOS"),p=n("w1VY"),d=n("QoSw"),h=n("EM62"),f=function(){function e(e,t,n){this.state=e,this.ll=t,this.coordinate=n}return e.prototype.getCoordinateChanges=function(){return Object(a.b)(this.state.changes("DiagramZoomLevel"),this.state.changes("DiagramPan")).pipe(Object(s.a)((function(e){var t=Object(i.h)(e,2),n=t[0];return{pan:t[1],zoom:n}})))},e.prototype.getShapeModel=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(c.a)((function(t){return t.getShapeModel(e)})),Object(c.a)((function(n){return t.convertShape(e)})))},e.prototype.getShapeModels=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(c.a)((function(e){return e.getDiagramModel()})),Object(c.a)((function(n){var i=n.shapes;return e&&(i=Object(r.pickBy)(n.shapes,(function(t,n){return e.includes(n)}))),t.convertShapes(i)})))},e.prototype.getShapeOnce=function(e){return this.convertShape(e).pipe(Object(u.a)(1))},e.prototype.getShapeChanges=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(c.a)((function(t){return t.getShapeChanges(e)})),Object(c.a)((function(e){return t.convertShape(e.model.id).pipe(Object(s.a)((function(t){return{id:e.id,model:t,modifier:e.modifier}})))})))},e.prototype.convertShape=function(e){var t=this;return this.getCoordinateChanges().pipe(Object(c.a)((function(){return t.ll.forCurrentObserver(!0)})),Object(c.a)((function(t){return t.getShapeOnce(e)})),Object(s.a)((function(e){if(e){var n=l.Sakota.create(e);return n=t.coordinate.shape(n)}return null})))},e.prototype.convertShapes=function(e){var t=this;return this.getCoordinateChanges().pipe(Object(s.a)((function(){return Object(r.mapValues)(e,(function(e){var n=l.Sakota.create(e);return n=t.coordinate.shape(n)}))})))},e.\u0275fac=function(t){return new(t||e)(h.pc(o.Jb),h.pc(d.a),h.pc(p.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},x77O:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("D57K"),r=n("gZOS"),a=n("5vYS"),o=n("5xGT"),s=n("X0jn"),c=n("19Zn"),u=n("nsO7"),l=n("ROBh"),p=n("HM3f"),d=n("P4Xx"),h=n("TLy2"),f=n("YtkY"),g=n("J+dc"),m=n("8j5Y"),v=n("QoSw"),b=n("diDk"),y=n("+1jB"),C=n("EM62"),O=function(){function e(e,t,n,i){this.modelChangeUtils=e,this.state=t,this.ll=n,this.ell=i}return e.prototype.buildChanges=function(e,t){var n=this;return!e.eData||Object(u.isEmpty)(e.eData)?Object(l.a)([]):this.getAllChangeModels(e.eData).pipe(Object(h.a)((function(r){var o=e.__sakota__.getChanges(),s=Object(c.K)(o),u=[];return s.diagram&&n.edataDefsChanged(o,e,r),s.shapes&&Object.keys(s.shapes).forEach((function(c){var l=e.shapes[c],p=s.shapes[c];l instanceof a.a?u.push.apply(u,Object(i.j)(n.updateConnectorLink(e,r,l,p,!0))):o&&o.$set&&o.$set["shapes."+c]||n.shapeChanged(n.state.get("CurrentDiagram"),l,e,r,p,t.shapes[c])})),u.length>0?Object(p.b)(u).pipe(Object(f.a)((function(){return r}))):Object(l.a)(r)})))},e.prototype.edataDefsChanged=function(e,t,n){var i,r,a,o;if(e.$set){var s,c={};for(var l in e.$set){var p=/dataDefs\.([^\.]+)\.([^\.]+)\./g;p.lastIndex=0;var d,h=p.exec(l);if(h){if((d=t.getEdataByDataSetId(h[1]))&&!Object(u.isEmpty)(d)){var f=d[s=Object.keys(d)[0]],g=t.dataDefs[h[1]][h[2]];c[f]?Object.assign(c[f],((i={})[h[2]]=g,i)):c[f]=((r={})[h[2]]=g,r)}}else if(h=(p=/dataDefs\.([^\.]+)\.([^\.]+)/g).exec(l))if((d=t.getEdataByDataSetId(h[1]))&&!Object(u.isEmpty)(d)){f=d[s=Object.keys(d)[0]],g=t.dataDefs[h[1]][h[2]];c[f]?Object.assign(c[f],((a={})[h[2]]=g,a)):c[f]=((o={})[h[2]]=g,o)}}if(!Object(u.isEmpty)(c)){var m=n.find((function(e){return e.id===s}));m&&this.modelChangeUtils.updateEdataDefs(m,c)}}},e.prototype.getAllChangeModels=function(e){var t=this,n=e.map((function(e){return t.ell.getEData(e).pipe(Object(h.a)((function(e){return e.getEDataModelOnce().pipe(Object(f.a)((function(e){return r.Sakota.create(Object(u.cloneDeep)(e))})))})),Object(g.a)(1))}));return Object(p.b)(n)},e.prototype.shapeChanged=function(e,t,n,i,r,a){if((t||a).eDataId){if((r.$set&&r.$set.containerId||r.$unset&&r.$unset.containerId)&&(this.shapeContainerChanged(t,n,i,r),Object.keys(r.$set).filter((function(e){return/data/.test(e)})).length<1))return;var o=!0;r.$unset&&!0===r.$unset&&(o=!1);var s=function(n){var r=i.find((function(e){return e.id===n}));r&&o&&t?c.modelChangeUtils.updateEntityData(r,{entityId:t.eData[n],shape:t,diagramId:e}):r&&c.modelChangeUtils.addShapeToEntity(r,{entityId:a.eData[n],shapeId:a.id,shapeDefId:a.defId,diagramId:e,isDelete:!0})},c=this;for(var u in(t||a).eData)s(u)}if(t&&t.eDataRef){var l=function(n){var r=i.find((function(e){return e.id===n}));if(r){var a=t.eDataRef[n];p.modelChangeUtils.updateEDateRefChanges(r,{entityIds:a,sourceDiagId:e,sourceShapeId:t.id})}},p=this;for(var d in t.eDataRef)l(d)}},e.prototype.shapeContainerChanged=function(e,t,n,i){var r,a=!1;if(i.$set&&i.$set.containerId&&!i.$set.id?(r=i.$set.containerId,a=!0):i.$unset&&i.$unset.containerId&&(r=e.containerOld,a=!1),r){var o=t.shapes[r];this.updateContainerLink(o,n,e,a)}},e.prototype.updateContainerLink=function(e,t,n,i){if(e.eData&&n.eData){var r=function(r){var o=n.eData[r],c=function(c){var u=e.eData[c],l=t.find((function(e){return e.id===c}));l&&a.modelChangeUtils.updateEntityLinks(l,{fromEntityId:u,toEDataId:r,toEntityId:o,type:s.g.CHILD,isSet:i,handshake:n.containerHandshake,shapeId:e.id,identifier:a.getIdentifier(e)});var p=t.find((function(e){return e.id===r}));p&&a.modelChangeUtils.updateEntityLinks(p,{fromEntityId:o,toEDataId:c,toEntityId:u,type:s.g.PARENT,isSet:i,handshake:n.containerHandshake,shapeId:n.id,identifier:a.getIdentifier(n)})};for(var u in e.eData)c(u)},a=this;for(var o in n.eData)r(o)}},e.prototype.getIdentifier=function(e){if(e.primaryTextModel&&e.primaryTextModel.plainText)return e.primaryTextModel.plainText},e.prototype.updateConnectorLink=function(e,t,n,i,r,a,u,l){var p=this;void 0===l&&(l=!1);var d=[];if(!l&&i.$set&&0===Object.keys(i.$set).filter((function(e){return/defId/.test(e)})).length)return d;if(a||(n&&n.fromEndpoint&&n.fromEndpoint.shape?a=n.fromEndpoint.shape:o.db.error("malformed link update request",n.id)),u||(n&&n.toEndpoint&&n.toEndpoint.shape?u=n.toEndpoint.shape:o.db.error("malformed link update request",n.id)),n.handshake&&!i.$unset||(r=!1),a&&u&&a.eData&&u.eData){var h=function(i){var o=a.eData[i],c=function(c){var l=u.eData[c],h=f.getMatchingHandshake(i,o,c,l,n.handshake).pipe(Object(g.a)(1),Object(m.a)((function(a){var d=t.find((function(e){return e.id===i}));d&&p.modelChangeUtils.updateEntityLinks(d,{diagramId:e.id,fromEntityId:o,toEDataId:c,toEntityId:l,type:s.g.CONNECTOR_BI,isSet:r,handshake:a,connectorId:n.id,connectorDefId:n.defId,shapeId:u.id,identifier:p.getIdentifier(u)})}))),v=f.getMatchingHandshake(i,o,c,l,n.handshake).pipe(Object(g.a)(1),Object(m.a)((function(u){var d=t.find((function(e){return e.id===c}));d&&p.modelChangeUtils.updateEntityLinks(d,{diagramId:e.id,fromEntityId:l,toEDataId:i,toEntityId:o,type:s.g.CONNECTOR_BI,isSet:r,handshake:u,connectorId:n.id,connectorDefId:n.defId,shapeId:a.id,identifier:p.getIdentifier(a)})})));d.push(h),d.push(v)};for(var l in u.eData)c(l)},f=this;for(var v in a.eData)h(v)}else{var b=a.eData?a:u;if(!b||!b.eData)return d;var y=a.eData?u:a;if(!y)return d;var C=function(i){var a=b.eData[i],o=O.getIdentifier(y);O.modelChangeUtils.addEDataRefToShape(e,{shapeId:y,eDataId:i,entityId:a,isSet:r});var u=t.find((function(e){return e.id===i}));u&&O.modelChangeUtils.updateEntityLinks(u,{diagramId:e.id,fromEntityId:a,type:s.g.REFERENCE,isSet:r,handshake:c.o.handshake[0],connectorId:n.id,connectorDefId:n.defId,shapeId:y.id,shapeDefId:y.defId,identifier:o})},O=this;for(var v in b.eData)C(v)}return d},e.prototype.getMatchingHandshake=function(e,t,n,i,r){return Object(d.a)({fromEntity:this.ell.getEntityOnce(e,t),toEntity:this.ell.getEntityOnce(n,i)}).pipe(Object(h.a)((function(e){if(e.fromEntity&&e.toEntity&&r){var t=e.fromEntity.getDef().ports,n=e.toEntity.getDef().ports;if(t&&n)for(var i=Object.keys(t),a=Object.keys(n),o=0;o<r.length;o++)if(i.indexOf(r[o])>-1&&a.indexOf(r[o])>-1)return Object(l.a)(r[o])}return Object(l.a)(void 0)})))},e.\u0275fac=function(t){return new(t||e)(C.pc(y.a),C.pc(o.Jb),C.pc(v.a),C.pc(b.a))},e.\u0275prov=C.bc({token:e,factory:e.\u0275fac}),e}()},xATe:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("D57K"),r=n("5xGT"),a=n("8j5Y"),o=n("dKf+"),s=n("1JG0"),c=n("16Fa"),u=n("d0OC"),l=n("EM62"),p=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.ds=t,r.dhs=n,r.dds=i,r}var n;return Object(i.e)(t,e),n=t,Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0,lastChangeId:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareProxy=function(){return this.ds.getRawChangeModel(this.resourceId,this.eventData.eventId)},t.prototype.prepareData=function(){var e=this,t=this.data,i=t.diagramId,r=t.lastChangeId;return this.dhs.fetchRawSnapshot(i,r).pipe(Object(a.a)((function(t){e.dds.applyChanges(e.changeModel,t),n.ignoreFields.forEach((function(t){return e.changeModel.__sakota__.reset(t)}))})))},t.prototype.execute=function(){return this.resultData={skipChangeBinders:!0},!0},t.ignoreFields=["lastChangeId","lastUpdated","updatedBy","id","project","collabs","privacy","createdTime","thumbnailUrl"],t.\u0275fac=function(e){return new(e||t)(l.pc(o.a),l.pc(c.a),l.pc(s.a))},t.\u0275prov=l.bc({token:t,factory:t.\u0275fac}),t=n=Object(i.d)([Object(r.v)(),Object(i.g)("design:paramtypes",[o.a,c.a,s.a])],t)}(u.a);Object.defineProperty(p,"name",{value:"RestoreDiagramSnapshot"})},xcrX:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("ROBh"),r=n("P4Xx"),a=n("TLy2"),o=n("YtkY"),s=n("5xGT"),c=n("0jHB"),u=n("D57K"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.e)(t,e),Object.defineProperty(t.prototype,"libId",{get:function(){return this.id},set:function(e){this.id=e},enumerable:!1,configurable:!0}),t}(n("iim9").a),p=n("kgIF"),d=n("EM62"),h=function(){function e(e,t,n){this.resourceLoader=e,this.defLocator=t,this.connectorRegistry=n}return Object.defineProperty(e.prototype,"libraryLocation",{get:function(){return s.m.get("RESOURCE_LOCATION")+s.m.get("LIBRARY_RESOURCE_BASE")},enumerable:!1,configurable:!0}),e.prototype.load=function(e,t,n){var r=this;return this.getLibrary(e).pipe(Object(a.a)((function(e){return e.defs.length?r.loadShapeDefs(e,t,n).pipe(Object(o.a)((function(t){return e.defs=t,e}))):Object(i.a)(e)})))},e.prototype.loadShapeDefs=function(e,t,n){var i=this,a=(n<0?e.defs.slice(t,e.defs.length):e.defs.slice(t,n)).map((function(e){return i.loadDefinition(e)}));return Object(r.a)(a).pipe(Object(o.a)((function(e){return e.forEach((function(e){return i.registerConnector(e)})),e})))},e.prototype.getLibrary=function(e){var t=this,n=this.getLibDefLocation(e);return this.resourceLoader.load(n).pipe(Object(a.a)((function(e){return t.createLibrary(e)})))},e.prototype.getLibDefLocation=function(e){return this.libraryLocation+e+".json"},e.prototype.createLibrary=function(e){return s.L.create(e).structure(l).build()},e.prototype.loadDefinition=function(e){var t=e.split("."),n=parseInt(t.pop(),10),i=t.join(".");return this.defLocator.getDefinition(i,n)},e.prototype.registerConnector=function(e){"connector"===e.type&&this.connectorRegistry.register(e)},e.\u0275fac=function(t){return new(t||e)(d.pc(s.zb),d.pc(c.a),d.pc(p.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},xpZS:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("nsO7"),r=n("6Oco"),a=n("C0rp"),o=n("X0jn"),s=n("EM62"),c=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextBoundsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges();if(t.$set)return this.shapeScaleXChange(e,t),this.shapeTextsValueChange(e,t),Object(r.b)()},e.prototype.getTextBounds=function(e,t){return void 0===t&&(t=1e4),a.bounds(e,t,o.c)},e.prototype.shapeScaleXChange=function(t,n){var r=this,a=function(n){e.regexScaleX.lastIndex=0;var a=e.regexScaleX.exec(n);if(!a)return"continue";var c=a[1],u=t.shapes[c];if(!u.texts||!s.isBasic(u))return"continue";Object(i.forEach)(u.texts,(function(e,t){var n=u.texts[t];if(!n)return!1;var i=n.content;!n.plainText&&n.placeholderPlainText&&(i=n.placeholder);var a=r.getTextBounds(i),s=Math.abs(u.defaultBounds.width*u.scaleX),c=n.hitArea?n.hitArea.width-2*o.z:s-2*o.z;if(n.wordWrap&&a.width>c){var l=r.getTextBounds(i,c);n.width=l.width,n.height=l.height}else n.width=a.width,n.height=a.height}))},s=this;for(var c in n.$set)a(c)},e.prototype.isBasic=function(e){return Object.keys(e.texts).length<=1},e.prototype.shapeTextsValueChange=function(t,n){var i=this,r=new Set;for(var a in n.$set){e.regexTexts.lastIndex=0;var s=e.regexTexts.exec(a);if(s){var c=s[1],u=s[2];r.add(c+"-"+u)}}r.forEach((function(e){var n=e.split("-"),r=n[0],a=n[1],s=t.shapes[r],c=s.texts[a],u=c.content;!c.plainText&&c.placeholderPlainText&&(u=c.placeholder);var l=i.getTextBounds(u);c.minWidth=l.minWidth;var p=2*o.z,d=Math.abs(c.hitArea?c.hitArea.width:s.width)-p;if(!s.autoResizeWidth&&c.wordWrap&&l.width>d){var h=i.getTextBounds(u,d);c.width=h.width,c.height=h.height}else c.width=l.width,c.height=l.height}))},e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexTexts=/shapes\.([^\.]+)\.texts\.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},y0dT:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("Cupj");var i=n("ZTXN"),r=n("C05f"),a=n("ROBh"),o=n("X0jn"),s=n("19Zn"),c=n("EM62"),u=n("2kYt"),l=n("Wrqg"),p=n("jHi0");function d(e,t){if(1&e&&(c.wc(),c.lc(0,"svg",4),c.gc(1,"use"),c.kc()),2&e){var n=c.xc();c.Sb(1),c.Tb("href",n.iconHref,null,"xlink")}}var h=function(e){return{content:e}},f=function(){return["Tab","Enter"]};function g(e,t){if(1&e){var n=c.mc();c.lc(0,"div",5),c.lc(1,"text-input",6),c.tc("submit",(function(e){return c.Oc(n),c.xc().handleSubmit(e,0)})),c.kc(),c.lc(2,"text-input",6),c.tc("submit",(function(e){return c.Oc(n),c.xc().handleSubmit(e,1)})),c.kc(),c.lc(3,"text-input",6),c.tc("submit",(function(e){return c.Oc(n),c.xc().handleSubmit(e,2)})),c.kc(),c.lc(4,"text-input",6),c.tc("submit",(function(e){return c.Oc(n),c.xc().handleSubmit(e,3)})),c.kc(),c.kc()}if(2&e){var i=t.ngIf,r=c.xc();c.Sb(1),c.Cc("value",i[0])("type",r.number)("tooltip",c.Hc(24,h,r._data.typeParams.tooltips[0]))("invalidInput",r.invalidInput[0])("submitOnCode",c.Gc(26,f))("submitOnBlur",!0),c.Sb(1),c.Cc("value",i[1])("type",r.number)("tooltip",c.Hc(27,h,r._data.typeParams.tooltips[1]))("invalidInput",r.invalidInput[1])("submitOnCode",c.Gc(29,f))("submitOnBlur",!0),c.Sb(1),c.Cc("value",i[2])("type",r.number)("tooltip",c.Hc(30,h,r._data.typeParams.tooltips[2]))("invalidInput",r.invalidInput[2])("submitOnCode",c.Gc(32,f))("submitOnBlur",!0),c.Sb(1),c.Cc("value",i[3])("type",r.number)("tooltip",c.Hc(33,h,r._data.typeParams.tooltips[3]))("invalidInput",r.invalidInput[3])("submitOnCode",c.Gc(35,f))("submitOnBlur",!0)}}var m=function(){function e(){this.invalidInput=new Array(4).fill(!1),this._change=new i.a,this.valueSource=new r.a([]),this.dataSource=new r.a([])}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this._data.icon},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.invalidInput.fill(!1),this._data=e,this.dataSource.next(e.value),this.dataItem||(this.dataItem=s.j.instance.create({type:o.d.NUMBER,validationRules:e.validationRules}))},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.valueSource.next(this._data.value)},e.prototype.applyAnimated=function(){return this.apply(),Object(a.a)({})},e.prototype.handleSubmit=function(e,t){if(isNaN(e)||this.dataItem&&null!==this.dataItem.validate(e))this.invalidInput[t]=!0;else{var n=this._data.value;n[t]=+e,this._change.next({value:n})}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Zb({type:e,selectors:[["sidebar-multi-input"]],decls:7,vars:5,consts:[[1,"fx-margin-bottom-10"],[1,"sidebar-multi-input-label"],["class","nu-icon nu-icon-med",4,"ngIf"],["class","sidebar-multi-input-controls",4,"ngIf"],[1,"nu-icon","nu-icon-med"],[1,"sidebar-multi-input-controls"],[3,"value","type","tooltip","invalidInput","submitOnCode","submitOnBlur","submit"]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"div",1),c.ad(2,d,2,1,"svg",2),c.lc(3,"label"),c.cd(4),c.kc(),c.kc(),c.ad(5,g,5,36,"div",3),c.yc(6,"async"),c.kc()),2&e&&(c.Sb(2),c.Cc("ngIf",t._data.icon),c.Sb(2),c.dd(t._data.label),c.Sb(1),c.Cc("ngIf",c.zc(6,3,t.dataSource)))},directives:[u.t,l.a,p.a],pipes:[u.b],styles:[".sidebar-multi-input-label[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar-multi-input-label[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.sidebar-multi-input-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.sidebar-multi-input-controls[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]{flex:1;margin-right:2px}"],changeDetection:0}),e}()},yH5A:function(e,t,n){var i,r;r=function(e){var t=["N","E","A","D"];function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function i(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function r(e,t,n){r.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function c(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e}function u(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function p(e){var t=0,n=u(e);if("array"===n)return e.forEach((function(e){t+=p(e)})),t+l("[type: array, hash: "+t+"]");if("object"===n){for(var i in e)if(e.hasOwnProperty(i)){var r="[ type: object, key: "+i+", value hash: "+p(e[i])+"]";t+=l(r)}return t}return t+l("[ type: "+n+" ; value: "+e+"]")}function d(e,t,n,i,c,l,h,f){n=n||[],h=h||[];var g=(c=c||[]).slice(0);if(null!=l){if(i){if("function"==typeof i&&i(g,l))return;if("object"==typeof i){if(i.prefilter&&i.prefilter(g,l))return;if(i.normalize){var m=i.normalize(g,l,e,t);m&&(e=m[0],t=m[1])}}}g.push(l)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var v,b,y,C,O=typeof e,x=typeof t,S="undefined"!==O||h&&h.length>0&&h[h.length-1].lhs&&Object.getOwnPropertyDescriptor(h[h.length-1].lhs,l),k="undefined"!==x||h&&h.length>0&&h[h.length-1].rhs&&Object.getOwnPropertyDescriptor(h[h.length-1].rhs,l);if(!S&&k)n.push(new a(g,t));else if(!k&&S)n.push(new o(g,e));else if(u(e)!==u(t))n.push(new r(g,e,t));else if("date"===u(e)&&e-t!=0)n.push(new r(g,e,t));else if("object"===O&&null!==e&&null!==t){for(v=h.length-1;v>-1;--v)if(h[v].lhs===e){C=!0;break}if(C)e!==t&&n.push(new r(g,e,t));else{if(h.push({lhs:e,rhs:t}),Array.isArray(e)){for(f&&(e.sort((function(e,t){return p(e)-p(t)})),t.sort((function(e,t){return p(e)-p(t)}))),v=t.length-1,b=e.length-1;v>b;)n.push(new s(g,v,new a(void 0,t[v--])));for(;b>v;)n.push(new s(g,b,new o(void 0,e[b--])));for(;v>=0;--v)d(e[v],t[v],n,i,g,v,h,f)}else{var w=Object.keys(e),E=Object.keys(t);for(v=0;v<w.length;++v)y=w[v],(C=E.indexOf(y))>=0?(d(e[y],t[y],n,i,g,y,h,f),E[C]=null):d(e[y],void 0,n,i,g,y,h,f);for(v=0;v<E.length;++v)(y=E[v])&&d(void 0,t[y],n,i,g,y,h,f)}h.length=h.length-1}}else e!==t&&("number"===O&&isNaN(e)&&isNaN(t)||n.push(new r(g,e,t)))}function h(e,t,n,i,r){var a=[];if(d(e,t,a,i,null,null,null,r),n)for(var o=0;o<a.length;++o)n(a[o]);return a}function f(e,t,n,i,r,a,o){return d(e,t,n,i,r,a,o,!0)}function g(e,t,n,i){var r=h(e,t,i?function(e){e&&i.push(e)}:void 0,n);return i||(r.length?r:void 0)}function m(e,t,n,i){var r=h(e,t,i?function(e){e&&i.push(e)}:void 0,n,!0);return i||(r.length?r:void 0)}function v(e,t,n){if(n.path&&n.path.length){var i,r=e[t],a=n.path.length-1;for(i=0;i<a;i++)r=r[n.path[i]];switch(n.kind){case"A":v(r[n.path[i]],n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}else switch(n.kind){case"A":v(e[t],n.index,n.item);break;case"D":e=c(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function b(e,n,i){if(void 0===i&&n&&~t.indexOf(n.kind)&&(i=n),e&&i&&i.kind){for(var r=e,a=-1,o=i.path?i.path.length-1:0;++a<o;)void 0===r[i.path[a]]&&(r[i.path[a]]=void 0!==i.path[a+1]&&"number"==typeof i.path[a+1]?[]:{}),r=r[i.path[a]];switch(i.kind){case"A":i.path&&void 0===r[i.path[a]]&&(r[i.path[a]]=[]),v(i.path?r[i.path[a]]:r,i.index,i.item);break;case"D":delete r[i.path[a]];break;case"E":case"N":r[i.path[a]]=i.rhs}}}function y(e,t,n){if(n.path&&n.path.length){var i,r=e[t],a=n.path.length-1;for(i=0;i<a;i++)r=r[n.path[i]];switch(n.kind){case"A":y(r[n.path[i]],n.index,n.item);break;case"D":case"E":r[n.path[i]]=n.lhs;break;case"N":delete r[n.path[i]]}}else switch(n.kind){case"A":y(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=c(e,t)}return e}function C(e,t,n){if(e&&t&&n&&n.kind){var i,r,a=e;for(r=n.path.length-1,i=0;i<r;i++)void 0===a[n.path[i]]&&(a[n.path[i]]={}),a=a[n.path[i]];switch(n.kind){case"A":y(a[n.path[i]],n.index,n.item);break;case"D":case"E":a[n.path[i]]=n.lhs;break;case"N":delete a[n.path[i]]}}}function O(e,t,n){e&&t&&h(e,t,(function(i){n&&!n(e,t,i)||b(e,t,i)}))}return n(r,i),n(a,i),n(o,i),n(s,i),Object.defineProperties(g,{diff:{value:g,enumerable:!0},orderIndependentDiff:{value:m,enumerable:!0},observableDiff:{value:h,enumerable:!0},orderIndependentObservableDiff:{value:f,enumerable:!0},orderIndepHash:{value:p,enumerable:!0},applyDiff:{value:O,enumerable:!0},applyChange:{value:b,enumerable:!0},revertChange:{value:C,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),g.DeepDiff=g,e&&(e.DeepDiff=g),g}(this),void 0===(i=(function(){return r}).call(t,n,t,e))||(e.exports=i)},yZNT:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),r=n("nsO7"),a=n("HM3f"),o=n("YtkY"),s=n("EM62"),c=function(){function e(){this.searchProviders={shape:[],image:[],libs:[],document:[]}}return e.prototype.register=function(e){this.searchProviders[e.type].push(e)},e.prototype.search=function(e,t,n){var s=this,c=Object(r.flatten)(t.map((function(e){return s.searchProviders[e]})));return a.b.apply(void 0,Object(i.j)(c.map((function(t){return t.search(e,n)})))).pipe(Object(o.a)((function(e){return Object(r.flatten)(e)})))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},yhNa:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("Cupj");var i=n("ZTXN"),r=n("C05f"),a=n("6Oco"),o=n("EM62"),s=n("Wrqg"),c=n("2kYt"),u=function(){return["Tab","Enter"]},l=function(){function e(){this._change=new i.a,this.valueSource=new r.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.valueSource.next(this._data.value)},e.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["sidebar-input"]],decls:2,vars:11,consts:[[3,"inline","multiLined","placeholder","label","readonly","value","submitOnCode","submitOnBlur","submit"]],template:function(e,t){1&e&&(o.lc(0,"text-input",0),o.tc("submit",(function(e){return t._change.next({value:e})})),o.yc(1,"async"),o.kc()),2&e&&(o.Cc("inline","left"===t._props.labelPosition)("multiLined",!1)("label",t._props.label)("readonly",t._data.params.readOnly)("value",o.zc(1,8,t.valueSource))("submitOnCode",o.Gc(10,u))("submitOnBlur",!0),o.Tb("data-testid",t.id))},directives:[s.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e}()},z3tU:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ROBh"),r=n("5xGT"),a=n("YtkY"),o=n("8j5Y"),s=n("EM62"),c=function(){function e(e){this.loader=e}return Object.defineProperty(e.prototype,"definitionSummaryKey",{get:function(){return r.m.get("RESOURCE_LOCATION")+r.m.get("SHAPE_RESOURCE_BASE")+"def-sum.json"},enumerable:!1,configurable:!0}),e.prototype.getDefinitions=function(e){var t=this;return this.loadingObservable?this.loadingObservable.pipe(Object(a.a)((function(){return t.findMany(e)}))):Object(i.a)(this.findMany(e))},e.prototype.getDefinition=function(e){var t=this;return this.loadingObservable?this.loadingObservable.pipe(Object(a.a)((function(){return t.findOne(e)}))):Object(i.a)(this.findOne(e))},e.prototype.load=function(){var e=this;return this.loadingObservable=this.loader.forceLoad(this.definitionSummaryKey).pipe(Object(a.a)((function(t){return e.loadedDefinitionSummery=t.defs}))),this.loadingObservable.pipe(Object(o.a)({complete:function(){return e.loadingObservable=void 0}}))},e.prototype.findMany=function(e){var t=this;return e.map((function(e){return t.loadedDefinitionSummery.find((function(n){return t.getFullyQualifiedDefId(n)===e}))})).filter((function(e){return!!e}))},e.prototype.findOne=function(e){var t=this;return this.loadedDefinitionSummery.find((function(n){return e===t.getFullyQualifiedDefId(n)}))},e.prototype.getFullyQualifiedDefId=function(e){return e.defId+"."+e.version},e.\u0275fac=function(t){return new(t||e)(s.pc(r.zb))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},zFpY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("ROBh"),r=n("EM62"),a=function(){function e(){}return e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,buttonLabel:e.label,value:{defId:e.defId,version:e.version},shapeId:t.shapeId}}));return n.find((function(e){return e.id===t.selected})).selected=!0,Object(i.a)({value:n})},e.prototype.getApplyData=function(e,t){var n;return Object(i.a)({changes:(n={},n[t.shapeId]=t.value,n),updateDefinitions:!0,updateConnections:!0})},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},zd2y:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("D57K"),r=n("C5+t"),a=n("5xGT"),o=n("xnGY"),s=n("i9xl"),c=n("6Oco"),u=n("P4Xx"),l=n("J+dc"),p=n("TLy2"),d=n("EM62"),h=function(e){function t(t,n,i,r,a){var o=e.call(this,t)||this;return o.logger=t,o.messageFactory=n,o.authentication=i,o.commandService=r,o.neutrinoConnection=a,o}return Object(i.e)(t,e),t.prototype.startSubscription=function(e){var t=this;return this.logger.debug("SubscriptionService: starting subscription: "+e.resourceId),Object(s.a)((function(){return e.getLatestSyncedTime().pipe(Object(l.a)(1))})).pipe(Object(p.a)((function(n){return t.sendSubStartRequest(e,n)})),Object(p.a)((function(n){return t.handleSubStartResponse(e,n)})))},t.prototype.closeSubscription=function(e){return this.logger.debug("SubscriptionService: closing subscription: "+e.resourceId),this.sendSubEndRequest(e)},t.prototype.sendSubStartRequest=function(e,t){var n=this.messageFactory.createSubscriptionMessage("start",e.subscription,e.resourceId);return n.authToken=this.authentication.token,n.payload=t?{latestCommentTimestamp:t}:{},this.neutrinoConnection.send(n)},t.prototype.sendSubEndRequest=function(e){var t=this.messageFactory.createSubscriptionMessage("end",e.subscription,e.resourceId);return t.authToken=this.authentication.token,t.payload={},this.neutrinoConnection.send(t)},t.prototype.handleSubStartResponse=function(e,t){var n=t.ppld,i=[];if(n.comments){var r={type:e.modelType,data:{model:n.comments}};i.push(this.commandService.collab("SubStoreModels",t.rid,null,r))}return i.length?Object(u.a)(i):Object(c.b)()},t.\u0275fac=function(e){return new(e||t)(d.pc(a.db),d.pc(r.f),d.pc(r.a),d.pc(a.B),d.pc(r.g))},t.\u0275prov=d.bc({token:t,factory:t.\u0275fac}),t}(o.c)},zsv6:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("YtkY"),r=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this;void 0===t&&(t={});var r=this.featureList.getFeature(e),a=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(i.a)((function(i){if(t.params={readOnly:r.data.readOnly},"selectionAngle"===e&&1===a.length){var o=i.getShape(a[0]).angle;return t.value=Math.round(o),t}return t.value=n.getUIData(e,i),t})))},e.prototype.getApplyData=function(e,t){return Object(o.a)({})},e.prototype.getUIData=function(e,t){var n=this.state.get("Selected"),i=t.getShape(n[0]);if(!i)return"-";if(i.isConnector()){var r=i;if("connectorStartX"===e){var a=r.path[r.path.headId];return this.formatPixelValue(a.x)}if("connectorStartY"===e){a=r.path[r.path.headId];return this.formatPixelValue(a.y)}if("connectorEndX"===e){var o=r.path[r.path.tailId];return this.formatPixelValue(o.x)}if("connectorEndY"===e){o=r.path[r.path.tailId];return this.formatPixelValue(o.y)}}else{var s=t.getBounds(n);if("selectionPositionX"===e)return this.formatPixelValue(s.x);if("selectionPositionY"===e)return this.formatPixelValue(s.y);if("selectionWidth"===e)return this.formatPixelValue(s.width);if("selectionHeight"===e)return this.formatPixelValue(s.height)}},e.prototype.formatPixelValue=function(e){return Math.round(e)+"px"},e.\u0275fac=function(t){return new(t||e)(c.pc(s.a),c.pc(a.Jb),c.pc(r.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()}}]);
//# sourceMappingURL=7.27dff3be2d000fd18439.js.map